/*! For license information please see main.492bd850.js.LICENSE.txt */
!function(){var e={7757:function(e,t,n){e.exports=n(9727)},8598:function(e,t,n){var a=n(7401),r=n(3627),i=n(7320),o=n(7220),s=n(4972),l=n(2584),c=n(9638);c.alea=a,c.xor128=r,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=l,e.exports=c},7401:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var a=.02519603282416938*(e+=t.charCodeAt(n));a-=e=a>>>0,e=(a*=e)>>>0,e+=4294967296*(a-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new o(e),a=t&&t.state,r=n.next;return r.int32=function(){return 4294967296*n.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,a&&("object"==typeof a&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.alea=l}(0,e=n.nmd(e),n.amdD)},2584:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,a=t.d,r=t.a;return e=e<<25^e>>>7^n,n=n-a|0,a=a<<24^a>>>8^r,r=r-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-a|0,t.d=a<<16^n>>>16^r,t.a=r-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var a=0;a<n.length+20;a++)t.b^=0|n.charCodeAt(a),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.tychei=l}(0,e=n.nmd(e),n.amdD)},3627:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var a=0;a<n.length+64;a++)t.x^=0|n.charCodeAt(a),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xor128=l}(0,e=n.nmd(e),n.amdD)},4972:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this;t.next=function(){var e,n,a=t.w,r=t.X,i=t.i;return t.w=a=a+1640531527|0,n=r[i+34&127],e=r[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=r[i]=n^e,t.i=i,n+(a^a>>>16)|0},function(e,t){var n,a,r,i,o,s=[],l=128;for(t===(0|t)?(a=t,t=null):(t+="\0",a=0,l=Math.max(l,t.length)),r=0,i=-32;i<l;++i)t&&(a^=t.charCodeAt((i+32)%t.length)),0===i&&(o=a),a^=a<<10,a^=a>>>15,a^=a<<4,a^=a>>>13,i>=0&&(o=o+1640531527|0,r=0==(n=s[127&i]^=a+o)?r+1:0);for(r>=128&&(s[127&(t&&t.length||0)]=-1),r=127,i=512;i>0;--i)a=s[r+34&127],n=s[r=r+1&127],a^=a<<13,n^=n<<17,a^=a>>>15,n^=n>>>12,s[r]=a^n;e.w=o,e.X=s,e.i=r}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&(a.X&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xor4096=l}(0,e=n.nmd(e),n.amdD)},7220:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this;t.next=function(){var e,n,a=t.x,r=t.i;return e=a[r],n=(e^=e>>>7)^e<<24,n^=(e=a[r+1&7])^e>>>10,n^=(e=a[r+3&7])^e>>>3,n^=(e=a[r+4&7])^e<<7,e=a[r+7&7],n^=(e^=e<<13)^e<<9,a[r]=n,t.i=r+1&7,n},function(e,t){var n,a=[];if(t===(0|t))a[0]=t;else for(t=""+t,n=0;n<t.length;++n)a[7&n]=a[7&n]<<15^t.charCodeAt(n)+a[n+1&7]<<13;for(;a.length<8;)a.push(0);for(n=0;n<8&&0===a[n];++n);for(8==n?a[7]=-1:a[n],e.x=a,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&(a.x&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xorshift7=l}(0,e=n.nmd(e),n.amdD)},7320:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var a=0;a<n.length+64;a++)t.x^=0|n.charCodeAt(a),a==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xorwow=l}(0,e=n.nmd(e),n.amdD)},9638:function(e,t,n){var a;!function(r,i){var o,s=this,l=256,c=i.pow(l,6),u=i.pow(2,52),h=2*u,d=255;function f(e,t,n){var a=[],d=m(v((t=1==t?{entropy:!0}:t||{}).entropy?[e,x(r)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(l):(e=new Uint8Array(l),(s.crypto||s.msCrypto).getRandomValues(e)),x(e)}catch(a){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,x(r)]}}():e,3),a),f=new p(a),b=function(){for(var e=f.g(6),t=c,n=0;e<u;)e=(e+n)*l,t*=l,n=f.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|f.g(4)},b.quick=function(){return f.g(4)/4294967296},b.double=b,m(x(f.S),r),(t.pass||n||function(e,t,n,a){return a&&(a.S&&g(a,f),e.state=function(){return g(f,{})}),n?(i.random=e,t):e})(b,d,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,a=this,r=0,i=a.i=a.j=0,o=a.S=[];for(n||(e=[n++]);r<l;)o[r]=r++;for(r=0;r<l;r++)o[r]=o[i=d&i+e[r%n]+(t=o[r])],o[i]=t;(a.g=function(e){for(var t,n=0,r=a.i,i=a.j,o=a.S;e--;)t=o[r=d&r+1],n=n*l+o[d&(o[r]=o[i=d&i+t])+(o[i]=t)];return a.i=r,a.j=i,n})(l)}function g(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){var n,a=[],r=typeof e;if(t&&"object"==r)for(n in e)try{a.push(v(e[n],t-1))}catch(i){}return a.length?a:"string"==r?e:e+"\0"}function m(e,t){for(var n,a=e+"",r=0;r<a.length;)t[d&r]=d&(n^=19*t[d&r])+a.charCodeAt(r++);return x(t)}function x(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=f,m(i.random(),r),e.exports){e.exports=f;try{o=n(914)}catch(b){}}else void 0===(a=function(){return f}.call(t,n,t,e))||(e.exports=a)}([],Math)},282:function(e,t,n){var a=n(5141),r=n(9619),i=n(6422),o=n(6304),s=n(3410),l=n(5463),c=n(5274);c.alea=a,c.xor128=r,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=l,e.exports=c},5141:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var a=.02519603282416938*(e+=t.charCodeAt(n));a-=e=a>>>0,e=(a*=e)>>>0,e+=4294967296*(a-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new o(e),a=t&&t.state,r=n.next;return r.int32=function(){return 4294967296*n.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,a&&("object"==typeof a&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.alea=l}(0,e=n.nmd(e),n.amdD)},5463:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,a=t.d,r=t.a;return e=e<<25^e>>>7^n,n=n-a|0,a=a<<24^a>>>8^r,r=r-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-a|0,t.d=a<<16^n>>>16^r,t.a=r-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var a=0;a<n.length+20;a++)t.b^=0|n.charCodeAt(a),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.tychei=l}(0,e=n.nmd(e),n.amdD)},9619:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var a=0;a<n.length+64;a++)t.x^=0|n.charCodeAt(a),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xor128=l}(0,e=n.nmd(e),n.amdD)},3410:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this;t.next=function(){var e,n,a=t.w,r=t.X,i=t.i;return t.w=a=a+1640531527|0,n=r[i+34&127],e=r[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=r[i]=n^e,t.i=i,n+(a^a>>>16)|0},function(e,t){var n,a,r,i,o,s=[],l=128;for(t===(0|t)?(a=t,t=null):(t+="\0",a=0,l=Math.max(l,t.length)),r=0,i=-32;i<l;++i)t&&(a^=t.charCodeAt((i+32)%t.length)),0===i&&(o=a),a^=a<<10,a^=a>>>15,a^=a<<4,a^=a>>>13,i>=0&&(o=o+1640531527|0,r=0==(n=s[127&i]^=a+o)?r+1:0);for(r>=128&&(s[127&(t&&t.length||0)]=-1),r=127,i=512;i>0;--i)a=s[r+34&127],n=s[r=r+1&127],a^=a<<13,n^=n<<17,a^=a>>>15,n^=n>>>12,s[r]=a^n;e.w=o,e.X=s,e.i=r}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&(a.X&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xor4096=l}(0,e=n.nmd(e),n.amdD)},6304:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this;t.next=function(){var e,n,a=t.x,r=t.i;return e=a[r],n=(e^=e>>>7)^e<<24,n^=(e=a[r+1&7])^e>>>10,n^=(e=a[r+3&7])^e>>>3,n^=(e=a[r+4&7])^e<<7,e=a[r+7&7],n^=(e^=e<<13)^e<<9,a[r]=n,t.i=r+1&7,n},function(e,t){var n,a=[];if(t===(0|t))a[0]=t;else for(t=""+t,n=0;n<t.length;++n)a[7&n]=a[7&n]<<15^t.charCodeAt(n)+a[n+1&7]<<13;for(;a.length<8;)a.push(0);for(n=0;n<8&&0===a[n];++n);for(8==n?a[7]=-1:a[n],e.x=a,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&(a.x&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xorshift7=l}(0,e=n.nmd(e),n.amdD)},6422:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var a=0;a<n.length+64;a++)t.x^=0|n.charCodeAt(a),a==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xorwow=l}(0,e=n.nmd(e),n.amdD)},5274:function(e,t,n){var a;!function(r,i){var o,s=this,l=256,c=i.pow(l,6),u=i.pow(2,52),h=2*u,d=255;function f(e,t,n){var a=[],d=m(v((t=1==t?{entropy:!0}:t||{}).entropy?[e,x(r)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(l):(e=new Uint8Array(l),(s.crypto||s.msCrypto).getRandomValues(e)),x(e)}catch(a){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,x(r)]}}():e,3),a),f=new p(a),b=function(){for(var e=f.g(6),t=c,n=0;e<u;)e=(e+n)*l,t*=l,n=f.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|f.g(4)},b.quick=function(){return f.g(4)/4294967296},b.double=b,m(x(f.S),r),(t.pass||n||function(e,t,n,a){return a&&(a.S&&g(a,f),e.state=function(){return g(f,{})}),n?(i.random=e,t):e})(b,d,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,a=this,r=0,i=a.i=a.j=0,o=a.S=[];for(n||(e=[n++]);r<l;)o[r]=r++;for(r=0;r<l;r++)o[r]=o[i=d&i+e[r%n]+(t=o[r])],o[i]=t;(a.g=function(e){for(var t,n=0,r=a.i,i=a.j,o=a.S;e--;)t=o[r=d&r+1],n=n*l+o[d&(o[r]=o[i=d&i+t])+(o[i]=t)];return a.i=r,a.j=i,n})(l)}function g(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){var n,a=[],r=typeof e;if(t&&"object"==r)for(n in e)try{a.push(v(e[n],t-1))}catch(i){}return a.length?a:"string"==r?e:e+"\0"}function m(e,t){for(var n,a=e+"",r=0;r<a.length;)t[d&r]=d&(n^=19*t[d&r])+a.charCodeAt(r++);return x(t)}function x(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=f,m(i.random(),r),e.exports){e.exports=f;try{o=n(5778)}catch(b){}}else void 0===(a=function(){return f}.call(t,n,t,e))||(e.exports=a)}([],Math)},8700:function(e,t,n){"use strict";var a;function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p(this,n)}}function v(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var b=function(){function e(){s(this,e)}return c(e,[{key:"shadeRGBColor",value:function(e,t){var n=t.split(","),a=e<0?0:255,r=e<0?-1*e:e,i=parseInt(n[0].slice(4),10),o=parseInt(n[1],10),s=parseInt(n[2],10);return"rgb("+(Math.round((a-i)*r)+i)+","+(Math.round((a-o)*r)+o)+","+(Math.round((a-s)*r)+s)+")"}},{key:"shadeHexColor",value:function(e,t){var n=parseInt(t.slice(1),16),a=e<0?0:255,r=e<0?-1*e:e,i=n>>16,o=n>>8&255,s=255&n;return"#"+(16777216+65536*(Math.round((a-i)*r)+i)+256*(Math.round((a-o)*r)+o)+(Math.round((a-s)*r)+s)).toString(16).slice(1)}},{key:"shadeColor",value:function(t,n){return e.isColorHex(n)?this.shadeHexColor(t,n):this.shadeRGBColor(t,n)}}],[{key:"bind",value:function(e,t){return function(){return e.apply(t,arguments)}}},{key:"isObject",value:function(e){return e&&"object"===o(e)&&!Array.isArray(e)&&null!=e}},{key:"is",value:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}},{key:"listToArray",value:function(e){var t,n=[];for(t=0;t<e.length;t++)n[t]=e[t];return n}},{key:"extend",value:function(e,t){var n=this;"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var a=arguments[n];if(null!=a)for(var r in a)a.hasOwnProperty(r)&&(t[r]=a[r])}return t});var a=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach((function(r){n.isObject(t[r])&&r in e?a[r]=n.extend(e[r],t[r]):Object.assign(a,u({},r,t[r]))})),a}},{key:"extendArray",value:function(t,n){var a=[];return t.map((function(t){a.push(e.extend(n,t))})),a}},{key:"monthMod",value:function(e){return e%12}},{key:"clone",value:function(t){if(e.is("Array",t)){for(var n=[],a=0;a<t.length;a++)n[a]=this.clone(t[a]);return n}if(e.is("Null",t))return null;if(e.is("Date",t))return t;if("object"===o(t)){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=this.clone(t[i]));return r}return t}},{key:"log10",value:function(e){return Math.log(e)/Math.LN10}},{key:"roundToBase10",value:function(e){return Math.pow(10,Math.floor(Math.log10(e)))}},{key:"roundToBase",value:function(e,t){return Math.pow(t,Math.floor(Math.log(e)/Math.log(t)))}},{key:"parseNumber",value:function(e){return null===e?e:parseFloat(e)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(e){var t=String(e).split(/[eE]/);if(1===t.length)return t[0];var n="",a=e<0?"-":"",r=t[0].replace(".",""),i=Number(t[1])+1;if(i<0){for(n=a+"0.";i++;)n+="0";return n+r.replace(/^-/,"")}for(i-=r.length;i--;)n+="0";return r+n}},{key:"getDimensions",value:function(e){var t=getComputedStyle(e,null),n=e.clientHeight,a=e.clientWidth;return n-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),[a-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),n]}},{key:"getBoundingClientRect",value:function(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:e.clientWidth,height:e.clientHeight,x:t.left,y:t.top}}},{key:"getLargestStringFromArr",value:function(e){return e.reduce((function(e,t){return Array.isArray(t)&&(t=t.reduce((function(e,t){return e.length>t.length?e:t}))),e.length>t.length?e:t}),0)}},{key:"hexToRgba",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==e.substring(0,1)&&(e="#999999");var n=e.replace("#","");n=n.match(new RegExp("(.{"+n.length/3+"})","g"));for(var a=0;a<n.length;a++)n[a]=parseInt(1===n[a].length?n[a]+n[a]:n[a],16);return void 0!==t&&n.push(t),"rgba("+n.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(e){return parseFloat(e.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(e)}},{key:"getPolygonPos",value:function(e,t){for(var n=[],a=2*Math.PI/t,r=0;r<t;r++){var i={};i.x=e*Math.sin(r*a),i.y=-e*Math.cos(r*a),n.push(i)}return n}},{key:"polarToCartesian",value:function(e,t,n,a){var r=(a-90)*Math.PI/180;return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}},{key:"escapeString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",n=e.toString().slice();return n.replace(/[` ~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/gi,t)}},{key:"negToZero",value:function(e){return e<0?0:e}},{key:"moveIndexInArray",value:function(e,t,n){if(n>=e.length)for(var a=n-e.length+1;a--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e}},{key:"extractNumber",value:function(e){return parseFloat(e.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}},{key:"setELstyles",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style.key=t[n])}},{key:"isNumber",value:function(e){return!isNaN(e)&&parseFloat(Number(e))===e&&!isNaN(parseInt(e,10))}},{key:"isFloat",value:function(e){return Number(e)===e&&e%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var a=e.indexOf("Edge/");return a>0&&parseInt(e.substring(a+5,e.indexOf(".",a)),10)}}]),e}(),y=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.setEasingFunctions()}return c(e,[{key:"setEasingFunctions",value:function(){var e;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":e="-";break;case"easein":e="<";break;case"easeout":e=">";break;case"easeinout":default:e="<>";break;case"swing":e=function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1};break;case"bounce":e=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375};break;case"elastic":e=function(e){return e===!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=e}}},{key:"animateLine",value:function(e,t,n,a){e.attr(t).animate(a).attr(n)}},{key:"animateMarker",value:function(e,t,n,a,r,i){t||(t=0),e.attr({r:t,width:t,height:t}).animate(a,r).attr({r:n,width:n.width,height:n.height}).afterAll((function(){i()}))}},{key:"animateCircle",value:function(e,t,n,a,r){e.attr({r:t.r,cx:t.cx,cy:t.cy}).animate(a,r).attr({r:n.r,cx:n.cx,cy:n.cy})}},{key:"animateRect",value:function(e,t,n,a,r){e.attr(t).animate(a).attr(n).afterAll((function(){return r()}))}},{key:"animatePathsGradually",value:function(e){var t=e.el,n=e.realIndex,a=e.j,r=e.fill,i=e.pathFrom,o=e.pathTo,s=e.speed,l=e.delay,c=this.w,u=0;c.config.chart.animations.animateGradually.enabled&&(u=c.config.chart.animations.animateGradually.delay),c.config.chart.animations.dynamicAnimation.enabled&&c.globals.dataChanged&&"bar"!==c.config.chart.type&&(u=0),this.morphSVG(t,n,a,"line"!==c.config.chart.type||c.globals.comboCharts?r:"stroke",i,o,s,l*u)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach((function(e){e.el.classList.remove("apexcharts-element-hidden")}))}},{key:"animationCompleted",value:function(e){var t=this.w;t.globals.animationEnded||(t.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof t.config.chart.events.animationEnd&&t.config.chart.events.animationEnd(this.ctx,{el:e,w:t}))}},{key:"morphSVG",value:function(e,t,n,a,r,i,o,s){var l=this,c=this.w;r||(r=e.attr("pathFrom")),i||(i=e.attr("pathTo"));var u=function(e){return"radar"===c.config.chart.type&&(o=1),"M 0 ".concat(c.globals.gridHeight)};(!r||r.indexOf("undefined")>-1||r.indexOf("NaN")>-1)&&(r=u()),(!i||i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i=u()),c.globals.shouldAnimate||(o=1),e.plot(r).animate(1,c.globals.easing,s).plot(r).animate(o,c.globals.easing,s).plot(i).afterAll((function(){b.isNumber(n)?n===c.globals.series[c.globals.maxValsInArrayIndex].length-2&&c.globals.shouldAnimate&&l.animationCompleted(e):"none"!==a&&c.globals.shouldAnimate&&(!c.globals.comboCharts&&t===c.globals.series.length-1||c.globals.comboCharts)&&l.animationCompleted(e),l.showDelayedElements()}))}}]),e}(),k=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"getDefaultFilter",value:function(e,t){var n=this.w;e.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==n.config.states.normal.filter?this.applyFilter(e,t,n.config.states.normal.filter.type,n.config.states.normal.filter.value):n.config.chart.dropShadow.enabled&&this.dropShadow(e,n.config.chart.dropShadow,t)}},{key:"addNormalFilter",value:function(e,t){var n=this.w;n.config.chart.dropShadow.enabled&&!e.node.classList.contains("apexcharts-marker")&&this.dropShadow(e,n.config.chart.dropShadow,t)}},{key:"addLightenFilter",value:function(e,t,n){var a=this,r=this.w,i=n.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter((function(e){var n=r.config.chart.dropShadow;(n.enabled?a.addShadow(e,t,n):e).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:i}})})),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"addDarkenFilter",value:function(e,t,n){var a=this,r=this.w,i=n.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter((function(e){var n=r.config.chart.dropShadow;(n.enabled?a.addShadow(e,t,n):e).componentTransfer({rgb:{type:"linear",slope:i}})})),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"applyFilter",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(n){case"none":this.addNormalFilter(e,t);break;case"lighten":this.addLightenFilter(e,t,{intensity:a});break;case"darken":this.addDarkenFilter(e,t,{intensity:a})}}},{key:"addShadow",value:function(e,t,n){var a=n.blur,r=n.top,i=n.left,o=n.color,s=n.opacity,l=e.flood(Array.isArray(o)?o[t]:o,s).composite(e.sourceAlpha,"in").offset(i,r).gaussianBlur(a).merge(e.source);return e.blend(e.source,l)}},{key:"dropShadow",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t.top,r=t.left,i=t.blur,o=t.color,s=t.opacity,l=t.noUserSpaceOnUse,c=this.w;return e.unfilter(!0),b.isIE()&&"radialBar"===c.config.chart.type||(o=Array.isArray(o)?o[n]:o,e.filter((function(e){var t;t=b.isSafari()||b.isFirefox()||b.isIE()?e.flood(o,s).composite(e.sourceAlpha,"in").offset(r,a).gaussianBlur(i):e.flood(o,s).composite(e.sourceAlpha,"in").offset(r,a).gaussianBlur(i).merge(e.source),e.blend(e.source,t)})),l||e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)),e}},{key:"setSelectionFilter",value:function(e,t,n){var a=this.w;if(void 0!==a.globals.selectedDataPoints[t]&&a.globals.selectedDataPoints[t].indexOf(n)>-1){e.node.setAttribute("selected",!0);var r=a.config.states.active.filter;"none"!==r&&this.applyFilter(e,t,r.type,r.value)}}},{key:"_scaleFilterSize",value:function(e){!function(t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),e}(),w=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"drawLine",value:function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt",l=this.w,c=l.globals.dom.Paper.line().attr({x1:e,y1:t,x2:n,y2:a,stroke:r,"stroke-dasharray":i,"stroke-width":o,"stroke-linecap":s});return c}},{key:"drawRect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=this.w,h=u.globals.dom.Paper.rect();return h.attr({x:e,y:t,width:n>0?n:0,height:a>0?a:0,rx:r,ry:r,opacity:o,"stroke-width":null!==s?s:0,stroke:null!==l?l:"none","stroke-dasharray":c}),h.node.setAttribute("fill",i),h}},{key:"drawPolygon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",r=this.w,i=r.globals.dom.Paper.polygon(e).attr({fill:a,stroke:t,"stroke-width":n});return i}},{key:"drawCircle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.w;e<0&&(e=0);var a=n.globals.dom.Paper.circle(2*e);return null!==t&&a.attr(t),a}},{key:"drawPath",value:function(e){var t=e.d,n=void 0===t?"":t,a=e.stroke,r=void 0===a?"#a8a8a8":a,i=e.strokeWidth,o=void 0===i?1:i,s=e.fill,l=e.fillOpacity,c=void 0===l?1:l,u=e.strokeOpacity,h=void 0===u?1:u,d=e.classes,f=e.strokeLinecap,p=void 0===f?null:f,g=e.strokeDashArray,v=void 0===g?0:g,m=this.w;return null===p&&(p=m.config.stroke.lineCap),(n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n="M 0 ".concat(m.globals.gridHeight)),m.globals.dom.Paper.path(n).attr({fill:s,"fill-opacity":c,stroke:r,"stroke-opacity":h,"stroke-linecap":p,"stroke-width":o,"stroke-dasharray":v,class:d})}},{key:"group",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.w,n=t.globals.dom.Paper.group();return null!==e&&n.attr(e),n}},{key:"move",value:function(e,t){return["M",e,t].join(" ")}},{key:"line",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=null;return null===n?a=["L",e,t].join(" "):"H"===n?a=["H",e].join(" "):"V"===n&&(a=["V",t].join(" ")),a}},{key:"curve",value:function(e,t,n,a,r,i){return["C",e,t,n,a,r,i].join(" ")}},{key:"quadraticCurve",value:function(e,t,n,a){return["Q",e,t,n,a].join(" ")}},{key:"arc",value:function(e,t,n,a,r,i,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l="A";s&&(l="a");var c=[l,e,t,n,a,r,i,o].join(" ");return c}},{key:"renderPaths",value:function(e){var t,n=e.j,a=e.realIndex,r=e.pathFrom,o=e.pathTo,s=e.stroke,l=e.strokeWidth,c=e.strokeLinecap,u=e.fill,h=e.animationDelay,d=e.initialSpeed,f=e.dataChangeSpeed,p=e.className,g=e.shouldClipToGrid,v=void 0===g||g,m=e.bindEventsOnPaths,x=void 0===m||m,b=e.drawShadow,w=void 0===b||b,S=this.w,C=new k(this.ctx),I=new y(this.ctx),A=this.w.config.chart.animations.enabled,T=A&&this.w.config.chart.animations.dynamicAnimation.enabled,N=!!(A&&!S.globals.resized||T&&S.globals.dataChanged&&S.globals.shouldAnimate);N?t=r:(t=o,S.globals.animationEnded=!0);var E,R=S.config.stroke.dashArray;E=Array.isArray(R)?R[a]:S.config.stroke.dashArray;var F=this.drawPath({d:t,stroke:s,strokeWidth:l,fill:u,fillOpacity:1,classes:p,strokeLinecap:c,strokeDashArray:E});if(F.attr("index",a),v&&F.attr({"clip-path":"url(#gridRectMask".concat(S.globals.cuid,")")}),"none"!==S.config.states.normal.filter.type)C.getDefaultFilter(F,a);else if(S.config.chart.dropShadow.enabled&&w&&(!S.config.chart.dropShadow.enabledOnSeries||S.config.chart.dropShadow.enabledOnSeries&&-1!==S.config.chart.dropShadow.enabledOnSeries.indexOf(a))){var D=S.config.chart.dropShadow;C.dropShadow(F,D,a)}x&&(F.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,F)),F.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,F)),F.node.addEventListener("mousedown",this.pathMouseDown.bind(this,F))),F.attr({pathTo:o,pathFrom:r});var L={el:F,j:n,realIndex:a,pathFrom:r,pathTo:o,fill:u,strokeWidth:l,delay:h};return!A||S.globals.resized||S.globals.dataChanged?!S.globals.resized&&S.globals.dataChanged||I.showDelayedElements():I.animatePathsGradually(i(i({},L),{},{speed:d})),S.globals.dataChanged&&T&&N&&I.animatePathsGradually(i(i({},L),{},{speed:f})),F}},{key:"drawPattern",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=this.w,o=i.globals.dom.Paper.pattern(t,n,(function(i){"horizontalLines"===e?i.line(0,0,n,0).stroke({color:a,width:r+1}):"verticalLines"===e?i.line(0,0,0,t).stroke({color:a,width:r+1}):"slantedLines"===e?i.line(0,0,t,n).stroke({color:a,width:r}):"squares"===e?i.rect(t,n).fill("none").stroke({color:a,width:r}):"circles"===e&&i.circle(t).fill("none").stroke({color:a,width:r})}));return o}},{key:"drawGradient",value:function(e,t,n,a,r){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=this.w;t.length<9&&0===t.indexOf("#")&&(t=b.hexToRgba(t,a)),n.length<9&&0===n.indexOf("#")&&(n=b.hexToRgba(n,r));var h=0,d=1,f=1,p=null;null!==s&&(h=void 0!==s[0]?s[0]/100:0,d=void 0!==s[1]?s[1]/100:1,f=void 0!==s[2]?s[2]/100:1,p=void 0!==s[3]?s[3]/100:null);var g=!("donut"!==u.config.chart.type&&"pie"!==u.config.chart.type&&"polarArea"!==u.config.chart.type&&"bubble"!==u.config.chart.type);if(i=null===l||0===l.length?u.globals.dom.Paper.gradient(g?"radial":"linear",(function(e){e.at(h,t,a),e.at(d,n,r),e.at(f,n,r),null!==p&&e.at(p,t,a)})):u.globals.dom.Paper.gradient(g?"radial":"linear",(function(e){(Array.isArray(l[c])?l[c]:l).forEach((function(t){e.at(t.offset/100,t.color,t.opacity)}))})),g){var v=u.globals.gridWidth/2,m=u.globals.gridHeight/2;"bubble"!==u.config.chart.type?i.attr({gradientUnits:"userSpaceOnUse",cx:v,cy:m,r:o}):i.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===e?i.from(0,0).to(0,1):"diagonal"===e?i.from(0,0).to(1,1):"horizontal"===e?i.from(0,1).to(1,1):"diagonal2"===e&&i.from(1,0).to(0,1);return i}},{key:"getTextBasedOnMaxWidth",value:function(e){var t=e.text,n=e.maxWidth,a=e.fontSize,r=e.fontFamily,i=this.getTextRects(t,a,r),o=i.width/t.length,s=Math.floor(n/o);return n<i.width?t.slice(0,s-3)+"...":t}},{key:"drawText",value:function(e){var t=this,n=e.x,a=e.y,r=e.text,o=e.textAnchor,s=e.fontSize,l=e.fontFamily,c=e.fontWeight,u=e.foreColor,h=e.opacity,d=e.maxWidth,f=e.cssClass,p=void 0===f?"":f,g=e.isPlainText,v=void 0===g||g,m=this.w;void 0===r&&(r="");var x=r;o||(o="start"),u&&u.length||(u=m.config.chart.foreColor),l=l||m.config.chart.fontFamily,c=c||"regular";var b,y={maxWidth:d,fontSize:s=s||"11px",fontFamily:l};return Array.isArray(r)?b=m.globals.dom.Paper.text((function(e){for(var n=0;n<r.length;n++)d&&(x=t.getTextBasedOnMaxWidth(i({text:r[n]},y))),0===n?e.tspan(x):e.tspan(x).newLine()})):(d&&(x=this.getTextBasedOnMaxWidth(i({text:r},y))),b=v?m.globals.dom.Paper.plain(r):m.globals.dom.Paper.text((function(e){return e.tspan(x)}))),b.attr({x:n,y:a,"text-anchor":o,"dominant-baseline":"auto","font-size":s,"font-family":l,"font-weight":c,fill:u,class:"apexcharts-text "+p}),b.node.style.fontFamily=l,b.node.style.opacity=h,b}},{key:"drawMarker",value:function(e,t,n){e=e||0;var a=n.pSize||0,r=null;if("square"===n.shape||"rect"===n.shape){var i=void 0===n.pRadius?a/2:n.pRadius;null!==t&&a||(a=0,i=0);var o=1.2*a+i,s=this.drawRect(o,o,o,o,i);s.attr({x:e-o/2,y:t-o/2,cx:e,cy:t,class:n.class?n.class:"",fill:n.pointFillColor,"fill-opacity":n.pointFillOpacity?n.pointFillOpacity:1,stroke:n.pointStrokeColor,"stroke-width":n.pointStrokeWidth?n.pointStrokeWidth:0,"stroke-opacity":n.pointStrokeOpacity?n.pointStrokeOpacity:1}),r=s}else"circle"!==n.shape&&n.shape||(b.isNumber(t)||(a=0,t=0),r=this.drawCircle(a,{cx:e,cy:t,class:n.class?n.class:"",stroke:n.pointStrokeColor,fill:n.pointFillColor,"fill-opacity":n.pointFillOpacity?n.pointFillOpacity:1,"stroke-width":n.pointStrokeWidth?n.pointStrokeWidth:0,"stroke-opacity":n.pointStrokeOpacity?n.pointStrokeOpacity:1}));return r}},{key:"pathMouseEnter",value:function(e,t){var n=this.w,a=new k(this.ctx),r=parseInt(e.node.getAttribute("index"),10),i=parseInt(e.node.getAttribute("j"),10);if("function"==typeof n.config.chart.events.dataPointMouseEnter&&n.config.chart.events.dataPointMouseEnter(t,this.ctx,{seriesIndex:r,dataPointIndex:i,w:n}),this.ctx.events.fireEvent("dataPointMouseEnter",[t,this.ctx,{seriesIndex:r,dataPointIndex:i,w:n}]),("none"===n.config.states.active.filter.type||"true"!==e.node.getAttribute("selected"))&&"none"!==n.config.states.hover.filter.type&&!n.globals.isTouchDevice){var o=n.config.states.hover.filter;a.applyFilter(e,r,o.type,o.value)}}},{key:"pathMouseLeave",value:function(e,t){var n=this.w,a=new k(this.ctx),r=parseInt(e.node.getAttribute("index"),10),i=parseInt(e.node.getAttribute("j"),10);"function"==typeof n.config.chart.events.dataPointMouseLeave&&n.config.chart.events.dataPointMouseLeave(t,this.ctx,{seriesIndex:r,dataPointIndex:i,w:n}),this.ctx.events.fireEvent("dataPointMouseLeave",[t,this.ctx,{seriesIndex:r,dataPointIndex:i,w:n}]),"none"!==n.config.states.active.filter.type&&"true"===e.node.getAttribute("selected")||"none"!==n.config.states.hover.filter.type&&a.getDefaultFilter(e,r)}},{key:"pathMouseDown",value:function(e,t){var n=this.w,a=new k(this.ctx),r=parseInt(e.node.getAttribute("index"),10),i=parseInt(e.node.getAttribute("j"),10),o="false";if("true"===e.node.getAttribute("selected")){if(e.node.setAttribute("selected","false"),n.globals.selectedDataPoints[r].indexOf(i)>-1){var s=n.globals.selectedDataPoints[r].indexOf(i);n.globals.selectedDataPoints[r].splice(s,1)}}else{if(!n.config.states.active.allowMultipleDataPointsSelection&&n.globals.selectedDataPoints.length>0){n.globals.selectedDataPoints=[];var l=n.globals.dom.Paper.select(".apexcharts-series path").members,c=n.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,u=function(e){Array.prototype.forEach.call(e,(function(e){e.node.setAttribute("selected","false"),a.getDefaultFilter(e,r)}))};u(l),u(c)}e.node.setAttribute("selected","true"),o="true",void 0===n.globals.selectedDataPoints[r]&&(n.globals.selectedDataPoints[r]=[]),n.globals.selectedDataPoints[r].push(i)}if("true"===o){var h=n.config.states.active.filter;if("none"!==h)a.applyFilter(e,r,h.type,h.value);else if("none"!==n.config.states.hover.filter&&!n.globals.isTouchDevice){var d=n.config.states.hover.filter;a.applyFilter(e,r,d.type,d.value)}}else"none"!==n.config.states.active.filter.type&&("none"===n.config.states.hover.filter.type||n.globals.isTouchDevice?a.getDefaultFilter(e,r):(d=n.config.states.hover.filter,a.applyFilter(e,r,d.type,d.value)));"function"==typeof n.config.chart.events.dataPointSelection&&n.config.chart.events.dataPointSelection(t,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:r,dataPointIndex:i,w:n}),t&&this.ctx.events.fireEvent("dataPointSelection",[t,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:r,dataPointIndex:i,w:n}])}},{key:"rotateAroundCenter",value:function(e){var t={};return e&&"function"==typeof e.getBBox&&(t=e.getBBox()),{x:t.x+t.width/2,y:t.y+t.height/2}}},{key:"getTextRects",value:function(e,t,n,a){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=this.w,o=this.drawText({x:-200,y:-200,text:e,textAnchor:"start",fontSize:t,fontFamily:n,foreColor:"#fff",opacity:0});a&&o.attr("transform",a),i.globals.dom.Paper.add(o);var s=o.bbox();return r||(s=o.node.getBoundingClientRect()),o.remove(),{width:s.width,height:s.height}}},{key:"placeTextWithEllipsis",value:function(e,t,n){if("function"==typeof e.getComputedTextLength&&(e.textContent=t,t.length>0&&e.getComputedTextLength()>=n/1.1)){for(var a=t.length-3;a>0;a-=3)if(e.getSubStringLength(0,a)<=n/1.1)return void(e.textContent=t.substring(0,a)+"...");e.textContent="."}}}],[{key:"setAttrs",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}}]),e}(),S=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"getStackedSeriesTotals",value:function(){var e=this.w,t=[];if(0===e.globals.series.length)return t;for(var n=0;n<e.globals.series[e.globals.maxValsInArrayIndex].length;n++){for(var a=0,r=0;r<e.globals.series.length;r++)void 0!==e.globals.series[r][n]&&(a+=e.globals.series[r][n]);t.push(a)}return e.globals.stackedSeriesTotals=t,t}},{key:"getSeriesTotalByIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?this.w.config.series.reduce((function(e,t){return e+t}),0):this.w.globals.series[e].reduce((function(e,t){return e+t}),0)}},{key:"isSeriesNull",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===e?this.w.config.series.filter((function(e){return null!==e})):this.w.config.series[e].data.filter((function(e){return null!==e}))).length}},{key:"seriesHaveSameValues",value:function(e){return this.w.globals.series[e].every((function(e,t,n){return e===n[0]}))}},{key:"getCategoryLabels",value:function(e){var t=this.w,n=e.slice();return t.config.xaxis.convertedCatToNumeric&&(n=e.map((function(e,n){return t.config.xaxis.labels.formatter(e-t.globals.minX+1)}))),n}},{key:"getLargestSeries",value:function(){var e=this.w;e.globals.maxValsInArrayIndex=e.globals.series.map((function(e){return e.length})).indexOf(Math.max.apply(Math,e.globals.series.map((function(e){return e.length}))))}},{key:"getLargestMarkerSize",value:function(){var e=this.w,t=0;return e.globals.markers.size.forEach((function(e){t=Math.max(t,e)})),e.config.markers.discrete&&e.config.markers.discrete.length&&e.config.markers.discrete.forEach((function(e){t=Math.max(t,e.size)})),t>0&&(t+=e.config.markers.hover.sizeOffset+1),e.globals.markers.largestSize=t,t}},{key:"getSeriesTotals",value:function(){var e=this.w;e.globals.seriesTotals=e.globals.series.map((function(e,t){var n=0;if(Array.isArray(e))for(var a=0;a<e.length;a++)n+=e[a];else n+=e;return n}))}},{key:"getSeriesTotalsXRange",value:function(e,t){var n=this.w;return n.globals.series.map((function(a,r){for(var i=0,o=0;o<a.length;o++)n.globals.seriesX[r][o]>e&&n.globals.seriesX[r][o]<t&&(i+=a[o]);return i}))}},{key:"getPercentSeries",value:function(){var e=this.w;e.globals.seriesPercent=e.globals.series.map((function(t,n){var a=[];if(Array.isArray(t))for(var r=0;r<t.length;r++){var i=e.globals.stackedSeriesTotals[r],o=0;i&&(o=100*t[r]/i),a.push(o)}else{var s=100*t/e.globals.seriesTotals.reduce((function(e,t){return e+t}),0);a.push(s)}return a}))}},{key:"getCalculatedRatios",value:function(){var e,t,n,a,r=this.w.globals,i=[],o=0,s=[],l=.1,c=0;if(r.yRange=[],r.isMultipleYAxis)for(var u=0;u<r.minYArr.length;u++)r.yRange.push(Math.abs(r.minYArr[u]-r.maxYArr[u])),s.push(0);else r.yRange.push(Math.abs(r.minY-r.maxY));r.xRange=Math.abs(r.maxX-r.minX),r.zRange=Math.abs(r.maxZ-r.minZ);for(var h=0;h<r.yRange.length;h++)i.push(r.yRange[h]/r.gridHeight);if(t=r.xRange/r.gridWidth,n=Math.abs(r.initialMaxX-r.initialMinX)/r.gridWidth,e=r.yRange/r.gridWidth,a=r.xRange/r.gridHeight,(o=r.zRange/r.gridHeight*16)||(o=1),r.minY!==Number.MIN_VALUE&&0!==Math.abs(r.minY)&&(r.hasNegs=!0),r.isMultipleYAxis){s=[];for(var d=0;d<i.length;d++)s.push(-r.minYArr[d]/i[d])}else s.push(-r.minY/i[0]),r.minY!==Number.MIN_VALUE&&0!==Math.abs(r.minY)&&(l=-r.minY/e,c=r.minX/t);return{yRatio:i,invertedYRatio:e,zRatio:o,xRatio:t,initialXRatio:n,invertedXRatio:a,baseLineInvertedY:l,baseLineY:s,baseLineX:c}}},{key:"getLogSeries",value:function(e){var t=this,n=this.w;return n.globals.seriesLog=e.map((function(e,a){return n.config.yaxis[a]&&n.config.yaxis[a].logarithmic?e.map((function(e){return null===e?null:t.getLogVal(n.config.yaxis[a].logBase,e,a)})):e})),n.globals.invalidLogScale?e:n.globals.seriesLog}},{key:"getBaseLog",value:function(e,t){return Math.log(t)/Math.log(e)}},{key:"getLogVal",value:function(e,t,n){if(0===t)return 0;var a=this.w,r=0===a.globals.minYArr[n]?-1:this.getBaseLog(e,a.globals.minYArr[n]),i=(0===a.globals.maxYArr[n]?0:this.getBaseLog(e,a.globals.maxYArr[n]))-r;return t<1?t/i:(this.getBaseLog(e,t)-r)/i}},{key:"getLogYRatios",value:function(e){var t=this,n=this.w,a=this.w.globals;return a.yLogRatio=e.slice(),a.logYRange=a.yRange.map((function(e,r){if(n.config.yaxis[r]&&t.w.config.yaxis[r].logarithmic){var i,o=-Number.MAX_VALUE,s=Number.MIN_VALUE;return a.seriesLog.forEach((function(e,t){e.forEach((function(e){n.config.yaxis[t]&&n.config.yaxis[t].logarithmic&&(o=Math.max(e,o),s=Math.min(e,s))}))})),i=Math.pow(a.yRange[r],Math.abs(s-o)/a.yRange[r]),a.yLogRatio[r]=i/a.gridHeight,i}})),a.invalidLogScale?e.slice():a.yLogRatio}}],[{key:"checkComboSeries",value:function(e){var t=!1,n=0,a=0;return e.length&&void 0!==e[0].type&&e.forEach((function(e){"bar"!==e.type&&"column"!==e.type&&"candlestick"!==e.type&&"boxPlot"!==e.type||n++,void 0!==e.type&&a++})),a>0&&(t=!0),{comboBarCount:n,comboCharts:t}}},{key:"extendArrayProps",value:function(e,t,n){return t.yaxis&&(t=e.extendYAxis(t,n)),t.annotations&&(t.annotations.yaxis&&(t=e.extendYAxisAnnotations(t)),t.annotations.xaxis&&(t=e.extendXAxisAnnotations(t)),t.annotations.points&&(t=e.extendPointAnnotations(t))),t}}]),e}(),C=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t}return c(e,[{key:"setOrientations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.w;if("vertical"===e.label.orientation){var a=null!==t?t:0,r=n.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(a,"']"));if(null!==r){var i=r.getBoundingClientRect();r.setAttribute("x",parseFloat(r.getAttribute("x"))-i.height+4),"top"===e.label.position?r.setAttribute("y",parseFloat(r.getAttribute("y"))+i.width):r.setAttribute("y",parseFloat(r.getAttribute("y"))-i.width);var o=this.annoCtx.graphics.rotateAroundCenter(r),s=o.x,l=o.y;r.setAttribute("transform","rotate(-90 ".concat(s," ").concat(l,")"))}}}},{key:"addBackgroundToAnno",value:function(e,t){var n=this.w;if(!e||void 0===t.label.text||void 0!==t.label.text&&!String(t.label.text).trim())return null;var a=n.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.label.style.padding.left,o=t.label.style.padding.right,s=t.label.style.padding.top,l=t.label.style.padding.bottom;"vertical"===t.label.orientation&&(s=t.label.style.padding.left,l=t.label.style.padding.right,i=t.label.style.padding.top,o=t.label.style.padding.bottom);var c=r.left-a.left-i,u=r.top-a.top-s,h=this.annoCtx.graphics.drawRect(c-n.globals.barPadForNumericAxis,u,r.width+i+o,r.height+s+l,t.label.borderRadius,t.label.style.background,1,t.label.borderWidth,t.label.borderColor,0);return t.id&&h.node.classList.add(t.id),h}},{key:"annotationsBackground",value:function(){var e=this,t=this.w,n=function(n,a,r){var i=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations .apexcharts-").concat(r,"-annotation-label[rel='").concat(a,"']"));if(i){var o=i.parentNode,s=e.addBackgroundToAnno(i,n);s&&(o.insertBefore(s.node,i),n.label.mouseEnter&&s.node.addEventListener("mouseenter",n.label.mouseEnter.bind(e,n)),n.label.mouseLeave&&s.node.addEventListener("mouseleave",n.label.mouseLeave.bind(e,n)))}};t.config.annotations.xaxis.map((function(e,t){n(e,t,"xaxis")})),t.config.annotations.yaxis.map((function(e,t){n(e,t,"yaxis")})),t.config.annotations.points.map((function(e,t){n(e,t,"point")}))}},{key:"getY1Y2",value:function(e,t){var n,a="y1"===e?t.y:t.y2,r=this.w;if(this.annoCtx.invertAxis){var i=r.globals.labels.indexOf(a);r.config.xaxis.convertedCatToNumeric&&(i=r.globals.categoryLabels.indexOf(a));var o=r.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(i+1)+")");o&&(n=parseFloat(o.getAttribute("y")))}else{var s;s=r.config.yaxis[t.yAxisIndex].logarithmic?(a=new S(this.annoCtx.ctx).getLogVal(a,t.yAxisIndex))/r.globals.yLogRatio[t.yAxisIndex]:(a-r.globals.minYArr[t.yAxisIndex])/(r.globals.yRange[t.yAxisIndex]/r.globals.gridHeight),n=r.globals.gridHeight-s,r.config.yaxis[t.yAxisIndex]&&r.config.yaxis[t.yAxisIndex].reversed&&(n=s)}return n}},{key:"getX1X2",value:function(e,t){var n=this.w,a=this.annoCtx.invertAxis?n.globals.minY:n.globals.minX,r=this.annoCtx.invertAxis?n.globals.maxY:n.globals.maxX,i=this.annoCtx.invertAxis?n.globals.yRange[0]:n.globals.xRange,o=(t.x-a)/(i/n.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(o=(r-t.x)/(i/n.globals.gridWidth)),"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||n.globals.dataFormatXNumeric||(o=this.getStringX(t.x));var s=(t.x2-a)/(i/n.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(s=(r-t.x2)/(i/n.globals.gridWidth)),"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||n.globals.dataFormatXNumeric||(s=this.getStringX(t.x2)),"x1"===e?o:s}},{key:"getStringX",value:function(e){var t=this.w,n=e;t.config.xaxis.convertedCatToNumeric&&t.globals.categoryLabels.length&&(e=t.globals.categoryLabels.indexOf(e)+1);var a=t.globals.labels.indexOf(e),r=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(a+1)+")");return r&&(n=parseFloat(r.getAttribute("x"))),n}}]),e}(),I=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new C(this.annoCtx)}return c(e,[{key:"addXaxisAnnotation",value:function(e,t,n){var a,r=this.w,i=this.helpers.getX1X2("x1",e),o=e.label.text,s=e.strokeDashArray;if(b.isNumber(i)){if(null===e.x2||void 0===e.x2){var l=this.annoCtx.graphics.drawLine(i+e.offsetX,0+e.offsetY,i+e.offsetX,r.globals.gridHeight+e.offsetY,e.borderColor,s,e.borderWidth);t.appendChild(l.node),e.id&&l.node.classList.add(e.id)}else{if((a=this.helpers.getX1X2("x2",e))<i){var c=i;i=a,a=c}var u=this.annoCtx.graphics.drawRect(i+e.offsetX,0+e.offsetY,a-i,r.globals.gridHeight+e.offsetY,0,e.fillColor,e.opacity,1,e.borderColor,s);u.node.classList.add("apexcharts-annotation-rect"),u.attr("clip-path","url(#gridRectMask".concat(r.globals.cuid,")")),t.appendChild(u.node),e.id&&u.node.classList.add(e.id)}var h="top"===e.label.position?4:r.globals.gridHeight,d=this.annoCtx.graphics.getTextRects(o,parseFloat(e.label.style.fontSize)),f=this.annoCtx.graphics.drawText({x:i+e.label.offsetX,y:h+e.label.offsetY-("vertical"===e.label.orientation?"top"===e.label.position?d.width/2-12:-d.width/2:0),text:o,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});f.attr({rel:n}),t.appendChild(f.node),this.annoCtx.helpers.setOrientations(e,n)}}},{key:"drawXAxisAnnotations",value:function(){var e=this,t=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return t.config.annotations.xaxis.map((function(t,a){e.addXaxisAnnotation(t,n.node,a)})),n}}]),e}(),A=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t,this.helpers=new C(this.annoCtx)}return c(e,[{key:"addYaxisAnnotation",value:function(e,t,n){var a,r=this.w,i=e.strokeDashArray,o=this.helpers.getY1Y2("y1",e),s=e.label.text;if(null===e.y2||void 0===e.y2){var l=this.annoCtx.graphics.drawLine(0+e.offsetX,o+e.offsetY,this._getYAxisAnnotationWidth(e),o+e.offsetY,e.borderColor,i,e.borderWidth);t.appendChild(l.node),e.id&&l.node.classList.add(e.id)}else{if((a=this.helpers.getY1Y2("y2",e))>o){var c=o;o=a,a=c}var u=this.annoCtx.graphics.drawRect(0+e.offsetX,a+e.offsetY,this._getYAxisAnnotationWidth(e),o-a,0,e.fillColor,e.opacity,1,e.borderColor,i);u.node.classList.add("apexcharts-annotation-rect"),u.attr("clip-path","url(#gridRectMask".concat(r.globals.cuid,")")),t.appendChild(u.node),e.id&&u.node.classList.add(e.id)}var h="right"===e.label.position?r.globals.gridWidth:0,d=this.annoCtx.graphics.drawText({x:h+e.label.offsetX,y:(null!=a?a:o)+e.label.offsetY-3,text:s,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});d.attr({rel:n}),t.appendChild(d.node)}},{key:"_getYAxisAnnotationWidth",value:function(e){var t=this.w;return t.globals.gridWidth,(e.width.indexOf("%")>-1?t.globals.gridWidth*parseInt(e.width,10)/100:parseInt(e.width,10))+e.offsetX}},{key:"drawYAxisAnnotations",value:function(){var e=this,t=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return t.config.annotations.yaxis.map((function(t,a){e.addYaxisAnnotation(t,n.node,a)})),n}}]),e}(),T=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t,this.helpers=new C(this.annoCtx)}return c(e,[{key:"addPointAnnotation",value:function(e,t,n){this.w;var a=this.helpers.getX1X2("x1",e),r=this.helpers.getY1Y2("y1",e);if(b.isNumber(a)){var i={pSize:e.marker.size,pointStrokeWidth:e.marker.strokeWidth,pointFillColor:e.marker.fillColor,pointStrokeColor:e.marker.strokeColor,shape:e.marker.shape,pRadius:e.marker.radius,class:"apexcharts-point-annotation-marker ".concat(e.marker.cssClass," ").concat(e.id?e.id:"")},o=this.annoCtx.graphics.drawMarker(a+e.marker.offsetX,r+e.marker.offsetY,i);t.appendChild(o.node);var s=e.label.text?e.label.text:"",l=this.annoCtx.graphics.drawText({x:a+e.label.offsetX,y:r+e.label.offsetY-e.marker.size-parseFloat(e.label.style.fontSize)/1.6,text:s,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});if(l.attr({rel:n}),t.appendChild(l.node),e.customSVG.SVG){var c=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+e.customSVG.cssClass});c.attr({transform:"translate(".concat(a+e.customSVG.offsetX,", ").concat(r+e.customSVG.offsetY,")")}),c.node.innerHTML=e.customSVG.SVG,t.appendChild(c.node)}if(e.image.path){var u=e.image.width?e.image.width:20,h=e.image.height?e.image.height:20;o=this.annoCtx.addImage({x:a+e.image.offsetX-u/2,y:r+e.image.offsetY-h/2,width:u,height:h,path:e.image.path,appendTo:".apexcharts-point-annotations"})}e.mouseEnter&&o.node.addEventListener("mouseenter",e.mouseEnter.bind(this,e)),e.mouseLeave&&o.node.addEventListener("mouseleave",e.mouseLeave.bind(this,e))}}},{key:"drawPointAnnotations",value:function(){var e=this,t=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return t.config.annotations.points.map((function(t,a){e.addPointAnnotation(t,n.node,a)})),n}}]),e}(),N={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},E=function(){function e(){s(this,e),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:0,mouseEnter:void 0,mouseLeave:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return c(e,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[N],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(e){return new Date(e).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,rangeBarOverlap:!0,rangeBarGroupRows:!1,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal"}},bubble:{minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(e){return e}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(e){return e+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(e,t){return e+t}),0)/e.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(e){return e}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(e){return e}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(e,t){return e+t}),0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(e){return null!==e?e:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(e){return e?e+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),e}(),R=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.graphics=new w(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new C(this),this.xAxisAnnotations=new I(this),this.yAxisAnnotations=new A(this),this.pointsAnnotations=new T(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return c(e,[{key:"drawAxesAnnotations",value:function(){var e=this.w;if(e.globals.axisCharts){for(var t=this.yAxisAnnotations.drawYAxisAnnotations(),n=this.xAxisAnnotations.drawXAxisAnnotations(),a=this.pointsAnnotations.drawPointAnnotations(),r=e.config.chart.animations.enabled,i=[t,n,a],o=[n.node,t.node,a.node],s=0;s<3;s++)e.globals.dom.elGraphical.add(i[s]),!r||e.globals.resized||e.globals.dataChanged||"scatter"!==e.config.chart.type&&"bubble"!==e.config.chart.type&&e.globals.dataPoints>1&&o[s].classList.add("apexcharts-element-hidden"),e.globals.delayedElements.push({el:o[s],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var e=this;this.w.config.annotations.images.map((function(t,n){e.addImage(t,n)}))}},{key:"drawTextAnnos",value:function(){var e=this;this.w.config.annotations.texts.map((function(t,n){e.addText(t,n)}))}},{key:"addXaxisAnnotation",value:function(e,t,n){this.xAxisAnnotations.addXaxisAnnotation(e,t,n)}},{key:"addYaxisAnnotation",value:function(e,t,n){this.yAxisAnnotations.addYaxisAnnotation(e,t,n)}},{key:"addPointAnnotation",value:function(e,t,n){this.pointsAnnotations.addPointAnnotation(e,t,n)}},{key:"addText",value:function(e,t){var n=e.x,a=e.y,r=e.text,i=e.textAnchor,o=e.foreColor,s=e.fontSize,l=e.fontFamily,c=e.fontWeight,u=e.cssClass,h=e.backgroundColor,d=e.borderWidth,f=e.strokeDashArray,p=e.borderRadius,g=e.borderColor,v=e.appendTo,m=void 0===v?".apexcharts-annotations":v,x=e.paddingLeft,b=void 0===x?4:x,y=e.paddingRight,k=void 0===y?4:y,w=e.paddingBottom,S=void 0===w?2:w,C=e.paddingTop,I=void 0===C?2:C,A=this.w,T=this.graphics.drawText({x:n,y:a,text:r,textAnchor:i||"start",fontSize:s||"12px",fontWeight:c||"regular",fontFamily:l||A.config.chart.fontFamily,foreColor:o||A.config.chart.foreColor,cssClass:u}),N=A.globals.dom.baseEl.querySelector(m);N&&N.appendChild(T.node);var E=T.bbox();if(r){var R=this.graphics.drawRect(E.x-b,E.y-I,E.width+b+k,E.height+S+I,p,h||"transparent",1,d,g,f);N.insertBefore(R.node,T.node)}}},{key:"addImage",value:function(e,t){var n=this.w,a=e.path,r=e.x,i=void 0===r?0:r,o=e.y,s=void 0===o?0:o,l=e.width,c=void 0===l?20:l,u=e.height,h=void 0===u?20:u,d=e.appendTo,f=void 0===d?".apexcharts-annotations":d,p=n.globals.dom.Paper.image(a);p.size(c,h).move(i,s);var g=n.globals.dom.baseEl.querySelector(f);return g&&g.appendChild(p.node),p}},{key:"addXaxisAnnotationExternal",value:function(e,t,n){return this.addAnnotationExternal({params:e,pushToMemory:t,context:n,type:"xaxis",contextMethod:n.addXaxisAnnotation}),n}},{key:"addYaxisAnnotationExternal",value:function(e,t,n){return this.addAnnotationExternal({params:e,pushToMemory:t,context:n,type:"yaxis",contextMethod:n.addYaxisAnnotation}),n}},{key:"addPointAnnotationExternal",value:function(e,t,n){return void 0===this.invertAxis&&(this.invertAxis=n.w.globals.isBarHorizontal),this.addAnnotationExternal({params:e,pushToMemory:t,context:n,type:"point",contextMethod:n.addPointAnnotation}),n}},{key:"addAnnotationExternal",value:function(e){var t=e.params,n=e.pushToMemory,a=e.context,r=e.type,i=e.contextMethod,o=a,s=o.w,l=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations")),c=l.childNodes.length+1,u=new E,h=Object.assign({},"xaxis"===r?u.xAxisAnnotation:"yaxis"===r?u.yAxisAnnotation:u.pointAnnotation),d=b.extend(h,t);switch(r){case"xaxis":this.addXaxisAnnotation(d,l,c);break;case"yaxis":this.addYaxisAnnotation(d,l,c);break;case"point":this.addPointAnnotation(d,l,c)}var f=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations .apexcharts-").concat(r,"-annotation-label[rel='").concat(c,"']")),p=this.helpers.addBackgroundToAnno(f,d);return p&&l.insertBefore(p.node,f),n&&s.globals.memory.methodsToExec.push({context:o,id:d.id?d.id:b.randomId(),method:i,label:"addAnnotation",params:t}),a}},{key:"clearAnnotations",value:function(e){var t=e.w,n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");t.globals.memory.methodsToExec.map((function(e,n){"addText"!==e.label&&"addAnnotation"!==e.label||t.globals.memory.methodsToExec.splice(n,1)})),n=b.listToArray(n),Array.prototype.forEach.call(n,(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}))}},{key:"removeAnnotation",value:function(e,t){var n=e.w,a=n.globals.dom.baseEl.querySelectorAll(".".concat(t));a&&(n.globals.memory.methodsToExec.map((function(e,a){e.id===t&&n.globals.memory.methodsToExec.splice(a,1)})),Array.prototype.forEach.call(a,(function(e){e.parentElement.removeChild(e)})))}}]),e}(),F=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.opts=null,this.seriesIndex=0}return c(e,[{key:"clippedImgArea",value:function(e){var t=this.w,n=t.config,a=parseInt(t.globals.gridWidth,10),r=parseInt(t.globals.gridHeight,10),i=a>r?a:r,o=e.image,s=0,l=0;void 0===e.width&&void 0===e.height?void 0!==n.fill.image.width&&void 0!==n.fill.image.height?(s=n.fill.image.width+1,l=n.fill.image.height):(s=i+1,l=i):(s=e.width,l=e.height);var c=document.createElementNS(t.globals.SVGNS,"pattern");w.setAttrs(c,{id:e.patternID,patternUnits:e.patternUnits?e.patternUnits:"userSpaceOnUse",width:s+"px",height:l+"px"});var u=document.createElementNS(t.globals.SVGNS,"image");c.appendChild(u),u.setAttributeNS(window.SVG.xlink,"href",o),w.setAttrs(u,{x:0,y:0,preserveAspectRatio:"none",width:s+"px",height:l+"px"}),u.style.opacity=e.opacity,t.globals.dom.elDefs.node.appendChild(c)}},{key:"getSeriesIndex",value:function(e){var t=this.w;return("bar"===t.config.chart.type||"rangeBar"===t.config.chart.type)&&t.config.plotOptions.bar.distributed||"heatmap"===t.config.chart.type||"treemap"===t.config.chart.type?this.seriesIndex=e.seriesNumber:this.seriesIndex=e.seriesNumber%t.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(e){var t=this.w;this.opts=e;var n,a,r,i=this.w.config;this.seriesIndex=this.getSeriesIndex(e);var o=this.getFillColors()[this.seriesIndex];void 0!==t.globals.seriesColors[this.seriesIndex]&&(o=t.globals.seriesColors[this.seriesIndex]),"function"==typeof o&&(o=o({seriesIndex:this.seriesIndex,dataPointIndex:e.dataPointIndex,value:e.value,w:t}));var s=this.getFillType(this.seriesIndex),l=Array.isArray(i.fill.opacity)?i.fill.opacity[this.seriesIndex]:i.fill.opacity;e.color&&(o=e.color);var c=o;if(-1===o.indexOf("rgb")?o.length<9&&(c=b.hexToRgba(o,l)):o.indexOf("rgba")>-1&&(l=b.getOpacityFromRGBA(o)),e.opacity&&(l=e.opacity),"pattern"===s&&(a=this.handlePatternFill(a,o,l,c)),"gradient"===s&&(r=this.handleGradientFill(o,l,this.seriesIndex)),"image"===s){var u=i.fill.image.src,h=e.patternID?e.patternID:"";this.clippedImgArea({opacity:l,image:Array.isArray(u)?e.seriesNumber<u.length?u[e.seriesNumber]:u[0]:u,width:e.width?e.width:void 0,height:e.height?e.height:void 0,patternUnits:e.patternUnits,patternID:"pattern".concat(t.globals.cuid).concat(e.seriesNumber+1).concat(h)}),n="url(#pattern".concat(t.globals.cuid).concat(e.seriesNumber+1).concat(h,")")}else n="gradient"===s?r:"pattern"===s?a:c;return e.solid&&(n=c),n}},{key:"getFillType",value:function(e){var t=this.w;return Array.isArray(t.config.fill.type)?t.config.fill.type[e]:t.config.fill.type}},{key:"getFillColors",value:function(){var e=this.w,t=e.config,n=this.opts,a=[];return e.globals.comboCharts?"line"===e.config.series[this.seriesIndex].type?Array.isArray(e.globals.stroke.colors)?a=e.globals.stroke.colors:a.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?a=e.globals.fill.colors:a.push(e.globals.fill.colors):"line"===t.chart.type?Array.isArray(e.globals.stroke.colors)?a=e.globals.stroke.colors:a.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?a=e.globals.fill.colors:a.push(e.globals.fill.colors),void 0!==n.fillColors&&(a=[],Array.isArray(n.fillColors)?a=n.fillColors.slice():a.push(n.fillColors)),a}},{key:"handlePatternFill",value:function(e,t,n,a){var r=this.w.config,i=this.opts,o=new w(this.ctx),s=void 0===r.fill.pattern.strokeWidth?Array.isArray(r.stroke.width)?r.stroke.width[this.seriesIndex]:r.stroke.width:Array.isArray(r.fill.pattern.strokeWidth)?r.fill.pattern.strokeWidth[this.seriesIndex]:r.fill.pattern.strokeWidth,l=t;return Array.isArray(r.fill.pattern.style)?void 0!==r.fill.pattern.style[i.seriesNumber]?o.drawPattern(r.fill.pattern.style[i.seriesNumber],r.fill.pattern.width,r.fill.pattern.height,l,s,n):a:o.drawPattern(r.fill.pattern.style,r.fill.pattern.width,r.fill.pattern.height,l,s,n)}},{key:"handleGradientFill",value:function(e,t,n){var a,r=this.w.config,i=this.opts,o=new w(this.ctx),s=new b,l=r.fill.gradient.type,c=e,u=void 0===r.fill.gradient.opacityFrom?t:Array.isArray(r.fill.gradient.opacityFrom)?r.fill.gradient.opacityFrom[n]:r.fill.gradient.opacityFrom;c.indexOf("rgba")>-1&&(u=b.getOpacityFromRGBA(c));var h=void 0===r.fill.gradient.opacityTo?t:Array.isArray(r.fill.gradient.opacityTo)?r.fill.gradient.opacityTo[n]:r.fill.gradient.opacityTo;if(void 0===r.fill.gradient.gradientToColors||0===r.fill.gradient.gradientToColors.length)a="dark"===r.fill.gradient.shade?s.shadeColor(-1*parseFloat(r.fill.gradient.shadeIntensity),e.indexOf("rgb")>-1?b.rgb2hex(e):e):s.shadeColor(parseFloat(r.fill.gradient.shadeIntensity),e.indexOf("rgb")>-1?b.rgb2hex(e):e);else if(r.fill.gradient.gradientToColors[i.seriesNumber]){var d=r.fill.gradient.gradientToColors[i.seriesNumber];a=d,d.indexOf("rgba")>-1&&(h=b.getOpacityFromRGBA(d))}else a=e;if(r.fill.gradient.inverseColors){var f=c;c=a,a=f}return c.indexOf("rgb")>-1&&(c=b.rgb2hex(c)),a.indexOf("rgb")>-1&&(a=b.rgb2hex(a)),o.drawGradient(l,c,a,u,h,i.size,r.fill.gradient.stops,r.fill.gradient.colorStops,n)}}]),e}(),D=function(){function e(t,n){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"setGlobalMarkerSize",value:function(){var e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],e.globals.markers.size.length>0){if(e.globals.markers.size.length<e.globals.series.length+1)for(var t=0;t<=e.globals.series.length;t++)void 0===e.globals.markers.size[t]&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map((function(t){return e.config.markers.size}))}},{key:"plotChartMarkers",value:function(e,t,n,a){var r,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.w,s=t,l=e,c=null,u=new w(this.ctx),h=o.config.markers.discrete&&o.config.markers.discrete.length;if((o.globals.markers.size[t]>0||i||h)&&(c=u.group({class:i||h?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(o.globals.cuid,")")),Array.isArray(l.x))for(var d=0;d<l.x.length;d++){var f=n;1===n&&0===d&&(f=0),1===n&&1===d&&(f=1);var p="apexcharts-marker";"line"!==o.config.chart.type&&"area"!==o.config.chart.type||o.globals.comboCharts||o.config.tooltip.intersect||(p+=" no-pointer-events");var g=Array.isArray(o.config.markers.size)?o.globals.markers.size[t]>0:o.config.markers.size>0;if(g||i||h){b.isNumber(l.y[d])?p+=" w".concat(b.randomId()):p="apexcharts-nullpoint";var v=this.getMarkerConfig({cssClass:p,seriesIndex:t,dataPointIndex:f});o.config.series[s].data[f]&&(o.config.series[s].data[f].fillColor&&(v.pointFillColor=o.config.series[s].data[f].fillColor),o.config.series[s].data[f].strokeColor&&(v.pointStrokeColor=o.config.series[s].data[f].strokeColor)),a&&(v.pSize=a),(r=u.drawMarker(l.x[d],l.y[d],v)).attr("rel",f),r.attr("j",f),r.attr("index",t),r.node.setAttribute("default-marker-size",v.pSize);var m=new k(this.ctx);m.setSelectionFilter(r,t,f),this.addEvents(r),c&&c.add(r)}else void 0===o.globals.pointsArray[t]&&(o.globals.pointsArray[t]=[]),o.globals.pointsArray[t].push([l.x[d],l.y[d]])}return c}},{key:"getMarkerConfig",value:function(e){var t=e.cssClass,n=e.seriesIndex,a=e.dataPointIndex,r=void 0===a?null:a,i=e.finishRadius,o=void 0===i?null:i,s=this.w,l=this.getMarkerStyle(n),c=s.globals.markers.size[n],u=s.config.markers;return null!==r&&u.discrete.length&&u.discrete.map((function(e){e.seriesIndex===n&&e.dataPointIndex===r&&(l.pointStrokeColor=e.strokeColor,l.pointFillColor=e.fillColor,c=e.size,l.pointShape=e.shape)})),{pSize:null===o?c:o,pRadius:u.radius,width:Array.isArray(u.width)?u.width[n]:u.width,height:Array.isArray(u.height)?u.height[n]:u.height,pointStrokeWidth:Array.isArray(u.strokeWidth)?u.strokeWidth[n]:u.strokeWidth,pointStrokeColor:l.pointStrokeColor,pointFillColor:l.pointFillColor,shape:l.pointShape||(Array.isArray(u.shape)?u.shape[n]:u.shape),class:t,pointStrokeOpacity:Array.isArray(u.strokeOpacity)?u.strokeOpacity[n]:u.strokeOpacity,pointStrokeDashArray:Array.isArray(u.strokeDashArray)?u.strokeDashArray[n]:u.strokeDashArray,pointFillOpacity:Array.isArray(u.fillOpacity)?u.fillOpacity[n]:u.fillOpacity,seriesIndex:n}}},{key:"addEvents",value:function(e){var t=this.w,n=new w(this.ctx);e.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this.ctx,e)),e.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this.ctx,e)),e.node.addEventListener("mousedown",n.pathMouseDown.bind(this.ctx,e)),e.node.addEventListener("click",t.config.markers.onClick),e.node.addEventListener("dblclick",t.config.markers.onDblClick),e.node.addEventListener("touchstart",n.pathMouseDown.bind(this.ctx,e),{passive:!0})}},{key:"getMarkerStyle",value:function(e){var t=this.w,n=t.globals.markers.colors,a=t.config.markers.strokeColor||t.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(a)?a[e]:a,pointFillColor:Array.isArray(n)?n[e]:n}}}]),e}(),L=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return c(e,[{key:"draw",value:function(e,t,n){var a=this.w,r=new w(this.ctx),i=n.realIndex,o=n.pointsPos,s=n.zRatio,l=n.elParent,c=r.group({class:"apexcharts-series-markers apexcharts-series-".concat(a.config.chart.type)});if(c.attr("clip-path","url(#gridRectMarkerMask".concat(a.globals.cuid,")")),Array.isArray(o.x))for(var u=0;u<o.x.length;u++){var h=t+1,d=!0;0===t&&0===u&&(h=0),0===t&&1===u&&(h=1);var f=0,p=a.globals.markers.size[i];if(s!==1/0){p=a.globals.seriesZ[i][h]/s;var g=a.config.plotOptions.bubble;g.minBubbleRadius&&p<g.minBubbleRadius&&(p=g.minBubbleRadius),g.maxBubbleRadius&&p>g.maxBubbleRadius&&(p=g.maxBubbleRadius)}a.config.chart.animations.enabled||(f=p);var v=o.x[u],m=o.y[u];if(f=f||0,null!==m&&void 0!==a.globals.series[i][h]||(d=!1),d){var x=this.drawPoint(v,m,f,p,i,h,t);c.add(x)}l.add(c)}}},{key:"drawPoint",value:function(e,t,n,a,r,i,o){var s=this.w,l=r,c=new y(this.ctx),u=new k(this.ctx),h=new F(this.ctx),d=new D(this.ctx),f=new w(this.ctx),p=d.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:l,dataPointIndex:i,finishRadius:"bubble"===s.config.chart.type||s.globals.comboCharts&&s.config.series[r]&&"bubble"===s.config.series[r].type?a:null});a=p.pSize;var g,v=h.fillPath({seriesNumber:r,dataPointIndex:i,color:p.pointFillColor,patternUnits:"objectBoundingBox",value:s.globals.series[r][o]});if("circle"===p.shape?g=f.drawCircle(n):"square"!==p.shape&&"rect"!==p.shape||(g=f.drawRect(0,0,p.width-p.pointStrokeWidth/2,p.height-p.pointStrokeWidth/2,p.pRadius)),s.config.series[l].data[i]&&s.config.series[l].data[i].fillColor&&(v=s.config.series[l].data[i].fillColor),g.attr({x:e-p.width/2-p.pointStrokeWidth/2,y:t-p.height/2-p.pointStrokeWidth/2,cx:e,cy:t,fill:v,"fill-opacity":p.pointFillOpacity,stroke:p.pointStrokeColor,r:a,"stroke-width":p.pointStrokeWidth,"stroke-dasharray":p.pointStrokeDashArray,"stroke-opacity":p.pointStrokeOpacity}),s.config.chart.dropShadow.enabled){var m=s.config.chart.dropShadow;u.dropShadow(g,m,r)}if(!this.initialAnim||s.globals.dataChanged||s.globals.resized)s.globals.animationEnded=!0;else{var x=s.config.chart.animations.speed;c.animateMarker(g,0,"circle"===p.shape?a:{width:p.width,height:p.height},x,s.globals.easing,(function(){window.setTimeout((function(){c.animationCompleted(g)}),100)}))}if(s.globals.dataChanged&&"circle"===p.shape)if(this.dynamicAnim){var b,S,C,I,A=s.config.chart.animations.dynamicAnimation.speed;null!=(I=s.globals.previousPaths[r]&&s.globals.previousPaths[r][o])&&(b=I.x,S=I.y,C=void 0!==I.r?I.r:a);for(var T=0;T<s.globals.collapsedSeries.length;T++)s.globals.collapsedSeries[T].index===r&&(A=1,a=0);0===e&&0===t&&(a=0),c.animateCircle(g,{cx:b,cy:S,r:C},{cx:e,cy:t,r:a},A,s.globals.easing)}else g.attr({r:a});return g.attr({rel:i,j:i,index:r,"default-marker-size":a}),u.setSelectionFilter(g,r,i),d.addEvents(g),g.node.classList.add("apexcharts-marker"),g}},{key:"centerTextInBubble",value:function(e){var t=this.w;return{y:e+=parseInt(t.config.dataLabels.style.fontSize,10)/4}}}]),e}(),M=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"dataLabelsCorrection",value:function(e,t,n,a,r,i,o){var s=this.w,l=!1,c=new w(this.ctx).getTextRects(n,o),u=c.width,h=c.height;t<0&&(t=0),t>s.globals.gridHeight+h&&(t=s.globals.gridHeight+h/2),void 0===s.globals.dataLabelsRects[a]&&(s.globals.dataLabelsRects[a]=[]),s.globals.dataLabelsRects[a].push({x:e,y:t,width:u,height:h});var d=s.globals.dataLabelsRects[a].length-2,f=void 0!==s.globals.lastDrawnDataLabelsIndexes[a]?s.globals.lastDrawnDataLabelsIndexes[a][s.globals.lastDrawnDataLabelsIndexes[a].length-1]:0;if(void 0!==s.globals.dataLabelsRects[a][d]){var p=s.globals.dataLabelsRects[a][f];(e>p.x+p.width+2||t>p.y+p.height+2||e+u<p.x)&&(l=!0)}return(0===r||i)&&(l=!0),{x:e,y:t,textRects:c,drawnextLabel:l}}},{key:"drawDataLabel",value:function(e,t,n){var a=this,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,i=this.w,o=new w(this.ctx),s=i.config.dataLabels,l=0,c=0,u=n,h=null;if(!s.enabled||!Array.isArray(e.x))return h;h=o.group({class:"apexcharts-data-labels"});for(var d=0;d<e.x.length;d++)if(l=e.x[d]+s.offsetX,c=e.y[d]+s.offsetY+r,!isNaN(l)){1===n&&0===d&&(u=0),1===n&&1===d&&(u=1);var f=i.globals.series[t][u],p="",g=function(e){return i.config.dataLabels.formatter(e,{ctx:a.ctx,seriesIndex:t,dataPointIndex:u,w:i})};if("bubble"===i.config.chart.type){p=g(f=i.globals.seriesZ[t][u]),c=e.y[d];var v=new L(this.ctx),m=v.centerTextInBubble(c,t,u);c=m.y}else void 0!==f&&(p=g(f));this.plotDataLabelsText({x:l,y:c,text:p,i:t,j:u,parent:h,offsetCorrection:!0,dataLabelsConfig:i.config.dataLabels})}return h}},{key:"plotDataLabelsText",value:function(e){var t=this.w,n=new w(this.ctx),a=e.x,r=e.y,i=e.i,o=e.j,s=e.text,l=e.textAnchor,c=e.fontSize,u=e.parent,h=e.dataLabelsConfig,d=e.color,f=e.alwaysDrawDataLabel,p=e.offsetCorrection;if(!(Array.isArray(t.config.dataLabels.enabledOnSeries)&&t.config.dataLabels.enabledOnSeries.indexOf(i)<0)){var g={x:a,y:r,drawnextLabel:!0,textRects:null};p&&(g=this.dataLabelsCorrection(a,r,s,i,o,f,parseInt(h.style.fontSize,10))),t.globals.zoomed||(a=g.x,r=g.y),g.textRects&&(a<-10-g.textRects.width||a>t.globals.gridWidth+g.textRects.width+10)&&(s="");var v=t.globals.dataLabels.style.colors[i];(("bar"===t.config.chart.type||"rangeBar"===t.config.chart.type)&&t.config.plotOptions.bar.distributed||t.config.dataLabels.distributed)&&(v=t.globals.dataLabels.style.colors[o]),"function"==typeof v&&(v=v({series:t.globals.series,seriesIndex:i,dataPointIndex:o,w:t})),d&&(v=d);var m=h.offsetX,x=h.offsetY;if("bar"!==t.config.chart.type&&"rangeBar"!==t.config.chart.type||(m=0,x=0),g.drawnextLabel){var b=n.drawText({width:100,height:parseInt(h.style.fontSize,10),x:a+m,y:r+x,foreColor:v,textAnchor:l||h.textAnchor,text:s,fontSize:c||h.style.fontSize,fontFamily:h.style.fontFamily,fontWeight:h.style.fontWeight||"normal"});if(b.attr({class:"apexcharts-datalabel",cx:a,cy:r}),h.dropShadow.enabled){var y=h.dropShadow;new k(this.ctx).dropShadow(b,y)}u.add(b),void 0===t.globals.lastDrawnDataLabelsIndexes[i]&&(t.globals.lastDrawnDataLabelsIndexes[i]=[]),t.globals.lastDrawnDataLabelsIndexes[i].push(o)}}}},{key:"addBackgroundToDataLabel",value:function(e,t){var n=this.w,a=n.config.dataLabels.background,r=a.padding,i=a.padding/2,o=t.width,s=t.height,l=new w(this.ctx).drawRect(t.x-r,t.y-i/2,o+2*r,s+i,a.borderRadius,"transparent"===n.config.chart.background?"#fff":n.config.chart.background,a.opacity,a.borderWidth,a.borderColor);return a.dropShadow.enabled&&new k(this.ctx).dropShadow(l,a.dropShadow),l}},{key:"dataLabelsBackground",value:function(){var e=this.w;if("bubble"!==e.config.chart.type)for(var t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),n=0;n<t.length;n++){var a=t[n],r=a.getBBox(),i=null;if(r.width&&r.height&&(i=this.addBackgroundToDataLabel(a,r)),i){a.parentNode.insertBefore(i.node,a);var o=a.getAttribute("fill");!e.config.chart.animations.enabled||e.globals.resized||e.globals.dataChanged?i.attr({fill:o}):i.animate().attr({fill:o}),a.setAttribute("fill",e.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var e=this.w,t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),n=e.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),a=0;a<t.length;a++)n&&n.insertBefore(t[a],n.nextSibling)}}]),e}(),O=function(){function e(t){s(this,e),this.w=t.w,this.barCtx=t}return c(e,[{key:"handleBarDataLabels",value:function(e){var t=e.x,n=e.y,a=e.y1,r=e.y2,i=e.i,o=e.j,s=e.realIndex,l=e.series,c=e.barHeight,u=e.barWidth,h=e.barYPosition,d=e.visibleSeries,f=e.renderedPath,p=this.w,g=new w(this.barCtx.ctx),v=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[s]:this.barCtx.strokeWidth,m=t+parseFloat(u*d),x=n+parseFloat(c*d);p.globals.isXNumeric&&!p.globals.isBarHorizontal&&(m=t+parseFloat(u*(d+1)),x=n+parseFloat(c*(d+1))-v);var b,y=t,k=n,S=p.config.dataLabels,C=this.barCtx.barOptions.dataLabels;void 0!==h&&this.barCtx.isRangeBar&&(x=h,k=h);var I=S.offsetX,A=S.offsetY,T={width:0,height:0};if(p.config.dataLabels.enabled){var N=this.barCtx.series[i][o];T=g.getTextRects(p.globals.yLabelFormatters[0](N),parseFloat(S.style.fontSize))}var E={x:t,y:n,i:i,j:o,renderedPath:f,bcx:m,bcy:x,barHeight:c,barWidth:u,textRects:T,strokeWidth:v,dataLabelsX:y,dataLabelsY:k,barDataLabelsConfig:C,offX:I,offY:A};return b=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(E):this.calculateColumnsDataLabelsPosition(E),f.attr({cy:b.bcy,cx:b.bcx,j:o,val:l[i][o],barHeight:c,barWidth:u}),this.drawCalculatedDataLabels({x:b.dataLabelsX,y:b.dataLabelsY,val:this.barCtx.isRangeBar?[a,r]:l[i][o],i:s,j:o,barWidth:u,barHeight:c,textRects:T,dataLabelsConfig:S})}},{key:"calculateColumnsDataLabelsPosition",value:function(e){var t,n=this.w,a=e.i,r=e.j,i=e.y,o=e.bcx,s=e.barWidth,l=e.barHeight,c=e.textRects,u=e.dataLabelsY,h=e.barDataLabelsConfig,d=e.strokeWidth,f=e.offX,p=e.offY;l=Math.abs(l);var g="vertical"===n.config.plotOptions.bar.dataLabels.orientation;o-=d/2;var v=n.globals.gridWidth/n.globals.dataPoints;t=n.globals.isXNumeric?o-s/2+f:o-v+s/2+f,g&&(t=t+c.height/2-d/2-2);var m=this.barCtx.series[a][r]<0,x=i;switch(this.barCtx.isReversed&&(x=i-l+(m?2*l:0),i-=l),h.position){case"center":u=g?m?x+l/2+p:x+l/2-p:m?x-l/2+c.height/2+p:x+l/2+c.height/2-p;break;case"bottom":u=g?m?x+l+p:x+l-p:m?x-l+c.height+d+p:x+l-c.height/2+d-p;break;case"top":u=g?m?x+p:x-p:m?x-c.height/2-p:x+c.height+p}return n.config.chart.stacked||(u<0?u=0+d:u+c.height/3>n.globals.gridHeight&&(u=n.globals.gridHeight-d)),{bcx:o,bcy:i,dataLabelsX:t,dataLabelsY:u}}},{key:"calculateBarsDataLabelsPosition",value:function(e){var t=this.w,n=e.x,a=e.i,r=e.j,i=e.bcy,o=e.barHeight,s=e.barWidth,l=e.textRects,c=e.dataLabelsX,u=e.strokeWidth,h=e.barDataLabelsConfig,d=e.offX,f=e.offY,p=t.globals.gridHeight/t.globals.dataPoints;s=Math.abs(s);var g=i-(this.barCtx.isRangeBar?0:p)+o/2+l.height/2+f-3,v=this.barCtx.series[a][r]<0,m=n;switch(this.barCtx.isReversed&&(m=n+s-(v?2*s:0),n=t.globals.gridWidth-s),h.position){case"center":c=v?m+s/2-d:Math.max(l.width/2,m-s/2)+d;break;case"bottom":c=v?m+s-u-Math.round(l.width/2)-d:m-s+u+Math.round(l.width/2)+d;break;case"top":c=v?m-u+Math.round(l.width/2)-d:m-u-Math.round(l.width/2)+d}return t.config.chart.stacked||(c<0?c=c+l.width+u:c+l.width/2>t.globals.gridWidth&&(c=t.globals.gridWidth-l.width-u)),{bcx:n,bcy:i,dataLabelsX:c,dataLabelsY:g}}},{key:"drawCalculatedDataLabels",value:function(e){var t=e.x,n=e.y,a=e.val,r=e.i,o=e.j,s=e.textRects,l=e.barHeight,c=e.barWidth,u=e.dataLabelsConfig,h=this.w,d="rotate(0)";"vertical"===h.config.plotOptions.bar.dataLabels.orientation&&(d="rotate(-90, ".concat(t,", ").concat(n,")"));var f=new M(this.barCtx.ctx),p=new w(this.barCtx.ctx),g=u.formatter,v=null,m=h.globals.collapsedSeriesIndices.indexOf(r)>-1;if(u.enabled&&!m){v=p.group({class:"apexcharts-data-labels",transform:d});var x="";void 0!==a&&(x=g(a,{seriesIndex:r,dataPointIndex:o,w:h}));var b=h.globals.series[r][o]<0,y=h.config.plotOptions.bar.dataLabels.position;"vertical"===h.config.plotOptions.bar.dataLabels.orientation&&("top"===y&&(u.textAnchor=b?"end":"start"),"center"===y&&(u.textAnchor="middle"),"bottom"===y&&(u.textAnchor=b?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&c<p.getTextRects(x,parseFloat(u.style.fontSize)).width&&(x=""),h.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?s.width/1.6>Math.abs(c)&&(x=""):s.height/1.6>Math.abs(l)&&(x=""));var k=i({},u);this.barCtx.isHorizontal&&a<0&&("start"===u.textAnchor?k.textAnchor="end":"end"===u.textAnchor&&(k.textAnchor="start")),f.plotDataLabelsText({x:t,y:n,text:x,i:r,j:o,parent:v,dataLabelsConfig:k,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return v}}]),e}(),P=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.legendInactiveClass="legend-mouseover-inactive"}return c(e,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(e){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(b.escapeString(e),"']"))}},{key:"isSeriesHidden",value:function(e){var t=this.getSeriesByName(e),n=parseInt(t.getAttribute("data:realIndex"),10);return{isHidden:t.classList.contains("apexcharts-series-collapsed"),realIndex:n}}},{key:"addCollapsedClassToSeries",value:function(e,t){var n=this.w;function a(n){for(var a=0;a<n.length;a++)n[a].index===t&&e.node.classList.add("apexcharts-series-collapsed")}a(n.globals.collapsedSeries),a(n.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(e){var t=this.isSeriesHidden(e);return this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,t.isHidden),t.isHidden}},{key:"showSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!0)}},{key:"hideSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!1)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this.w,r=b.clone(a.globals.initialSeries);a.globals.previousPaths=[],n?(a.globals.collapsedSeries=[],a.globals.ancillaryCollapsedSeries=[],a.globals.collapsedSeriesIndices=[],a.globals.ancillaryCollapsedSeriesIndices=[]):r=this.emptyCollapsedSeries(r),a.config.series=r,e&&(t&&(a.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(r,a.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(e){for(var t=this.w,n=0;n<e.length;n++)t.globals.collapsedSeriesIndices.indexOf(n)>-1&&(e[n].data=[]);return e}},{key:"toggleSeriesOnHover",value:function(e,t){var n=this.w;t||(t=e.target);var a=n.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===e.type){var r=parseInt(t.getAttribute("rel"),10)-1,i=null,o=null;n.globals.axisCharts||"radialBar"===n.config.chart.type?n.globals.axisCharts?(i=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(r,"']")),o=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(r,"']"))):i=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"']")):i=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"'] path"));for(var s=0;s<a.length;s++)a[s].classList.add(this.legendInactiveClass);null!==i&&(n.globals.axisCharts||i.parentNode.classList.remove(this.legendInactiveClass),i.classList.remove(this.legendInactiveClass),null!==o&&o.classList.remove(this.legendInactiveClass))}else if("mouseout"===e.type)for(var l=0;l<a.length;l++)a[l].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(e,t){var n=this,a=this.w,r=a.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),i=function(e){for(var t=0;t<r.length;t++)r[t].classList[e](n.legendInactiveClass)};if("mousemove"===e.type){var o=parseInt(t.getAttribute("rel"),10)-1;i("add"),function(e){for(var t=0;t<r.length;t++){var a=parseInt(r[t].getAttribute("val"),10);a>=e.from&&a<=e.to&&r[t].classList.remove(n.legendInactiveClass)}}(a.config.plotOptions.heatmap.colorScale.ranges[o])}else"mouseout"===e.type&&i("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=this.w,a=0;if(n.config.series.length>1)for(var r=n.config.series.map((function(t,a){var r=!1;return e&&(r="bar"===n.config.series[a].type||"column"===n.config.series[a].type),t.data&&t.data.length>0&&!r?a:-1})),i="asc"===t?0:r.length-1;"asc"===t?i<r.length:i>=0;"asc"===t?i++:i--)if(-1!==r[i]){a=r[i];break}return a}},{key:"getPreviousPaths",value:function(){var e=this.w;function t(t,n,a){for(var r=t[n].childNodes,i={type:a,paths:[],realIndex:t[n].getAttribute("data:realIndex")},o=0;o<r.length;o++)if(r[o].hasAttribute("pathTo")){var s=r[o].getAttribute("pathTo");i.paths.push({d:s})}e.globals.previousPaths.push(i)}e.globals.previousPaths=[],["line","area","bar","rangebar","candlestick","radar"].forEach((function(n){for(var a,r=(a=n,e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(a,"-series .apexcharts-series"))),i=0;i<r.length;i++)t(r,i,n)})),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series"));if(n.length>0)for(var a=function(t){for(var n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(t,"'] rect")),a=[],r=function(e){var t=function(t){return n[e].getAttribute(t)},r={x:parseFloat(t("x")),y:parseFloat(t("y")),width:parseFloat(t("width")),height:parseFloat(t("height"))};a.push({rect:r,color:n[e].getAttribute("color")})},i=0;i<n.length;i++)r(i);e.globals.previousPaths.push(a)},r=0;r<n.length;r++)a(r);e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(e){var t=this.w,n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series"));if(n.length>0)for(var a=0;a<n.length;a++){for(var r=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series[data\\:realIndex='").concat(a,"'] circle")),i=[],o=0;o<r.length;o++)i.push({x:r[o].getAttribute("cx"),y:r[o].getAttribute("cy"),r:r[o].getAttribute("r")});t.globals.previousPaths.push(i)}}},{key:"clearPreviousPaths",value:function(){var e=this.w;e.globals.previousPaths=[],e.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var e=this.w,t=e.config.noData,n=new w(this.ctx),a=e.globals.svgWidth/2,r=e.globals.svgHeight/2,i="middle";if(e.globals.noData=!0,e.globals.animationEnded=!0,"left"===t.align?(a=10,i="start"):"right"===t.align&&(a=e.globals.svgWidth-10,i="end"),"top"===t.verticalAlign?r=50:"bottom"===t.verticalAlign&&(r=e.globals.svgHeight-50),a+=t.offsetX,r=r+parseInt(t.style.fontSize,10)+2+t.offsetY,void 0!==t.text&&""!==t.text){var o=n.drawText({x:a,y:r,text:t.text,textAnchor:i,fontSize:t.style.fontSize,fontFamily:t.style.fontFamily,foreColor:t.style.color,opacity:1,class:"apexcharts-text-nodata"});e.globals.dom.Paper.add(o)}}},{key:"setNullSeriesToZeroValues",value:function(e){for(var t=this.w,n=0;n<e.length;n++)if(0===e[n].length)for(var a=0;a<e[t.globals.maxValsInArrayIndex].length;a++)e[n].push(0);return e}},{key:"hasAllSeriesEqualX",value:function(){for(var e=!0,t=this.w,n=this.filteredSeriesX(),a=0;a<n.length-1;a++)if(n[a][0]!==n[a+1][0]){e=!1;break}return t.globals.allSeriesHasEqualX=e,e}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map((function(e){return e.length>0?e:[]}))}}]),e}(),_=function(){function e(t){s(this,e),this.w=t.w,this.barCtx=t}return c(e,[{key:"initVariables",value:function(e){var t=this.w;this.barCtx.series=e,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var n=0;n<e.length;n++)if(e[n].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=e[n].length),t.globals.isXNumeric)for(var a=0;a<e[n].length;a++)t.globals.seriesX[n][a]>t.globals.minX&&t.globals.seriesX[n][a]<t.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=t.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],this.barCtx.radiusOnSeriesNumber=e.length-1,t.globals.comboCharts||this.checkZeroSeries({series:e})}},{key:"initialPositions",value:function(){var e,t,n,a,r,i,o,s,l=this.w,c=l.globals.dataPoints;this.barCtx.isRangeBar&&(c=l.globals.labels.length);var u=this.barCtx.seriesLen;if(l.config.plotOptions.bar.rangeBarGroupRows&&(u=1),this.barCtx.isHorizontal)r=(n=l.globals.gridHeight/c)/u,l.globals.isXNumeric&&(r=(n=l.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),r=r*parseInt(this.barCtx.barOptions.barHeight,10)/100,s=this.barCtx.baseLineInvertedY+l.globals.padHorizontal+(this.barCtx.isReversed?l.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),t=(n-r*this.barCtx.seriesLen)/2;else{if(a=l.globals.gridWidth/this.barCtx.visibleItems,l.config.xaxis.convertedCatToNumeric&&(a=l.globals.gridWidth/l.globals.dataPoints),i=a/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,l.globals.isXNumeric){var h=this.barCtx.xRatio;l.config.xaxis.convertedCatToNumeric&&(h=this.barCtx.initialXRatio),l.globals.minXDiff&&.5!==l.globals.minXDiff&&l.globals.minXDiff/h>0&&(a=l.globals.minXDiff/h),(i=a/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(i=1)}o=l.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?l.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),e=l.globals.padHorizontal+(a-i*this.barCtx.seriesLen)/2}return{x:e,y:t,yDivision:n,xDivision:a,barHeight:r,barWidth:i,zeroH:o,zeroW:s}}},{key:"getPathFillColor",value:function(e,t,n,a){var r=this.w,i=new F(this.barCtx.ctx),o=null,s=this.barCtx.barOptions.distributed?n:t;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map((function(a){e[t][n]>=a.from&&e[t][n]<=a.to&&(o=a.color)})),r.config.series[t].data[n]&&r.config.series[t].data[n].fillColor&&(o=r.config.series[t].data[n].fillColor),i.fillPath({seriesNumber:this.barCtx.barOptions.distributed?s:a,dataPointIndex:n,color:o,value:e[t][n]})}},{key:"getStrokeWidth",value:function(e,t,n){var a=0,r=this.w;return void 0===this.barCtx.series[e][t]||null===this.barCtx.series[e][t]?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,r.config.stroke.show&&(this.barCtx.isNullValue||(a=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[n]:this.barCtx.strokeWidth)),a}},{key:"barBackground",value:function(e){var t=e.j,n=e.i,a=e.x1,r=e.x2,i=e.y1,o=e.y2,s=e.elSeries,l=this.w,c=new w(this.barCtx.ctx),u=new P(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&u===n){t>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(t%=this.barCtx.barOptions.colors.backgroundBarColors.length);var h=this.barCtx.barOptions.colors.backgroundBarColors[t],d=c.drawRect(void 0!==a?a:0,void 0!==i?i:0,void 0!==r?r:l.globals.gridWidth,void 0!==o?o:l.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,h,this.barCtx.barOptions.colors.backgroundBarOpacity);s.add(d),d.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(e){var t=e.barWidth,n=e.barXPosition,a=e.yRatio,r=e.y1,i=e.y2,o=e.strokeWidth,s=e.series,l=e.realIndex,c=e.i,u=e.j,h=e.w,d=new w(this.barCtx.ctx);(o=Array.isArray(o)?o[l]:o)||(o=0);var f={barWidth:t,strokeWidth:o,yRatio:a,barXPosition:n,y1:r,y2:i},p=this.getRoundedBars(h,f,s,c,u),g=n,v=n+t,m=d.move(g,r),x=d.move(g,r),b=d.line(v-o,r);return h.globals.previousPaths.length>0&&(x=this.barCtx.getPreviousPath(l,u,!1)),m=m+d.line(g,p.y2)+p.pathWithRadius+d.line(v-o,p.y2)+b+b+"z",x=x+d.line(g,r)+b+b+b+b+b+d.line(g,r),h.config.chart.stacked&&(this.barCtx.yArrj.push(p.y2),this.barCtx.yArrjF.push(Math.abs(r-p.y2)),this.barCtx.yArrjVal.push(this.barCtx.series[c][u])),{pathTo:m,pathFrom:x}}},{key:"getBarpaths",value:function(e){var t=e.barYPosition,n=e.barHeight,a=e.x1,r=e.x2,i=e.strokeWidth,o=e.series,s=e.realIndex,l=e.i,c=e.j,u=e.w,h=new w(this.barCtx.ctx);(i=Array.isArray(i)?i[s]:i)||(i=0);var d={barHeight:n,strokeWidth:i,barYPosition:t,x2:r,x1:a},f=this.getRoundedBars(u,d,o,l,c),p=h.move(a,t),g=h.move(a,t);u.globals.previousPaths.length>0&&(g=this.barCtx.getPreviousPath(s,c,!1));var v=t,m=t+n,x=h.line(a,m-i);return p=p+h.line(f.x2,v)+f.pathWithRadius+h.line(f.x2,m-i)+x+x+"z",g=g+h.line(a,v)+x+x+x+x+x+h.line(a,v),u.config.chart.stacked&&(this.barCtx.xArrj.push(f.x2),this.barCtx.xArrjF.push(Math.abs(a-f.x2)),this.barCtx.xArrjVal.push(this.barCtx.series[l][c])),{pathTo:p,pathFrom:g}}},{key:"getRoundedBars",value:function(e,t,n,a,r){var i=new w(this.barCtx.ctx),o=0,s=e.config.plotOptions.bar.borderRadius,l=Array.isArray(s);if(o=l?s[a>s.length-1?s.length-1:a]:s,e.config.chart.stacked&&n.length>1&&a!==this.barCtx.radiusOnSeriesNumber&&!l&&(o=0),this.barCtx.isHorizontal){var c="",u=t.x2;if(Math.abs(t.x1-t.x2)<o&&(o=Math.abs(t.x1-t.x2)),void 0!==n[a][r]||null!==n[a][r]){var h=this.barCtx.isReversed?n[a][r]>0:n[a][r]<0;h&&(o*=-1),u-=o,c=i.quadraticCurve(u+o,t.barYPosition,u+o,t.barYPosition+(h?-1*o:o))+i.line(u+o,t.barYPosition+t.barHeight-t.strokeWidth-(h?-1*o:o))+i.quadraticCurve(u+o,t.barYPosition+t.barHeight-t.strokeWidth,u,t.barYPosition+t.barHeight-t.strokeWidth)}return{pathWithRadius:c,x2:u}}var d="",f=t.y2;if(Math.abs(t.y1-t.y2)<o&&(o=Math.abs(t.y1-t.y2)),void 0!==n[a][r]||null!==n[a][r]){var p=n[a][r]<0;p&&(o*=-1),f+=o,d=i.quadraticCurve(t.barXPosition,f-o,t.barXPosition+(p?-1*o:o),f-o)+i.line(t.barXPosition+t.barWidth-t.strokeWidth-(p?-1*o:o),f-o)+i.quadraticCurve(t.barXPosition+t.barWidth-t.strokeWidth,f-o,t.barXPosition+t.barWidth-t.strokeWidth,f)}return{pathWithRadius:d,y2:f}}},{key:"checkZeroSeries",value:function(e){for(var t=e.series,n=this.w,a=0;a<t.length;a++){for(var r=0,i=0;i<t[n.globals.maxValsInArrayIndex].length;i++)r+=t[a][i];0===r&&this.barCtx.zeroSerieses.push(a)}for(var o=t.length-1;o>=0;o--)this.barCtx.zeroSerieses.indexOf(o)>-1&&o===this.radiusOnSeriesNumber&&(this.barCtx.radiusOnSeriesNumber-=1);for(var s=t.length-1;s>=0;s--)n.globals.collapsedSeriesIndices.indexOf(this.barCtx.radiusOnSeriesNumber)>-1&&(this.barCtx.radiusOnSeriesNumber-=1)}},{key:"getXForValue",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=n?t:null;return null!=e&&(a=t+e/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?e/this.barCtx.invertedYRatio:0)),a}},{key:"getYForValue",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=n?t:null;return null!=e&&(a=t-e/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?e/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),a}},{key:"getGoalValues",value:function(e,t,n,a,r){var i=this,o=this.w,s=[];return o.globals.seriesGoals[a]&&o.globals.seriesGoals[a][r]&&Array.isArray(o.globals.seriesGoals[a][r])&&o.globals.seriesGoals[a][r].forEach((function(a){var r;s.push((u(r={},e,"x"===e?i.getXForValue(a.value,t,!1):i.getYForValue(a.value,n,!1)),u(r,"attrs",a),r))})),s}},{key:"drawGoalLine",value:function(e){var t=e.barXPosition,n=e.barYPosition,a=e.goalX,r=e.goalY,i=e.barWidth,o=e.barHeight,s=new w(this.barCtx.ctx),l=s.group({className:"apexcharts-bar-goals-groups"}),c=null;return this.barCtx.isHorizontal?Array.isArray(a)&&a.forEach((function(e){var t=void 0!==e.attrs.strokeHeight?e.attrs.strokeHeight:o/2,a=n+t+o/2;c=s.drawLine(e.x,a-2*t,e.x,a,e.attrs.strokeColor?e.attrs.strokeColor:void 0,e.attrs.strokeDashArray,e.attrs.strokeWidth?e.attrs.strokeWidth:2,e.attrs.strokeLineCap),l.add(c)})):Array.isArray(r)&&r.forEach((function(e){var n=void 0!==e.attrs.strokeWidth?e.attrs.strokeWidth:i/2,a=t+n+i/2;c=s.drawLine(a-2*n,e.y,a,e.y,e.attrs.strokeColor?e.attrs.strokeColor:void 0,e.attrs.strokeDashArray,e.attrs.strokeHeight?e.attrs.strokeHeight:2,e.attrs.strokeLineCap),l.add(c)})),l}}]),e}(),z=function(){function e(t,n){s(this,e),this.ctx=t,this.w=t.w;var a=this.w;this.barOptions=a.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=a.config.stroke.width,this.isNullValue=!1,this.isRangeBar=a.globals.seriesRangeBar.length&&this.isHorizontal,this.xyRatios=n,null!==this.xyRatios&&(this.xRatio=n.xRatio,this.initialXRatio=n.initialXRatio,this.yRatio=n.yRatio,this.invertedXRatio=n.invertedXRatio,this.invertedYRatio=n.invertedYRatio,this.baseLineY=n.baseLineY,this.baseLineInvertedY=n.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.barHelpers=new _(this)}return c(e,[{key:"draw",value:function(e,t){var n=this.w,a=new w(this.ctx),r=new S(this.ctx,n);e=r.getLogSeries(e),this.series=e,this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);var o=a.group({class:"apexcharts-bar-series apexcharts-plot-series"});n.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var s=0,l=0;s<e.length;s++,l++){var c,u,h,d,f=void 0,p=void 0,g=[],v=[],m=n.globals.comboCharts?t[s]:s,x=a.group({class:"apexcharts-series",rel:s+1,seriesName:b.escapeString(n.globals.seriesNames[m]),"data:realIndex":m});this.ctx.series.addCollapsedClassToSeries(x,m),e[s].length>0&&(this.visibleI=this.visibleI+1);var y=0,k=0;this.yRatio.length>1&&(this.yaxisIndex=m),this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed;var C=this.barHelpers.initialPositions();p=C.y,y=C.barHeight,u=C.yDivision,d=C.zeroW,f=C.x,k=C.barWidth,c=C.xDivision,h=C.zeroH,this.horizontal||v.push(f+k/2);for(var I=a.group({class:"apexcharts-datalabels","data:realIndex":m}),A=a.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),T=0;T<n.globals.dataPoints;T++){var N=this.barHelpers.getStrokeWidth(s,T,m),E=null,R={indexes:{i:s,j:T,realIndex:m,bc:l},x:f,y:p,strokeWidth:N,elSeries:x};this.isHorizontal?(E=this.drawBarPaths(i(i({},R),{},{barHeight:y,zeroW:d,yDivision:u})),k=this.series[s][T]/this.invertedYRatio):(E=this.drawColumnPaths(i(i({},R),{},{xDivision:c,barWidth:k,zeroH:h})),y=this.series[s][T]/this.yRatio[this.yaxisIndex]);var F=this.barHelpers.drawGoalLine({barXPosition:E.barXPosition,barYPosition:E.barYPosition,goalX:E.goalX,goalY:E.goalY,barHeight:y,barWidth:k});F&&A.add(F),p=E.y,f=E.x,T>0&&v.push(f+k/2),g.push(p);var D=this.barHelpers.getPathFillColor(e,s,T,m);this.renderSeries({realIndex:m,pathFill:D,j:T,i:s,pathFrom:E.pathFrom,pathTo:E.pathTo,strokeWidth:N,elSeries:x,x:f,y:p,series:e,barHeight:y,barWidth:k,elDataLabelsWrap:I,elGoalsMarkers:A,visibleSeries:this.visibleI,type:"bar"})}n.globals.seriesXvalues[m]=v,n.globals.seriesYvalues[m]=g,o.add(x)}return o}},{key:"renderSeries",value:function(e){var t=e.realIndex,n=e.pathFill,a=e.lineFill,r=e.j,i=e.i,o=e.pathFrom,s=e.pathTo,l=e.strokeWidth,c=e.elSeries,u=e.x,h=e.y,d=e.y1,f=e.y2,p=e.series,g=e.barHeight,v=e.barWidth,m=e.barYPosition,x=e.elDataLabelsWrap,b=e.elGoalsMarkers,y=e.visibleSeries,S=e.type,C=this.w,I=new w(this.ctx);a||(a=this.barOptions.distributed?C.globals.stroke.colors[r]:C.globals.stroke.colors[t]),C.config.series[i].data[r]&&C.config.series[i].data[r].strokeColor&&(a=C.config.series[i].data[r].strokeColor),this.isNullValue&&(n="none");var A=r/C.config.chart.animations.animateGradually.delay*(C.config.chart.animations.speed/C.globals.dataPoints)/2.4,T=I.renderPaths({i:i,j:r,realIndex:t,pathFrom:o,pathTo:s,stroke:a,strokeWidth:l,strokeLineCap:C.config.stroke.lineCap,fill:n,animationDelay:A,initialSpeed:C.config.chart.animations.speed,dataChangeSpeed:C.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(S,"-area")});T.attr("clip-path","url(#gridRectMask".concat(C.globals.cuid,")"));var N=C.config.forecastDataPoints;N.count>0&&r>=C.globals.dataPoints-N.count&&(T.node.setAttribute("stroke-dasharray",N.dashArray),T.node.setAttribute("stroke-width",N.strokeWidth),T.node.setAttribute("fill-opacity",N.fillOpacity)),void 0!==d&&void 0!==f&&(T.attr("data-range-y1",d),T.attr("data-range-y2",f)),new k(this.ctx).setSelectionFilter(T,t,r),c.add(T);var E=new O(this).handleBarDataLabels({x:u,y:h,y1:d,y2:f,i:i,j:r,series:p,realIndex:t,barHeight:g,barWidth:v,barYPosition:m,renderedPath:T,visibleSeries:y});return null!==E&&x.add(E),c.add(x),b&&c.add(b),c}},{key:"drawBarPaths",value:function(e){var t=e.indexes,n=e.barHeight,a=e.strokeWidth,r=e.zeroW,i=e.x,o=e.y,s=e.yDivision,l=e.elSeries,c=this.w,u=t.i,h=t.j;c.globals.isXNumeric&&(o=(c.globals.seriesX[u][h]-c.globals.minX)/this.invertedXRatio-n);var d=o+n*this.visibleI;i=this.barHelpers.getXForValue(this.series[u][h],r);var f=this.barHelpers.getBarpaths({barYPosition:d,barHeight:n,x1:r,x2:i,strokeWidth:a,series:this.series,realIndex:t.realIndex,i:u,j:h,w:c});return c.globals.isXNumeric||(o+=s),this.barHelpers.barBackground({j:h,i:u,y1:d-n*this.visibleI,y2:n*this.seriesLen,elSeries:l}),{pathTo:f.pathTo,pathFrom:f.pathFrom,x:i,y:o,goalX:this.barHelpers.getGoalValues("x",r,null,u,h),barYPosition:d}}},{key:"drawColumnPaths",value:function(e){var t=e.indexes,n=e.x,a=e.y,r=e.xDivision,i=e.barWidth,o=e.zeroH,s=e.strokeWidth,l=e.elSeries,c=this.w,u=t.realIndex,h=t.i,d=t.j,f=t.bc;if(c.globals.isXNumeric){var p=u;c.globals.seriesX[u].length||(p=c.globals.maxValsInArrayIndex),n=(c.globals.seriesX[p][d]-c.globals.minX)/this.xRatio-i*this.seriesLen/2}var g=n+i*this.visibleI;a=this.barHelpers.getYForValue(this.series[h][d],o);var v=this.barHelpers.getColumnPaths({barXPosition:g,barWidth:i,y1:o,y2:a,strokeWidth:s,series:this.series,realIndex:t.realIndex,i:h,j:d,w:c});return c.globals.isXNumeric||(n+=r),this.barHelpers.barBackground({bc:f,j:d,i:h,x1:g-s/2-i*this.visibleI,x2:i*this.seriesLen+s/2,elSeries:l}),{pathTo:v.pathTo,pathFrom:v.pathFrom,x:n,y:a,goalY:this.barHelpers.getGoalValues("y",null,o,h,d),barXPosition:g}}},{key:"getPreviousPath",value:function(e,t){for(var n,a=this.w,r=0;r<a.globals.previousPaths.length;r++){var i=a.globals.previousPaths[r];i.paths&&i.paths.length>0&&parseInt(i.realIndex,10)===parseInt(e,10)&&void 0!==a.globals.previousPaths[r].paths[t]&&(n=a.globals.previousPaths[r].paths[t].d)}return n}}]),e}(),B=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return c(e,[{key:"isValidDate",value:function(e){return!isNaN(this.parseDate(e))}},{key:"getTimeStamp",value:function(e){return Date.parse(e)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toISOString().substr(0,25)).getTime():new Date(e).getTime():e}},{key:"getDate",value:function(e){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toUTCString()):new Date(e)}},{key:"parseDate",value:function(e){var t=Date.parse(e);if(!isNaN(t))return this.getTimeStamp(e);var n=Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(n)}},{key:"parseDateWithTimezone",value:function(e){return Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(e,t){var n=this.w.globals.locale,a=this.w.config.xaxis.labels.datetimeUTC,r=["\0"].concat(v(n.months)),i=["\x01"].concat(v(n.shortMonths)),o=["\x02"].concat(v(n.days)),s=["\x03"].concat(v(n.shortDays));function l(e,t){var n=e+"";for(t=t||2;n.length<t;)n="0"+n;return n}var c=a?e.getUTCFullYear():e.getFullYear();t=(t=(t=t.replace(/(^|[^\\])yyyy+/g,"$1"+c)).replace(/(^|[^\\])yy/g,"$1"+c.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+c);var u=(a?e.getUTCMonth():e.getMonth())+1;t=(t=(t=(t=t.replace(/(^|[^\\])MMMM+/g,"$1"+r[0])).replace(/(^|[^\\])MMM/g,"$1"+i[0])).replace(/(^|[^\\])MM/g,"$1"+l(u))).replace(/(^|[^\\])M/g,"$1"+u);var h=a?e.getUTCDate():e.getDate();t=(t=(t=(t=t.replace(/(^|[^\\])dddd+/g,"$1"+o[0])).replace(/(^|[^\\])ddd/g,"$1"+s[0])).replace(/(^|[^\\])dd/g,"$1"+l(h))).replace(/(^|[^\\])d/g,"$1"+h);var d=a?e.getUTCHours():e.getHours(),f=d>12?d-12:0===d?12:d;t=(t=(t=(t=t.replace(/(^|[^\\])HH+/g,"$1"+l(d))).replace(/(^|[^\\])H/g,"$1"+d)).replace(/(^|[^\\])hh+/g,"$1"+l(f))).replace(/(^|[^\\])h/g,"$1"+f);var p=a?e.getUTCMinutes():e.getMinutes();t=(t=t.replace(/(^|[^\\])mm+/g,"$1"+l(p))).replace(/(^|[^\\])m/g,"$1"+p);var g=a?e.getUTCSeconds():e.getSeconds();t=(t=t.replace(/(^|[^\\])ss+/g,"$1"+l(g))).replace(/(^|[^\\])s/g,"$1"+g);var m=a?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+l(m,3)),m=Math.round(m/10),t=t.replace(/(^|[^\\])ff/g,"$1"+l(m)),m=Math.round(m/10);var x=d<12?"AM":"PM";t=(t=(t=t.replace(/(^|[^\\])f/g,"$1"+m)).replace(/(^|[^\\])TT+/g,"$1"+x)).replace(/(^|[^\\])T/g,"$1"+x.charAt(0));var b=x.toLowerCase();t=(t=t.replace(/(^|[^\\])tt+/g,"$1"+b)).replace(/(^|[^\\])t/g,"$1"+b.charAt(0));var y=-e.getTimezoneOffset(),k=a||!y?"Z":y>0?"+":"-";if(!a){var w=(y=Math.abs(y))%60;k+=l(Math.floor(y/60))+":"+l(w)}t=t.replace(/(^|[^\\])K/g,"$1"+k);var S=(a?e.getUTCDay():e.getDay())+1;return(t=(t=(t=(t=t.replace(new RegExp(o[0],"g"),o[S])).replace(new RegExp(s[0],"g"),s[S])).replace(new RegExp(r[0],"g"),r[u])).replace(new RegExp(i[0],"g"),i[u])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(e,t,n){var a=this.w;void 0!==a.config.xaxis.min&&(e=a.config.xaxis.min),void 0!==a.config.xaxis.max&&(t=a.config.xaxis.max);var r=this.getDate(e),i=this.getDate(t),o=this.formatDate(r,"yyyy MM dd HH mm ss fff").split(" "),s=this.formatDate(i,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(o[6],10),maxMillisecond:parseInt(s[6],10),minSecond:parseInt(o[5],10),maxSecond:parseInt(s[5],10),minMinute:parseInt(o[4],10),maxMinute:parseInt(s[4],10),minHour:parseInt(o[3],10),maxHour:parseInt(s[3],10),minDate:parseInt(o[2],10),maxDate:parseInt(s[2],10),minMonth:parseInt(o[1],10)-1,maxMonth:parseInt(s[1],10)-1,minYear:parseInt(o[0],10),maxYear:parseInt(s[0],10)}}},{key:"isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"calculcateLastDaysOfMonth",value:function(e,t,n){return this.determineDaysOfMonths(e,t)-n}},{key:"determineDaysOfYear",value:function(e){var t=365;return this.isLeapYear(e)&&(t=366),t}},{key:"determineRemainingDaysOfYear",value:function(e,t,n){var a=this.daysCntOfYear[t]+n;return t>1&&this.isLeapYear()&&a++,a}},{key:"determineDaysOfMonths",value:function(e,t){var n=30;switch(e=b.monthMod(e),!0){case this.months30.indexOf(e)>-1:2===e&&(n=this.isLeapYear(t)?29:28);break;case this.months31.indexOf(e)>-1:default:n=31}return n}}]),e}(),W=function(e){h(n,z);var t=g(n);function n(){return s(this,n),t.apply(this,arguments)}return c(n,[{key:"draw",value:function(e,t){var n=this.w,a=new w(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=e,this.seriesRangeStart=n.globals.seriesRangeStart,this.seriesRangeEnd=n.globals.seriesRangeEnd,this.barHelpers.initVariables(e);for(var r=a.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),o=0;o<e.length;o++){var s,l,c,u=void 0,h=void 0,d=void 0,f=n.globals.comboCharts?t[o]:o,p=a.group({class:"apexcharts-series",seriesName:b.escapeString(n.globals.seriesNames[f]),rel:o+1,"data:realIndex":f});this.ctx.series.addCollapsedClassToSeries(p,f),e[o].length>0&&(this.visibleI=this.visibleI+1);var g=0,v=0;this.yRatio.length>1&&(this.yaxisIndex=f);var m=this.barHelpers.initialPositions();h=m.y,c=m.zeroW,u=m.x,v=m.barWidth,s=m.xDivision,l=m.zeroH;for(var x=a.group({class:"apexcharts-datalabels","data:realIndex":f}),y=a.group({class:"apexcharts-rangebar-goals-markers",style:"pointer-events: none"}),k=0;k<n.globals.dataPoints;k++){var S=this.barHelpers.getStrokeWidth(o,k,f),C=this.seriesRangeStart[o][k],I=this.seriesRangeEnd[o][k],A=null,T=null,N={x:u,y:h,strokeWidth:S,elSeries:p};if(d=m.yDivision,g=m.barHeight,this.isHorizontal){T=h+g*this.visibleI;var E=this.seriesLen;n.config.plotOptions.bar.rangeBarGroupRows&&(E=1);var R=(d-g*E)/2;if(void 0===n.config.series[o].data[k])break;if(n.config.series[o].data[k].x){var F=this.detectOverlappingBars({i:o,j:k,barYPosition:T,srty:R,barHeight:g,yDivision:d,initPositions:m});g=F.barHeight,T=F.barYPosition}v=(A=this.drawRangeBarPaths(i({indexes:{i:o,j:k,realIndex:f},barHeight:g,barYPosition:T,zeroW:c,yDivision:d,y1:C,y2:I},N))).barWidth}else g=(A=this.drawRangeColumnPaths(i({indexes:{i:o,j:k,realIndex:f},zeroH:l,barWidth:v,xDivision:s},N))).barHeight;var D=this.barHelpers.drawGoalLine({barXPosition:A.barXPosition,barYPosition:T,goalX:A.goalX,goalY:A.goalY,barHeight:g,barWidth:v});D&&y.add(D),h=A.y,u=A.x;var L=this.barHelpers.getPathFillColor(e,o,k,f),M=n.globals.stroke.colors[f];this.renderSeries({realIndex:f,pathFill:L,lineFill:M,j:k,i:o,x:u,y:h,y1:C,y2:I,pathFrom:A.pathFrom,pathTo:A.pathTo,strokeWidth:S,elSeries:p,series:e,barHeight:g,barYPosition:T,barWidth:v,elDataLabelsWrap:x,elGoalsMarkers:y,visibleSeries:this.visibleI,type:"rangebar"})}r.add(p)}return r}},{key:"detectOverlappingBars",value:function(e){var t=e.i,n=e.j,a=e.barYPosition,r=e.srty,i=e.barHeight,o=e.yDivision,s=e.initPositions,l=this.w,c=[],u=l.config.series[t].data[n].rangeName,h=l.config.series[t].data[n].x,d=l.globals.labels.indexOf(h),f=l.globals.seriesRangeBar[t].findIndex((function(e){return e.x===h&&e.overlaps.length>0}));return a=l.config.plotOptions.bar.rangeBarGroupRows?r+o*d:r+i*this.visibleI+o*d,f>-1&&!l.config.plotOptions.bar.rangeBarOverlap&&(c=l.globals.seriesRangeBar[t][f].overlaps).indexOf(u)>-1&&(a=(i=s.barHeight/c.length)*this.visibleI+o*(100-parseInt(this.barOptions.barHeight,10))/100/2+i*(this.visibleI+c.indexOf(u))+o*d),{barYPosition:a,barHeight:i}}},{key:"drawRangeColumnPaths",value:function(e){var t=e.indexes,n=e.x;e.strokeWidth;var a=e.xDivision,r=e.barWidth,i=e.zeroH,o=this.w,s=t.i,l=t.j,c=this.yRatio[this.yaxisIndex],u=t.realIndex,h=this.getRangeValue(u,l),d=Math.min(h.start,h.end),f=Math.max(h.start,h.end);o.globals.isXNumeric&&(n=(o.globals.seriesX[s][l]-o.globals.minX)/this.xRatio-r/2);var p=n+r*this.visibleI;void 0===this.series[s][l]||null===this.series[s][l]?d=i:(d=i-d/c,f=i-f/c);var g=Math.abs(f-d),v=this.barHelpers.getColumnPaths({barXPosition:p,barWidth:r,y1:d,y2:f,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:t.realIndex,i:u,j:l,w:o});return o.globals.isXNumeric||(n+=a),{pathTo:v.pathTo,pathFrom:v.pathFrom,barHeight:g,x:n,y:f,goalY:this.barHelpers.getGoalValues("y",null,i,s,l),barXPosition:p}}},{key:"drawRangeBarPaths",value:function(e){var t=e.indexes,n=e.y,a=e.y1,r=e.y2,i=e.yDivision,o=e.barHeight,s=e.barYPosition,l=e.zeroW,c=this.w,u=l+a/this.invertedYRatio,h=l+r/this.invertedYRatio,d=Math.abs(h-u),f=this.barHelpers.getBarpaths({barYPosition:s,barHeight:o,x1:u,x2:h,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:t.realIndex,realIndex:t.realIndex,j:t.j,w:c});return c.globals.isXNumeric||(n+=i),{pathTo:f.pathTo,pathFrom:f.pathFrom,barWidth:d,x:h,goalX:this.barHelpers.getGoalValues("x",l,null,t.realIndex,t.j),y:n}}},{key:"getRangeValue",value:function(e,t){var n=this.w;return{start:n.globals.seriesRangeStart[e][t],end:n.globals.seriesRangeEnd[e][t]}}},{key:"getTooltipValues",value:function(e){var t=e.ctx,n=e.seriesIndex,a=e.dataPointIndex,r=e.y1,i=e.y2,o=e.w,s=o.globals.seriesRangeStart[n][a],l=o.globals.seriesRangeEnd[n][a],c=o.globals.labels[a],u=o.config.series[n].name?o.config.series[n].name:"",h=o.config.tooltip.y.formatter,d=o.config.tooltip.y.title.formatter,f={w:o,seriesIndex:n,dataPointIndex:a,start:s,end:l};"function"==typeof d&&(u=d(u,f)),Number.isFinite(r)&&Number.isFinite(i)&&(s=r,l=i,o.config.series[n].data[a].x&&(c=o.config.series[n].data[a].x+":"),"function"==typeof h&&(c=h(c,f)));var p="",g="",v=o.globals.colors[n];if(void 0===o.config.tooltip.x.formatter)if("datetime"===o.config.xaxis.type){var m=new B(t);p=m.formatDate(m.getDate(s),o.config.tooltip.x.format),g=m.formatDate(m.getDate(l),o.config.tooltip.x.format)}else p=s,g=l;else p=o.config.tooltip.x.formatter(s),g=o.config.tooltip.x.formatter(l);return{start:s,end:l,startVal:p,endVal:g,ylabel:c,color:v,seriesName:u}}},{key:"buildCustomTooltipHTML",value:function(e){return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e.color+'">'+(e.seriesName||"")+'</span></div><div> <span class="category">'+e.ylabel+' </span> <span class="value start-value">'+e.start+'</span> <span class="separator">-</span> <span class="value end-value">'+e.end+"</span></div></div>"}}]),n}(),H=function(){function e(t){s(this,e),this.opts=t}return c(e,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(e){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,b.extend(e,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){var e=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var n=t.seriesIndex,a=t.dataPointIndex,r=t.w;return e._getBoxTooltip(r,n,a,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var e=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var n=t.seriesIndex,a=t.dataPointIndex,r=t.w;return e._getBoxTooltip(r,n,a,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(e,t){t.ctx;var n=t.seriesIndex,a=t.dataPointIndex,r=t.w,i=r.globals.seriesRangeStart[n][a];return r.globals.seriesRangeEnd[n][a]-i},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(e){return e.w.config.plotOptions&&e.w.config.plotOptions.bar&&e.w.config.plotOptions.bar.horizontal?function(e){var t=new W(e.ctx,null),n=t.getTooltipValues(e),a=n.color,r=n.seriesName,i=n.ylabel,o=n.startVal,s=n.endVal;return t.buildCustomTooltipHTML({color:a,seriesName:r,ylabel:i,start:o,end:s})}(e):function(e){var t=new W(e.ctx,null),n=t.getTooltipValues(e),a=n.color,r=n.seriesName,i=n.ylabel,o=n.start,s=n.end;return t.buildCustomTooltipHTML({color:a,seriesName:r,ylabel:i,start:o,end:s})}(e)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"brush",value:function(e){return b.extend(e,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;var t=e.dataLabels.formatter;return e.yaxis.forEach((function(t,n){e.yaxis[n].min=0,e.yaxis[n].max=100})),"bar"===e.chart.type&&(e.dataLabels.formatter=t||function(e){return"number"==typeof e&&e?e.toFixed(0)+"%":e}),e}},{key:"convertCatToNumeric",value:function(e){return e.xaxis.convertedCatToNumeric=!0,e}},{key:"convertCatToNumericXaxis",value:function(e,t,n){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(e){return b.isNumber(e)?Math.floor(e):e};var a=e.xaxis.labels.formatter,r=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return n&&n.length&&(r=n.map((function(e){return Array.isArray(e)?e:String(e)}))),r&&r.length&&(e.xaxis.labels.formatter=function(e){return b.isNumber(e)?a(r[Math.floor(e)-1]):a(e)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(e){return e},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(e,t,n,a,r){var i=e.globals.seriesCandleO[t][n],o=e.globals.seriesCandleH[t][n],s=e.globals.seriesCandleM[t][n],l=e.globals.seriesCandleL[t][n],c=e.globals.seriesCandleC[t][n];return e.config.series[t].type&&e.config.series[t].type!==r?'<div class="apexcharts-custom-tooltip">\n          '.concat(e.config.series[t].name?e.config.series[t].name:"series-"+(t+1),": <strong>").concat(e.globals.series[t][n],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(e.config.chart.type,'">')+"<div>".concat(a[0],': <span class="value">')+i+"</span></div>"+"<div>".concat(a[1],': <span class="value">')+o+"</span></div>"+(s?"<div>".concat(a[2],': <span class="value">')+s+"</span></div>":"")+"<div>".concat(a[3],': <span class="value">')+l+"</span></div>"+"<div>".concat(a[4],': <span class="value">')+c+"</span></div></div>"}}]),e}(),V=function(){function e(t){s(this,e),this.opts=t}return c(e,[{key:"init",value:function(e){var t=e.responsiveOverride,n=this.opts,a=new E,r=new H(n);this.chartType=n.chart.type,"histogram"===this.chartType&&(n.chart.type="bar",n=b.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},n)),n=this.extendYAxis(n),n=this.extendAnnotations(n);var i=a.init(),s={};if(n&&"object"===o(n)){var l={};l=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","histogram","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(n.chart.type)?r[n.chart.type]():r.line(),n.chart.brush&&n.chart.brush.enabled&&(l=r.brush(l)),n.chart.stacked&&"100%"===n.chart.stackType&&(n=r.stacked100(n)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(n),n.xaxis=n.xaxis||window.Apex.xaxis||{},t||(n.xaxis.convertedCatToNumeric=!1),((n=this.checkForCatToNumericXAxis(this.chartType,l,n)).chart.sparkline&&n.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(l=r.sparkline(l)),s=b.extend(i,l)}var c=b.extend(s,window.Apex);return i=b.extend(c,n),this.handleUserInputErrors(i)}},{key:"checkForCatToNumericXAxis",value:function(e,t,n){var a=new H(n),r=("bar"===e||"boxPlot"===e)&&n.plotOptions&&n.plotOptions.bar&&n.plotOptions.bar.horizontal,i="pie"===e||"polarArea"===e||"donut"===e||"radar"===e||"radialBar"===e||"heatmap"===e,o="datetime"!==n.xaxis.type&&"numeric"!==n.xaxis.type,s=n.xaxis.tickPlacement?n.xaxis.tickPlacement:t.xaxis&&t.xaxis.tickPlacement;return r||i||!o||"between"===s||(n=a.convertCatToNumeric(n)),n}},{key:"extendYAxis",value:function(e,t){var n=new E;(void 0===e.yaxis||!e.yaxis||Array.isArray(e.yaxis)&&0===e.yaxis.length)&&(e.yaxis={}),e.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(e.yaxis=b.extend(e.yaxis,window.Apex.yaxis)),e.yaxis.constructor!==Array?e.yaxis=[b.extend(n.yAxis,e.yaxis)]:e.yaxis=b.extendArray(e.yaxis,n.yAxis);var a=!1;e.yaxis.forEach((function(e){e.logarithmic&&(a=!0)}));var r=e.series;return t&&!r&&(r=t.config.series),a&&r.length!==e.yaxis.length&&r.length&&(e.yaxis=r.map((function(t,a){if(t.name||(r[a].name="series-".concat(a+1)),e.yaxis[a])return e.yaxis[a].seriesName=r[a].name,e.yaxis[a];var i=b.extend(n.yAxis,e.yaxis[0]);return i.show=!1,i}))),a&&r.length>1&&r.length!==e.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),e}},{key:"extendAnnotations",value:function(e){return void 0===e.annotations&&(e.annotations={},e.annotations.yaxis=[],e.annotations.xaxis=[],e.annotations.points=[]),e=this.extendYAxisAnnotations(e),e=this.extendXAxisAnnotations(e),this.extendPointAnnotations(e)}},{key:"extendYAxisAnnotations",value:function(e){var t=new E;return e.annotations.yaxis=b.extendArray(void 0!==e.annotations.yaxis?e.annotations.yaxis:[],t.yAxisAnnotation),e}},{key:"extendXAxisAnnotations",value:function(e){var t=new E;return e.annotations.xaxis=b.extendArray(void 0!==e.annotations.xaxis?e.annotations.xaxis:[],t.xAxisAnnotation),e}},{key:"extendPointAnnotations",value:function(e){var t=new E;return e.annotations.points=b.extendArray(void 0!==e.annotations.points?e.annotations.points:[],t.pointAnnotation),e}},{key:"checkForDarkTheme",value:function(e){e.theme&&"dark"===e.theme.mode&&(e.tooltip||(e.tooltip={}),"light"!==e.tooltip.theme&&(e.tooltip.theme="dark"),e.chart.foreColor||(e.chart.foreColor="#f6f7f8"),e.chart.background||(e.chart.background="#424242"),e.theme.palette||(e.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(e){var t=e;if(t.tooltip.shared&&t.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===t.chart.type&&t.plotOptions.bar.horizontal){if(t.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");t.yaxis[0].reversed&&(t.yaxis[0].opposite=!0),t.xaxis.tooltip.enabled=!1,t.yaxis[0].tooltip.enabled=!1,t.chart.zoom.enabled=!1}return"bar"!==t.chart.type&&"rangeBar"!==t.chart.type||t.tooltip.shared&&"barWidth"===t.xaxis.crosshairs.width&&t.series.length>1&&(t.xaxis.crosshairs.width="tickWidth"),"candlestick"!==t.chart.type&&"boxPlot"!==t.chart.type||t.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(t.chart.type," chart is not supported.")),t.yaxis[0].reversed=!1),t}}]),e}(),U=function(){function e(){s(this,e)}return c(e,[{key:"initGlobalVars",value:function(e){e.series=[],e.seriesCandleO=[],e.seriesCandleH=[],e.seriesCandleM=[],e.seriesCandleL=[],e.seriesCandleC=[],e.seriesRangeStart=[],e.seriesRangeEnd=[],e.seriesRangeBar=[],e.seriesPercent=[],e.seriesGoals=[],e.seriesX=[],e.seriesZ=[],e.seriesNames=[],e.seriesTotals=[],e.seriesLog=[],e.seriesColors=[],e.stackedSeriesTotals=[],e.seriesXvalues=[],e.seriesYvalues=[],e.labels=[],e.hasGroups=!1,e.groups=[],e.categoryLabels=[],e.timescaleLabels=[],e.noLabelsProvided=!1,e.resizeTimer=null,e.selectionResizeTimer=null,e.delayedElements=[],e.pointsArray=[],e.dataLabelsRects=[],e.isXNumeric=!1,e.xaxisLabelsCount=0,e.skipLastTimelinelabel=!1,e.skipFirstTimelinelabel=!1,e.isDataXYZ=!1,e.isMultiLineX=!1,e.isMultipleYAxis=!1,e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE,e.minYArr=[],e.maxYArr=[],e.maxX=-Number.MAX_VALUE,e.minX=Number.MAX_VALUE,e.initialMaxX=-Number.MAX_VALUE,e.initialMinX=Number.MAX_VALUE,e.maxDate=0,e.minDate=Number.MAX_VALUE,e.minZ=Number.MAX_VALUE,e.maxZ=-Number.MAX_VALUE,e.minXDiff=Number.MAX_VALUE,e.yAxisScale=[],e.xAxisScale=null,e.xAxisTicksPositions=[],e.yLabelsCoords=[],e.yTitleCoords=[],e.barPadForNumericAxis=0,e.padHorizontal=0,e.xRange=0,e.yRange=[],e.zRange=0,e.dataPoints=0,e.xTickAmount=0}},{key:"globalVars",value:function(e){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:e.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.zoom&&e.chart.zoom.enabled,panEnabled:"pan"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.pan,selectionEnabled:"selection"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(e){var t=this.globalVars(e);return this.initGlobalVars(t),t.initialConfig=b.extend({},e),t.initialSeries=b.clone(e.series),t.lastXAxis=b.clone(t.initialConfig.xaxis),t.lastYAxis=b.clone(t.initialConfig.yaxis),t}}]),e}(),X=function(){function e(t){s(this,e),this.opts=t}return c(e,[{key:"init",value:function(){var e=new V(this.opts).init({responsiveOverride:!1});return{config:e,globals:(new U).init(e)}}}]),e}(),G=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new S(this.ctx)}return c(e,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var e=this.w.config.series.slice(),t=new P(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),void 0!==e[this.activeSeriesIndex].data&&e[this.activeSeriesIndex].data.length>0&&null!==e[this.activeSeriesIndex].data[0]&&void 0!==e[this.activeSeriesIndex].data[0].x&&null!==e[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var e=this.w.config.series.slice(),t=new P(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),void 0!==e[this.activeSeriesIndex].data&&e[this.activeSeriesIndex].data.length>0&&void 0!==e[this.activeSeriesIndex].data[0]&&null!==e[this.activeSeriesIndex].data[0]&&e[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(e,t){for(var n=this.w.config,a=this.w.globals,r="boxPlot"===n.chart.type||"boxPlot"===n.series[t].type,i=0;i<e[t].data.length;i++)if(void 0!==e[t].data[i][1]&&(Array.isArray(e[t].data[i][1])&&4===e[t].data[i][1].length&&!r?this.twoDSeries.push(b.parseNumber(e[t].data[i][1][3])):e[t].data[i].length>=5?this.twoDSeries.push(b.parseNumber(e[t].data[i][4])):this.twoDSeries.push(b.parseNumber(e[t].data[i][1])),a.dataFormatXNumeric=!0),"datetime"===n.xaxis.type){var o=new Date(e[t].data[i][0]);o=new Date(o).getTime(),this.twoDSeriesX.push(o)}else this.twoDSeriesX.push(e[t].data[i][0]);for(var s=0;s<e[t].data.length;s++)void 0!==e[t].data[s][2]&&(this.threeDSeries.push(e[t].data[s][2]),a.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(e,t){var n=this.w.config,a=this.w.globals,r=new B(this.ctx),i=t;a.collapsedSeriesIndices.indexOf(t)>-1&&(i=this.activeSeriesIndex);for(var o=0;o<e[t].data.length;o++)void 0!==e[t].data[o].y&&(Array.isArray(e[t].data[o].y)?this.twoDSeries.push(b.parseNumber(e[t].data[o].y[e[t].data[o].y.length-1])):this.twoDSeries.push(b.parseNumber(e[t].data[o].y))),void 0!==e[t].data[o].goals&&Array.isArray(e[t].data[o].goals)?(void 0===this.seriesGoals[t]&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(e[t].data[o].goals)):(void 0===this.seriesGoals[t]&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(null));for(var s=0;s<e[i].data.length;s++){var l="string"==typeof e[i].data[s].x,c=Array.isArray(e[i].data[s].x),u=!c&&!!r.isValidDate(e[i].data[s].x.toString());if(l||u)if(l||n.xaxis.convertedCatToNumeric){var h=a.isBarHorizontal&&a.isRangeData;"datetime"!==n.xaxis.type||h?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[i].data[s].x)):this.twoDSeriesX.push(r.parseDate(e[i].data[s].x))}else"datetime"===n.xaxis.type?this.twoDSeriesX.push(r.parseDate(e[i].data[s].x.toString())):(a.dataFormatXNumeric=!0,a.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(e[i].data[s].x)));else c?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[i].data[s].x)):(a.isXNumeric=!0,a.dataFormatXNumeric=!0,this.twoDSeriesX.push(e[i].data[s].x))}if(e[t].data[0]&&void 0!==e[t].data[0].z){for(var d=0;d<e[t].data.length;d++)this.threeDSeries.push(e[t].data[d].z);a.isDataXYZ=!0}}},{key:"handleRangeData",value:function(e,t){var n=this.w.globals,a={};return this.isFormat2DArray()?a=this.handleRangeDataFormat("array",e,t):this.isFormatXY()&&(a=this.handleRangeDataFormat("xy",e,t)),n.seriesRangeStart.push(a.start),n.seriesRangeEnd.push(a.end),n.seriesRangeBar.push(a.rangeUniques),n.seriesRangeBar.forEach((function(e,t){e&&e.forEach((function(e,t){e.y.forEach((function(t,n){for(var a=0;a<e.y.length;a++)if(n!==a){var r=t.y1,i=t.y2,o=e.y[a].y1;r<=e.y[a].y2&&o<=i&&(e.overlaps.indexOf(t.rangeName)<0&&e.overlaps.push(t.rangeName),e.overlaps.indexOf(e.y[a].rangeName)<0&&e.overlaps.push(e.y[a].rangeName))}}))}))})),a}},{key:"handleCandleStickBoxData",value:function(e,t){var n=this.w.globals,a={};return this.isFormat2DArray()?a=this.handleCandleStickBoxDataFormat("array",e,t):this.isFormatXY()&&(a=this.handleCandleStickBoxDataFormat("xy",e,t)),n.seriesCandleO[t]=a.o,n.seriesCandleH[t]=a.h,n.seriesCandleM[t]=a.m,n.seriesCandleL[t]=a.l,n.seriesCandleC[t]=a.c,a}},{key:"handleRangeDataFormat",value:function(e,t,n){var a=[],r=[],i=t[n].data.filter((function(e,t,n){return t===n.findIndex((function(t){return t.x===e.x}))})).map((function(e,t){return{x:e.x,overlaps:[],y:[]}})),o="Please provide [Start, End] values in valid format. Read more https://apexcharts.com/docs/series/#rangecharts",s=new P(this.ctx).getActiveConfigSeriesIndex();if("array"===e){if(2!==t[s].data[0][1].length)throw new Error(o);for(var l=0;l<t[n].data.length;l++)a.push(t[n].data[l][1][0]),r.push(t[n].data[l][1][1])}else if("xy"===e){if(2!==t[s].data[0].y.length)throw new Error(o);for(var c=function(e){var o=b.randomId(),s=t[n].data[e].x,l={y1:t[n].data[e].y[0],y2:t[n].data[e].y[1],rangeName:o};t[n].data[e].rangeName=o;var c=i.findIndex((function(e){return e.x===s}));i[c].y.push(l),a.push(l.y1),r.push(l.y2)},u=0;u<t[n].data.length;u++)c(u)}return{start:a,end:r,rangeUniques:i}}},{key:"handleCandleStickBoxDataFormat",value:function(e,t,n){var a=this.w,r="boxPlot"===a.config.chart.type||"boxPlot"===a.config.series[n].type,i=[],o=[],s=[],l=[],c=[];if("array"===e)if(r&&6===t[n].data[0].length||!r&&5===t[n].data[0].length)for(var u=0;u<t[n].data.length;u++)i.push(t[n].data[u][1]),o.push(t[n].data[u][2]),r?(s.push(t[n].data[u][3]),l.push(t[n].data[u][4]),c.push(t[n].data[u][5])):(l.push(t[n].data[u][3]),c.push(t[n].data[u][4]));else for(var h=0;h<t[n].data.length;h++)Array.isArray(t[n].data[h][1])&&(i.push(t[n].data[h][1][0]),o.push(t[n].data[h][1][1]),r?(s.push(t[n].data[h][1][2]),l.push(t[n].data[h][1][3]),c.push(t[n].data[h][1][4])):(l.push(t[n].data[h][1][2]),c.push(t[n].data[h][1][3])));else if("xy"===e)for(var d=0;d<t[n].data.length;d++)Array.isArray(t[n].data[d].y)&&(i.push(t[n].data[d].y[0]),o.push(t[n].data[d].y[1]),r?(s.push(t[n].data[d].y[2]),l.push(t[n].data[d].y[3]),c.push(t[n].data[d].y[4])):(l.push(t[n].data[d].y[2]),c.push(t[n].data[d].y[3])));return{o:i,h:o,m:s,l:l,c:c}}},{key:"parseDataAxisCharts",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,a=this.w.config,r=this.w.globals,i=new B(n),o=a.labels.length>0?a.labels.slice():a.xaxis.categories.slice();r.isRangeBar="rangeBar"===a.chart.type&&r.isBarHorizontal,r.hasGroups="category"===a.xaxis.type&&a.xaxis.group.groups.length>0,r.hasGroups&&(r.groups=a.xaxis.group.groups);for(var s=function(){for(var e=0;e<o.length;e++)if("string"==typeof o[e]){if(!i.isValidDate(o[e]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");t.twoDSeriesX.push(i.parseDate(o[e]))}else t.twoDSeriesX.push(o[e])},l=0;l<e.length;l++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===e[l].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==a.chart.type&&"rangeArea"!==a.chart.type&&"rangeBar"!==e[l].type&&"rangeArea"!==e[l].type||(r.isRangeData=!0,this.handleRangeData(e,l)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(e,l):this.isFormatXY()&&this.handleFormatXY(e,l),"candlestick"!==a.chart.type&&"candlestick"!==e[l].type&&"boxPlot"!==a.chart.type&&"boxPlot"!==e[l].type||this.handleCandleStickBoxData(e,l),r.series.push(this.twoDSeries),r.labels.push(this.twoDSeriesX),r.seriesX.push(this.twoDSeriesX),r.seriesGoals=this.seriesGoals,l!==this.activeSeriesIndex||this.fallbackToCategory||(r.isXNumeric=!0);else{"datetime"===a.xaxis.type?(r.isXNumeric=!0,s(),r.seriesX.push(this.twoDSeriesX)):"numeric"===a.xaxis.type&&(r.isXNumeric=!0,o.length>0&&(this.twoDSeriesX=o,r.seriesX.push(this.twoDSeriesX))),r.labels.push(this.twoDSeriesX);var c=e[l].data.map((function(e){return b.parseNumber(e)}));r.series.push(c)}r.seriesZ.push(this.threeDSeries),void 0!==e[l].name?r.seriesNames.push(e[l].name):r.seriesNames.push("series-"+parseInt(l+1,10)),void 0!==e[l].color?r.seriesColors.push(e[l].color):r.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(e){var t=this.w.globals,n=this.w.config;t.series=e.slice(),t.seriesNames=n.labels.slice();for(var a=0;a<t.series.length;a++)void 0===t.seriesNames[a]&&t.seriesNames.push("series-"+(a+1));return this.w}},{key:"handleExternalLabelsData",value:function(e){var t=this.w.config,n=this.w.globals;t.xaxis.categories.length>0?n.labels=t.xaxis.categories:t.labels.length>0?n.labels=t.labels.slice():this.fallbackToCategory?(n.labels=n.labels[0],n.seriesRangeBar.length&&(n.seriesRangeBar.map((function(e){e.forEach((function(e){n.labels.indexOf(e.x)<0&&e.x&&n.labels.push(e.x)}))})),n.labels=n.labels.filter((function(e,t,n){return n.indexOf(e)===t}))),t.xaxis.convertedCatToNumeric&&(new H(t).convertCatToNumericXaxis(t,this.ctx,n.seriesX[0]),this._generateExternalLabels(e))):this._generateExternalLabels(e)}},{key:"_generateExternalLabels",value:function(e){var t=this.w.globals,n=this.w.config,a=[];if(t.axisCharts){if(t.series.length>0)if(this.isFormatXY())for(var r=n.series.map((function(e,t){return e.data.filter((function(e,t,n){return n.findIndex((function(t){return t.x===e.x}))===t}))})),i=r.reduce((function(e,t,n,a){return a[e].length>t.length?e:n}),0),o=0;o<r[i].length;o++)a.push(o+1);else for(var s=0;s<t.series[t.maxValsInArrayIndex].length;s++)a.push(s+1);t.seriesX=[];for(var l=0;l<e.length;l++)t.seriesX.push(a);t.isXNumeric=!0}if(0===a.length){a=t.axisCharts?[]:t.series.map((function(e,t){return t+1}));for(var c=0;c<e.length;c++)t.seriesX.push(a)}t.labels=a,n.xaxis.convertedCatToNumeric&&(t.categoryLabels=a.map((function(e){return n.xaxis.labels.formatter(e)}))),t.noLabelsProvided=!0}},{key:"parseData",value:function(e){var t=this.w,n=t.config,a=t.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),a.axisCharts?this.parseDataAxisCharts(e):this.parseDataNonAxisCharts(e),this.coreUtils.getLargestSeries(),"bar"===n.chart.type&&n.chart.stacked){var r=new P(this.ctx);a.series=r.setNullSeriesToZeroValues(a.series)}this.coreUtils.getSeriesTotals(),a.axisCharts&&this.coreUtils.getStackedSeriesTotals(),this.coreUtils.getPercentSeries(),a.dataFormatXNumeric||a.isXNumeric&&("numeric"!==n.xaxis.type||0!==n.labels.length||0!==n.xaxis.categories.length)||this.handleExternalLabelsData(e);for(var i=this.coreUtils.getCategoryLabels(a.labels),o=0;o<i.length;o++)if(Array.isArray(i[o])){a.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var e=this,t=this.w;t.globals.ignoreYAxisIndexes=t.globals.collapsedSeries.map((function(n,a){if(e.w.globals.isMultipleYAxis&&!t.config.chart.stacked)return n.index}))}}]),e}(),Y=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.tooltipKeyFormat="dd MMM"}return c(e,[{key:"xLabelFormat",value:function(e,t,n,a){var r=this.w;if("datetime"===r.config.xaxis.type&&void 0===r.config.xaxis.labels.formatter&&void 0===r.config.tooltip.x.formatter){var i=new B(this.ctx);return i.formatDate(i.getDate(t),r.config.tooltip.x.format)}return e(t,n,a)}},{key:"defaultGeneralFormatter",value:function(e){return Array.isArray(e)?e.map((function(e){return e})):e}},{key:"defaultYFormatter",value:function(e,t,n){var a=this.w;return b.isNumber(e)&&(e=0!==a.globals.yValueDecimal?e.toFixed(void 0!==t.decimalsInFloat?t.decimalsInFloat:a.globals.yValueDecimal):a.globals.maxYArr[n]-a.globals.minYArr[n]<5?e.toFixed(1):e.toFixed(0)),e}},{key:"setLabelFormatters",value:function(){var e=this,t=this.w;return t.globals.xaxisTooltipFormatter=function(t){return e.defaultGeneralFormatter(t)},t.globals.ttKeyFormatter=function(t){return e.defaultGeneralFormatter(t)},t.globals.ttZFormatter=function(e){return e},t.globals.legendFormatter=function(t){return e.defaultGeneralFormatter(t)},void 0!==t.config.xaxis.labels.formatter?t.globals.xLabelFormatter=t.config.xaxis.labels.formatter:t.globals.xLabelFormatter=function(e){if(b.isNumber(e)){if(!t.config.xaxis.convertedCatToNumeric&&"numeric"===t.config.xaxis.type){if(b.isNumber(t.config.xaxis.decimalsInFloat))return e.toFixed(t.config.xaxis.decimalsInFloat);var n=t.globals.maxX-t.globals.minX;return n>0&&n<100?e.toFixed(1):e.toFixed(0)}return t.globals.isBarHorizontal&&t.globals.maxY-t.globals.minYArr<4?e.toFixed(1):e.toFixed(0)}return e},"function"==typeof t.config.tooltip.x.formatter?t.globals.ttKeyFormatter=t.config.tooltip.x.formatter:t.globals.ttKeyFormatter=t.globals.xLabelFormatter,"function"==typeof t.config.xaxis.tooltip.formatter&&(t.globals.xaxisTooltipFormatter=t.config.xaxis.tooltip.formatter),(Array.isArray(t.config.tooltip.y)||void 0!==t.config.tooltip.y.formatter)&&(t.globals.ttVal=t.config.tooltip.y),void 0!==t.config.tooltip.z.formatter&&(t.globals.ttZFormatter=t.config.tooltip.z.formatter),void 0!==t.config.legend.formatter&&(t.globals.legendFormatter=t.config.legend.formatter),t.config.yaxis.forEach((function(n,a){void 0!==n.labels.formatter?t.globals.yLabelFormatters[a]=n.labels.formatter:t.globals.yLabelFormatters[a]=function(r){return t.globals.xyCharts?Array.isArray(r)?r.map((function(t){return e.defaultYFormatter(t,n,a)})):e.defaultYFormatter(r,n,a):r}})),t.globals}},{key:"heatmapLabelFormatters",value:function(){var e=this.w;if("heatmap"===e.config.chart.type){e.globals.yAxisScale[0].result=e.globals.seriesNames.slice();var t=e.globals.seriesNames.reduce((function(e,t){return e.length>t.length?e:t}),0);e.globals.yAxisScale[0].niceMax=t,e.globals.yAxisScale[0].niceMin=t}}}]),e}(),j=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"getLabel",value:function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=this.w,l=void 0===e[a]?"":e[a],c=l,u=s.globals.xLabelFormatter,h=s.config.xaxis.labels.formatter,d=!1,f=new Y(this.ctx),p=l;o&&(c=f.xLabelFormat(u,l,p,{i:a,dateFormatter:new B(this.ctx).formatDate,w:s}),void 0!==h&&(c=h(l,e[a],{i:a,dateFormatter:new B(this.ctx).formatDate,w:s})));var g=function(e){var n=null;return t.forEach((function(e){"month"===e.unit?n="year":"day"===e.unit?n="month":"hour"===e.unit?n="day":"minute"===e.unit&&(n="hour")})),n===e};t.length>0?(d=g(t[a].unit),n=t[a].position,c=t[a].value):"datetime"===s.config.xaxis.type&&void 0===h&&(c=""),void 0===c&&(c=""),c=Array.isArray(c)?c:c.toString();var v=new w(this.ctx),m={};m=s.globals.rotateXLabels&&o?v.getTextRects(c,parseInt(i,10),null,"rotate(".concat(s.config.xaxis.labels.rotate," 0 0)"),!1):v.getTextRects(c,parseInt(i,10));var x=!s.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(c)&&(0===c.indexOf("NaN")||0===c.toLowerCase().indexOf("invalid")||c.toLowerCase().indexOf("infinity")>=0||r.indexOf(c)>=0&&x)&&(c=""),{x:n,text:c,textRect:m,isBold:d}}},{key:"checkLabelBasedOnTickamount",value:function(e,t,n){var a=this.w,r=a.config.xaxis.tickAmount;return"dataPoints"===r&&(r=Math.round(a.globals.gridWidth/120)),r>n||e%Math.round(n/(r+1))==0||(t.text=""),t}},{key:"checkForOverflowingLabels",value:function(e,t,n,a,r){var i=this.w;if(0===e&&i.globals.skipFirstTimelinelabel&&(t.text=""),e===n-1&&i.globals.skipLastTimelinelabel&&(t.text=""),i.config.xaxis.labels.hideOverlappingLabels&&a.length>0){var o=r[r.length-1];t.x<o.textRect.width/(i.globals.rotateXLabels?Math.abs(i.config.xaxis.labels.rotate)/12:1.01)+o.x&&(t.text="")}return t}},{key:"checkForReversedLabels",value:function(e,t){var n=this.w;return n.config.yaxis[e]&&n.config.yaxis[e].reversed&&t.reverse(),t}},{key:"isYAxisHidden",value:function(e){var t=this.w,n=new S(this.ctx);return!t.config.yaxis[e].show||!t.config.yaxis[e].showForNullSeries&&n.isSeriesNull(e)&&-1===t.globals.collapsedSeriesIndices.indexOf(e)}},{key:"getYAxisForeColor",value:function(e,t){var n=this.w;return Array.isArray(e)&&n.globals.yAxisScale[t]&&this.ctx.theme.pushExtraColors(e,n.globals.yAxisScale[t].result.length,!1),e}},{key:"drawYAxisTicks",value:function(e,t,n,a,r,i,o){var s=this.w,l=new w(this.ctx),c=s.globals.translateY;if(a.show&&t>0){!0===s.config.yaxis[r].opposite&&(e+=a.width);for(var u=t;u>=0;u--){var h=c+t/10+s.config.yaxis[r].labels.offsetY-1;s.globals.isBarHorizontal&&(h=i*u),"heatmap"===s.config.chart.type&&(h+=i/2);var d=l.drawLine(e+n.offsetX-a.width+a.offsetX,h+a.offsetY,e+n.offsetX+a.offsetX,h+a.offsetY,a.color);o.add(d),c+=i}}}}]),e}(),q=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"scaleSvgNode",value:function(e,t){var n=parseFloat(e.getAttributeNS(null,"width")),a=parseFloat(e.getAttributeNS(null,"height"));e.setAttributeNS(null,"width",n*t),e.setAttributeNS(null,"height",a*t),e.setAttributeNS(null,"viewBox","0 0 "+n+" "+a)}},{key:"fixSvgStringForIe11",value:function(e){if(!b.isIE11())return e.replace(/&nbsp;/g,"&#160;");var t=0,n=e.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,(function(e){return 2===++t?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':e}));return(n=n.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(e){var t=this.w.globals.dom.Paper.svg();if(1!==e){var n=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(n,e),t=(new XMLSerializer).serializeToString(n)}return this.fixSvgStringForIe11(t)}},{key:"cleanup",value:function(){var e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),n=e.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(a,(function(e){e.setAttribute("width",0)})),t&&t[0]&&(t[0].setAttribute("x",-500),t[0].setAttribute("x1",-500),t[0].setAttribute("x2",-500)),n&&n[0]&&(n[0].setAttribute("y",-100),n[0].setAttribute("y1",-100),n[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var e=this.getSvgString(),t=new Blob([e],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(t)}},{key:"dataURI",value:function(e){var t=this;return new Promise((function(n){var a=t.w,r=e?e.scale||e.width/a.globals.svgWidth:1;t.cleanup();var i=document.createElement("canvas");i.width=a.globals.svgWidth*r,i.height=parseInt(a.globals.dom.elWrap.style.height,10)*r;var o="transparent"===a.config.chart.background?"#fff":a.config.chart.background,s=i.getContext("2d");s.fillStyle=o,s.fillRect(0,0,i.width*r,i.height*r);var l=t.getSvgString(r);if(window.canvg&&b.isIE11()){var c=window.canvg.Canvg.fromString(s,l,{ignoreClear:!0,ignoreDimensions:!0});c.start();var u=i.msToBlob();c.stop(),n({blob:u})}else{var h="data:image/svg+xml,"+encodeURIComponent(l),d=new Image;d.crossOrigin="anonymous",d.onload=function(){if(s.drawImage(d,0,0),i.msToBlob){var e=i.msToBlob();n({blob:e})}else{var t=i.toDataURL("image/png");n({imgURI:t})}},d.src=h}}))}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var e=this;this.dataURI().then((function(t){var n=t.imgURI,a=t.blob;a?navigator.msSaveOrOpenBlob(a,e.w.globals.chartID+".png"):e.triggerDownload(n,e.w.config.chart.toolbar.export.png.filename,".png")}))}},{key:"exportToCSV",value:function(e){var t=this,n=e.series,a=e.columnDelimiter,r=e.lineDelimiter,i=void 0===r?"\n":r,o=this.w,s=[],l=[],c="",u=new G(this.ctx),h=new j(this.ctx),d=function(e){var n="";if(o.globals.axisCharts){if("category"===o.config.xaxis.type||o.config.xaxis.convertedCatToNumeric)if(o.globals.isBarHorizontal){var r=o.globals.yLabelFormatters[0],i=new P(t.ctx).getActiveConfigSeriesIndex();n=r(o.globals.labels[e],{seriesIndex:i,dataPointIndex:e,w:o})}else n=h.getLabel(o.globals.labels,o.globals.timescaleLabels,0,e).text;"datetime"===o.config.xaxis.type&&(o.config.xaxis.categories.length?n=o.config.xaxis.categories[e]:o.config.labels.length&&(n=o.config.labels[e]))}else n=o.config.labels[e];return Array.isArray(n)&&(n=n.join(" ")),b.isNumber(n)?n:n.split(a).join("")};s.push(o.config.chart.toolbar.export.csv.headerCategory),n.map((function(e,t){var n=e.name?e.name:"series-".concat(t);o.globals.axisCharts&&s.push(n.split(a).join("")?n.split(a).join(""):"series-".concat(t))})),o.globals.axisCharts||(s.push(o.config.chart.toolbar.export.csv.headerValue),l.push(s.join(a))),n.map((function(e,t){o.globals.axisCharts?function(e,t){if(s.length&&0===t&&l.push(s.join(a)),e.data&&e.data.length)for(var r=0;r<e.data.length;r++){s=[];var i=d(r);if(i||(u.isFormatXY()?i=n[t].data[r].x:u.isFormat2DArray()&&(i=n[t].data[r]?n[t].data[r][0]:"")),0===t){s.push((h=i,"datetime"===o.config.xaxis.type&&String(h).length>=10?o.config.chart.toolbar.export.csv.dateFormatter(i):b.isNumber(i)?i:i.split(a).join("")));for(var c=0;c<o.globals.series.length;c++)s.push(o.globals.series[c][r])}("candlestick"===o.config.chart.type||e.type&&"candlestick"===e.type)&&(s.pop(),s.push(o.globals.seriesCandleO[t][r]),s.push(o.globals.seriesCandleH[t][r]),s.push(o.globals.seriesCandleL[t][r]),s.push(o.globals.seriesCandleC[t][r])),("boxPlot"===o.config.chart.type||e.type&&"boxPlot"===e.type)&&(s.pop(),s.push(o.globals.seriesCandleO[t][r]),s.push(o.globals.seriesCandleH[t][r]),s.push(o.globals.seriesCandleM[t][r]),s.push(o.globals.seriesCandleL[t][r]),s.push(o.globals.seriesCandleC[t][r])),"rangeBar"===o.config.chart.type&&(s.pop(),s.push(o.globals.seriesRangeStart[t][r]),s.push(o.globals.seriesRangeEnd[t][r])),s.length&&l.push(s.join(a))}var h}(e,t):((s=[]).push(o.globals.labels[t].split(a).join("")),s.push(o.globals.series[t]),l.push(s.join(a)))})),c+=l.join(i),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+c),o.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(e,t,n){var a=document.createElement("a");a.href=e,a.download=(t||this.w.globals.chartID)+n,document.body.appendChild(a),a.click(),document.body.removeChild(a)}}]),e}(),K=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.axesUtils=new j(t),this.xaxisLabels=n.globals.labels.slice(),n.globals.timescaleLabels.length>0&&!n.globals.isBarHorizontal&&(this.xaxisLabels=n.globals.timescaleLabels.slice()),n.config.xaxis.overwriteCategories&&(this.xaxisLabels=n.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],"top"===n.config.xaxis.position?this.offY=0:this.offY=n.globals.gridHeight+1,this.offY=this.offY+n.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===n.config.chart.type&&n.config.plotOptions.bar.horizontal,this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.xaxisBorderWidth=n.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=n.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=n.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=n.config.xaxis.axisBorder.height,this.yaxis=n.config.yaxis[0]}return c(e,[{key:"drawXaxis",value:function(){var e=this.w,t=new w(this.ctx),n=t.group({class:"apexcharts-xaxis",transform:"translate(".concat(e.config.xaxis.offsetX,", ").concat(e.config.xaxis.offsetY,")")}),a=t.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});n.add(a);for(var r=[],i=0;i<this.xaxisLabels.length;i++)r.push(this.xaxisLabels[i]);if(this.drawXAxisLabelAndGroup(!0,t,a,r,e.globals.isXNumeric,(function(e,t){return t})),e.globals.hasGroups){var o=e.globals.groups;r=[];for(var s=0;s<o.length;s++)r.push(o[s].title);var l={};e.config.xaxis.group.style&&(l.xaxisFontSize=e.config.xaxis.group.style.fontSize,l.xaxisFontFamily=e.config.xaxis.group.style.fontFamily,l.xaxisForeColors=e.config.xaxis.group.style.colors,l.fontWeight=e.config.xaxis.group.style.fontWeight,l.cssClass=e.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,t,a,r,!1,(function(e,t){return o[e].cols*t}),l)}if(void 0!==e.config.xaxis.title.text){var c=t.group({class:"apexcharts-xaxis-title"}),u=t.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+e.globals.xAxisLabelsHeight+e.config.xaxis.title.offsetY,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});c.add(u),n.add(c)}if(e.config.xaxis.axisBorder.show){var h=e.globals.barPadForNumericAxis,d=t.drawLine(e.globals.padHorizontal+e.config.xaxis.axisBorder.offsetX-h,this.offY,this.xaxisBorderWidth+h,this.offY,e.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);n.add(d)}return n}},{key:"drawXAxisLabelAndGroup",value:function(e,t,n,a,r,i){var o,s=this,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=[],u=[],h=this.w,d=l.xaxisFontSize||this.xaxisFontSize,f=l.xaxisFontFamily||this.xaxisFontFamily,p=l.xaxisForeColors||this.xaxisForeColors,g=l.fontWeight||h.config.xaxis.labels.style.fontWeight,v=l.cssClass||h.config.xaxis.labels.style.cssClass,m=h.globals.padHorizontal,x=a.length,b="category"===h.config.xaxis.type?h.globals.dataPoints:x;if(r){var y=b>1?b-1:b;o=h.globals.gridWidth/y,m=m+i(0,o)/2+h.config.xaxis.labels.offsetX}else o=h.globals.gridWidth/b,m=m+i(0,o)+h.config.xaxis.labels.offsetX;for(var k=function(r){var l=m-i(r,o)/2+h.config.xaxis.labels.offsetX;0===r&&1===x&&o/2===m&&1===b&&(l=h.globals.gridWidth/2);var y=s.axesUtils.getLabel(a,h.globals.timescaleLabels,l,r,c,d,e),k=28;if(h.globals.rotateXLabels&&e&&(k=22),e||(k=k+parseFloat(d)+(h.globals.xAxisLabelsHeight-h.globals.xAxisGroupLabelsHeight)+(h.globals.rotateXLabels?10:0)),y=void 0!==h.config.xaxis.tickAmount&&"dataPoints"!==h.config.xaxis.tickAmount&&"datetime"!==h.config.xaxis.type?s.axesUtils.checkLabelBasedOnTickamount(r,y,x):s.axesUtils.checkForOverflowingLabels(r,y,x,c,u),e&&y.text&&h.globals.xaxisLabelsCount++,h.config.xaxis.labels.show){var w=t.drawText({x:y.x,y:s.offY+h.config.xaxis.labels.offsetY+k-("top"===h.config.xaxis.position?h.globals.xAxisHeight+h.config.xaxis.axisTicks.height-2:0),text:y.text,textAnchor:"middle",fontWeight:y.isBold?600:g,fontSize:d,fontFamily:f,foreColor:Array.isArray(p)?e&&h.config.xaxis.convertedCatToNumeric?p[h.globals.minX+r-1]:p[r]:p,isPlainText:!1,cssClass:(e?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+v});if(n.add(w),e){var S=document.createElementNS(h.globals.SVGNS,"title");S.textContent=Array.isArray(y.text)?y.text.join(" "):y.text,w.node.appendChild(S),""!==y.text&&(c.push(y.text),u.push(y))}}r<x-1&&(m+=i(r+1,o))},w=0;w<=x-1;w++)k(w)}},{key:"drawXaxisInversed",value:function(e){var t,n,a=this,r=this.w,i=new w(this.ctx),o=r.config.yaxis[0].opposite?r.globals.translateYAxisX[e]:0,s=i.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:e}),l=i.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+o+", 0)"});s.add(l);var c=[];if(r.config.yaxis[e].show)for(var u=0;u<this.xaxisLabels.length;u++)c.push(this.xaxisLabels[u]);t=r.globals.gridHeight/c.length,n=-t/2.2;var h=r.globals.yLabelFormatters[0],d=r.config.yaxis[0].labels;if(d.show)for(var f=function(o){var s=void 0===c[o]?"":c[o];s=h(s,{seriesIndex:e,dataPointIndex:o,w:r});var u=a.axesUtils.getYAxisForeColor(d.style.colors,e),f=0;Array.isArray(s)&&(f=s.length/2*parseInt(d.style.fontSize,10));var p=i.drawText({x:d.offsetX-15,y:n+t+d.offsetY-f,text:s,textAnchor:a.yaxis.opposite?"start":"end",foreColor:Array.isArray(u)?u[o]:u,fontSize:d.style.fontSize,fontFamily:d.style.fontFamily,fontWeight:d.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+d.style.cssClass});l.add(p);var g=document.createElementNS(r.globals.SVGNS,"title");if(g.textContent=Array.isArray(s)?s.join(" "):s,p.node.appendChild(g),0!==r.config.yaxis[e].labels.rotate){var v=i.rotateAroundCenter(p.node);p.node.setAttribute("transform","rotate(".concat(r.config.yaxis[e].labels.rotate," 0 ").concat(v.y,")"))}n+=t},p=0;p<=c.length-1;p++)f(p);if(void 0!==r.config.yaxis[0].title.text){var g=i.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+o+", 0)"}),v=i.drawText({x:0,y:r.globals.gridHeight/2,text:r.config.yaxis[0].title.text,textAnchor:"middle",foreColor:r.config.yaxis[0].title.style.color,fontSize:r.config.yaxis[0].title.style.fontSize,fontWeight:r.config.yaxis[0].title.style.fontWeight,fontFamily:r.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+r.config.yaxis[0].title.style.cssClass});g.add(v),s.add(g)}var m=0;this.isCategoryBarHorizontal&&r.config.yaxis[0].opposite&&(m=r.globals.gridWidth);var x=r.config.xaxis.axisBorder;if(x.show){var b=i.drawLine(r.globals.padHorizontal+x.offsetX+m,1+x.offsetY,r.globals.padHorizontal+x.offsetX+m,r.globals.gridHeight+x.offsetY,x.color,0);s.add(b)}return r.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(m,c.length,r.config.yaxis[0].axisBorder,r.config.yaxis[0].axisTicks,0,t,s),s}},{key:"drawXaxisTicks",value:function(e,t,n){var a=this.w,r=e;if(!(e<0||e-2>a.globals.gridWidth)){var i=this.offY+a.config.xaxis.axisTicks.offsetY;if(t=t+i+a.config.xaxis.axisTicks.height,"top"===a.config.xaxis.position&&(t=i-a.config.xaxis.axisTicks.height),a.config.xaxis.axisTicks.show){var o=new w(this.ctx).drawLine(e+a.config.xaxis.axisTicks.offsetX,i+a.config.xaxis.offsetY,r+a.config.xaxis.axisTicks.offsetX,t+a.config.xaxis.offsetY,a.config.xaxis.axisTicks.color);n.add(o),o.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var e=this.w,t=[],n=this.xaxisLabels.length,a=e.globals.padHorizontal;if(e.globals.timescaleLabels.length>0)for(var r=0;r<n;r++)a=this.xaxisLabels[r].position,t.push(a);else for(var i=n,o=0;o<i;o++){var s=i;e.globals.isXNumeric&&"bar"!==e.config.chart.type&&(s-=1),a+=e.globals.gridWidth/s,t.push(a)}return t}},{key:"xAxisLabelCorrections",value:function(){var e=this.w,t=new w(this.ctx),n=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(e.globals.rotateXLabels||e.config.xaxis.labels.rotateAlways)for(var o=0;o<a.length;o++){var s=t.rotateAroundCenter(a[o]);s.y=s.y-1,s.x=s.x+1,a[o].setAttribute("transform","rotate(".concat(e.config.xaxis.labels.rotate," ").concat(s.x," ").concat(s.y,")")),a[o].setAttribute("text-anchor","end"),n.setAttribute("transform","translate(0, ".concat(-10,")"));var l=a[o].childNodes;e.config.xaxis.labels.trim&&Array.prototype.forEach.call(l,(function(n){t.placeTextWithEllipsis(n,n.textContent,e.globals.xAxisLabelsHeight-("bottom"===e.config.legend.position?20:10))}))}else!function(){for(var n=e.globals.gridWidth/(e.globals.labels.length+1),r=0;r<a.length;r++){var i=a[r].childNodes;e.config.xaxis.labels.trim&&"datetime"!==e.config.xaxis.type&&Array.prototype.forEach.call(i,(function(e){t.placeTextWithEllipsis(e,e.textContent,n)}))}}();if(r.length>0){var c=r[r.length-1].getBBox(),u=r[0].getBBox();c.x<-20&&r[r.length-1].parentNode.removeChild(r[r.length-1]),u.x+u.width>e.globals.gridWidth&&!e.globals.isBarHorizontal&&r[0].parentNode.removeChild(r[0]);for(var h=0;h<i.length;h++)t.placeTextWithEllipsis(i[h],i[h].textContent,e.config.yaxis[0].labels.maxWidth-(e.config.yaxis[0].title.text?2*parseFloat(e.config.yaxis[0].title.style.fontSize):0)-15)}}}]),e}(),Z=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.xaxisLabels=n.globals.labels.slice(),this.axesUtils=new j(t),this.isRangeBar=n.globals.seriesRangeBar.length,n.globals.timescaleLabels.length>0&&(this.xaxisLabels=n.globals.timescaleLabels.slice())}return c(e,[{key:"drawGridArea",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.w,n=new w(this.ctx);null===e&&(e=n.group({class:"apexcharts-grid"}));var a=n.drawLine(t.globals.padHorizontal,1,t.globals.padHorizontal,t.globals.gridHeight,"transparent"),r=n.drawLine(t.globals.padHorizontal,t.globals.gridHeight,t.globals.gridWidth,t.globals.gridHeight,"transparent");return e.add(r),e.add(a),e}},{key:"drawGrid",value:function(){var e=null;return this.w.globals.axisCharts&&(e=this.renderGrid(),this.drawGridArea(e.el)),e}},{key:"createGridMask",value:function(){var e=this.w,t=e.globals,n=new w(this.ctx),a=Array.isArray(e.config.stroke.width)?0:e.config.stroke.width;if(Array.isArray(e.config.stroke.width)){var r=0;e.config.stroke.width.forEach((function(e){r=Math.max(r,e)})),a=r}t.dom.elGridRectMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(t.cuid)),t.dom.elGridRectMarkerMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(t.cuid)),t.dom.elForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elForecastMask.setAttribute("id","forecastMask".concat(t.cuid)),t.dom.elNonForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(t.cuid));var i=e.config.chart.type,o=0,s=0;("bar"===i||"rangeBar"===i||"candlestick"===i||"boxPlot"===i||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&(o=e.config.grid.padding.left,s=e.config.grid.padding.right,t.barPadForNumericAxis>o&&(o=t.barPadForNumericAxis,s=t.barPadForNumericAxis)),t.dom.elGridRect=n.drawRect(-a/2-o-2,-a/2,t.gridWidth+a+s+o+4,t.gridHeight+a,0,"#fff");var l=e.globals.markers.largestSize+1;t.dom.elGridRectMarker=n.drawRect(2*-l,2*-l,t.gridWidth+4*l,t.gridHeight+4*l,0,"#fff"),t.dom.elGridRectMask.appendChild(t.dom.elGridRect.node),t.dom.elGridRectMarkerMask.appendChild(t.dom.elGridRectMarker.node);var c=t.dom.baseEl.querySelector("defs");c.appendChild(t.dom.elGridRectMask),c.appendChild(t.dom.elForecastMask),c.appendChild(t.dom.elNonForecastMask),c.appendChild(t.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(e){var t=e.i,n=e.x1,a=e.y1,r=e.x2,i=e.y2,o=e.xCount,s=e.parent,l=this.w;if(!(0===t&&l.globals.skipFirstTimelinelabel||t===o-1&&l.globals.skipLastTimelinelabel&&!l.config.xaxis.labels.formatter||"radar"===l.config.chart.type)){l.config.grid.xaxis.lines.show&&this._drawGridLine({x1:n,y1:a,x2:r,y2:i,parent:s});var c=0;if(l.globals.hasGroups&&"between"===l.config.xaxis.tickPlacement){var u=l.globals.groups;if(u){for(var h=0,d=0;h<t&&d<u.length;d++)h+=u[d].cols;h===t&&(c=.6*l.globals.xAxisLabelsHeight)}}new K(this.ctx).drawXaxisTicks(n,c,this.elg)}}},{key:"_drawGridLine",value:function(e){var t=e.x1,n=e.y1,a=e.x2,r=e.y2,i=e.parent,o=this.w,s=i.node.classList.contains("apexcharts-gridlines-horizontal"),l=o.config.grid.strokeDashArray,c=o.globals.barPadForNumericAxis,u=new w(this).drawLine(t-(s?c:0),n,a+(s?c:0),r,o.config.grid.borderColor,l);u.node.classList.add("apexcharts-gridline"),i.add(u)}},{key:"_drawGridBandRect",value:function(e){var t=e.c,n=e.x1,a=e.y1,r=e.x2,i=e.y2,o=e.type,s=this.w,l=new w(this.ctx),c=s.globals.barPadForNumericAxis;if("column"!==o||"datetime"!==s.config.xaxis.type){var u=s.config.grid[o].colors[t],h=l.drawRect(n-("row"===o?c:0),a,r+("row"===o?2*c:0),i,0,u,s.config.grid[o].opacity);this.elg.add(h),h.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")")),h.node.classList.add("apexcharts-grid-".concat(o))}}},{key:"_drawXYLines",value:function(e){var t=this,n=e.xCount,a=e.tickAmount,r=this.w;if(r.config.grid.xaxis.lines.show||r.config.xaxis.axisTicks.show){var i,o=r.globals.padHorizontal,s=r.globals.gridHeight;r.globals.timescaleLabels.length?function(e){for(var a=e.xC,r=e.x1,i=e.y1,o=e.x2,s=e.y2,l=0;l<a;l++)r=t.xaxisLabels[l].position,o=t.xaxisLabels[l].position,t._drawGridLines({i:l,x1:r,y1:i,x2:o,y2:s,xCount:n,parent:t.elgridLinesV})}({xC:n,x1:o,y1:0,x2:i,y2:s}):(r.globals.isXNumeric&&(n=r.globals.xAxisScale.result.length),r.config.xaxis.convertedCatToNumeric&&(n=r.globals.xaxisLabelsCount),function(e){var a=e.xC,i=e.x1,o=e.y1,s=e.x2,l=e.y2;if(void 0!==r.config.xaxis.tickAmount&&"dataPoints"!==r.config.xaxis.tickAmount&&"on"===r.config.xaxis.tickPlacement)r.globals.dom.baseEl.querySelectorAll(".apexcharts-text.apexcharts-xaxis-label tspan:not(:empty)").forEach((function(e,a){var r=e.getBBox();t._drawGridLines({i:a,x1:r.x+r.width/2,y1:o,x2:r.x+r.width/2,y2:l,xCount:n,parent:t.elgridLinesV})}));else for(var c=0;c<a+(r.globals.isXNumeric?0:1);c++)0===c&&1===a&&1===r.globals.dataPoints&&(s=i=r.globals.gridWidth/2),t._drawGridLines({i:c,x1:i,y1:o,x2:s,y2:l,xCount:n,parent:t.elgridLinesV}),s=i+=r.globals.gridWidth/(r.globals.isXNumeric?a-1:a)}({xC:n,x1:o,y1:0,x2:i,y2:s}))}if(r.config.grid.yaxis.lines.show){var l=0,c=0,u=r.globals.gridWidth,h=a+1;this.isRangeBar&&(h=r.globals.labels.length);for(var d=0;d<h+(this.isRangeBar?1:0);d++)this._drawGridLine({x1:0,y1:l,x2:u,y2:c,parent:this.elgridLinesH}),c=l+=r.globals.gridHeight/(this.isRangeBar?h:a)}}},{key:"_drawInvertedXYLines",value:function(e){var t=e.xCount,n=this.w;if(n.config.grid.xaxis.lines.show||n.config.xaxis.axisTicks.show)for(var a,r=n.globals.padHorizontal,i=n.globals.gridHeight,o=0;o<t+1;o++)n.config.grid.xaxis.lines.show&&this._drawGridLine({x1:r,y1:0,x2:a,y2:i,parent:this.elgridLinesV}),new K(this.ctx).drawXaxisTicks(r,0,this.elg),a=r=r+n.globals.gridWidth/t+.3;if(n.config.grid.yaxis.lines.show)for(var s=0,l=0,c=n.globals.gridWidth,u=0;u<n.globals.dataPoints+1;u++)this._drawGridLine({x1:0,y1:s,x2:c,y2:l,parent:this.elgridLinesH}),l=s+=n.globals.gridHeight/n.globals.dataPoints}},{key:"renderGrid",value:function(){var e=this.w,t=new w(this.ctx);this.elg=t.group({class:"apexcharts-grid"}),this.elgridLinesH=t.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=t.group({class:"apexcharts-gridlines-vertical"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),e.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide());for(var n,a=e.globals.yAxisScale.length?e.globals.yAxisScale[0].result.length-1:5,r=0;r<e.globals.series.length&&(void 0!==e.globals.yAxisScale[r]&&(a=e.globals.yAxisScale[r].result.length-1),!(a>2));r++);return!e.globals.isBarHorizontal||this.isRangeBar?(n=this.xaxisLabels.length,this.isRangeBar&&(a=e.globals.labels.length,e.config.xaxis.tickAmount&&e.config.xaxis.labels.formatter&&(n=e.config.xaxis.tickAmount)),this._drawXYLines({xCount:n,tickAmount:a})):(n=a,a=e.globals.xTickAmount,this._drawInvertedXYLines({xCount:n,tickAmount:a})),this.drawGridBands(n,a),{el:this.elg,xAxisTickWidth:e.globals.gridWidth/n}}},{key:"drawGridBands",value:function(e,t){var n=this.w;if(void 0!==n.config.grid.row.colors&&n.config.grid.row.colors.length>0)for(var a=0,r=n.globals.gridHeight/t,i=n.globals.gridWidth,o=0,s=0;o<t;o++,s++)s>=n.config.grid.row.colors.length&&(s=0),this._drawGridBandRect({c:s,x1:0,y1:a,x2:i,y2:r,type:"row"}),a+=n.globals.gridHeight/t;if(void 0!==n.config.grid.column.colors&&n.config.grid.column.colors.length>0)for(var l=n.globals.isBarHorizontal||"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric?e:e-1,c=n.globals.padHorizontal,u=n.globals.padHorizontal+n.globals.gridWidth/l,h=n.globals.gridHeight,d=0,f=0;d<e;d++,f++)f>=n.config.grid.column.colors.length&&(f=0),this._drawGridBandRect({c:f,x1:c,y1:0,x2:u,y2:h,type:"column"}),c+=n.globals.gridWidth/l}}]),e}(),$=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"niceScale",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,i=this.w,o=Math.abs(t-e);if("dataPoints"===(n=this._adjustTicksForSmallRange(n,a,o))&&(n=i.globals.dataPoints-1),e===Number.MIN_VALUE&&0===t||!b.isNumber(e)&&!b.isNumber(t)||e===Number.MIN_VALUE&&t===-Number.MAX_VALUE){e=0,t=n;var s=this.linearScale(e,t,n);return s}e>t?(console.warn("axis.min cannot be greater than axis.max"),t=e+.1):e===t&&(e=0===e?0:e-.5,t=0===t?2:t+.5);var l=[];o<1&&r&&("candlestick"===i.config.chart.type||"candlestick"===i.config.series[a].type||"boxPlot"===i.config.chart.type||"boxPlot"===i.config.series[a].type||i.globals.isRangeData)&&(t*=1.01);var c=n+1;c<2?c=2:c>2&&(c-=2);var u=o/c,h=Math.floor(b.log10(u)),d=Math.pow(10,h),f=Math.round(u/d);f<1&&(f=1);var p=f*d,g=p*Math.floor(e/p),v=p*Math.ceil(t/p),m=g;if(r&&o>2){for(;l.push(m),!((m+=p)>v););return{result:l,niceMin:l[0],niceMax:l[l.length-1]}}var x=e;(l=[]).push(x);for(var y=Math.abs(t-e)/n,k=0;k<=n;k++)x+=y,l.push(x);return l[l.length-2]>=t&&l.pop(),{result:l,niceMin:l[0],niceMax:l[l.length-1]}}},{key:"linearScale",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3?arguments[3]:void 0,r=Math.abs(t-e);"dataPoints"===(n=this._adjustTicksForSmallRange(n,a,r))&&(n=this.w.globals.dataPoints-1);var i=r/n;n===Number.MAX_VALUE&&(n=10,i=1);for(var o=[],s=e;n>=0;)o.push(s),s+=i,n-=1;return{result:o,niceMin:o[0],niceMax:o[o.length-1]}}},{key:"logarithmicScaleNice",value:function(e,t,n){t<=0&&(t=Math.max(e,n)),e<=0&&(e=Math.min(t,n));for(var a=[],r=Math.ceil(Math.log(t)/Math.log(n)+1),i=Math.floor(Math.log(e)/Math.log(n));i<r;i++)a.push(Math.pow(n,i));return{result:a,niceMin:a[0],niceMax:a[a.length-1]}}},{key:"logarithmicScale",value:function(e,t,n){t<=0&&(t=Math.max(e,n)),e<=0&&(e=Math.min(t,n));for(var a=[],r=Math.log(t)/Math.log(n),i=Math.log(e)/Math.log(n),o=r-i,s=Math.round(o),l=o/s,c=0,u=i;c<s;c++,u+=l)a.push(Math.pow(n,u));return a.push(Math.pow(n,r)),{result:a,niceMin:e,niceMax:t}}},{key:"_adjustTicksForSmallRange",value:function(e,t,n){var a=e;if(void 0!==t&&this.w.config.yaxis[t].labels.formatter&&void 0===this.w.config.yaxis[t].tickAmount){var r=this.w.config.yaxis[t].labels.formatter(1);b.isNumber(Number(r))&&!b.isFloat(r)&&(a=Math.ceil(n))}return a<e?a:e}},{key:"setYScaleForIndex",value:function(e,t,n){var a=this.w.globals,r=this.w.config,i=a.isBarHorizontal?r.xaxis:r.yaxis[e];void 0===a.yAxisScale[e]&&(a.yAxisScale[e]=[]);var o=Math.abs(n-t);if(i.logarithmic&&o<=5&&(a.invalidLogScale=!0),i.logarithmic&&o>5)a.allSeriesCollapsed=!1,a.yAxisScale[e]=this.logarithmicScale(t,n,i.logBase),a.yAxisScale[e]=i.forceNiceScale?this.logarithmicScaleNice(t,n,i.logBase):this.logarithmicScale(t,n,i.logBase);else if(n!==-Number.MAX_VALUE&&b.isNumber(n))if(a.allSeriesCollapsed=!1,void 0===i.min&&void 0===i.max||i.forceNiceScale){var s=void 0===r.yaxis[e].max&&void 0===r.yaxis[e].min||r.yaxis[e].forceNiceScale;a.yAxisScale[e]=this.niceScale(t,n,i.tickAmount?i.tickAmount:o<5&&o>1?o+1:5,e,s)}else a.yAxisScale[e]=this.linearScale(t,n,i.tickAmount,e);else a.yAxisScale[e]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(e,t){var n=this.w,a=n.globals,r=n.config.xaxis,i=Math.abs(t-e);return t!==-Number.MAX_VALUE&&b.isNumber(t)?a.xAxisScale=this.linearScale(e,t,r.tickAmount?r.tickAmount:i<5&&i>1?i+1:5,0):a.xAxisScale=this.linearScale(0,5,5),a.xAxisScale}},{key:"setMultipleYScales",value:function(){var e=this,t=this.w.globals,n=this.w.config,a=t.minYArr.concat([]),r=t.maxYArr.concat([]),i=[];n.yaxis.forEach((function(t,o){var s=o;n.series.forEach((function(e,n){e.name===t.seriesName&&(s=n,o!==n?i.push({index:n,similarIndex:o,alreadyExists:!0}):i.push({index:n}))}));var l=a[s],c=r[s];e.setYScaleForIndex(o,l,c)})),this.sameScaleInMultipleAxes(a,r,i)}},{key:"sameScaleInMultipleAxes",value:function(e,t,n){var a=this,r=this.w.config,i=this.w.globals,o=[];n.forEach((function(e){e.alreadyExists&&(void 0===o[e.index]&&(o[e.index]=[]),o[e.index].push(e.index),o[e.index].push(e.similarIndex))})),i.yAxisSameScaleIndices=o,o.forEach((function(e,t){o.forEach((function(n,a){var r,i;t!==a&&(r=e,i=n,r.filter((function(e){return-1!==i.indexOf(e)}))).length>0&&(o[t]=o[t].concat(o[a]))}))}));var s=o.map((function(e){return e.filter((function(t,n){return e.indexOf(t)===n}))})).map((function(e){return e.sort()}));o=o.filter((function(e){return!!e}));var l=s.slice(),c=l.map((function(e){return JSON.stringify(e)}));l=l.filter((function(e,t){return c.indexOf(JSON.stringify(e))===t}));var u=[],h=[];e.forEach((function(e,n){l.forEach((function(a,r){a.indexOf(n)>-1&&(void 0===u[r]&&(u[r]=[],h[r]=[]),u[r].push({key:n,value:e}),h[r].push({key:n,value:t[n]}))}))}));var d=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),f=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);u.forEach((function(e,t){e.forEach((function(e,n){d[t]=Math.min(e.value,d[t])}))})),h.forEach((function(e,t){e.forEach((function(e,n){f[t]=Math.max(e.value,f[t])}))})),e.forEach((function(e,t){h.forEach((function(e,n){var o=d[n],s=f[n];r.chart.stacked&&(s=0,e.forEach((function(e,t){e.value!==-Number.MAX_VALUE&&(s+=e.value),o!==Number.MIN_VALUE&&(o+=u[n][t].value)}))),e.forEach((function(n,l){e[l].key===t&&(void 0!==r.yaxis[t].min&&(o="function"==typeof r.yaxis[t].min?r.yaxis[t].min(i.minY):r.yaxis[t].min),void 0!==r.yaxis[t].max&&(s="function"==typeof r.yaxis[t].max?r.yaxis[t].max(i.maxY):r.yaxis[t].max),a.setYScaleForIndex(t,o,s))}))}))}))}},{key:"autoScaleY",value:function(e,t,n){e||(e=this);var a=e.w;if(a.globals.isMultipleYAxis||a.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),t;var r=a.globals.seriesX[0],i=a.config.chart.stacked;return t.forEach((function(e,o){for(var s=0,l=0;l<r.length;l++)if(r[l]>=n.xaxis.min){s=l;break}var c,u,h=a.globals.minYArr[o],d=a.globals.maxYArr[o],f=a.globals.stackedSeriesTotals;a.globals.series.forEach((function(o,l){var p=o[s];i?(p=f[s],c=u=p,f.forEach((function(e,t){r[t]<=n.xaxis.max&&r[t]>=n.xaxis.min&&(e>u&&null!==e&&(u=e),o[t]<c&&null!==o[t]&&(c=o[t]))}))):(c=u=p,o.forEach((function(e,t){if(r[t]<=n.xaxis.max&&r[t]>=n.xaxis.min){var i=e,o=e;a.globals.series.forEach((function(n,a){null!==e&&(i=Math.min(n[t],i),o=Math.max(n[t],o))})),o>u&&null!==o&&(u=o),i<c&&null!==i&&(c=i)}}))),void 0===c&&void 0===u&&(c=h,u=d),(u*=u<0?.9:1.1)<0&&u<d&&(u=d),(c*=c<0?1.1:.9)<0&&c>h&&(c=h),t.length>1?(t[l].min=void 0===e.min?c:e.min,t[l].max=void 0===e.max?u:e.max):(t[0].min=void 0===e.min?c:e.min,t[0].max=void 0===e.max?u:e.max)}))})),t}}]),e}(),Q=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.scales=new $(t)}return c(e,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=this.w.config,i=this.w.globals,o=-Number.MAX_VALUE,s=Number.MIN_VALUE;null===a&&(a=e+1);var l=i.series,c=l,u=l;"candlestick"===r.chart.type?(c=i.seriesCandleL,u=i.seriesCandleH):"boxPlot"===r.chart.type?(c=i.seriesCandleO,u=i.seriesCandleC):i.isRangeData&&(c=i.seriesRangeStart,u=i.seriesRangeEnd);for(var h=e;h<a;h++){i.dataPoints=Math.max(i.dataPoints,l[h].length),i.categoryLabels.length&&(i.dataPoints=i.categoryLabels.filter((function(e){return void 0!==e})).length);for(var d=0;d<i.series[h].length;d++){var f=l[h][d];null!==f&&b.isNumber(f)?(void 0!==u[h][d]&&(o=Math.max(o,u[h][d]),t=Math.min(t,u[h][d])),void 0!==c[h][d]&&(t=Math.min(t,c[h][d]),n=Math.max(n,c[h][d])),"candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type||(void 0!==i.seriesCandleC[h][d]&&(o=Math.max(o,i.seriesCandleO[h][d]),o=Math.max(o,i.seriesCandleH[h][d]),o=Math.max(o,i.seriesCandleL[h][d]),o=Math.max(o,i.seriesCandleC[h][d]),"boxPlot"===this.w.config.chart.type&&(o=Math.max(o,i.seriesCandleM[h][d]))),!r.series[h].type||"candlestick"===r.series[h].type&&"boxPlot"===r.series[h].type||(o=Math.max(o,i.series[h][d]),t=Math.min(t,i.series[h][d])),n=o),i.seriesGoals[h]&&i.seriesGoals[h][d]&&Array.isArray(i.seriesGoals[h][d])&&i.seriesGoals[h][d].forEach((function(e){s!==Number.MIN_VALUE&&(s=Math.min(s,e.value),t=s),o=Math.max(o,e.value),n=o})),b.isFloat(f)&&(f=b.noExponents(f),i.yValueDecimal=Math.max(i.yValueDecimal,f.toString().split(".")[1].length)),s>c[h][d]&&c[h][d]<0&&(s=c[h][d])):i.hasNullValues=!0}}return"rangeBar"===r.chart.type&&i.seriesRangeStart.length&&i.isBarHorizontal&&(s=t),"bar"===r.chart.type&&(s<0&&o<0&&(o=0),s===Number.MIN_VALUE&&(s=0)),{minY:s,maxY:o,lowestY:t,highestY:n}}},{key:"setYRange",value:function(){var e=this.w.globals,t=this.w.config;e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE;var n=Number.MAX_VALUE;if(e.isMultipleYAxis)for(var a=0;a<e.series.length;a++){var r=this.getMinYMaxY(a,n,null,a+1);e.minYArr.push(r.minY),e.maxYArr.push(r.maxY),n=r.lowestY}var i=this.getMinYMaxY(0,n,null,e.series.length);if(e.minY=i.minY,e.maxY=i.maxY,n=i.lowestY,t.chart.stacked&&this._setStackedMinMax(),("line"===t.chart.type||"area"===t.chart.type||"candlestick"===t.chart.type||"boxPlot"===t.chart.type||"rangeBar"===t.chart.type&&!e.isBarHorizontal)&&e.minY===Number.MIN_VALUE&&n!==-Number.MAX_VALUE&&n!==e.maxY){var o=e.maxY-n;(n>=0&&n<=10||void 0!==t.yaxis[0].min||void 0!==t.yaxis[0].max)&&(o=0),e.minY=n-5*o/100,n>0&&e.minY<0&&(e.minY=0),e.maxY=e.maxY+5*o/100}return t.yaxis.forEach((function(t,n){void 0!==t.max&&("number"==typeof t.max?e.maxYArr[n]=t.max:"function"==typeof t.max&&(e.maxYArr[n]=t.max(e.isMultipleYAxis?e.maxYArr[n]:e.maxY)),e.maxY=e.maxYArr[n]),void 0!==t.min&&("number"==typeof t.min?e.minYArr[n]=t.min:"function"==typeof t.min&&(e.minYArr[n]=t.min(e.isMultipleYAxis?e.minYArr[n]===Number.MIN_VALUE?0:e.minYArr[n]:e.minY)),e.minY=e.minYArr[n])})),e.isBarHorizontal&&["min","max"].forEach((function(n){void 0!==t.xaxis[n]&&"number"==typeof t.xaxis[n]&&("min"===n?e.minY=t.xaxis[n]:e.maxY=t.xaxis[n])})),e.isMultipleYAxis?(this.scales.setMultipleYScales(),e.minY=n,e.yAxisScale.forEach((function(t,n){e.minYArr[n]=t.niceMin,e.maxYArr[n]=t.niceMax}))):(this.scales.setYScaleForIndex(0,e.minY,e.maxY),e.minY=e.yAxisScale[0].niceMin,e.maxY=e.yAxisScale[0].niceMax,e.minYArr[0]=e.yAxisScale[0].niceMin,e.maxYArr[0]=e.yAxisScale[0].niceMax),{minY:e.minY,maxY:e.maxY,minYArr:e.minYArr,maxYArr:e.maxYArr,yAxisScale:e.yAxisScale}}},{key:"setXRange",value:function(){var e=this.w.globals,t=this.w.config,n="numeric"===t.xaxis.type||"datetime"===t.xaxis.type||"category"===t.xaxis.type&&!e.noLabelsProvided||e.noLabelsProvided||e.isXNumeric;if(e.isXNumeric&&function(){for(var t=0;t<e.series.length;t++)if(e.labels[t])for(var n=0;n<e.labels[t].length;n++)null!==e.labels[t][n]&&b.isNumber(e.labels[t][n])&&(e.maxX=Math.max(e.maxX,e.labels[t][n]),e.initialMaxX=Math.max(e.maxX,e.labels[t][n]),e.minX=Math.min(e.minX,e.labels[t][n]),e.initialMinX=Math.min(e.minX,e.labels[t][n]))}(),e.noLabelsProvided&&0===t.xaxis.categories.length&&(e.maxX=e.labels[e.labels.length-1],e.initialMaxX=e.labels[e.labels.length-1],e.minX=1,e.initialMinX=1),e.isXNumeric||e.noLabelsProvided||e.dataFormatXNumeric){var a;if(void 0===t.xaxis.tickAmount?(a=Math.round(e.svgWidth/150),"numeric"===t.xaxis.type&&e.dataPoints<30&&(a=e.dataPoints-1),a>e.dataPoints&&0!==e.dataPoints&&(a=e.dataPoints-1)):"dataPoints"===t.xaxis.tickAmount?(e.series.length>1&&(a=e.series[e.maxValsInArrayIndex].length-1),e.isXNumeric&&(a=e.maxX-e.minX-1)):a=t.xaxis.tickAmount,e.xTickAmount=a,void 0!==t.xaxis.max&&"number"==typeof t.xaxis.max&&(e.maxX=t.xaxis.max),void 0!==t.xaxis.min&&"number"==typeof t.xaxis.min&&(e.minX=t.xaxis.min),void 0!==t.xaxis.range&&(e.minX=e.maxX-t.xaxis.range),e.minX!==Number.MAX_VALUE&&e.maxX!==-Number.MAX_VALUE)if(t.xaxis.convertedCatToNumeric&&!e.dataFormatXNumeric){for(var r=[],i=e.minX-1;i<e.maxX;i++)r.push(i+1);e.xAxisScale={result:r,niceMin:r[0],niceMax:r[r.length-1]}}else e.xAxisScale=this.scales.setXScale(e.minX,e.maxX);else e.xAxisScale=this.scales.linearScale(1,a,a),e.noLabelsProvided&&e.labels.length>0&&(e.xAxisScale=this.scales.linearScale(1,e.labels.length,a-1),e.seriesX=e.labels.slice());n&&(e.labels=e.xAxisScale.result.slice())}return e.isBarHorizontal&&e.labels.length&&(e.xTickAmount=e.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:e.minX,maxX:e.maxX}}},{key:"setZRange",value:function(){var e=this.w.globals;if(e.isDataXYZ)for(var t=0;t<e.series.length;t++)if(void 0!==e.seriesZ[t])for(var n=0;n<e.seriesZ[t].length;n++)null!==e.seriesZ[t][n]&&b.isNumber(e.seriesZ[t][n])&&(e.maxZ=Math.max(e.maxZ,e.seriesZ[t][n]),e.minZ=Math.min(e.minZ,e.seriesZ[t][n]))}},{key:"_handleSingleDataPoint",value:function(){var e=this.w.globals,t=this.w.config;if(e.minX===e.maxX){var n=new B(this.ctx);if("datetime"===t.xaxis.type){var a=n.getDate(e.minX);t.xaxis.labels.datetimeUTC?a.setUTCDate(a.getUTCDate()-2):a.setDate(a.getDate()-2),e.minX=new Date(a).getTime();var r=n.getDate(e.maxX);t.xaxis.labels.datetimeUTC?r.setUTCDate(r.getUTCDate()+2):r.setDate(r.getDate()+2),e.maxX=new Date(r).getTime()}else("numeric"===t.xaxis.type||"category"===t.xaxis.type&&!e.noLabelsProvided)&&(e.minX=e.minX-2,e.initialMinX=e.minX,e.maxX=e.maxX+2,e.initialMaxX=e.maxX)}}},{key:"_getMinXDiff",value:function(){var e=this.w.globals;e.isXNumeric&&e.seriesX.forEach((function(t,n){1===t.length&&t.push(e.seriesX[e.maxValsInArrayIndex][e.seriesX[e.maxValsInArrayIndex].length-1]);var a=t.slice();a.sort((function(e,t){return e-t})),a.forEach((function(t,n){if(n>0){var r=t-a[n-1];r>0&&(e.minXDiff=Math.min(r,e.minXDiff))}})),1!==e.dataPoints&&e.minXDiff!==Number.MAX_VALUE||(e.minXDiff=.5)}))}},{key:"_setStackedMinMax",value:function(){var e=this.w.globals,t=[],n=[];if(e.series.length)for(var a=0;a<e.series[e.maxValsInArrayIndex].length;a++)for(var r=0,i=0,o=0;o<e.series.length;o++)null!==e.series[o][a]&&b.isNumber(e.series[o][a])&&(e.series[o][a]>0?r=r+parseFloat(e.series[o][a])+1e-4:i+=parseFloat(e.series[o][a])),o===e.series.length-1&&(t.push(r),n.push(i));for(var s=0;s<t.length;s++)e.maxY=Math.max(e.maxY,t[s]),e.minY=Math.min(e.minY,n[s])}}]),e}(),J=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.axisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===n.config.chart.type&&n.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===n.config.xaxis.position&&(this.xAxisoffX=n.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new j(t)}return c(e,[{key:"drawYaxis",value:function(e){var t=this,n=this.w,a=new w(this.ctx),r=n.config.yaxis[e].labels.style,i=r.fontSize,o=r.fontFamily,s=r.fontWeight,l=a.group({class:"apexcharts-yaxis",rel:e,transform:"translate("+n.globals.translateYAxisX[e]+", 0)"});if(this.axesUtils.isYAxisHidden(e))return l;var c=a.group({class:"apexcharts-yaxis-texts-g"});l.add(c);var u=n.globals.yAxisScale[e].result.length-1,h=n.globals.gridHeight/u,d=n.globals.translateY,f=n.globals.yLabelFormatters[e],p=n.globals.yAxisScale[e].result.slice();p=this.axesUtils.checkForReversedLabels(e,p);var g="";if(n.config.yaxis[e].labels.show)for(var v=function(l){var v=p[l];v=f(v,l,n);var m=n.config.yaxis[e].labels.padding;n.config.yaxis[e].opposite&&0!==n.config.yaxis.length&&(m*=-1);var x=t.axesUtils.getYAxisForeColor(r.colors,e),b=a.drawText({x:m,y:d+u/10+n.config.yaxis[e].labels.offsetY+1,text:v,textAnchor:n.config.yaxis[e].opposite?"start":"end",fontSize:i,fontFamily:o,fontWeight:s,maxWidth:n.config.yaxis[e].labels.maxWidth,foreColor:Array.isArray(x)?x[l]:x,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+r.cssClass});l===u&&(g=b),c.add(b);var y=document.createElementNS(n.globals.SVGNS,"title");if(y.textContent=Array.isArray(v)?v.join(" "):v,b.node.appendChild(y),0!==n.config.yaxis[e].labels.rotate){var k=a.rotateAroundCenter(g.node),w=a.rotateAroundCenter(b.node);b.node.setAttribute("transform","rotate(".concat(n.config.yaxis[e].labels.rotate," ").concat(k.x," ").concat(w.y,")"))}d+=h},m=u;m>=0;m--)v(m);if(void 0!==n.config.yaxis[e].title.text){var x=a.group({class:"apexcharts-yaxis-title"}),b=0;n.config.yaxis[e].opposite&&(b=n.globals.translateYAxisX[e]);var y=a.drawText({x:b,y:n.globals.gridHeight/2+n.globals.translateY+n.config.yaxis[e].title.offsetY,text:n.config.yaxis[e].title.text,textAnchor:"end",foreColor:n.config.yaxis[e].title.style.color,fontSize:n.config.yaxis[e].title.style.fontSize,fontWeight:n.config.yaxis[e].title.style.fontWeight,fontFamily:n.config.yaxis[e].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+n.config.yaxis[e].title.style.cssClass});x.add(y),l.add(x)}var k=n.config.yaxis[e].axisBorder,S=31+k.offsetX;if(n.config.yaxis[e].opposite&&(S=-31-k.offsetX),k.show){var C=a.drawLine(S,n.globals.translateY+k.offsetY-2,S,n.globals.gridHeight+n.globals.translateY+k.offsetY+2,k.color,0,k.width);l.add(C)}return n.config.yaxis[e].axisTicks.show&&this.axesUtils.drawYAxisTicks(S,u,k,n.config.yaxis[e].axisTicks,e,h,l),l}},{key:"drawYaxisInversed",value:function(e){var t=this.w,n=new w(this.ctx),a=n.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),r=n.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});a.add(r);var i=t.globals.yAxisScale[e].result.length-1,o=t.globals.gridWidth/i+.1,s=o+t.config.xaxis.labels.offsetX,l=t.globals.xLabelFormatter,c=t.globals.yAxisScale[e].result.slice(),u=t.globals.timescaleLabels;u.length>0&&(this.xaxisLabels=u.slice(),i=(c=u.slice()).length),c=this.axesUtils.checkForReversedLabels(e,c);var h=u.length;if(t.config.xaxis.labels.show)for(var d=h?0:i;h?d<h:d>=0;h?d++:d--){var f=c[d];f=l(f,d,t);var p=t.globals.gridWidth+t.globals.padHorizontal-(s-o+t.config.xaxis.labels.offsetX);if(u.length){var g=this.axesUtils.getLabel(c,u,p,d,this.drawnLabels,this.xaxisFontSize);p=g.x,f=g.text,this.drawnLabels.push(g.text),0===d&&t.globals.skipFirstTimelinelabel&&(f=""),d===c.length-1&&t.globals.skipLastTimelinelabel&&(f="")}var v=n.drawText({x:p,y:this.xAxisoffX+t.config.xaxis.labels.offsetY+30-("top"===t.config.xaxis.position?t.globals.xAxisHeight+t.config.xaxis.axisTicks.height-2:0),text:f,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[e]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:t.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+t.config.xaxis.labels.style.cssClass});r.add(v),v.tspan(f);var m=document.createElementNS(t.globals.SVGNS,"title");m.textContent=f,v.node.appendChild(m),s+=o}return this.inversedYAxisTitleText(a),this.inversedYAxisBorder(a),a}},{key:"inversedYAxisBorder",value:function(e){var t=this.w,n=new w(this.ctx),a=t.config.xaxis.axisBorder;if(a.show){var r=0;"bar"===t.config.chart.type&&t.globals.isXNumeric&&(r-=15);var i=n.drawLine(t.globals.padHorizontal+r+a.offsetX,this.xAxisoffX,t.globals.gridWidth,this.xAxisoffX,a.color,0,a.height);e.add(i)}}},{key:"inversedYAxisTitleText",value:function(e){var t=this.w,n=new w(this.ctx);if(void 0!==t.config.xaxis.title.text){var a=n.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),r=n.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(t.config.xaxis.title.style.fontSize)+t.config.xaxis.title.offsetY+20,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+t.config.xaxis.title.style.cssClass});a.add(r),e.add(a)}}},{key:"yAxisTitleRotate",value:function(e,t){var n=this.w,a=new w(this.ctx),r={width:0,height:0},i={width:0,height:0},o=n.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-texts-g"));null!==o&&(r=o.getBoundingClientRect());var s=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-title text"));if(null!==s&&(i=s.getBoundingClientRect()),null!==s){var l=this.xPaddingForYAxisTitle(e,r,i,t);s.setAttribute("x",l.xPos-(t?10:0))}if(null!==s){var c=a.rotateAroundCenter(s);s.setAttribute("transform","rotate(".concat(t?-1*n.config.yaxis[e].title.rotate:n.config.yaxis[e].title.rotate," ").concat(c.x," ").concat(c.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(e,t,n,a){var r=this.w,i=0,o=0,s=10;return void 0===r.config.yaxis[e].title.text||e<0?{xPos:o,padd:0}:(a?(o=t.width+r.config.yaxis[e].title.offsetX+n.width/2+s/2,0===(i+=1)&&(o-=s/2)):(o=-1*t.width+r.config.yaxis[e].title.offsetX+s/2+n.width/2,r.globals.isBarHorizontal&&(s=25,o=-1*t.width-r.config.yaxis[e].title.offsetX-s)),{xPos:o,padd:s})}},{key:"setYAxisXPosition",value:function(e,t){var n=this.w,a=0,r=0,i=18,o=1;n.config.yaxis.length>1&&(this.multipleYs=!0),n.config.yaxis.map((function(s,l){var c=n.globals.ignoreYAxisIndexes.indexOf(l)>-1||!s.show||s.floating||0===e[l].width,u=e[l].width+t[l].width;s.opposite?n.globals.isBarHorizontal?(r=n.globals.gridWidth+n.globals.translateX-1,n.globals.translateYAxisX[l]=r-s.labels.offsetX):(r=n.globals.gridWidth+n.globals.translateX+o,c||(o=o+u+20),n.globals.translateYAxisX[l]=r-s.labels.offsetX+20):(a=n.globals.translateX-i,c||(i=i+u+20),n.globals.translateYAxisX[l]=a+s.labels.offsetX)}))}},{key:"setYAxisTextAlignments",value:function(){var e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(t=b.listToArray(t)).forEach((function(t,n){var a=e.config.yaxis[n];if(a&&void 0!==a.labels.align){var r=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-texts-g")),i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-label"));i=b.listToArray(i);var o=r.getBoundingClientRect();"left"===a.labels.align?(i.forEach((function(e,t){e.setAttribute("text-anchor","start")})),a.opposite||r.setAttribute("transform","translate(-".concat(o.width,", 0)"))):"center"===a.labels.align?(i.forEach((function(e,t){e.setAttribute("text-anchor","middle")})),r.setAttribute("transform","translate(".concat(o.width/2*(a.opposite?1:-1),", 0)"))):"right"===a.labels.align&&(i.forEach((function(e,t){e.setAttribute("text-anchor","end")})),a.opposite&&r.setAttribute("transform","translate(".concat(o.width,", 0)")))}}))}}]),e}(),ee=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.documentEvent=b.bind(this.documentEvent,this)}return c(e,[{key:"addEventListener",value:function(e,t){var n=this.w;n.globals.events.hasOwnProperty(e)?n.globals.events[e].push(t):n.globals.events[e]=[t]}},{key:"removeEventListener",value:function(e,t){var n=this.w;if(n.globals.events.hasOwnProperty(e)){var a=n.globals.events[e].indexOf(t);-1!==a&&n.globals.events[e].splice(a,1)}}},{key:"fireEvent",value:function(e,t){var n=this.w;if(n.globals.events.hasOwnProperty(e)){t&&t.length||(t=[]);for(var a=n.globals.events[e],r=a.length,i=0;i<r;i++)a[i].apply(null,t)}}},{key:"setupEventHandlers",value:function(){var e=this,t=this.w,n=this.ctx,a=t.globals.dom.baseEl.querySelector(t.globals.chartClass);this.ctx.eventList.forEach((function(e){a.addEventListener(e,(function(e){var a=Object.assign({},t,{seriesIndex:t.globals.capturedSeriesIndex,dataPointIndex:t.globals.capturedDataPointIndex});"mousemove"===e.type||"touchmove"===e.type?"function"==typeof t.config.chart.events.mouseMove&&t.config.chart.events.mouseMove(e,n,a):"mouseleave"===e.type||"touchleave"===e.type?"function"==typeof t.config.chart.events.mouseLeave&&t.config.chart.events.mouseLeave(e,n,a):("mouseup"===e.type&&1===e.which||"touchend"===e.type)&&("function"==typeof t.config.chart.events.click&&t.config.chart.events.click(e,n,a),n.ctx.events.fireEvent("click",[e,n,a]))}),{capture:!1,passive:!0})})),this.ctx.eventList.forEach((function(n){t.globals.dom.baseEl.addEventListener(n,e.documentEvent,{passive:!0})})),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(e){var t=this.w,n=e.target.className;if("click"===e.type){var a=t.globals.dom.baseEl.querySelector(".apexcharts-menu");a&&a.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==n&&a.classList.remove("apexcharts-menu-open")}t.globals.clientX="touchmove"===e.type?e.touches[0].clientX:e.clientX,t.globals.clientY="touchmove"===e.type?e.touches[0].clientY:e.clientY}}]),e}(),te=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"setCurrentLocaleValues",value:function(e){var t=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(t=this.w.config.chart.locales.concat(window.Apex.chart.locales));var n=t.filter((function(t){return t.name===e}))[0];if(!n)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var a=b.extend(N,n);this.w.globals.locale=a.options}}]),e}(),ne=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"drawAxis",value:function(e,t){var n,a,r=this.w.globals,i=this.w.config,o=new K(this.ctx),s=new J(this.ctx);r.axisCharts&&"radar"!==e&&(r.isBarHorizontal?(a=s.drawYaxisInversed(0),n=o.drawXaxisInversed(0),r.dom.elGraphical.add(n),r.dom.elGraphical.add(a)):(n=o.drawXaxis(),r.dom.elGraphical.add(n),i.yaxis.map((function(e,t){-1===r.ignoreYAxisIndexes.indexOf(t)&&(a=s.drawYaxis(t),r.dom.Paper.add(a))}))))}}]),e}(),ae=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"drawXCrosshairs",value:function(){var e=this.w,t=new w(this.ctx),n=new k(this.ctx),a=e.config.xaxis.crosshairs.fill.gradient,r=e.config.xaxis.crosshairs.dropShadow,i=e.config.xaxis.crosshairs.fill.type,o=a.colorFrom,s=a.colorTo,l=a.opacityFrom,c=a.opacityTo,u=a.stops,h=r.enabled,d=r.left,f=r.top,p=r.blur,g=r.color,v=r.opacity,m=e.config.xaxis.crosshairs.fill.color;if(e.config.xaxis.crosshairs.show){"gradient"===i&&(m=t.drawGradient("vertical",o,s,l,c,null,u,null));var x=t.drawRect();1===e.config.xaxis.crosshairs.width&&(x=t.drawLine());var y=e.globals.gridHeight;(!b.isNumber(y)||y<0)&&(y=0);var S=e.config.xaxis.crosshairs.width;(!b.isNumber(S)||S<0)&&(S=0),x.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:y,width:S,height:y,fill:m,filter:"none","fill-opacity":e.config.xaxis.crosshairs.opacity,stroke:e.config.xaxis.crosshairs.stroke.color,"stroke-width":e.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":e.config.xaxis.crosshairs.stroke.dashArray}),h&&(x=n.dropShadow(x,{left:d,top:f,blur:p,color:g,opacity:v})),e.globals.dom.elGraphical.add(x)}}},{key:"drawYCrosshairs",value:function(){var e=this.w,t=new w(this.ctx),n=e.config.yaxis[0].crosshairs,a=e.globals.barPadForNumericAxis;if(e.config.yaxis[0].crosshairs.show){var r=t.drawLine(-a,0,e.globals.gridWidth+a,0,n.stroke.color,n.stroke.dashArray,n.stroke.width);r.attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(r)}var i=t.drawLine(-a,0,e.globals.gridWidth+a,0,n.stroke.color,0,0);i.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(i)}}]),e}(),re=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"checkResponsiveConfig",value:function(e){var t=this,n=this.w,a=n.config;if(0!==a.responsive.length){var r=a.responsive.slice();r.sort((function(e,t){return e.breakpoint>t.breakpoint?1:t.breakpoint>e.breakpoint?-1:0})).reverse();var i=new V({}),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r[0].breakpoint,o=window.innerWidth>0?window.innerWidth:screen.width;if(o>a){var s=S.extendArrayProps(i,n.globals.initialConfig,n);e=b.extend(s,e),e=b.extend(n.config,e),t.overrideResponsiveOptions(e)}else for(var l=0;l<r.length;l++)o<r[l].breakpoint&&(e=S.extendArrayProps(i,r[l].options,n),e=b.extend(n.config,e),t.overrideResponsiveOptions(e))};if(e){var s=S.extendArrayProps(i,e,n);s=b.extend(n.config,s),o(s=b.extend(s,e))}else o({})}}},{key:"overrideResponsiveOptions",value:function(e){var t=new V(e).init({responsiveOverride:!0});this.w.config=t}}]),e}(),ie=function(){function e(t){s(this,e),this.ctx=t,this.colors=[],this.w=t.w;var n=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===n.config.chart.type&&n.config.plotOptions.treemap.distributed||"heatmap"===n.config.chart.type&&n.config.plotOptions.heatmap.distributed,this.isBarDistributed=n.config.plotOptions.bar.distributed&&("bar"===n.config.chart.type||"rangeBar"===n.config.chart.type)}return c(e,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var e=this,t=this.w,n=new b;if(t.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(t.config.theme.mode)),void 0===t.config.colors?t.globals.colors=this.predefined():(t.globals.colors=t.config.colors,Array.isArray(t.config.colors)&&t.config.colors.length>0&&"function"==typeof t.config.colors[0]&&(t.globals.colors=t.config.series.map((function(n,a){var r=t.config.colors[a];return r||(r=t.config.colors[0]),"function"==typeof r?(e.isColorFn=!0,r({value:t.globals.axisCharts?t.globals.series[a][0]?t.globals.series[a][0]:0:t.globals.series[a],seriesIndex:a,dataPointIndex:a,w:t})):r})))),t.globals.seriesColors.map((function(e,n){e&&(t.globals.colors[n]=e)})),t.config.theme.monochrome.enabled){var a=[],r=t.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(r=t.globals.series[0].length*t.globals.series.length);for(var i=t.config.theme.monochrome.color,o=1/(r/t.config.theme.monochrome.shadeIntensity),s=t.config.theme.monochrome.shadeTo,l=0,c=0;c<r;c++){var u=void 0;"dark"===s?(u=n.shadeColor(-1*l,i),l+=o):(u=n.shadeColor(l,i),l+=o),a.push(u)}t.globals.colors=a.slice()}var h=t.globals.colors.slice();this.pushExtraColors(t.globals.colors),["fill","stroke"].forEach((function(n){void 0===t.config[n].colors?t.globals[n].colors=e.isColorFn?t.config.colors:h:t.globals[n].colors=t.config[n].colors.slice(),e.pushExtraColors(t.globals[n].colors)})),void 0===t.config.dataLabels.style.colors?t.globals.dataLabels.style.colors=h:t.globals.dataLabels.style.colors=t.config.dataLabels.style.colors.slice(),this.pushExtraColors(t.globals.dataLabels.style.colors,50),void 0===t.config.plotOptions.radar.polygons.fill.colors?t.globals.radarPolygons.fill.colors=["dark"===t.config.theme.mode?"#424242":"none"]:t.globals.radarPolygons.fill.colors=t.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(t.globals.radarPolygons.fill.colors,20),void 0===t.config.markers.colors?t.globals.markers.colors=h:t.globals.markers.colors=t.config.markers.colors.slice(),this.pushExtraColors(t.globals.markers.colors)}},{key:"pushExtraColors",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.w,r=t||a.globals.series.length;if(null===n&&(n=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===a.config.chart.type&&a.config.plotOptions.heatmap.colorScale.inverse),n&&a.globals.series.length&&(r=a.globals.series[a.globals.maxValsInArrayIndex].length*a.globals.series.length),e.length<r)for(var i=r-e.length,o=0;o<i;o++)e.push(e[o])}},{key:"updateThemeOptions",value:function(e){e.chart=e.chart||{},e.tooltip=e.tooltip||{};var t=e.theme.mode||"light",n=e.theme.palette?e.theme.palette:"dark"===t?"palette4":"palette1",a=e.chart.foreColor?e.chart.foreColor:"dark"===t?"#f6f7f8":"#373d3f";return e.tooltip.theme=t,e.chart.foreColor=a,e.theme.palette=n,e}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),e}(),oe=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(e){var t=this.w,n="title"===e?t.config.title:t.config.subtitle,a=t.globals.svgWidth/2,r=n.offsetY,i="middle";if("left"===n.align?(a=10,i="start"):"right"===n.align&&(a=t.globals.svgWidth-10,i="end"),a+=n.offsetX,r=r+parseInt(n.style.fontSize,10)+n.margin/2,void 0!==n.text){var o=new w(this.ctx).drawText({x:a,y:r,text:n.text,textAnchor:i,fontSize:n.style.fontSize,fontFamily:n.style.fontFamily,fontWeight:n.style.fontWeight,foreColor:n.style.color,opacity:1});o.node.setAttribute("class","apexcharts-".concat(e,"-text")),t.globals.dom.Paper.add(o)}}}]),e}(),se=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"getTitleSubtitleCoords",value:function(e){var t=this.w,n=0,a=0,r="title"===e?t.config.title.floating:t.config.subtitle.floating,i=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(e,"-text"));if(null!==i&&!r){var o=i.getBoundingClientRect();n=o.width,a=t.globals.axisCharts?o.height+5:o.height}return{width:n,height:a}}},{key:"getLegendsRect",value:function(){var e=this.w,t=e.globals.dom.baseEl.querySelector(".apexcharts-legend");e.config.legend.height||"top"!==e.config.legend.position&&"bottom"!==e.config.legend.position||(t.style.maxHeight=e.globals.svgHeight/2+"px");var n=Object.assign({},b.getBoundingClientRect(t));return null!==t&&!e.config.legend.floating&&e.config.legend.show?this.dCtx.lgRect={x:n.x,y:n.y,height:n.height,width:0===n.height?0:n.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},"left"!==e.config.legend.position&&"right"!==e.config.legend.position||1.5*this.dCtx.lgRect.width>e.globals.svgWidth&&(this.dCtx.lgRect.width=e.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(e,t){var n=e;if(this.w.globals.isMultiLineX){var a=t.map((function(e,t){return Array.isArray(e)?e.length:1})),r=Math.max.apply(Math,v(a));n=t[a.indexOf(r)]}return n}}]),e}(),le=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"getxAxisLabelsCoords",value:function(){var e,t=this.w,n=t.globals.labels.slice();if(t.config.xaxis.convertedCatToNumeric&&0===n.length&&(n=t.globals.categoryLabels),t.globals.timescaleLabels.length>0){var a=this.getxAxisTimeScaleLabelsCoords();e={width:a.width,height:a.height},t.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==t.config.legend.position&&"right"!==t.config.legend.position||t.config.legend.floating?0:this.dCtx.lgRect.width;var r=t.globals.xLabelFormatter,i=b.getLargestStringFromArr(n),o=this.dCtx.dimHelpers.getLargestStringFromMultiArr(i,n);t.globals.isBarHorizontal&&(o=i=t.globals.yAxisScale[0].result.reduce((function(e,t){return e.length>t.length?e:t}),0));var s=new Y(this.dCtx.ctx),l=i;i=s.xLabelFormat(r,i,l,{i:void 0,dateFormatter:new B(this.dCtx.ctx).formatDate,w:t}),o=s.xLabelFormat(r,o,l,{i:void 0,dateFormatter:new B(this.dCtx.ctx).formatDate,w:t}),(t.config.xaxis.convertedCatToNumeric&&void 0===i||""===String(i).trim())&&(o=i="1");var c=new w(this.dCtx.ctx),u=c.getTextRects(i,t.config.xaxis.labels.style.fontSize),h=u;if(i!==o&&(h=c.getTextRects(o,t.config.xaxis.labels.style.fontSize)),(e={width:u.width>=h.width?u.width:h.width,height:u.height>=h.height?u.height:h.height}).width*n.length>t.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==t.config.xaxis.labels.rotate||t.config.xaxis.labels.rotateAlways){if(!t.globals.isBarHorizontal){t.globals.rotateXLabels=!0;var d=function(e){return c.getTextRects(e,t.config.xaxis.labels.style.fontSize,t.config.xaxis.labels.style.fontFamily,"rotate(".concat(t.config.xaxis.labels.rotate," 0 0)"),!1)};u=d(i),i!==o&&(h=d(o)),e.height=(u.height>h.height?u.height:h.height)/1.5,e.width=u.width>h.width?u.width:h.width}}else t.globals.rotateXLabels=!1}return t.config.xaxis.labels.show||(e={width:0,height:0}),{width:e.width,height:e.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var e,t=this.w;if(!t.globals.hasGroups)return{width:0,height:0};var n,a=(null===(e=t.config.xaxis.group.style)||void 0===e?void 0:e.fontSize)||t.config.xaxis.labels.style.fontSize,r=t.globals.groups.map((function(e){return e.title})),i=b.getLargestStringFromArr(r),o=this.dCtx.dimHelpers.getLargestStringFromMultiArr(i,r),s=new w(this.dCtx.ctx),l=s.getTextRects(i,a),c=l;return i!==o&&(c=s.getTextRects(o,a)),n={width:l.width>=c.width?l.width:c.width,height:l.height>=c.height?l.height:c.height},t.config.xaxis.labels.show||(n={width:0,height:0}),{width:n.width,height:n.height}}},{key:"getxAxisTitleCoords",value:function(){var e=this.w,t=0,n=0;if(void 0!==e.config.xaxis.title.text){var a=new w(this.dCtx.ctx).getTextRects(e.config.xaxis.title.text,e.config.xaxis.title.style.fontSize);t=a.width,n=a.height}return{width:t,height:n}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var e,t=this.w;this.dCtx.timescaleLabels=t.globals.timescaleLabels.slice();var n=this.dCtx.timescaleLabels.map((function(e){return e.value})),a=n.reduce((function(e,t){return void 0===e?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):e.length>t.length?e:t}),0);return 1.05*(e=new w(this.dCtx.ctx).getTextRects(a,t.config.xaxis.labels.style.fontSize)).width*n.length>t.globals.gridWidth&&0!==t.config.xaxis.labels.rotate&&(t.globals.overlappingXLabels=!0),e}},{key:"additionalPaddingXLabels",value:function(e){var t=this,n=this.w,a=n.globals,r=n.config,i=r.xaxis.type,o=e.width;a.skipLastTimelinelabel=!1,a.skipFirstTimelinelabel=!1;var s=n.config.yaxis[0].opposite&&n.globals.isBarHorizontal,l=function(e,s){(function(e){return-1!==a.collapsedSeriesIndices.indexOf(e)})(s)||function(e){if(t.dCtx.timescaleLabels&&t.dCtx.timescaleLabels.length){var s=t.dCtx.timescaleLabels[0],l=t.dCtx.timescaleLabels[t.dCtx.timescaleLabels.length-1].position+o/1.75-t.dCtx.yAxisWidthRight,c=s.position-o/1.75+t.dCtx.yAxisWidthLeft,u="right"===n.config.legend.position&&t.dCtx.lgRect.width>0?t.dCtx.lgRect.width:0;l>a.svgWidth-a.translateX-u&&(a.skipLastTimelinelabel=!0),c<-(e.show&&!e.floating||"bar"!==r.chart.type&&"candlestick"!==r.chart.type&&"rangeBar"!==r.chart.type&&"boxPlot"!==r.chart.type?10:o/1.75)&&(a.skipFirstTimelinelabel=!0)}else"datetime"===i?t.dCtx.gridPad.right<o&&!a.rotateXLabels&&(a.skipLastTimelinelabel=!0):"datetime"!==i&&t.dCtx.gridPad.right<o/2-t.dCtx.yAxisWidthRight&&!a.rotateXLabels&&!n.config.xaxis.labels.trim&&("between"!==n.config.xaxis.tickPlacement||n.globals.isBarHorizontal)&&(t.dCtx.xPadRight=o/2+1)}(e)};r.yaxis.forEach((function(e,n){s?(t.dCtx.gridPad.left<o&&(t.dCtx.xPadLeft=o/2+1),t.dCtx.xPadRight=o/2+1):l(e,n)}))}}]),e}(),ce=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"getyAxisLabelsCoords",value:function(){var e=this,t=this.w,n=[],a=10,r=new j(this.dCtx.ctx);return t.config.yaxis.map((function(i,o){var s=t.globals.yAxisScale[o],l=0;if(!r.isYAxisHidden(o)&&i.labels.show&&void 0!==i.labels.minWidth&&(l=i.labels.minWidth),!r.isYAxisHidden(o)&&i.labels.show&&s.result.length){var c=t.globals.yLabelFormatters[o],u=s.niceMin===Number.MIN_VALUE?0:s.niceMin,h=String(u).length>String(s.niceMax).length?u:s.niceMax,d=c(h,{seriesIndex:o,dataPointIndex:-1,w:t}),f=d;if(void 0!==d&&0!==d.length||(d=h),t.globals.isBarHorizontal){a=0;var p=t.globals.labels.slice();d=c(d=b.getLargestStringFromArr(p),{seriesIndex:o,dataPointIndex:-1,w:t}),f=e.dCtx.dimHelpers.getLargestStringFromMultiArr(d,p)}var g=new w(e.dCtx.ctx),v="rotate(".concat(i.labels.rotate," 0 0)"),m=g.getTextRects(d,i.labels.style.fontSize,i.labels.style.fontFamily,v,!1),x=m;d!==f&&(x=g.getTextRects(f,i.labels.style.fontSize,i.labels.style.fontFamily,v,!1)),n.push({width:(l>x.width||l>m.width?l:x.width>m.width?x.width:m.width)+a,height:x.height>m.height?x.height:m.height})}else n.push({width:0,height:0})})),n}},{key:"getyAxisTitleCoords",value:function(){var e=this,t=this.w,n=[];return t.config.yaxis.map((function(t,a){if(t.show&&void 0!==t.title.text){var r=new w(e.dCtx.ctx),i="rotate(".concat(t.title.rotate," 0 0)"),o=r.getTextRects(t.title.text,t.title.style.fontSize,t.title.style.fontFamily,i,!1);n.push({width:o.width,height:o.height})}else n.push({width:0,height:0})})),n}},{key:"getTotalYAxisWidth",value:function(){var e=this.w,t=0,n=0,a=0,r=e.globals.yAxisScale.length>1?10:0,i=new j(this.dCtx.ctx),o=function(o,s){var l=e.config.yaxis[s].floating,c=0;o.width>0&&!l?(c=o.width+r,function(t){return e.globals.ignoreYAxisIndexes.indexOf(t)>-1}(s)&&(c=c-o.width-r)):c=l||i.isYAxisHidden(s)?0:5,e.config.yaxis[s].opposite?a+=c:n+=c,t+=c};return e.globals.yLabelsCoords.map((function(e,t){o(e,t)})),e.globals.yTitleCoords.map((function(e,t){o(e,t)})),e.globals.isBarHorizontal&&!e.config.yaxis[0].floating&&(t=e.globals.yLabelsCoords[0].width+e.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=n,this.dCtx.yAxisWidthRight=a,t}}]),e}(),ue=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"gridPadForColumnsInNumericAxis",value:function(e){var t=this.w;if(t.globals.noData||t.globals.allSeriesCollapsed)return 0;var n=function(e){return"bar"===e||"rangeBar"===e||"candlestick"===e||"boxPlot"===e},a=t.config.chart.type,r=0,i=n(a)?t.config.series.length:1;if(t.globals.comboBarCount>0&&(i=t.globals.comboBarCount),t.globals.collapsedSeries.forEach((function(e){n(e.type)&&(i-=1)})),t.config.chart.stacked&&(i=1),(n(a)||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&i>0){var o,s,l=Math.abs(t.globals.initialMaxX-t.globals.initialMinX);l<=3&&(l=t.globals.dataPoints),o=l/e,t.globals.minXDiff&&t.globals.minXDiff/o>0&&(s=t.globals.minXDiff/o),s>e/2&&(s/=2),(r=s/i*parseInt(t.config.plotOptions.bar.columnWidth,10)/100)<1&&(r=1),r=r/(i>1?1:1.5)+5,t.globals.barPadForNumericAxis=r}return r}},{key:"gridPadFortitleSubtitle",value:function(){var e=this,t=this.w,n=t.globals,a=this.dCtx.isSparkline||!t.globals.axisCharts?0:10;["title","subtitle"].forEach((function(n){void 0!==t.config[n].text?a+=t.config[n].margin:a+=e.dCtx.isSparkline||!t.globals.axisCharts?0:5})),!t.config.legend.show||"bottom"!==t.config.legend.position||t.config.legend.floating||t.globals.axisCharts||(a+=10);var r=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),i=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");n.gridHeight=n.gridHeight-r.height-i.height-a,n.translateY=n.translateY+r.height+i.height+a}},{key:"setGridXPosForDualYAxis",value:function(e,t){var n=this.w,a=new j(this.dCtx.ctx);n.config.yaxis.map((function(r,i){-1!==n.globals.ignoreYAxisIndexes.indexOf(i)||r.floating||a.isYAxisHidden(i)||(r.opposite&&(n.globals.translateX=n.globals.translateX-(t[i].width+e[i].width)-parseInt(n.config.yaxis[i].labels.style.fontSize,10)/1.2-12),n.globals.translateX<2&&(n.globals.translateX=2))}))}}]),e}(),he=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new se(this),this.dimYAxis=new ce(this),this.dimXAxis=new le(this),this.dimGrid=new ue(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return c(e,[{key:"plotCoords",value:function(){var e=this,t=this.w,n=t.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&(t.config.markers.discrete.length>0||t.config.markers.size>0)&&Object.entries(this.gridPad).forEach((function(t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return i}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),a=n[0],r=n[1];e.gridPad[a]=Math.max(r,e.w.globals.markers.largestSize/1.5)})),n.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),n.gridHeight=n.gridHeight-this.gridPad.top-this.gridPad.bottom,n.gridWidth=n.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var a=this.dimGrid.gridPadForColumnsInNumericAxis(n.gridWidth);n.gridWidth=n.gridWidth-2*a,n.translateX=n.translateX+this.gridPad.left+this.xPadLeft+(a>0?a+4:0),n.translateY=n.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var e=this,t=this.w,n=t.globals,a=this.dimYAxis.getyAxisLabelsCoords(),r=this.dimYAxis.getyAxisTitleCoords();t.globals.yLabelsCoords=[],t.globals.yTitleCoords=[],t.config.yaxis.map((function(e,n){t.globals.yLabelsCoords.push({width:a[n].width,index:n}),t.globals.yTitleCoords.push({width:r[n].width,index:n})})),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var i=this.dimXAxis.getxAxisLabelsCoords(),o=this.dimXAxis.getxAxisGroupLabelsCoords(),s=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(i,s,o),n.translateXAxisY=t.globals.rotateXLabels?this.xAxisHeight/8:-4,n.translateXAxisX=t.globals.rotateXLabels&&t.globals.isXNumeric&&t.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,t.globals.isBarHorizontal&&(n.rotateXLabels=!1,n.translateXAxisY=parseInt(t.config.xaxis.labels.style.fontSize,10)/1.5*-1),n.translateXAxisY=n.translateXAxisY+t.config.xaxis.labels.offsetY,n.translateXAxisX=n.translateXAxisX+t.config.xaxis.labels.offsetX;var l=this.yAxisWidth,c=this.xAxisHeight;n.xAxisLabelsHeight=this.xAxisHeight-s.height,n.xAxisGroupLabelsHeight=n.xAxisLabelsHeight-i.height,n.xAxisLabelsWidth=this.xAxisWidth,n.xAxisHeight=this.xAxisHeight;var u=10;("radar"===t.config.chart.type||this.isSparkline)&&(l=0,c=n.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===t.config.chart.type)&&(l=0,c=0,u=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(i);var h=function(){n.translateX=l,n.gridHeight=n.svgHeight-e.lgRect.height-c-(e.isSparkline||"treemap"===t.config.chart.type?0:t.globals.rotateXLabels?10:15),n.gridWidth=n.svgWidth-l};switch("top"===t.config.xaxis.position&&(u=n.xAxisHeight-t.config.xaxis.axisTicks.height-5),t.config.legend.position){case"bottom":n.translateY=u,h();break;case"top":n.translateY=this.lgRect.height+u,h();break;case"left":n.translateY=u,n.translateX=this.lgRect.width+l,n.gridHeight=n.svgHeight-c-12,n.gridWidth=n.svgWidth-this.lgRect.width-l;break;case"right":n.translateY=u,n.translateX=l,n.gridHeight=n.svgHeight-c-12,n.gridWidth=n.svgWidth-this.lgRect.width-l-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(r,a),new J(this.ctx).setYAxisXPosition(a,r)}},{key:"setDimensionsForNonAxisCharts",value:function(){var e=this.w,t=e.globals,n=e.config,a=0;e.config.legend.show&&!e.config.legend.floating&&(a=20);var r="pie"===n.chart.type||"polarArea"===n.chart.type||"donut"===n.chart.type?"pie":"radialBar",i=n.plotOptions[r].offsetY,o=n.plotOptions[r].offsetX;if(!n.legend.show||n.legend.floating)return t.gridHeight=t.svgHeight-n.grid.padding.left+n.grid.padding.right,t.gridWidth=t.gridHeight,t.translateY=i,void(t.translateX=o+(t.svgWidth-t.gridWidth)/2);switch(n.legend.position){case"bottom":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=i-10,t.translateX=o+(t.svgWidth-t.gridWidth)/2;break;case"top":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=this.lgRect.height+i+10,t.translateX=o+(t.svgWidth-t.gridWidth)/2;break;case"left":t.gridWidth=t.svgWidth-this.lgRect.width-a,t.gridHeight="auto"!==n.chart.height?t.svgHeight:t.gridWidth,t.translateY=i,t.translateX=o+this.lgRect.width+a;break;case"right":t.gridWidth=t.svgWidth-this.lgRect.width-a-5,t.gridHeight="auto"!==n.chart.height?t.svgHeight:t.gridWidth,t.translateY=i,t.translateX=o+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(e,t,n){var a=this.w,r=a.globals.hasGroups?2:1,i=n.height+e.height+t.height,o=a.globals.isMultiLineX?1.2:a.globals.LINE_HEIGHT_RATIO,s=a.globals.rotateXLabels?22:10,l=a.globals.rotateXLabels&&"bottom"===a.config.legend.position?10:0;this.xAxisHeight=i*o+r*s+l,this.xAxisWidth=e.width,this.xAxisHeight-t.height>a.config.xaxis.labels.maxHeight&&(this.xAxisHeight=a.config.xaxis.labels.maxHeight),a.config.xaxis.labels.minHeight&&this.xAxisHeight<a.config.xaxis.labels.minHeight&&(this.xAxisHeight=a.config.xaxis.labels.minHeight),a.config.xaxis.floating&&(this.xAxisHeight=0);var c=0,u=0;a.config.yaxis.forEach((function(e){c+=e.labels.minWidth,u+=e.labels.maxWidth})),this.yAxisWidth<c&&(this.yAxisWidth=c),this.yAxisWidth>u&&(this.yAxisWidth=u)}}]),e}(),de=function(){function e(t){s(this,e),this.w=t.w,this.lgCtx=t}return c(e,[{key:"getLegendStyles",value:function(){var e=document.createElement("style");e.setAttribute("type","text/css");var t=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return e.appendChild(t),e}},{key:"getLegendBBox",value:function(){var e=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),t=e.width;return{clwh:e.height,clww:t}}},{key:"appendToForeignObject",value:function(){var e=this.w.globals;e.dom.elLegendForeign=document.createElementNS(e.SVGNS,"foreignObject");var t=e.dom.elLegendForeign;t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("width",e.svgWidth),t.setAttribute("height",e.svgHeight),e.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),t.appendChild(e.dom.elLegendWrap),t.appendChild(this.getLegendStyles()),e.dom.Paper.node.insertBefore(t,e.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(e,t){var n=this,a=this.w;if(a.globals.axisCharts||"radialBar"===a.config.chart.type){a.globals.resized=!0;var r=null,i=null;a.globals.risingSeries=[],a.globals.axisCharts?(r=a.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"']")),i=parseInt(r.getAttribute("data:realIndex"),10)):(r=a.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(e+1,"']")),i=parseInt(r.getAttribute("rel"),10)-1),t?[{cs:a.globals.collapsedSeries,csi:a.globals.collapsedSeriesIndices},{cs:a.globals.ancillaryCollapsedSeries,csi:a.globals.ancillaryCollapsedSeriesIndices}].forEach((function(e){n.riseCollapsedSeries(e.cs,e.csi,i)})):this.hideSeries({seriesEl:r,realIndex:i})}else{var o=a.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(e+1,"'] path")),s=a.config.chart.type;if("pie"===s||"polarArea"===s||"donut"===s){var l=a.config.plotOptions.pie.donut.labels;new w(this.lgCtx.ctx).pathMouseDown(o.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(o.members[0].node,l)}o.fire("click")}}},{key:"hideSeries",value:function(e){var t=e.seriesEl,n=e.realIndex,a=this.w,r=b.clone(a.config.series);if(a.globals.axisCharts){var i=!1;if(a.config.yaxis[n]&&a.config.yaxis[n].show&&a.config.yaxis[n].showAlways&&(i=!0,a.globals.ancillaryCollapsedSeriesIndices.indexOf(n)<0&&(a.globals.ancillaryCollapsedSeries.push({index:n,data:r[n].data.slice(),type:t.parentNode.className.baseVal.split("-")[1]}),a.globals.ancillaryCollapsedSeriesIndices.push(n))),!i){a.globals.collapsedSeries.push({index:n,data:r[n].data.slice(),type:t.parentNode.className.baseVal.split("-")[1]}),a.globals.collapsedSeriesIndices.push(n);var o=a.globals.risingSeries.indexOf(n);a.globals.risingSeries.splice(o,1)}}else a.globals.collapsedSeries.push({index:n,data:r[n]}),a.globals.collapsedSeriesIndices.push(n);for(var s=t.childNodes,l=0;l<s.length;l++)s[l].classList.contains("apexcharts-series-markers-wrap")&&(s[l].classList.contains("apexcharts-hide")?s[l].classList.remove("apexcharts-hide"):s[l].classList.add("apexcharts-hide"));a.globals.allSeriesCollapsed=a.globals.collapsedSeries.length===a.config.series.length,r=this._getSeriesBasedOnCollapsedState(r),this.lgCtx.ctx.updateHelpers._updateSeries(r,a.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(e,t,n){var a=this.w,r=b.clone(a.config.series);if(e.length>0){for(var i=0;i<e.length;i++)e[i].index===n&&(a.globals.axisCharts?(r[n].data=e[i].data.slice(),e.splice(i,1),t.splice(i,1),a.globals.risingSeries.push(n)):(r[n]=e[i].data,e.splice(i,1),t.splice(i,1),a.globals.risingSeries.push(n)));r=this._getSeriesBasedOnCollapsedState(r),this.lgCtx.ctx.updateHelpers._updateSeries(r,a.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(e){var t=this.w;return t.globals.axisCharts?e.forEach((function(n,a){t.globals.collapsedSeriesIndices.indexOf(a)>-1&&(e[a].data=[])})):e.forEach((function(n,a){t.globals.collapsedSeriesIndices.indexOf(a)>-1&&(e[a]=0)})),e}}]),e}(),fe=function(){function e(t,n){s(this,e),this.ctx=t,this.w=t.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new de(this)}return c(e,[{key:"init",value:function(){var e=this.w,t=e.globals,n=e.config;if((n.legend.showForSingleSeries&&1===t.series.length||this.isBarsDistributed||t.series.length>1||!t.axisCharts)&&n.legend.show){for(;t.dom.elLegendWrap.firstChild;)t.dom.elLegendWrap.removeChild(t.dom.elLegendWrap.firstChild);this.drawLegends(),b.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===n.legend.position||"top"===n.legend.position?this.legendAlignHorizontal():"right"!==n.legend.position&&"left"!==n.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var e=this,t=this.w,n=t.config.legend.fontFamily,a=t.globals.seriesNames,r=t.globals.colors.slice();if("heatmap"===t.config.chart.type){var i=t.config.plotOptions.heatmap.colorScale.ranges;a=i.map((function(e){return e.name?e.name:e.from+" - "+e.to})),r=i.map((function(e){return e.color}))}else this.isBarsDistributed&&(a=t.globals.labels.slice());t.config.legend.customLegendItems.length&&(a=t.config.legend.customLegendItems);for(var o=t.globals.legendFormatter,s=t.config.legend.inverseOrder,l=s?a.length-1:0;s?l>=0:l<=a.length-1;s?l--:l++){var c=o(a[l],{seriesIndex:l,w:t}),u=!1,h=!1;if(t.globals.collapsedSeries.length>0)for(var d=0;d<t.globals.collapsedSeries.length;d++)t.globals.collapsedSeries[d].index===l&&(u=!0);if(t.globals.ancillaryCollapsedSeriesIndices.length>0)for(var f=0;f<t.globals.ancillaryCollapsedSeriesIndices.length;f++)t.globals.ancillaryCollapsedSeriesIndices[f]===l&&(h=!0);var p=document.createElement("span");p.classList.add("apexcharts-legend-marker");var g=t.config.legend.markers.offsetX,v=t.config.legend.markers.offsetY,m=t.config.legend.markers.height,x=t.config.legend.markers.width,y=t.config.legend.markers.strokeWidth,k=t.config.legend.markers.strokeColor,C=t.config.legend.markers.radius,I=p.style;I.background=r[l],I.color=r[l],I.setProperty("background",r[l],"important"),t.config.legend.markers.fillColors&&t.config.legend.markers.fillColors[l]&&(I.background=t.config.legend.markers.fillColors[l]),void 0!==t.globals.seriesColors[l]&&(I.background=t.globals.seriesColors[l],I.color=t.globals.seriesColors[l]),I.height=Array.isArray(m)?parseFloat(m[l])+"px":parseFloat(m)+"px",I.width=Array.isArray(x)?parseFloat(x[l])+"px":parseFloat(x)+"px",I.left=(Array.isArray(g)?parseFloat(g[l]):parseFloat(g))+"px",I.top=(Array.isArray(v)?parseFloat(v[l]):parseFloat(v))+"px",I.borderWidth=Array.isArray(y)?y[l]:y,I.borderColor=Array.isArray(k)?k[l]:k,I.borderRadius=Array.isArray(C)?parseFloat(C[l])+"px":parseFloat(C)+"px",t.config.legend.markers.customHTML&&(Array.isArray(t.config.legend.markers.customHTML)?t.config.legend.markers.customHTML[l]&&(p.innerHTML=t.config.legend.markers.customHTML[l]()):p.innerHTML=t.config.legend.markers.customHTML()),w.setAttrs(p,{rel:l+1,"data:collapsed":u||h}),(u||h)&&p.classList.add("apexcharts-inactive-legend");var A=document.createElement("div"),T=document.createElement("span");T.classList.add("apexcharts-legend-text"),T.innerHTML=Array.isArray(c)?c.join(" "):c;var N=t.config.legend.labels.useSeriesColors?t.globals.colors[l]:t.config.legend.labels.colors;N||(N=t.config.chart.foreColor),T.style.color=N,T.style.fontSize=parseFloat(t.config.legend.fontSize)+"px",T.style.fontWeight=t.config.legend.fontWeight,T.style.fontFamily=n||t.config.chart.fontFamily,w.setAttrs(T,{rel:l+1,i:l,"data:default-text":encodeURIComponent(c),"data:collapsed":u||h}),A.appendChild(p),A.appendChild(T);var E=new S(this.ctx);t.config.legend.showForZeroSeries||0===E.getSeriesTotalByIndex(l)&&E.seriesHaveSameValues(l)&&!E.isSeriesNull(l)&&-1===t.globals.collapsedSeriesIndices.indexOf(l)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&A.classList.add("apexcharts-hidden-zero-series"),t.config.legend.showForNullSeries||E.isSeriesNull(l)&&-1===t.globals.collapsedSeriesIndices.indexOf(l)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&A.classList.add("apexcharts-hidden-null-series"),t.globals.dom.elLegendWrap.appendChild(A),t.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(t.config.legend.horizontalAlign)),t.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+t.config.legend.position),A.classList.add("apexcharts-legend-series"),A.style.margin="".concat(t.config.legend.itemMargin.vertical,"px ").concat(t.config.legend.itemMargin.horizontal,"px"),t.globals.dom.elLegendWrap.style.width=t.config.legend.width?t.config.legend.width+"px":"",t.globals.dom.elLegendWrap.style.height=t.config.legend.height?t.config.legend.height+"px":"",w.setAttrs(A,{rel:l+1,seriesName:b.escapeString(a[l]),"data:collapsed":u||h}),(u||h)&&A.classList.add("apexcharts-inactive-legend"),t.config.legend.onItemClick.toggleDataSeries||A.classList.add("apexcharts-no-click")}t.globals.dom.elWrap.addEventListener("click",e.onLegendClick,!0),t.config.legend.onItemHover.highlightDataSeries&&0===t.config.legend.customLegendItems.length&&(t.globals.dom.elWrap.addEventListener("mousemove",e.onLegendHovered,!0),t.globals.dom.elWrap.addEventListener("mouseout",e.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(e,t){var n=this.w,a=n.globals.dom.baseEl.querySelector(".apexcharts-legend"),r=a.getBoundingClientRect(),i=0,o=0;if("bottom"===n.config.legend.position)o+=n.globals.svgHeight-r.height/2;else if("top"===n.config.legend.position){var s=new he(this.ctx),l=s.dimHelpers.getTitleSubtitleCoords("title").height,c=s.dimHelpers.getTitleSubtitleCoords("subtitle").height;o=o+(l>0?l-10:0)+(c>0?c-10:0)}a.style.position="absolute",i=i+e+n.config.legend.offsetX,o=o+t+n.config.legend.offsetY,a.style.left=i+"px",a.style.top=o+"px","bottom"===n.config.legend.position?(a.style.top="auto",a.style.bottom=5-n.config.legend.offsetY+"px"):"right"===n.config.legend.position&&(a.style.left="auto",a.style.right=25+n.config.legend.offsetX+"px"),["width","height"].forEach((function(e){a.style[e]&&(a.style[e]=parseInt(n.config.legend[e],10)+"px")}))}},{key:"legendAlignHorizontal",value:function(){var e=this.w;e.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var t=this.legendHelpers.getLegendBBox(),n=new he(this.ctx),a=n.dimHelpers.getTitleSubtitleCoords("title"),r=n.dimHelpers.getTitleSubtitleCoords("subtitle"),i=0;"bottom"===e.config.legend.position?i=-t.clwh/1.8:"top"===e.config.legend.position&&(i=a.height+r.height+e.config.title.margin+e.config.subtitle.margin-10),this.setLegendWrapXY(20,i)}},{key:"legendAlignVertical",value:function(){var e=this.w,t=this.legendHelpers.getLegendBBox(),n=0;"left"===e.config.legend.position&&(n=20),"right"===e.config.legend.position&&(n=e.globals.svgWidth-t.clww-10),this.setLegendWrapXY(n,20)}},{key:"onLegendHovered",value:function(e){var t=this.w,n=e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker");if("heatmap"===t.config.chart.type||this.isBarsDistributed){if(n){var a=parseInt(e.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,a,this.w]),new P(this.ctx).highlightRangeInSeries(e,e.target)}}else!e.target.classList.contains("apexcharts-inactive-legend")&&n&&new P(this.ctx).toggleSeriesOnHover(e,e.target)}},{key:"onLegendClick",value:function(e){var t=this.w;if(!t.config.legend.customLegendItems.length&&(e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker"))){var n=parseInt(e.target.getAttribute("rel"),10)-1,a="true"===e.target.getAttribute("data:collapsed"),r=this.w.config.chart.events.legendClick;"function"==typeof r&&r(this.ctx,n,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,n,this.w]);var i=this.w.config.legend.markers.onClick;"function"==typeof i&&e.target.classList.contains("apexcharts-legend-marker")&&(i(this.ctx,n,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,n,this.w])),"treemap"!==t.config.chart.type&&"heatmap"!==t.config.chart.type&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(n,a)}}}]),e}(),pe=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=n.globals.minX,this.maxX=n.globals.maxX}return c(e,[{key:"createToolbar",value:function(){var e=this,t=this.w,n=function(){return document.createElement("div")},a=n();if(a.setAttribute("class","apexcharts-toolbar"),a.style.top=t.config.chart.toolbar.offsetY+"px",a.style.right=3-t.config.chart.toolbar.offsetX+"px",t.globals.dom.elWrap.appendChild(a),this.elZoom=n(),this.elZoomIn=n(),this.elZoomOut=n(),this.elPan=n(),this.elSelection=n(),this.elZoomReset=n(),this.elMenuIcon=n(),this.elMenu=n(),this.elCustomIcons=[],this.t=t.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var r=0;r<this.t.customIcons.length;r++)this.elCustomIcons.push(n());var i=[],o=function(n,a,r){var o=n.toLowerCase();e.t[o]&&t.config.chart.zoom.enabled&&i.push({el:a,icon:"string"==typeof e.t[o]?e.t[o]:r,title:e.localeValues[n],class:"apexcharts-".concat(o,"-icon")})};o("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),o("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var s=function(n){e.t[n]&&t.config.chart[n].enabled&&i.push({el:"zoom"===n?e.elZoom:e.elSelection,icon:"string"==typeof e.t[n]?e.t[n]:"zoom"===n?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:e.localeValues["zoom"===n?"selectionZoom":"selection"],class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(n,"-icon")})};s("zoom"),s("selection"),this.t.pan&&t.config.chart.zoom.enabled&&i.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),o("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&i.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var l=0;l<this.elCustomIcons.length;l++)i.push({el:this.elCustomIcons[l],icon:this.t.customIcons[l].icon,title:this.t.customIcons[l].title,index:this.t.customIcons[l].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[l].class});i.forEach((function(e,t){e.index&&b.moveIndexInArray(i,t,e.index)}));for(var c=0;c<i.length;c++)w.setAttrs(i[c].el,{class:i[c].class,title:i[c].title}),i[c].el.innerHTML=i[c].icon,a.appendChild(i[c].el);this._createHamburgerMenu(a),t.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):t.globals.panEnabled?this.elPan.classList.add(this.selectedClass):t.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(e){this.elMenuItems=[],e.appendChild(this.elMenu),w.setAttrs(this.elMenu,{class:"apexcharts-menu"});var t=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||t.splice(2,1);for(var n=0;n<t.length;n++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[n].innerHTML=t[n].title,w.setAttrs(this.elMenuItems[n],{class:"apexcharts-menu-item ".concat(t[n].name),title:t[n].title}),this.elMenu.appendChild(this.elMenuItems[n])}},{key:"addToolbarEventListeners",value:function(){var e=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach((function(t){t.classList.contains("exportSVG")?t.addEventListener("click",e.handleDownload.bind(e,"svg")):t.classList.contains("exportPNG")?t.addEventListener("click",e.handleDownload.bind(e,"png")):t.classList.contains("exportCSV")&&t.addEventListener("click",e.handleDownload.bind(e,"csv"))}));for(var t=0;t<this.t.customIcons.length;t++)this.elCustomIcons[t].addEventListener("click",this.t.customIcons[t].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(e){this.ctx.getSyncedCharts().forEach((function(t){t.ctx.toolbar.toggleOtherControls();var n="selection"===e?t.ctx.toolbar.elSelection:t.ctx.toolbar.elZoom,a="selection"===e?"selectionEnabled":"zoomEnabled";t.w.globals[a]=!t.w.globals[a],n.classList.contains(t.ctx.toolbar.selectedClass)?n.classList.remove(t.ctx.toolbar.selectedClass):n.classList.add(t.ctx.toolbar.selectedClass)}))}},{key:"getToolbarIconsReference",value:function(){var e=this.w;this.elZoom||(this.elZoom=e.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=e.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=e.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(e){this.toggleOtherControls(),"pan"===e?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var t="pan"===e?this.elPan:this.elZoom,n="pan"===e?this.elZoom:this.elPan;t&&t.classList.add(this.selectedClass),n&&n.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach((function(e){e.ctx.toolbar.toggleOtherControls(),e.w.globals.panEnabled=!e.w.globals.panEnabled,e.ctx.toolbar.elPan.classList.contains(e.ctx.toolbar.selectedClass)?e.ctx.toolbar.elPan.classList.remove(e.ctx.toolbar.selectedClass):e.ctx.toolbar.elPan.classList.add(e.ctx.toolbar.selectedClass)}))}},{key:"toggleOtherControls",value:function(){var e=this,t=this.w;t.globals.panEnabled=!1,t.globals.zoomEnabled=!1,t.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach((function(t){t&&t.classList.remove(e.selectedClass)}))}},{key:"handleZoomIn",value:function(){var e=this.w;e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY);var t=(this.minX+this.maxX)/2,n=(this.minX+t)/2,a=(this.maxX+t)/2,r=this._getNewMinXMaxX(n,a);e.globals.disableZoomIn||this.zoomUpdateOptions(r.minX,r.maxX)}},{key:"handleZoomOut",value:function(){var e=this.w;if(e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY),!("datetime"===e.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var t=(this.minX+this.maxX)/2,n=this.minX-(t-this.minX),a=this.maxX-(t-this.maxX),r=this._getNewMinXMaxX(n,a);e.globals.disableZoomOut||this.zoomUpdateOptions(r.minX,r.maxX)}}},{key:"_getNewMinXMaxX",value:function(e,t){var n=this.w.config.xaxis.convertedCatToNumeric;return{minX:n?Math.floor(e):e,maxX:n?Math.floor(t):t}}},{key:"zoomUpdateOptions",value:function(e,t){var n=this.w;if(void 0!==e||void 0!==t){if(!(n.config.xaxis.convertedCatToNumeric&&(e<1&&(e=1,t=n.globals.dataPoints),t-e<2))){var a={min:e,max:t},r=this.getBeforeZoomRange(a);r&&(a=r.xaxis);var i={xaxis:a},o=b.clone(n.globals.initialConfig.yaxis);n.config.chart.zoom.autoScaleYaxis&&(o=new $(this.ctx).autoScaleY(this.ctx,o,{xaxis:a})),n.config.chart.group||(i.yaxis=o),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(i,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(a,o)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(e,t){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:e,yaxis:t})}},{key:"getBeforeZoomRange",value:function(e,t){var n=null;return"function"==typeof this.ev.beforeZoom&&(n=this.ev.beforeZoom(this,{xaxis:e,yaxis:t})),n}},{key:"toggleMenu",value:function(){var e=this;window.setTimeout((function(){e.elMenu.classList.contains("apexcharts-menu-open")?e.elMenu.classList.remove("apexcharts-menu-open"):e.elMenu.classList.add("apexcharts-menu-open")}),0)}},{key:"handleDownload",value:function(e){var t=this.w,n=new q(this.ctx);switch(e){case"svg":n.exportToSVG(this.ctx);break;case"png":n.exportToPng(this.ctx);break;case"csv":n.exportToCSV({series:t.config.series,columnDelimiter:t.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(e){this.ctx.getSyncedCharts().forEach((function(e){var t=e.w;if(t.globals.lastXAxis.min=void 0,t.globals.lastXAxis.max=void 0,e.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof t.config.chart.events.beforeResetZoom){var n=t.config.chart.events.beforeResetZoom(e,t);n&&e.updateHelpers.revertDefaultAxisMinMax(n)}"function"==typeof t.config.chart.events.zoomed&&e.ctx.toolbar.zoomCallback({min:t.config.xaxis.min,max:t.config.xaxis.max}),t.globals.zoomed=!1;var a=e.ctx.series.emptyCollapsedSeries(b.clone(t.globals.initialSeries));e.updateHelpers._updateSeries(a,t.config.chart.animations.dynamicAnimation.enabled)}))}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),e}(),ge=function(e){h(n,pe);var t=g(n);function n(e){var a;return s(this,n),(a=t.call(this,e)).ctx=e,a.w=e.w,a.dragged=!1,a.graphics=new w(a.ctx),a.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],a.clientX=0,a.clientY=0,a.startX=0,a.endX=0,a.dragX=0,a.startY=0,a.endY=0,a.dragY=0,a.moveDirection="none",a}return c(n,[{key:"init",value:function(e){var t=this,n=e.xyRatios,a=this.w,r=this;this.xyRatios=n,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=a.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),a.globals.dom.elGraphical.add(this.zoomRect),a.globals.dom.elGraphical.add(this.selectionRect),"x"===a.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:a.globals.gridWidth,maxY:a.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===a.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:a.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=a.globals.dom.baseEl.querySelector("".concat(a.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach((function(e){t.hoverArea.addEventListener(e,r.svgMouseEvents.bind(r,n),{capture:!1,passive:!0})}))}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(e,t){var n=this.w,a=this,r=this.ctx.toolbar,i=n.globals.zoomEnabled?n.config.chart.zoom.type:n.config.chart.selection.type,o=n.config.chart.toolbar.autoSelected;if(t.shiftKey?(this.shiftWasPressed=!0,r.enableZoomPanFromToolbar("pan"===o?"zoom":"pan")):this.shiftWasPressed&&(r.enableZoomPanFromToolbar(o),this.shiftWasPressed=!1),t.target){var s,l=t.target.classList;if(t.target.parentNode&&null!==t.target.parentNode&&(s=t.target.parentNode.classList),!(l.contains("apexcharts-selection-rect")||l.contains("apexcharts-legend-marker")||l.contains("apexcharts-legend-text")||s&&s.contains("apexcharts-toolbar"))){if(a.clientX="touchmove"===t.type||"touchstart"===t.type?t.touches[0].clientX:"touchend"===t.type?t.changedTouches[0].clientX:t.clientX,a.clientY="touchmove"===t.type||"touchstart"===t.type?t.touches[0].clientY:"touchend"===t.type?t.changedTouches[0].clientY:t.clientY,"mousedown"===t.type&&1===t.which){var c=a.gridRect.getBoundingClientRect();a.startX=a.clientX-c.left,a.startY=a.clientY-c.top,a.dragged=!1,a.w.globals.mousedown=!0}if(("mousemove"===t.type&&1===t.which||"touchmove"===t.type)&&(a.dragged=!0,n.globals.panEnabled?(n.globals.selection=null,a.w.globals.mousedown&&a.panDragging({context:a,zoomtype:i,xyRatios:e})):(a.w.globals.mousedown&&n.globals.zoomEnabled||a.w.globals.mousedown&&n.globals.selectionEnabled)&&(a.selection=a.selectionDrawing({context:a,zoomtype:i}))),"mouseup"===t.type||"touchend"===t.type||"mouseleave"===t.type){var u=a.gridRect.getBoundingClientRect();a.w.globals.mousedown&&(a.endX=a.clientX-u.left,a.endY=a.clientY-u.top,a.dragX=Math.abs(a.endX-a.startX),a.dragY=Math.abs(a.endY-a.startY),(n.globals.zoomEnabled||n.globals.selectionEnabled)&&a.selectionDrawn({context:a,zoomtype:i}),n.globals.panEnabled&&n.config.xaxis.convertedCatToNumeric&&a.delayedPanScrolled()),n.globals.zoomEnabled&&a.hideSelectionRect(this.selectionRect),a.dragged=!1,a.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var e=this.w;if(this.selectionRect){var t=this.selectionRect.node.getBoundingClientRect();t.width>0&&t.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:e.globals.gridWidth,maxY:e.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var e=this.w,t=this.xyRatios;if(!e.globals.zoomEnabled)if(void 0!==e.globals.selection&&null!==e.globals.selection)this.drawSelectionRect(e.globals.selection);else if(void 0!==e.config.chart.selection.xaxis.min&&void 0!==e.config.chart.selection.xaxis.max){var n=(e.config.chart.selection.xaxis.min-e.globals.minX)/t.xRatio,a={x:n,y:0,width:e.globals.gridWidth-(e.globals.maxX-e.config.chart.selection.xaxis.max)/t.xRatio-n,height:e.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(a),this.makeSelectionRectDraggable(),"function"==typeof e.config.chart.events.selection&&e.config.chart.events.selection(this.ctx,{xaxis:{min:e.config.chart.selection.xaxis.min,max:e.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(e){var t=e.x,n=e.y,a=e.width,r=e.height,i=e.translateX,o=void 0===i?0:i,s=e.translateY,l=void 0===s?0:s,c=this.w,u=this.zoomRect,h=this.selectionRect;if(this.dragged||null!==c.globals.selection){var d={transform:"translate("+o+", "+l+")"};c.globals.zoomEnabled&&this.dragged&&(a<0&&(a=1),u.attr({x:t,y:n,width:a,height:r,fill:c.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":c.config.chart.zoom.zoomedArea.fill.opacity,stroke:c.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":c.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":c.config.chart.zoom.zoomedArea.stroke.opacity}),w.setAttrs(u.node,d)),c.globals.selectionEnabled&&(h.attr({x:t,y:n,width:a>0?a:0,height:r>0?r:0,fill:c.config.chart.selection.fill.color,"fill-opacity":c.config.chart.selection.fill.opacity,stroke:c.config.chart.selection.stroke.color,"stroke-width":c.config.chart.selection.stroke.width,"stroke-dasharray":c.config.chart.selection.stroke.dashArray,"stroke-opacity":c.config.chart.selection.stroke.opacity}),w.setAttrs(h.node,d))}}},{key:"hideSelectionRect",value:function(e){e&&e.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(e){var t,n=e.context,a=e.zoomtype,r=this.w,i=n,o=this.gridRect.getBoundingClientRect(),s=i.startX-1,l=i.startY,c=!1,u=!1,h=i.clientX-o.left-s,d=i.clientY-o.top-l;return Math.abs(h+s)>r.globals.gridWidth?h=r.globals.gridWidth-s:i.clientX-o.left<0&&(h=s),s>i.clientX-o.left&&(c=!0,h=Math.abs(h)),l>i.clientY-o.top&&(u=!0,d=Math.abs(d)),t="x"===a?{x:c?s-h:s,y:0,width:h,height:r.globals.gridHeight}:"y"===a?{x:0,y:u?l-d:l,width:r.globals.gridWidth,height:d}:{x:c?s-h:s,y:u?l-d:l,width:h,height:d},i.drawSelectionRect(t),i.selectionDragging("resizing"),t}},{key:"selectionDragging",value:function(e,t){var n=this,a=this.w,r=this.xyRatios,i=this.selectionRect,o=0;"resizing"===e&&(o=30);var s=function(e){return parseFloat(i.node.getAttribute(e))},l={x:s("x"),y:s("y"),width:s("width"),height:s("height")};a.globals.selection=l,"function"==typeof a.config.chart.events.selection&&a.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout((function(){var e=n.gridRect.getBoundingClientRect(),t=i.node.getBoundingClientRect(),o={xaxis:{min:a.globals.xAxisScale.niceMin+(t.left-e.left)*r.xRatio,max:a.globals.xAxisScale.niceMin+(t.right-e.left)*r.xRatio},yaxis:{min:a.globals.yAxisScale[0].niceMin+(e.bottom-t.bottom)*r.yRatio[0],max:a.globals.yAxisScale[0].niceMax-(t.top-e.top)*r.yRatio[0]}};a.config.chart.events.selection(n.ctx,o),a.config.chart.brush.enabled&&void 0!==a.config.chart.events.brushScrolled&&a.config.chart.events.brushScrolled(n.ctx,o)}),o))}},{key:"selectionDrawn",value:function(e){var t=e.context,n=e.zoomtype,a=this.w,r=t,i=this.xyRatios,o=this.ctx.toolbar;if(r.startX>r.endX){var s=r.startX;r.startX=r.endX,r.endX=s}if(r.startY>r.endY){var l=r.startY;r.startY=r.endY,r.endY=l}var c=void 0,u=void 0;a.globals.isRangeBar?(c=a.globals.yAxisScale[0].niceMin+r.startX*i.invertedYRatio,u=a.globals.yAxisScale[0].niceMin+r.endX*i.invertedYRatio):(c=a.globals.xAxisScale.niceMin+r.startX*i.xRatio,u=a.globals.xAxisScale.niceMin+r.endX*i.xRatio);var h=[],d=[];if(a.config.yaxis.forEach((function(e,t){h.push(a.globals.yAxisScale[t].niceMax-i.yRatio[t]*r.startY),d.push(a.globals.yAxisScale[t].niceMax-i.yRatio[t]*r.endY)})),r.dragged&&(r.dragX>10||r.dragY>10)&&c!==u)if(a.globals.zoomEnabled){var f=b.clone(a.globals.initialConfig.yaxis),p=b.clone(a.globals.initialConfig.xaxis);if(a.globals.zoomed=!0,a.config.xaxis.convertedCatToNumeric&&(c=Math.floor(c),u=Math.floor(u),c<1&&(c=1,u=a.globals.dataPoints),u-c<2&&(u=c+1)),"xy"!==n&&"x"!==n||(p={min:c,max:u}),"xy"!==n&&"y"!==n||f.forEach((function(e,t){f[t].min=d[t],f[t].max=h[t]})),a.config.chart.zoom.autoScaleYaxis){var g=new $(r.ctx);f=g.autoScaleY(r.ctx,f,{xaxis:p})}if(o){var v=o.getBeforeZoomRange(p,f);v&&(p=v.xaxis?v.xaxis:p,f=v.yaxis?v.yaxis:f)}var m={xaxis:p};a.config.chart.group||(m.yaxis=f),r.ctx.updateHelpers._updateOptions(m,!1,r.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof a.config.chart.events.zoomed&&o.zoomCallback(p,f)}else if(a.globals.selectionEnabled){var x,y=null;x={min:c,max:u},"xy"!==n&&"y"!==n||(y=b.clone(a.config.yaxis)).forEach((function(e,t){y[t].min=d[t],y[t].max=h[t]})),a.globals.selection=r.selection,"function"==typeof a.config.chart.events.selection&&a.config.chart.events.selection(r.ctx,{xaxis:x,yaxis:y})}}},{key:"panDragging",value:function(e){var t=e.context,n=this.w,a=t;if(void 0!==n.globals.lastClientPosition.x){var r=n.globals.lastClientPosition.x-a.clientX,i=n.globals.lastClientPosition.y-a.clientY;Math.abs(r)>Math.abs(i)&&r>0?this.moveDirection="left":Math.abs(r)>Math.abs(i)&&r<0?this.moveDirection="right":Math.abs(i)>Math.abs(r)&&i>0?this.moveDirection="up":Math.abs(i)>Math.abs(r)&&i<0&&(this.moveDirection="down")}n.globals.lastClientPosition={x:a.clientX,y:a.clientY};var o=n.globals.isRangeBar?n.globals.minY:n.globals.minX,s=n.globals.isRangeBar?n.globals.maxY:n.globals.maxX;n.config.xaxis.convertedCatToNumeric||a.panScrolled(o,s)}},{key:"delayedPanScrolled",value:function(){var e=this.w,t=e.globals.minX,n=e.globals.maxX,a=(e.globals.maxX-e.globals.minX)/2;"left"===this.moveDirection?(t=e.globals.minX+a,n=e.globals.maxX+a):"right"===this.moveDirection&&(t=e.globals.minX-a,n=e.globals.maxX-a),t=Math.floor(t),n=Math.floor(n),this.updateScrolledChart({xaxis:{min:t,max:n}},t,n)}},{key:"panScrolled",value:function(e,t){var n=this.w,a=this.xyRatios,r=b.clone(n.globals.initialConfig.yaxis),i=a.xRatio,o=n.globals.minX,s=n.globals.maxX;n.globals.isRangeBar&&(i=a.invertedYRatio,o=n.globals.minY,s=n.globals.maxY),"left"===this.moveDirection?(e=o+n.globals.gridWidth/15*i,t=s+n.globals.gridWidth/15*i):"right"===this.moveDirection&&(e=o-n.globals.gridWidth/15*i,t=s-n.globals.gridWidth/15*i),n.globals.isRangeBar||(e<n.globals.initialMinX||t>n.globals.initialMaxX)&&(e=o,t=s);var l={min:e,max:t};n.config.chart.zoom.autoScaleYaxis&&(r=new $(this.ctx).autoScaleY(this.ctx,r,{xaxis:l}));var c={xaxis:{min:e,max:t}};n.config.chart.group||(c.yaxis=r),this.updateScrolledChart(c,e,t)}},{key:"updateScrolledChart",value:function(e,t,n){var a=this.w;this.ctx.updateHelpers._updateOptions(e,!1,!1),"function"==typeof a.config.chart.events.scrolled&&a.config.chart.events.scrolled(this.ctx,{xaxis:{min:t,max:n}})}}]),n}(),ve=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx}return c(e,[{key:"getNearestValues",value:function(e){var t=e.hoverArea,n=e.elGrid,a=e.clientX,r=e.clientY,i=this.w,o=n.getBoundingClientRect(),s=o.width,l=o.height,c=s/(i.globals.dataPoints-1),u=l/i.globals.dataPoints,h=this.hasBars();!i.globals.comboCharts&&!h||i.config.xaxis.convertedCatToNumeric||(c=s/i.globals.dataPoints);var d=a-o.left-i.globals.barPadForNumericAxis,f=r-o.top;d<0||f<0||d>s||f>l?(t.classList.remove("hovering-zoom"),t.classList.remove("hovering-pan")):i.globals.zoomEnabled?(t.classList.remove("hovering-pan"),t.classList.add("hovering-zoom")):i.globals.panEnabled&&(t.classList.remove("hovering-zoom"),t.classList.add("hovering-pan"));var p=Math.round(d/c),g=Math.floor(f/u);h&&!i.config.xaxis.convertedCatToNumeric&&(p=Math.ceil(d/c),p-=1);var v=null,m=null,x=[],y=[];if(i.globals.seriesXvalues.forEach((function(e){x.push([e[0]+1e-6].concat(e))})),i.globals.seriesYvalues.forEach((function(e){y.push([e[0]+1e-6].concat(e))})),x=x.map((function(e){return e.filter((function(e){return b.isNumber(e)}))})),y=y.map((function(e){return e.filter((function(e){return b.isNumber(e)}))})),i.globals.isXNumeric){var k=this.ttCtx.getElGrid().getBoundingClientRect(),w=d*(k.width/s),S=f*(k.height/l);v=(m=this.closestInMultiArray(w,S,x,y)).index,p=m.j,null!==v&&(x=i.globals.seriesXvalues[v],p=(m=this.closestInArray(w,x)).index)}return i.globals.capturedSeriesIndex=null===v?-1:v,(!p||p<1)&&(p=0),i.globals.isBarHorizontal?i.globals.capturedDataPointIndex=g:i.globals.capturedDataPointIndex=p,{capturedSeries:v,j:i.globals.isBarHorizontal?g:p,hoverX:d,hoverY:f}}},{key:"closestInMultiArray",value:function(e,t,n,a){var r=this.w,i=0,o=null,s=-1;r.globals.series.length>1?i=this.getFirstActiveXArray(n):o=0;var l=n[i][0],c=Math.abs(e-l);if(n.forEach((function(t){t.forEach((function(t,n){var a=Math.abs(e-t);a<c&&(c=a,s=n)}))})),-1!==s){var u=a[i][s],h=Math.abs(t-u);o=i,a.forEach((function(e,n){var a=Math.abs(t-e[s]);a<h&&(h=a,o=n)}))}return{index:o,j:s}}},{key:"getFirstActiveXArray",value:function(e){for(var t=this.w,n=0,a=e.map((function(e,t){return e.length>0?t:-1})),r=0;r<a.length;r++)if(-1!==a[r]&&-1===t.globals.collapsedSeriesIndices.indexOf(r)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(r)){n=a[r];break}return n}},{key:"closestInArray",value:function(e,t){for(var n=t[0],a=null,r=Math.abs(e-n),i=0;i<t.length;i++){var o=Math.abs(e-t[i]);o<r&&(r=o,a=i)}return{index:a}}},{key:"isXoverlap",value:function(e){var t=[],n=this.w.globals.seriesX.filter((function(e){return void 0!==e[0]}));if(n.length>0)for(var a=0;a<n.length-1;a++)void 0!==n[a][e]&&void 0!==n[a+1][e]&&n[a][e]!==n[a+1][e]&&t.push("unEqual");return 0===t.length}},{key:"isInitialSeriesSameLen",value:function(){for(var e=!0,t=this.w.globals.initialSeries,n=0;n<t.length-1;n++)if(t[n].data.length!==t[n+1].data.length){e=!1;break}return e}},{key:"getBarsHeight",value:function(e){return v(e).reduce((function(e,t){return e+t.getBBox().height}),0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(e=v(e)).sort((function(e,t){var n=Number(e.getAttribute("data:realIndex")),a=Number(t.getAttribute("data:realIndex"));return a<n?1:a>n?-1:0}));var t=[];return e.forEach((function(e){t.push(e.querySelector(".apexcharts-marker"))})),t}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(e){var t=this.w,n=t.config.markers.hover.size;return void 0===n&&(n=t.globals.markers.size[e]+t.config.markers.hover.sizeOffset),n}},{key:"toggleAllTooltipSeriesGroups",value:function(e){var t=this.w,n=this.ttCtx;0===n.allTooltipSeriesGroups.length&&(n.allTooltipSeriesGroups=t.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var a=n.allTooltipSeriesGroups,r=0;r<a.length;r++)"enable"===e?(a[r].classList.add("apexcharts-active"),a[r].style.display=t.config.tooltip.items.display):(a[r].classList.remove("apexcharts-active"),a[r].style.display="none")}}]),e}(),me=function(){function e(t){s(this,e),this.w=t.w,this.ctx=t.ctx,this.ttCtx=t,this.tooltipUtil=new ve(t)}return c(e,[{key:"drawSeriesTexts",value:function(e){var t=e.shared,n=void 0===t||t,a=e.ttItems,r=e.i,i=void 0===r?0:r,o=e.j,s=void 0===o?null:o,l=e.y1,c=e.y2,u=e.e,h=this.w;void 0!==h.config.tooltip.custom?this.handleCustomTooltip({i:i,j:s,y1:l,y2:c,w:h}):this.toggleActiveInactiveSeries(n);var d=this.getValuesToPrint({i:i,j:s});this.printLabels({i:i,j:s,values:d,ttItems:a,shared:n,e:u});var f=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=f.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=f.getBoundingClientRect().height}},{key:"printLabels",value:function(e){var t,n=this,a=e.i,r=e.j,o=e.values,s=e.ttItems,l=e.shared,c=e.e,u=this.w,h=[],d=function(e){return u.globals.seriesGoals[e]&&u.globals.seriesGoals[e][r]&&Array.isArray(u.globals.seriesGoals[e][r])},f=o.xVal,p=o.zVal,g=o.xAxisTTVal,v="",m=u.globals.colors[a];null!==r&&u.config.plotOptions.bar.distributed&&(m=u.globals.colors[r]);for(var x=function(e,o){var x=n.getFormatters(a);v=n.getSeriesName({fn:x.yLbTitleFormatter,index:a,seriesIndex:a,j:r}),"treemap"===u.config.chart.type&&(v=x.yLbTitleFormatter(String(u.config.series[a].data[r].x),{series:u.globals.series,seriesIndex:a,dataPointIndex:r,w:u}));var b=u.config.tooltip.inverseOrder?o:e;if(u.globals.axisCharts){var y=function(e){return x.yLbFormatter(u.globals.series[e][r],{series:u.globals.series,seriesIndex:e,dataPointIndex:r,w:u})};if(l)x=n.getFormatters(b),v=n.getSeriesName({fn:x.yLbTitleFormatter,index:b,seriesIndex:a,j:r}),m=u.globals.colors[b],t=y(b),d(b)&&(h=u.globals.seriesGoals[b][r].map((function(e){return{attrs:e,val:x.yLbFormatter(e.value,{seriesIndex:b,dataPointIndex:r,w:u})}})));else{var k,w=null==c||null===(k=c.target)||void 0===k?void 0:k.getAttribute("fill");w&&(m=-1!==w.indexOf("url")?document.querySelector(w.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):w),t=y(a),d(a)&&Array.isArray(u.globals.seriesGoals[a][r])&&(h=u.globals.seriesGoals[a][r].map((function(e){return{attrs:e,val:x.yLbFormatter(e.value,{seriesIndex:a,dataPointIndex:r,w:u})}})))}}null===r&&(t=x.yLbFormatter(u.globals.series[a],i(i({},u),{},{seriesIndex:a,dataPointIndex:a}))),n.DOMHandling({i:a,t:b,j:r,ttItems:s,values:{val:t,goalVals:h,xVal:f,xAxisTTVal:g,zVal:p},seriesName:v,shared:l,pColor:m})},b=0,y=u.globals.series.length-1;b<u.globals.series.length;b++,y--)x(b,y)}},{key:"getFormatters",value:function(e){var t,n=this.w,a=n.globals.yLabelFormatters[e];return void 0!==n.globals.ttVal?Array.isArray(n.globals.ttVal)?(a=n.globals.ttVal[e]&&n.globals.ttVal[e].formatter,t=n.globals.ttVal[e]&&n.globals.ttVal[e].title&&n.globals.ttVal[e].title.formatter):(a=n.globals.ttVal.formatter,"function"==typeof n.globals.ttVal.title.formatter&&(t=n.globals.ttVal.title.formatter)):t=n.config.tooltip.y.title.formatter,"function"!=typeof a&&(a=n.globals.yLabelFormatters[0]?n.globals.yLabelFormatters[0]:function(e){return e}),"function"!=typeof t&&(t=function(e){return e}),{yLbFormatter:a,yLbTitleFormatter:t}}},{key:"getSeriesName",value:function(e){var t=e.fn,n=e.index,a=e.seriesIndex,r=e.j,i=this.w;return t(String(i.globals.seriesNames[n]),{series:i.globals.series,seriesIndex:a,dataPointIndex:r,w:i})}},{key:"DOMHandling",value:function(e){e.i;var t=e.t,n=e.j,a=e.ttItems,r=e.values,i=e.seriesName,o=e.shared,s=e.pColor,l=this.w,c=this.ttCtx,u=r.val,h=r.goalVals,d=r.xVal,f=r.xAxisTTVal,p=r.zVal,g=null;g=a[t].children,l.config.tooltip.fillSeriesColor&&(a[t].style.backgroundColor=s,g[0].style.display="none"),c.showTooltipTitle&&(null===c.tooltipTitle&&(c.tooltipTitle=l.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),c.tooltipTitle.innerHTML=d),c.isXAxisTooltipEnabled&&(c.xaxisTooltipText.innerHTML=""!==f?f:d);var v=a[t].querySelector(".apexcharts-tooltip-text-y-label");v&&(v.innerHTML=i||"");var m=a[t].querySelector(".apexcharts-tooltip-text-y-value");m&&(m.innerHTML=void 0!==u?u:""),g[0]&&g[0].classList.contains("apexcharts-tooltip-marker")&&(l.config.tooltip.marker.fillColors&&Array.isArray(l.config.tooltip.marker.fillColors)&&(s=l.config.tooltip.marker.fillColors[t]),g[0].style.backgroundColor=s),l.config.tooltip.marker.show||(g[0].style.display="none");var x=a[t].querySelector(".apexcharts-tooltip-text-goals-label"),b=a[t].querySelector(".apexcharts-tooltip-text-goals-value");if(h.length&&l.globals.seriesGoals[t]){var y=function(){var e="<div >",t="<div>";h.forEach((function(n,a){e+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(n.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(n.attrs.name,"</div>"),t+="<div>".concat(n.val,"</div>")})),x.innerHTML=e+"</div>",b.innerHTML=t+"</div>"};o?l.globals.seriesGoals[t][n]&&Array.isArray(l.globals.seriesGoals[t][n])?y():(x.innerHTML="",b.innerHTML=""):y()}else x.innerHTML="",b.innerHTML="";null!==p&&(a[t].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=l.config.tooltip.z.title,a[t].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==p?p:""),o&&g[0]&&(null==u||l.globals.ancillaryCollapsedSeriesIndices.indexOf(t)>-1||l.globals.collapsedSeriesIndices.indexOf(t)>-1?g[0].parentNode.style.display="none":g[0].parentNode.style.display=l.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(e){var t=this.w;if(e)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var n=t.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");n&&(n.classList.add("apexcharts-active"),n.style.display=t.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(e){var t=e.i,n=e.j,a=this.w,r=this.ctx.series.filteredSeriesX(),i="",o="",s=null,l=null,c={series:a.globals.series,seriesIndex:t,dataPointIndex:n,w:a},u=a.globals.ttZFormatter;null===n?l=a.globals.series[t]:a.globals.isXNumeric&&"treemap"!==a.config.chart.type?(i=r[t][n],0===r[t].length&&(i=r[this.tooltipUtil.getFirstActiveXArray(r)][n])):i=void 0!==a.globals.labels[n]?a.globals.labels[n]:"";var h=i;return i=a.globals.isXNumeric&&"datetime"===a.config.xaxis.type?new Y(this.ctx).xLabelFormat(a.globals.ttKeyFormatter,h,h,{i:void 0,dateFormatter:new B(this.ctx).formatDate,w:this.w}):a.globals.isBarHorizontal?a.globals.yLabelFormatters[0](h,c):a.globals.xLabelFormatter(h,c),void 0!==a.config.tooltip.x.formatter&&(i=a.globals.ttKeyFormatter(h,c)),a.globals.seriesZ.length>0&&a.globals.seriesZ[t].length>0&&(s=u(a.globals.seriesZ[t][n],a)),o="function"==typeof a.config.xaxis.tooltip.formatter?a.globals.xaxisTooltipFormatter(h,c):i,{val:Array.isArray(l)?l.join(" "):l,xVal:Array.isArray(i)?i.join(" "):i,xAxisTTVal:Array.isArray(o)?o.join(" "):o,zVal:s}}},{key:"handleCustomTooltip",value:function(e){var t=e.i,n=e.j,a=e.y1,r=e.y2,i=e.w,o=this.ttCtx.getElTooltip(),s=i.config.tooltip.custom;Array.isArray(s)&&s[t]&&(s=s[t]),o.innerHTML=s({ctx:this.ctx,series:i.globals.series,seriesIndex:t,dataPointIndex:n,y1:a,y2:r,w:i})}}]),e}(),xe=function(){function e(t){s(this,e),this.ttCtx=t,this.ctx=t.ctx,this.w=t.w}return c(e,[{key:"moveXCrosshairs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.ttCtx,a=this.w,r=n.getElXCrosshairs(),i=e-n.xcrosshairsWidth/2,o=a.globals.labels.slice().length;if(null!==t&&(i=a.globals.gridWidth/o*t),null===r||a.globals.isBarHorizontal||(r.setAttribute("x",i),r.setAttribute("x1",i),r.setAttribute("x2",i),r.setAttribute("y2",a.globals.gridHeight),r.classList.add("apexcharts-active")),i<0&&(i=0),i>a.globals.gridWidth&&(i=a.globals.gridWidth),n.isXAxisTooltipEnabled){var s=i;"tickWidth"!==a.config.xaxis.crosshairs.width&&"barWidth"!==a.config.xaxis.crosshairs.width||(s=i+n.xcrosshairsWidth/2),this.moveXAxisTooltip(s)}}},{key:"moveYCrosshairs",value:function(e){var t=this.ttCtx;null!==t.ycrosshairs&&w.setAttrs(t.ycrosshairs,{y1:e,y2:e}),null!==t.ycrosshairsHidden&&w.setAttrs(t.ycrosshairsHidden,{y1:e,y2:e})}},{key:"moveXAxisTooltip",value:function(e){var t=this.w,n=this.ttCtx;if(null!==n.xaxisTooltip&&0!==n.xcrosshairsWidth){n.xaxisTooltip.classList.add("apexcharts-active");var a,r=n.xaxisOffY+t.config.xaxis.tooltip.offsetY+t.globals.translateY+1+t.config.xaxis.offsetY;if(e-=n.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(e))e+=t.globals.translateX,a=new w(this.ctx).getTextRects(n.xaxisTooltipText.innerHTML),n.xaxisTooltipText.style.minWidth=a.width+"px",n.xaxisTooltip.style.left=e+"px",n.xaxisTooltip.style.top=r+"px"}}},{key:"moveYAxisTooltip",value:function(e){var t=this.w,n=this.ttCtx;null===n.yaxisTTEls&&(n.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var a=parseInt(n.ycrosshairsHidden.getAttribute("y1"),10),r=t.globals.translateY+a,i=n.yaxisTTEls[e].getBoundingClientRect().height,o=t.globals.translateYAxisX[e]-2;t.config.yaxis[e].opposite&&(o-=26),r-=i/2,-1===t.globals.ignoreYAxisIndexes.indexOf(e)?(n.yaxisTTEls[e].classList.add("apexcharts-active"),n.yaxisTTEls[e].style.top=r+"px",n.yaxisTTEls[e].style.left=o+t.config.yaxis[e].tooltip.offsetX+"px"):n.yaxisTTEls[e].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.w,r=this.ttCtx,i=r.getElTooltip(),o=r.tooltipRect,s=null!==n?parseFloat(n):1,l=parseFloat(e)+s+5,c=parseFloat(t)+s/2;if(l>a.globals.gridWidth/2&&(l=l-o.ttWidth-s-10),l>a.globals.gridWidth-o.ttWidth-10&&(l=a.globals.gridWidth-o.ttWidth),l<-20&&(l=-20),a.config.tooltip.followCursor){var u=r.getElGrid(),h=u.getBoundingClientRect();c=r.e.clientY+a.globals.translateY-h.top-o.ttHeight/2}else a.globals.isBarHorizontal||(o.ttHeight/2+c>a.globals.gridHeight&&(c=a.globals.gridHeight-o.ttHeight+a.globals.translateY),c<0&&(c=0));isNaN(l)||(l+=a.globals.translateX,i.style.left=l+"px",i.style.top=c+"px")}},{key:"moveMarkers",value:function(e,t){var n=this.w,a=this.ttCtx;if(n.globals.markers.size[e]>0)for(var r=n.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-marker")),i=0;i<r.length;i++)parseInt(r[i].getAttribute("rel"),10)===t&&(a.marker.resetPointsSize(),a.marker.enlargeCurrentPoint(t,r[i]));else a.marker.resetPointsSize(),this.moveDynamicPointOnHover(t,e)}},{key:"moveDynamicPointOnHover",value:function(e,t){var n,a,r=this.w,i=this.ttCtx,o=r.globals.pointsArray,s=i.tooltipUtil.getHoverMarkerSize(t),l=r.config.series[t].type;if(!l||"column"!==l&&"candlestick"!==l&&"boxPlot"!==l){n=o[t][e][0],a=o[t][e][1]?o[t][e][1]:0;var c=r.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers circle"));c&&a<r.globals.gridHeight&&a>0&&(c.setAttribute("r",s),c.setAttribute("cx",n),c.setAttribute("cy",a)),this.moveXCrosshairs(n),i.fixedTooltip||this.moveTooltip(n,a,s)}}},{key:"moveDynamicPointsOnHover",value:function(e){var t,n=this.ttCtx,a=n.w,r=0,i=0,o=a.globals.pointsArray;t=new P(this.ctx).getActiveConfigSeriesIndex(!0);var s=n.tooltipUtil.getHoverMarkerSize(t);o[t]&&(r=o[t][e][0],i=o[t][e][1]);var l=n.tooltipUtil.getAllMarkers();if(null!==l)for(var c=0;c<a.globals.series.length;c++){var u=o[c];if(a.globals.comboCharts&&void 0===u&&l.splice(c,0,null),u&&u.length){var h=o[c][e][1];l[c].setAttribute("cx",r),null!==h&&!isNaN(h)&&h<a.globals.gridHeight+s&&h+s>0?(l[c]&&l[c].setAttribute("r",s),l[c]&&l[c].setAttribute("cy",h)):l[c]&&l[c].setAttribute("r",0)}}if(this.moveXCrosshairs(r),!n.fixedTooltip){var d=i||a.globals.gridHeight;this.moveTooltip(r,d,s)}}},{key:"moveStickyTooltipOverBars",value:function(e){var t=this.w,n=this.ttCtx,a=t.globals.columnSeries?t.globals.columnSeries.length:t.globals.series.length,r=a>=2&&a%2==0?Math.floor(a/2):Math.floor(a/2)+1;t.globals.isBarHorizontal&&(r=new P(this.ctx).getActiveConfigSeriesIndex(!1,"desc")+1);var i=t.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(r,"'] path[j='").concat(e,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(r,"'] path[j='").concat(e,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(r,"'] path[j='").concat(e,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(r,"'] path[j='").concat(e,"']")),o=i?parseFloat(i.getAttribute("cx")):0,s=i?parseFloat(i.getAttribute("cy")):0,l=i?parseFloat(i.getAttribute("barWidth")):0,c=i?parseFloat(i.getAttribute("barHeight")):0,u=n.getElGrid().getBoundingClientRect(),h=i.classList.contains("apexcharts-candlestick-area")||i.classList.contains("apexcharts-boxPlot-area");if(t.globals.isXNumeric?(i&&!h&&(o-=a%2!=0?l/2:0),i&&h&&t.globals.comboCharts&&(o-=l/2)):t.globals.isBarHorizontal||(o=n.xAxisTicksPositions[e-1]+n.dataPointsDividedWidth/2,isNaN(o)&&(o=n.xAxisTicksPositions[e]-n.dataPointsDividedWidth/2)),t.globals.isBarHorizontal?(s>t.globals.gridHeight/2&&(s-=n.tooltipRect.ttHeight),(s=s+t.config.grid.padding.top+c/3)+c>t.globals.gridHeight&&(s=t.globals.gridHeight-c)):t.config.tooltip.followCursor?s=n.e.clientY-u.top-n.tooltipRect.ttHeight/2:s+n.tooltipRect.ttHeight+15>t.globals.gridHeight&&(s=t.globals.gridHeight),s<-10&&(s=-10),t.globals.isBarHorizontal||this.moveXCrosshairs(o),!n.fixedTooltip){var d=s||t.globals.gridHeight;this.moveTooltip(o,d)}}}]),e}(),be=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx,this.tooltipPosition=new xe(t)}return c(e,[{key:"drawDynamicPoints",value:function(){var e=this.w,t=new w(this.ctx),n=new D(this.ctx),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");a=v(a),e.config.chart.stacked&&a.sort((function(e,t){return parseFloat(e.getAttribute("data:realIndex"))-parseFloat(t.getAttribute("data:realIndex"))}));for(var r=0;r<a.length;r++){var i=a[r].querySelector(".apexcharts-series-markers-wrap");if(null!==i){var o=void 0,s="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==e.config.chart.type&&"area"!==e.config.chart.type||e.globals.comboCharts||e.config.tooltip.intersect||(s+=" no-pointer-events");var l=n.getMarkerConfig({cssClass:s,seriesIndex:Number(i.getAttribute("data:realIndex"))});(o=t.drawMarker(0,0,l)).node.setAttribute("default-marker-size",0);var c=document.createElementNS(e.globals.SVGNS,"g");c.classList.add("apexcharts-series-markers"),c.appendChild(o.node),i.appendChild(c)}}}},{key:"enlargeCurrentPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=this.w;"bubble"!==r.config.chart.type&&this.newPointSize(e,t);var i=t.getAttribute("cx"),o=t.getAttribute("cy");if(null!==n&&null!==a&&(i=n,o=a),this.tooltipPosition.moveXCrosshairs(i),!this.fixedTooltip){if("radar"===r.config.chart.type){var s=this.ttCtx.getElGrid(),l=s.getBoundingClientRect();i=this.ttCtx.e.clientX-l.left}this.tooltipPosition.moveTooltip(i,o,r.config.markers.hover.size)}}},{key:"enlargePoints",value:function(e){for(var t=this.w,n=this,a=this.ttCtx,r=e,i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),o=t.config.markers.hover.size,s=0;s<i.length;s++){var l=i[s].getAttribute("rel"),c=i[s].getAttribute("index");if(void 0===o&&(o=t.globals.markers.size[c]+t.config.markers.hover.sizeOffset),r===parseInt(l,10)){n.newPointSize(r,i[s]);var u=i[s].getAttribute("cx"),h=i[s].getAttribute("cy");n.tooltipPosition.moveXCrosshairs(u),a.fixedTooltip||n.tooltipPosition.moveTooltip(u,h,o)}else n.oldPointSize(i[s])}}},{key:"newPointSize",value:function(e,t){var n=this.w,a=n.config.markers.hover.size,r=0===e?t.parentNode.firstChild:t.parentNode.lastChild;if("0"!==r.getAttribute("default-marker-size")){var i=parseInt(r.getAttribute("index"),10);void 0===a&&(a=n.globals.markers.size[i]+n.config.markers.hover.sizeOffset),a<0&&(a=0),r.setAttribute("r",a)}}},{key:"oldPointSize",value:function(e){var t=parseFloat(e.getAttribute("default-marker-size"));e.setAttribute("r",t)}},{key:"resetPointsSize",value:function(){for(var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),t=0;t<e.length;t++){var n=parseFloat(e[t].getAttribute("default-marker-size"));b.isNumber(n)&&n>=0?e[t].setAttribute("r",n):e[t].setAttribute("r",0)}}}]),e}(),ye=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t}return c(e,[{key:"getAttr",value:function(e,t){return parseFloat(e.target.getAttribute(t))}},{key:"handleHeatTreeTooltip",value:function(e){var t=e.e,n=e.opt,a=e.x,r=e.y,i=e.type,o=this.ttCtx,s=this.w;if(t.target.classList.contains("apexcharts-".concat(i,"-rect"))){var l=this.getAttr(t,"i"),c=this.getAttr(t,"j"),u=this.getAttr(t,"cx"),h=this.getAttr(t,"cy"),d=this.getAttr(t,"width"),f=this.getAttr(t,"height");if(o.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:l,j:c,shared:!1,e:t}),s.globals.capturedSeriesIndex=l,s.globals.capturedDataPointIndex=c,a=u+o.tooltipRect.ttWidth/2+d,r=h+o.tooltipRect.ttHeight/2-f/2,o.tooltipPosition.moveXCrosshairs(u+d/2),a>s.globals.gridWidth/2&&(a=u-o.tooltipRect.ttWidth/2+d),o.w.config.tooltip.followCursor){var p=s.globals.dom.elWrap.getBoundingClientRect();a=s.globals.clientX-p.left-(a>s.globals.gridWidth/2?o.tooltipRect.ttWidth:0),r=s.globals.clientY-p.top-(r>s.globals.gridHeight/2?o.tooltipRect.ttHeight:0)}}return{x:a,y:r}}},{key:"handleMarkerTooltip",value:function(e){var t,n,a=e.e,r=e.opt,i=e.x,o=e.y,s=this.w,l=this.ttCtx;if(a.target.classList.contains("apexcharts-marker")){var c=parseInt(r.paths.getAttribute("cx"),10),u=parseInt(r.paths.getAttribute("cy"),10),h=parseFloat(r.paths.getAttribute("val"));if(n=parseInt(r.paths.getAttribute("rel"),10),t=parseInt(r.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,l.intersect){var d=b.findAncestor(r.paths,"apexcharts-series");d&&(t=parseInt(d.getAttribute("data:realIndex"),10))}if(l.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:t,j:n,shared:!l.showOnIntersect&&s.config.tooltip.shared,e:a}),"mouseup"===a.type&&l.markerClick(a,t,n),s.globals.capturedSeriesIndex=t,s.globals.capturedDataPointIndex=n,i=c,o=u+s.globals.translateY-1.4*l.tooltipRect.ttHeight,l.w.config.tooltip.followCursor){var f=l.getElGrid().getBoundingClientRect();o=l.e.clientY+s.globals.translateY-f.top}h<0&&(o=u),l.marker.enlargeCurrentPoint(n,r.paths,i,o)}return{x:i,y:o}}},{key:"handleBarTooltip",value:function(e){var t,n,a=e.e,r=e.opt,i=this.w,o=this.ttCtx,s=o.getElTooltip(),l=0,c=0,u=0,h=this.getBarTooltipXY({e:a,opt:r});t=h.i;var d=h.barHeight,f=h.j;i.globals.capturedSeriesIndex=t,i.globals.capturedDataPointIndex=f,i.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||!i.config.tooltip.shared?(c=h.x,u=h.y,n=Array.isArray(i.config.stroke.width)?i.config.stroke.width[t]:i.config.stroke.width,l=c):i.globals.comboCharts||i.config.tooltip.shared||(l/=2),isNaN(u)?u=i.globals.svgHeight-o.tooltipRect.ttHeight:u<0&&(u=0);var p=parseInt(r.paths.parentNode.getAttribute("data:realIndex"),10),g=i.globals.isMultipleYAxis?i.config.yaxis[p]&&i.config.yaxis[p].reversed:i.config.yaxis[0].reversed;if(c+o.tooltipRect.ttWidth>i.globals.gridWidth&&!g?c-=o.tooltipRect.ttWidth:c<0&&(c=0),o.w.config.tooltip.followCursor){var v=o.getElGrid().getBoundingClientRect();u=o.e.clientY-v.top}null===o.tooltip&&(o.tooltip=i.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),i.config.tooltip.shared||(i.globals.comboBarCount>0?o.tooltipPosition.moveXCrosshairs(l+n/2):o.tooltipPosition.moveXCrosshairs(l)),!o.fixedTooltip&&(!i.config.tooltip.shared||i.globals.isBarHorizontal&&o.tooltipUtil.hasBars())&&(g&&(c-=o.tooltipRect.ttWidth)<0&&(c=0),!g||i.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||(u=u+d-2*(i.globals.series[t][f]<0?d:0)),o.tooltipRect.ttHeight+u>i.globals.gridHeight?u=i.globals.gridHeight-o.tooltipRect.ttHeight+i.globals.translateY:(u=u+i.globals.translateY-o.tooltipRect.ttHeight/2)<0&&(u=0),s.style.left=c+i.globals.translateX+"px",s.style.top=u+"px")}},{key:"getBarTooltipXY",value:function(e){var t=e.e,n=e.opt,a=this.w,r=null,i=this.ttCtx,o=0,s=0,l=0,c=0,u=0,h=t.target.classList;if(h.contains("apexcharts-bar-area")||h.contains("apexcharts-candlestick-area")||h.contains("apexcharts-boxPlot-area")||h.contains("apexcharts-rangebar-area")){var d=t.target,f=d.getBoundingClientRect(),p=n.elGrid.getBoundingClientRect(),g=f.height;u=f.height;var v=f.width,m=parseInt(d.getAttribute("cx"),10),x=parseInt(d.getAttribute("cy"),10);c=parseFloat(d.getAttribute("barWidth"));var b="touchmove"===t.type?t.touches[0].clientX:t.clientX;r=parseInt(d.getAttribute("j"),10),o=parseInt(d.parentNode.getAttribute("rel"),10)-1;var y=d.getAttribute("data-range-y1"),k=d.getAttribute("data-range-y2");a.globals.comboCharts&&(o=parseInt(d.parentNode.getAttribute("data:realIndex"),10)),i.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:o,j:r,y1:y?parseInt(y,10):null,y2:k?parseInt(k,10):null,shared:!i.showOnIntersect&&a.config.tooltip.shared,e:t}),a.config.tooltip.followCursor?a.globals.isBarHorizontal?(s=b-p.left+15,l=x-i.dataPointsDividedHeight+g/2-i.tooltipRect.ttHeight/2):(s=a.globals.isXNumeric?m-v/2:m-i.dataPointsDividedWidth+v/2,l=t.clientY-p.top-i.tooltipRect.ttHeight/2-15):a.globals.isBarHorizontal?((s=m)<i.xyRatios.baseLineInvertedY&&(s=m-i.tooltipRect.ttWidth),l=x-i.dataPointsDividedHeight+g/2-i.tooltipRect.ttHeight/2):(s=a.globals.isXNumeric?m-v/2:m-i.dataPointsDividedWidth+v/2,l=x)}return{x:s,y:l,barHeight:u,barWidth:c,i:o,j:r}}}]),e}(),ke=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t}return c(e,[{key:"drawXaxisTooltip",value:function(){var e=this.w,t=this.ttCtx,n="bottom"===e.config.xaxis.position;t.xaxisOffY=n?e.globals.gridHeight+1:-e.globals.xAxisHeight-e.config.xaxis.axisTicks.height+3;var a=n?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",r=e.globals.dom.elWrap;t.isXAxisTooltipEnabled&&null===e.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(t.xaxisTooltip=document.createElement("div"),t.xaxisTooltip.setAttribute("class",a+" apexcharts-theme-"+e.config.tooltip.theme),r.appendChild(t.xaxisTooltip),t.xaxisTooltipText=document.createElement("div"),t.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),t.xaxisTooltipText.style.fontFamily=e.config.xaxis.tooltip.style.fontFamily||e.config.chart.fontFamily,t.xaxisTooltipText.style.fontSize=e.config.xaxis.tooltip.style.fontSize,t.xaxisTooltip.appendChild(t.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var e=this.w,t=this.ttCtx,n=function(n){var a=e.config.yaxis[n].opposite||e.config.yaxis[n].crosshairs.opposite;t.yaxisOffX=a?e.globals.gridWidth+1:1;var r="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n,a?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");e.globals.yAxisSameScaleIndices.map((function(t,a){t.map((function(t,a){a===n&&(r+=e.config.yaxis[a].show?" ":" apexcharts-yaxistooltip-hidden")}))}));var i=e.globals.dom.elWrap;null===e.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n))&&(t.yaxisTooltip=document.createElement("div"),t.yaxisTooltip.setAttribute("class",r+" apexcharts-theme-"+e.config.tooltip.theme),i.appendChild(t.yaxisTooltip),0===n&&(t.yaxisTooltipText=[]),t.yaxisTooltipText[n]=document.createElement("div"),t.yaxisTooltipText[n].classList.add("apexcharts-yaxistooltip-text"),t.yaxisTooltip.appendChild(t.yaxisTooltipText[n]))},a=0;a<e.config.yaxis.length;a++)n(a)}},{key:"setXCrosshairWidth",value:function(){var e=this.w,t=this.ttCtx,n=t.getElXCrosshairs();if(t.xcrosshairsWidth=parseInt(e.config.xaxis.crosshairs.width,10),e.globals.comboCharts){var a=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==a&&"barWidth"===e.config.xaxis.crosshairs.width){var r=parseFloat(a.getAttribute("barWidth"));t.xcrosshairsWidth=r}else if("tickWidth"===e.config.xaxis.crosshairs.width){var i=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/i}}else if("tickWidth"===e.config.xaxis.crosshairs.width){var o=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/o}else if("barWidth"===e.config.xaxis.crosshairs.width){var s=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==s){var l=parseFloat(s.getAttribute("barWidth"));t.xcrosshairsWidth=l}else t.xcrosshairsWidth=1}e.globals.isBarHorizontal&&(t.xcrosshairsWidth=0),null!==n&&t.xcrosshairsWidth>0&&n.setAttribute("width",t.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var e=this.w,t=this.ttCtx;t.ycrosshairs=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),t.ycrosshairsHidden=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(e,t,n){var a=this.ttCtx,r=this.w,i=r.globals.yLabelFormatters[e];if(a.yaxisTooltips[e]){var o=a.getElGrid().getBoundingClientRect(),s=(t-o.top)*n.yRatio[e],l=r.globals.maxYArr[e]-r.globals.minYArr[e],c=r.globals.minYArr[e]+(l-s);a.tooltipPosition.moveYCrosshairs(t-o.top),a.yaxisTooltipText[e].innerHTML=i(c),a.tooltipPosition.moveYAxisTooltip(e)}}}]),e}(),we=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.tConfig=n.config.tooltip,this.tooltipUtil=new ve(this),this.tooltipLabels=new me(this),this.tooltipPosition=new xe(this),this.marker=new be(this),this.intersect=new ye(this),this.axesTooltip=new ke(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!n.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return c(e,[{key:"getElTooltip",value:function(e){return e||(e=this),e.w.globals.dom.baseEl?e.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(e){var t=this.w;this.xyRatios=e,this.isXAxisTooltipEnabled=t.config.xaxis.tooltip.enabled&&t.globals.axisCharts,this.yaxisTooltips=t.config.yaxis.map((function(e,n){return!!(e.show&&e.tooltip.enabled&&t.globals.axisCharts)})),this.allTooltipSeriesGroups=[],t.globals.axisCharts||(this.showTooltipTitle=!1);var n=document.createElement("div");if(n.classList.add("apexcharts-tooltip"),t.config.tooltip.cssClass&&n.classList.add(t.config.tooltip.cssClass),n.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),t.globals.dom.elWrap.appendChild(n),t.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var a=new K(this.ctx);this.xAxisTicksPositions=a.getXAxisTicksPositions()}if(!t.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==t.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==t.config.markers.size&&0!==t.globals.markers.largestSize||this.marker.drawDynamicPoints(this),t.globals.collapsedSeries.length!==t.globals.series.length){this.dataPointsDividedHeight=t.globals.gridHeight/t.globals.dataPoints,this.dataPointsDividedWidth=t.globals.gridWidth/t.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||t.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,n.appendChild(this.tooltipTitle));var r=t.globals.series.length;(t.globals.xyCharts||t.globals.comboCharts)&&this.tConfig.shared&&(r=this.showOnIntersect?1:t.globals.series.length),this.legendLabels=t.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(r),this.addSVGEvents()}}},{key:"createTTElements",value:function(e){for(var t=this,n=this.w,a=[],r=this.getElTooltip(),i=function(i){var o=document.createElement("div");o.classList.add("apexcharts-tooltip-series-group"),o.style.order=n.config.tooltip.inverseOrder?e-i:i+1,t.tConfig.shared&&t.tConfig.enabledOnSeries&&Array.isArray(t.tConfig.enabledOnSeries)&&t.tConfig.enabledOnSeries.indexOf(i)<0&&o.classList.add("apexcharts-tooltip-series-group-hidden");var s=document.createElement("span");s.classList.add("apexcharts-tooltip-marker"),s.style.backgroundColor=n.globals.colors[i],o.appendChild(s);var l=document.createElement("div");l.classList.add("apexcharts-tooltip-text"),l.style.fontFamily=t.tConfig.style.fontFamily||n.config.chart.fontFamily,l.style.fontSize=t.tConfig.style.fontSize,["y","goals","z"].forEach((function(e){var t=document.createElement("div");t.classList.add("apexcharts-tooltip-".concat(e,"-group"));var n=document.createElement("span");n.classList.add("apexcharts-tooltip-text-".concat(e,"-label")),t.appendChild(n);var a=document.createElement("span");a.classList.add("apexcharts-tooltip-text-".concat(e,"-value")),t.appendChild(a),l.appendChild(t)})),o.appendChild(l),r.appendChild(o),a.push(o)},o=0;o<e;o++)i(o);return a}},{key:"addSVGEvents",value:function(){var e=this.w,t=e.config.chart.type,n=this.getElTooltip(),a=!("bar"!==t&&"candlestick"!==t&&"boxPlot"!==t&&"rangeBar"!==t),r="area"===t||"line"===t||"scatter"===t||"bubble"===t||"radar"===t,i=e.globals.dom.Paper.node,o=this.getElGrid();o&&(this.seriesBound=o.getBoundingClientRect());var s,l=[],c=[],u={hoverArea:i,elGrid:o,tooltipEl:n,tooltipY:l,tooltipX:c,ttItems:this.ttItems};if(e.globals.axisCharts&&(r?s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):a?s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==t&&"treemap"!==t||(s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),s&&s.length))for(var h=0;h<s.length;h++)l.push(s[h].getAttribute("cy")),c.push(s[h].getAttribute("cx"));if(e.globals.xyCharts&&!this.showOnIntersect||e.globals.comboCharts&&!this.showOnIntersect||a&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([i],u);else if(a&&!e.globals.comboCharts||r&&this.showOnIntersect)this.addDatapointEventsListeners(u);else if(!e.globals.axisCharts||"heatmap"===t||"treemap"===t){var d=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(d,u)}if(this.showOnIntersect){var f=e.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");f.length>0&&this.addPathsEventListeners(f,u),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(u)}}},{key:"drawFixedTooltipRect",value:function(){var e=this.w,t=this.getElTooltip(),n=t.getBoundingClientRect(),a=n.width+10,r=n.height+10,i=this.tConfig.fixed.offsetX,o=this.tConfig.fixed.offsetY,s=this.tConfig.fixed.position.toLowerCase();return s.indexOf("right")>-1&&(i=i+e.globals.svgWidth-a+10),s.indexOf("bottom")>-1&&(o=o+e.globals.svgHeight-r-10),t.style.left=i+"px",t.style.top=o+"px",{x:i,y:o,ttWidth:a,ttHeight:r}}},{key:"addDatapointEventsListeners",value:function(e){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(t,e)}},{key:"addPathsEventListeners",value:function(e,t){for(var n=this,a=function(a){var r={paths:e[a],tooltipEl:t.tooltipEl,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:t.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map((function(t){return e[a].addEventListener(t,n.onSeriesHover.bind(n,r),{capture:!1,passive:!0})}))},r=0;r<e.length;r++)a(r)}},{key:"onSeriesHover",value:function(e,t){var n=this,a=Date.now()-this.lastHoverTime;a>=100?this.seriesHover(e,t):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout((function(){n.seriesHover(e,t)}),100-a))}},{key:"seriesHover",value:function(e,t){var n=this;this.lastHoverTime=Date.now();var a=[],r=this.w;r.config.chart.group&&(a=this.ctx.getGroupedCharts()),r.globals.axisCharts&&(r.globals.minX===-1/0&&r.globals.maxX===1/0||0===r.globals.dataPoints)||(a.length?a.forEach((function(a){var r=n.getElTooltip(a),i={paths:e.paths,tooltipEl:r,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:a.w.globals.tooltip.ttItems};a.w.globals.minX===n.w.globals.minX&&a.w.globals.maxX===n.w.globals.maxX&&a.w.globals.tooltip.seriesHoverByContext({chartCtx:a,ttCtx:a.w.globals.tooltip,opt:i,e:t})})):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:e,e:t}))}},{key:"seriesHoverByContext",value:function(e){var t=e.chartCtx,n=e.ttCtx,a=e.opt,r=e.e,i=t.w,o=this.getElTooltip();o&&(n.tooltipRect={x:0,y:0,ttWidth:o.getBoundingClientRect().width,ttHeight:o.getBoundingClientRect().height},n.e=r,!n.tooltipUtil.hasBars()||i.globals.comboCharts||n.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new P(t).toggleSeriesOnHover(r,r.target.parentNode),n.fixedTooltip&&n.drawFixedTooltipRect(),i.globals.axisCharts?n.axisChartsTooltips({e:r,opt:a,tooltipRect:n.tooltipRect}):n.nonAxisChartsTooltips({e:r,opt:a,tooltipRect:n.tooltipRect}))}},{key:"axisChartsTooltips",value:function(e){var t,n,a=e.e,r=e.opt,i=this.w,o=r.elGrid.getBoundingClientRect(),s="touchmove"===a.type?a.touches[0].clientX:a.clientX,l="touchmove"===a.type?a.touches[0].clientY:a.clientY;if(this.clientY=l,this.clientX=s,i.globals.capturedSeriesIndex=-1,i.globals.capturedDataPointIndex=-1,l<o.top||l>o.top+o.height)this.handleMouseOut(r);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!i.config.tooltip.shared){var c=parseInt(r.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(c)<0)return void this.handleMouseOut(r)}var u=this.getElTooltip(),h=this.getElXCrosshairs(),d=i.globals.xyCharts||"bar"===i.config.chart.type&&!i.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||i.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===a.type||"touchmove"===a.type||"mouseup"===a.type){if(i.globals.collapsedSeries.length+i.globals.ancillaryCollapsedSeries.length===i.globals.series.length)return;null!==h&&h.classList.add("apexcharts-active");var f=this.yaxisTooltips.filter((function(e){return!0===e}));if(null!==this.ycrosshairs&&f.length&&this.ycrosshairs.classList.add("apexcharts-active"),d&&!this.showOnIntersect)this.handleStickyTooltip(a,s,l,r);else if("heatmap"===i.config.chart.type||"treemap"===i.config.chart.type){var p=this.intersect.handleHeatTreeTooltip({e:a,opt:r,x:t,y:n,type:i.config.chart.type});t=p.x,n=p.y,u.style.left=t+"px",u.style.top=n+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:a,opt:r}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:a,opt:r,x:t,y:n});if(this.yaxisTooltips.length)for(var g=0;g<i.config.yaxis.length;g++)this.axesTooltip.drawYaxisTooltipText(g,l,this.xyRatios);r.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==a.type&&"touchend"!==a.type||this.handleMouseOut(r)}}},{key:"nonAxisChartsTooltips",value:function(e){var t=e.e,n=e.opt,a=e.tooltipRect,r=this.w,i=n.paths.getAttribute("rel"),o=this.getElTooltip(),s=r.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===t.type||"touchmove"===t.type){o.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:parseInt(i,10)-1,shared:!1});var l=r.globals.clientX-s.left-a.ttWidth/2,c=r.globals.clientY-s.top-a.ttHeight-10;if(o.style.left=l+"px",o.style.top=c+"px",r.config.legend.tooltipHoverFormatter){var u=i-1,h=(0,r.config.legend.tooltipHoverFormatter)(this.legendLabels[u].getAttribute("data:default-text"),{seriesIndex:u,dataPointIndex:u,w:r});this.legendLabels[u].innerHTML=h}}else"mouseout"!==t.type&&"touchend"!==t.type||(o.classList.remove("apexcharts-active"),r.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)})))}},{key:"handleStickyTooltip",value:function(e,t,n,a){var r=this.w,i=this.tooltipUtil.getNearestValues({context:this,hoverArea:a.hoverArea,elGrid:a.elGrid,clientX:t,clientY:n}),o=i.j,s=i.capturedSeries,l=a.elGrid.getBoundingClientRect();i.hoverX<0||i.hoverX>l.width?this.handleMouseOut(a):null!==s?this.handleStickyCapturedSeries(e,s,a,o):(this.tooltipUtil.isXoverlap(o)||r.globals.isBarHorizontal)&&this.create(e,this,0,o,a.ttItems)}},{key:"handleStickyCapturedSeries",value:function(e,t,n,a){var r=this.w;this.tConfig.shared||null!==r.globals.series[t][a]?void 0!==r.globals.series[t][a]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(a)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(e,this,t,a,n.ttItems):this.create(e,this,t,a,n.ttItems,!1):this.tooltipUtil.isXoverlap(a)&&this.create(e,this,0,a,n.ttItems):this.handleMouseOut(n)}},{key:"deactivateHoverFilter",value:function(){for(var e=this.w,t=new w(this.ctx),n=e.globals.dom.Paper.select(".apexcharts-bar-area"),a=0;a<n.length;a++)t.pathMouseLeave(n[a])}},{key:"handleMouseOut",value:function(e){var t=this.w,n=this.getElXCrosshairs();if(e.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==t.config.chart.type&&this.marker.resetPointsSize(),null!==n&&n.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var a=0;a<this.yaxisTTEls.length;a++)this.yaxisTTEls[a].classList.remove("apexcharts-active")}t.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)}))}},{key:"markerClick",value:function(e,t,n){var a=this.w;"function"==typeof a.config.chart.events.markerClick&&a.config.chart.events.markerClick(e,this.ctx,{seriesIndex:t,dataPointIndex:n,w:a}),this.ctx.events.fireEvent("markerClick",[e,this.ctx,{seriesIndex:t,dataPointIndex:n,w:a}])}},{key:"create",value:function(e,t,n,a,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=this.w,s=t;"mouseup"===e.type&&this.markerClick(e,n,a),null===i&&(i=this.tConfig.shared);var l=this.tooltipUtil.hasMarkers(),c=this.tooltipUtil.getElBars();if(o.config.legend.tooltipHoverFormatter){var u=o.config.legend.tooltipHoverFormatter,h=Array.from(this.legendLabels);h.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)}));for(var d=0;d<h.length;d++){var f=h[d],p=parseInt(f.getAttribute("i"),10),g=decodeURIComponent(f.getAttribute("data:default-text")),v=u(g,{seriesIndex:i?p:n,dataPointIndex:a,w:o});if(i)f.innerHTML=o.globals.collapsedSeriesIndices.indexOf(p)<0?v:g;else if(f.innerHTML=p===n?v:g,n===p)break}}if(i){if(s.tooltipLabels.drawSeriesTexts({ttItems:r,i:n,j:a,shared:!this.showOnIntersect&&this.tConfig.shared}),l&&(o.globals.markers.largestSize>0?s.marker.enlargePoints(a):s.tooltipPosition.moveDynamicPointsOnHover(a)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(c),this.barSeriesHeight>0)){var m=new w(this.ctx),x=o.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(a,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(a);for(var b=0;b<x.length;b++)m.pathMouseEnter(x[b])}}else s.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:r,i:n,j:a}),this.tooltipUtil.hasBars()&&s.tooltipPosition.moveStickyTooltipOverBars(a),l&&s.tooltipPosition.moveMarkers(n,a)}}]),e}(),Se=function(e){h(n,z);var t=g(n);function n(){return s(this,n),t.apply(this,arguments)}return c(n,[{key:"draw",value:function(e,t){var n=this,a=this.w;this.graphics=new w(this.ctx),this.bar=new z(this.ctx,this.xyRatios);var r=new S(this.ctx,a);e=r.getLogSeries(e),this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e),"100%"===a.config.chart.stackType&&(e=a.globals.seriesPercent.slice()),this.series=e,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var o=0;o<e.length;o++)e[o].length>0&&(this.totalItems+=e[o].length);for(var s=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),l=0,c=0,u=function(r,o){var u=void 0,h=void 0,d=void 0,f=void 0,p=[],g=[],v=a.globals.comboCharts?t[r]:r;n.yRatio.length>1&&(n.yaxisIndex=v),n.isReversed=a.config.yaxis[n.yaxisIndex]&&a.config.yaxis[n.yaxisIndex].reversed;var m=n.graphics.group({class:"apexcharts-series",seriesName:b.escapeString(a.globals.seriesNames[v]),rel:r+1,"data:realIndex":v});n.ctx.series.addCollapsedClassToSeries(m,v);var x=n.graphics.group({class:"apexcharts-datalabels","data:realIndex":v}),y=0,k=0,w=n.initialPositions(l,c,u,h,d,f);c=w.y,y=w.barHeight,h=w.yDivision,f=w.zeroW,l=w.x,k=w.barWidth,u=w.xDivision,d=w.zeroH,n.yArrj=[],n.yArrjF=[],n.yArrjVal=[],n.xArrj=[],n.xArrjF=[],n.xArrjVal=[],1===n.prevY.length&&n.prevY[0].every((function(e){return isNaN(e)}))&&(n.prevY[0]=n.prevY[0].map((function(e){return d})),n.prevYF[0]=n.prevYF[0].map((function(e){return 0})));for(var S=0;S<a.globals.dataPoints;S++){var C=n.barHelpers.getStrokeWidth(r,S,v),I={indexes:{i:r,j:S,realIndex:v,bc:o},strokeWidth:C,x:l,y:c,elSeries:m},A=null;n.isHorizontal?(A=n.drawStackedBarPaths(i(i({},I),{},{zeroW:f,barHeight:y,yDivision:h})),k=n.series[r][S]/n.invertedYRatio):(A=n.drawStackedColumnPaths(i(i({},I),{},{xDivision:u,barWidth:k,zeroH:d})),y=n.series[r][S]/n.yRatio[n.yaxisIndex]),c=A.y,l=A.x,p.push(l),g.push(c);var T=n.barHelpers.getPathFillColor(e,r,S,v);m=n.renderSeries({realIndex:v,pathFill:T,j:S,i:r,pathFrom:A.pathFrom,pathTo:A.pathTo,strokeWidth:C,elSeries:m,x:l,y:c,series:e,barHeight:y,barWidth:k,elDataLabelsWrap:x,type:"bar",visibleSeries:0})}a.globals.seriesXvalues[v]=p,a.globals.seriesYvalues[v]=g,n.prevY.push(n.yArrj),n.prevYF.push(n.yArrjF),n.prevYVal.push(n.yArrjVal),n.prevX.push(n.xArrj),n.prevXF.push(n.xArrjF),n.prevXVal.push(n.xArrjVal),s.add(m)},h=0,d=0;h<e.length;h++,d++)u(h,d);return s}},{key:"initialPositions",value:function(e,t,n,a,r,i){var o,s,l=this.w;return this.isHorizontal?(o=(o=a=l.globals.gridHeight/l.globals.dataPoints)*parseInt(l.config.plotOptions.bar.barHeight,10)/100,i=this.baseLineInvertedY+l.globals.padHorizontal+(this.isReversed?l.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),t=(a-o)/2):(s=n=l.globals.gridWidth/l.globals.dataPoints,s=l.globals.isXNumeric&&l.globals.dataPoints>1?(n=l.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:s*parseInt(l.config.plotOptions.bar.columnWidth,10)/100,r=this.baseLineY[this.yaxisIndex]+(this.isReversed?l.globals.gridHeight:0)-(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),e=l.globals.padHorizontal+(n-s)/2),{x:e,y:t,yDivision:a,xDivision:n,barHeight:o,barWidth:s,zeroH:r,zeroW:i}}},{key:"drawStackedBarPaths",value:function(e){for(var t,n=e.indexes,a=e.barHeight,r=e.strokeWidth,i=e.zeroW,o=e.x,s=e.y,l=e.yDivision,c=e.elSeries,u=this.w,h=s,d=n.i,f=n.j,p=0,g=0;g<this.prevXF.length;g++)p+=this.prevXF[g][f];if(d>0){var v=i;this.prevXVal[d-1][f]<0?v=this.series[d][f]>=0?this.prevX[d-1][f]+p-2*(this.isReversed?p:0):this.prevX[d-1][f]:this.prevXVal[d-1][f]>=0&&(v=this.series[d][f]>=0?this.prevX[d-1][f]:this.prevX[d-1][f]-p+2*(this.isReversed?p:0)),t=v}else t=i;o=null===this.series[d][f]?t:t+this.series[d][f]/this.invertedYRatio-2*(this.isReversed?this.series[d][f]/this.invertedYRatio:0);var m=this.barHelpers.getBarpaths({barYPosition:h,barHeight:a,x1:t,x2:o,strokeWidth:r,series:this.series,realIndex:n.realIndex,i:d,j:f,w:u});return this.barHelpers.barBackground({j:f,i:d,y1:h,y2:a,elSeries:c}),s+=l,{pathTo:m.pathTo,pathFrom:m.pathFrom,x:o,y:s}}},{key:"drawStackedColumnPaths",value:function(e){var t=e.indexes,n=e.x,a=e.y,r=e.xDivision,i=e.barWidth,o=e.zeroH;e.strokeWidth;var s=e.elSeries,l=this.w,c=t.i,u=t.j,h=t.bc;if(l.globals.isXNumeric){var d=l.globals.seriesX[c][u];d||(d=0),n=(d-l.globals.minX)/this.xRatio-i/2}for(var f,p=n,g=0,v=0;v<this.prevYF.length;v++)g+=isNaN(this.prevYF[v][u])?0:this.prevYF[v][u];if(c>0&&!l.globals.isXNumeric||c>0&&l.globals.isXNumeric&&l.globals.seriesX[c-1][u]===l.globals.seriesX[c][u]){var m,x,b=Math.min(this.yRatio.length+1,c+1);if(void 0!==this.prevY[c-1])for(var y=1;y<b;y++)if(!isNaN(this.prevY[c-y][u])){x=this.prevY[c-y][u];break}for(var k=1;k<b;k++){if(this.prevYVal[c-k][u]<0){m=this.series[c][u]>=0?x-g+2*(this.isReversed?g:0):x;break}if(this.prevYVal[c-k][u]>=0){m=this.series[c][u]>=0?x:x+g-2*(this.isReversed?g:0);break}}void 0===m&&(m=l.globals.gridHeight),f=this.prevYF[0].every((function(e){return 0===e}))&&this.prevYF.slice(1,c).every((function(e){return e.every((function(e){return isNaN(e)}))}))?l.globals.gridHeight-o:m}else f=l.globals.gridHeight-o;a=f-this.series[c][u]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[c][u]/this.yRatio[this.yaxisIndex]:0);var w=this.barHelpers.getColumnPaths({barXPosition:p,barWidth:i,y1:f,y2:a,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:t.realIndex,i:c,j:u,w:l});return this.barHelpers.barBackground({bc:h,j:u,i:c,x1:p,x2:i,elSeries:s}),n+=r,{pathTo:w.pathTo,pathFrom:w.pathFrom,x:l.globals.isXNumeric?n-r:n,y:a}}}]),n}(),Ce=function(e){h(n,z);var t=g(n);function n(){return s(this,n),t.apply(this,arguments)}return c(n,[{key:"draw",value:function(e,t){var n=this,a=this.w,r=new w(this.ctx),o=new F(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=a.config.plotOptions.bar.horizontal;var s=new S(this.ctx,a);e=s.getLogSeries(e),this.series=e,this.yRatio=s.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);for(var l=r.group({class:"apexcharts-".concat(a.config.chart.type,"-series apexcharts-plot-series")}),c=function(s){n.isBoxPlot="boxPlot"===a.config.chart.type||"boxPlot"===a.config.series[s].type;var c,u,h,d,f,p,g=void 0,v=void 0,m=[],x=[],y=a.globals.comboCharts?t[s]:s,k=r.group({class:"apexcharts-series",seriesName:b.escapeString(a.globals.seriesNames[y]),rel:s+1,"data:realIndex":y});n.ctx.series.addCollapsedClassToSeries(k,y),e[s].length>0&&(n.visibleI=n.visibleI+1),n.yRatio.length>1&&(n.yaxisIndex=y);var w=n.barHelpers.initialPositions();v=w.y,f=w.barHeight,u=w.yDivision,d=w.zeroW,g=w.x,p=w.barWidth,c=w.xDivision,h=w.zeroH,x.push(g+p/2);for(var S=r.group({class:"apexcharts-datalabels","data:realIndex":y}),C=function(t){var r=n.barHelpers.getStrokeWidth(s,t,y),l=null,b={indexes:{i:s,j:t,realIndex:y},x:g,y:v,strokeWidth:r,elSeries:k};l=n.isHorizontal?n.drawHorizontalBoxPaths(i(i({},b),{},{yDivision:u,barHeight:f,zeroW:d})):n.drawVerticalBoxPaths(i(i({},b),{},{xDivision:c,barWidth:p,zeroH:h})),v=l.y,g=l.x,t>0&&x.push(g+p/2),m.push(v),l.pathTo.forEach((function(i,c){var u=!n.isBoxPlot&&n.candlestickOptions.wick.useFillColor?l.color[c]:a.globals.stroke.colors[s],h=o.fillPath({seriesNumber:y,dataPointIndex:t,color:l.color[c],value:e[s][t]});n.renderSeries({realIndex:y,pathFill:h,lineFill:u,j:t,i:s,pathFrom:l.pathFrom,pathTo:i,strokeWidth:r,elSeries:k,x:g,y:v,series:e,barHeight:f,barWidth:p,elDataLabelsWrap:S,visibleSeries:n.visibleI,type:a.config.chart.type})}))},I=0;I<a.globals.dataPoints;I++)C(I);a.globals.seriesXvalues[y]=x,a.globals.seriesYvalues[y]=m,l.add(k)},u=0;u<e.length;u++)c(u);return l}},{key:"drawVerticalBoxPaths",value:function(e){var t=e.indexes,n=e.x;e.y;var a=e.xDivision,r=e.barWidth,i=e.zeroH,o=e.strokeWidth,s=this.w,l=new w(this.ctx),c=t.i,u=t.j,h=!0,d=s.config.plotOptions.candlestick.colors.upward,f=s.config.plotOptions.candlestick.colors.downward,p="";this.isBoxPlot&&(p=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var g=this.yRatio[this.yaxisIndex],v=t.realIndex,m=this.getOHLCValue(v,u),x=i,b=i;m.o>m.c&&(h=!1);var y=Math.min(m.o,m.c),k=Math.max(m.o,m.c),S=m.m;s.globals.isXNumeric&&(n=(s.globals.seriesX[v][u]-s.globals.minX)/this.xRatio-r/2);var C=n+r*this.visibleI;void 0===this.series[c][u]||null===this.series[c][u]?(y=i,k=i):(y=i-y/g,k=i-k/g,x=i-m.h/g,b=i-m.l/g,S=i-m.m/g);var I=l.move(C,i),A=l.move(C+r/2,y);return s.globals.previousPaths.length>0&&(A=this.getPreviousPath(v,u,!0)),I=this.isBoxPlot?[l.move(C,y)+l.line(C+r/2,y)+l.line(C+r/2,x)+l.line(C+r/4,x)+l.line(C+r-r/4,x)+l.line(C+r/2,x)+l.line(C+r/2,y)+l.line(C+r,y)+l.line(C+r,S)+l.line(C,S)+l.line(C,y+o/2),l.move(C,S)+l.line(C+r,S)+l.line(C+r,k)+l.line(C+r/2,k)+l.line(C+r/2,b)+l.line(C+r-r/4,b)+l.line(C+r/4,b)+l.line(C+r/2,b)+l.line(C+r/2,k)+l.line(C,k)+l.line(C,S)+"z"]:[l.move(C,k)+l.line(C+r/2,k)+l.line(C+r/2,x)+l.line(C+r/2,k)+l.line(C+r,k)+l.line(C+r,y)+l.line(C+r/2,y)+l.line(C+r/2,b)+l.line(C+r/2,y)+l.line(C,y)+l.line(C,k-o/2)],A+=l.move(C,y),s.globals.isXNumeric||(n+=a),{pathTo:I,pathFrom:A,x:n,y:k,barXPosition:C,color:this.isBoxPlot?p:h?[d]:[f]}}},{key:"drawHorizontalBoxPaths",value:function(e){var t=e.indexes;e.x;var n=e.y,a=e.yDivision,r=e.barHeight,i=e.zeroW,o=e.strokeWidth,s=this.w,l=new w(this.ctx),c=t.i,u=t.j,h=this.boxOptions.colors.lower;this.isBoxPlot&&(h=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var d=this.invertedYRatio,f=t.realIndex,p=this.getOHLCValue(f,u),g=i,v=i,m=Math.min(p.o,p.c),x=Math.max(p.o,p.c),b=p.m;s.globals.isXNumeric&&(n=(s.globals.seriesX[f][u]-s.globals.minX)/this.invertedXRatio-r/2);var y=n+r*this.visibleI;void 0===this.series[c][u]||null===this.series[c][u]?(m=i,x=i):(m=i+m/d,x=i+x/d,g=i+p.h/d,v=i+p.l/d,b=i+p.m/d);var k=l.move(i,y),S=l.move(m,y+r/2);return s.globals.previousPaths.length>0&&(S=this.getPreviousPath(f,u,!0)),k=[l.move(m,y)+l.line(m,y+r/2)+l.line(g,y+r/2)+l.line(g,y+r/2-r/4)+l.line(g,y+r/2+r/4)+l.line(g,y+r/2)+l.line(m,y+r/2)+l.line(m,y+r)+l.line(b,y+r)+l.line(b,y)+l.line(m+o/2,y),l.move(b,y)+l.line(b,y+r)+l.line(x,y+r)+l.line(x,y+r/2)+l.line(v,y+r/2)+l.line(v,y+r-r/4)+l.line(v,y+r/4)+l.line(v,y+r/2)+l.line(x,y+r/2)+l.line(x,y)+l.line(b,y)+"z"],S+=l.move(m,y),s.globals.isXNumeric||(n+=a),{pathTo:k,pathFrom:S,x:x,y:n,barYPosition:y,color:h}}},{key:"getOHLCValue",value:function(e,t){var n=this.w;return{o:this.isBoxPlot?n.globals.seriesCandleH[e][t]:n.globals.seriesCandleO[e][t],h:this.isBoxPlot?n.globals.seriesCandleO[e][t]:n.globals.seriesCandleH[e][t],m:n.globals.seriesCandleM[e][t],l:this.isBoxPlot?n.globals.seriesCandleC[e][t]:n.globals.seriesCandleL[e][t],c:this.isBoxPlot?n.globals.seriesCandleL[e][t]:n.globals.seriesCandleC[e][t]}}}]),n}(),Ie=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"checkColorRange",value:function(){var e=this.w,t=!1,n=e.config.plotOptions[e.config.chart.type];return n.colorScale.ranges.length>0&&n.colorScale.ranges.map((function(e,n){e.from<=0&&(t=!0)})),t}},{key:"getShadeColor",value:function(e,t,n,a){var r=this.w,i=1,o=r.config.plotOptions[e].shadeIntensity,s=this.determineColor(e,t,n);r.globals.hasNegs||a?i=r.config.plotOptions[e].reverseNegativeShade?s.percent<0?s.percent/100*(1.25*o):(1-s.percent/100)*(1.25*o):s.percent<=0?1-(1+s.percent/100)*o:(1-s.percent/100)*o:(i=1-s.percent/100,"treemap"===e&&(i=(1-s.percent/100)*(1.25*o)));var l=s.color,c=new b;return r.config.plotOptions[e].enableShades&&(l="dark"===this.w.config.theme.mode?b.hexToRgba(c.shadeColor(-1*i,s.color),r.config.fill.opacity):b.hexToRgba(c.shadeColor(i,s.color),r.config.fill.opacity)),{color:l,colorProps:s}}},{key:"determineColor",value:function(e,t,n){var a=this.w,r=a.globals.series[t][n],i=a.config.plotOptions[e],o=i.colorScale.inverse?n:t;i.distributed&&"treemap"===a.config.chart.type&&(o=n);var s=a.globals.colors[o],l=null,c=Math.min.apply(Math,v(a.globals.series[t])),u=Math.max.apply(Math,v(a.globals.series[t]));i.distributed||"heatmap"!==e||(c=a.globals.minY,u=a.globals.maxY),void 0!==i.colorScale.min&&(c=i.colorScale.min<a.globals.minY?i.colorScale.min:a.globals.minY,u=i.colorScale.max>a.globals.maxY?i.colorScale.max:a.globals.maxY);var h=Math.abs(u)+Math.abs(c),d=100*r/(0===h?h-1e-6:h);return i.colorScale.ranges.length>0&&i.colorScale.ranges.map((function(e,t){if(r>=e.from&&r<=e.to){s=e.color,l=e.foreColor?e.foreColor:null,c=e.from,u=e.to;var n=Math.abs(u)+Math.abs(c);d=100*r/(0===n?n-1e-6:n)}})),{color:s,foreColor:l,percent:d}}},{key:"calculateDataLabels",value:function(e){var t=e.text,n=e.x,a=e.y,r=e.i,i=e.j,o=e.colorProps,s=e.fontSize,l=this.w.config.dataLabels,c=new w(this.ctx),u=new M(this.ctx),h=null;if(l.enabled){h=c.group({class:"apexcharts-data-labels"});var d=l.offsetX,f=l.offsetY,p=n+d,g=a+parseFloat(l.style.fontSize)/3+f;u.plotDataLabelsText({x:p,y:g,text:t,i:r,j:i,color:o.foreColor,parent:h,fontSize:s,dataLabelsConfig:l})}return h}},{key:"addListeners",value:function(e){var t=new w(this.ctx);e.node.addEventListener("mouseenter",t.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",t.pathMouseLeave.bind(this,e)),e.node.addEventListener("mousedown",t.pathMouseDown.bind(this,e))}}]),e}(),Ae=function(){function e(t,n){s(this,e),this.ctx=t,this.w=t.w,this.xRatio=n.xRatio,this.yRatio=n.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Ie(t),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return c(e,[{key:"draw",value:function(e){var t=this.w,n=new w(this.ctx),a=n.group({class:"apexcharts-heatmap"});a.attr("clip-path","url(#gridRectMask".concat(t.globals.cuid,")"));var r=t.globals.gridWidth/t.globals.dataPoints,i=t.globals.gridHeight/t.globals.series.length,o=0,s=!1;this.negRange=this.helpers.checkColorRange();var l=e.slice();t.config.yaxis[0].reversed&&(s=!0,l.reverse());for(var c=s?0:l.length-1;s?c<l.length:c>=0;s?c++:c--){var u=n.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:b.escapeString(t.globals.seriesNames[c]),rel:c+1,"data:realIndex":c});if(this.ctx.series.addCollapsedClassToSeries(u,c),t.config.chart.dropShadow.enabled){var h=t.config.chart.dropShadow;new k(this.ctx).dropShadow(u,h,c)}for(var d=0,f=t.config.plotOptions.heatmap.shadeIntensity,p=0;p<l[c].length;p++){var g=this.helpers.getShadeColor(t.config.chart.type,c,p,this.negRange),v=g.color,m=g.colorProps;"image"===t.config.fill.type&&(v=new F(this.ctx).fillPath({seriesNumber:c,dataPointIndex:p,opacity:t.globals.hasNegs?m.percent<0?1-(1+m.percent/100):f+m.percent/100:m.percent/100,patternID:b.randomId(),width:t.config.fill.image.width?t.config.fill.image.width:r,height:t.config.fill.image.height?t.config.fill.image.height:i}));var x=this.rectRadius,y=n.drawRect(d,o,r,i,x);if(y.attr({cx:d,cy:o}),y.node.classList.add("apexcharts-heatmap-rect"),u.add(y),y.attr({fill:v,i:c,index:c,j:p,val:l[c][p],"stroke-width":this.strokeWidth,stroke:t.config.plotOptions.heatmap.useFillColorAsStroke?v:t.globals.stroke.colors[0],color:v}),this.helpers.addListeners(y),t.config.chart.animations.enabled&&!t.globals.dataChanged){var S=1;t.globals.resized||(S=t.config.chart.animations.speed),this.animateHeatMap(y,d,o,r,i,S)}if(t.globals.dataChanged){var C=1;if(this.dynamicAnim.enabled&&t.globals.shouldAnimate){C=this.dynamicAnim.speed;var I=t.globals.previousPaths[c]&&t.globals.previousPaths[c][p]&&t.globals.previousPaths[c][p].color;I||(I="rgba(255, 255, 255, 0)"),this.animateHeatColor(y,b.isColorHex(I)?I:b.rgb2hex(I),b.isColorHex(v)?v:b.rgb2hex(v),C)}}var A=(0,t.config.dataLabels.formatter)(t.globals.series[c][p],{value:t.globals.series[c][p],seriesIndex:c,dataPointIndex:p,w:t}),T=this.helpers.calculateDataLabels({text:A,x:d+r/2,y:o+i/2,i:c,j:p,colorProps:m,series:l});null!==T&&u.add(T),d+=r}o+=i,a.add(u)}var N=t.globals.yAxisScale[0].result.slice();t.config.yaxis[0].reversed?N.unshift(""):N.push(""),t.globals.yAxisScale[0].result=N;var E=t.globals.gridHeight/t.globals.series.length;return t.config.yaxis[0].labels.offsetY=-E/2,a}},{key:"animateHeatMap",value:function(e,t,n,a,r,i){var o=new y(this.ctx);o.animateRect(e,{x:t+a/2,y:n+r/2,width:0,height:0},{x:t,y:n,width:a,height:r},i,(function(){o.animationCompleted(e)}))}},{key:"animateHeatColor",value:function(e,t,n,a){e.attr({fill:t}).animate(a).attr({fill:n})}}]),e}(),Te=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"drawYAxisTexts",value:function(e,t,n,a){var r=this.w,i=r.config.yaxis[0],o=r.globals.yLabelFormatters[0];return new w(this.ctx).drawText({x:e+i.labels.offsetX,y:t+i.labels.offsetY,text:o(a,n),textAnchor:"middle",fontSize:i.labels.style.fontSize,fontFamily:i.labels.style.fontFamily,foreColor:Array.isArray(i.labels.style.colors)?i.labels.style.colors[n]:i.labels.style.colors})}}]),e}(),Ne=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==n.globals.stroke.colors?n.globals.stroke.colors:n.globals.colors,this.defaultSize=Math.min(n.globals.gridWidth,n.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=n.globals.gridWidth/2,"radialBar"===n.config.chart.type?this.fullAngle=360:this.fullAngle=Math.abs(n.config.plotOptions.pie.endAngle-n.config.plotOptions.pie.startAngle),this.initialAngle=n.config.plotOptions.pie.startAngle%this.fullAngle,n.globals.radialSize=this.defaultSize/2.05-n.config.stroke.width-(n.config.chart.sparkline.enabled?0:n.config.chart.dropShadow.blur),this.donutSize=n.globals.radialSize*parseInt(n.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return c(e,[{key:"draw",value:function(e){var t=this,n=this.w,a=new w(this.ctx);if(this.ret=a.group({class:"apexcharts-pie"}),n.globals.noData)return this.ret;for(var r=0,i=0;i<e.length;i++)r+=b.negToZero(e[i]);var o=[],s=a.group();0===r&&(r=1e-5),e.forEach((function(e){t.maxY=Math.max(t.maxY,e)})),n.config.yaxis[0].max&&(this.maxY=n.config.yaxis[0].max),"back"===n.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var l=0;l<e.length;l++){var c=this.fullAngle*b.negToZero(e[l])/r;o.push(c),"polarArea"===this.chartType?(o[l]=this.fullAngle/e.length,this.sliceSizes.push(n.globals.radialSize*e[l]/this.maxY)):this.sliceSizes.push(n.globals.radialSize)}if(n.globals.dataChanged){for(var u,h=0,d=0;d<n.globals.previousPaths.length;d++)h+=b.negToZero(n.globals.previousPaths[d]);for(var f=0;f<n.globals.previousPaths.length;f++)u=this.fullAngle*b.negToZero(n.globals.previousPaths[f])/h,this.prevSectorAngleArr.push(u)}this.donutSize<0&&(this.donutSize=0);var p=n.config.plotOptions.pie.customScale,g=n.globals.gridWidth/2,v=n.globals.gridHeight/2,m=g-n.globals.gridWidth/2*p,x=v-n.globals.gridHeight/2*p;if("donut"===this.chartType){var y=a.drawCircle(this.donutSize);y.attr({cx:this.centerX,cy:this.centerY,fill:n.config.plotOptions.pie.donut.background?n.config.plotOptions.pie.donut.background:"transparent"}),s.add(y)}var k=this.drawArcs(o,e);if(this.sliceLabels.forEach((function(e){k.add(e)})),s.attr({transform:"translate(".concat(m,", ").concat(x,") scale(").concat(p,")")}),s.add(k),this.ret.add(s),this.donutDataLabels.show){var S=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:m,translateY:x});this.ret.add(S)}return"front"===n.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(e,t){var n=this.w,a=new k(this.ctx),r=new w(this.ctx),i=new F(this.ctx),o=r.group({class:"apexcharts-slices"}),s=this.initialAngle,l=this.initialAngle,c=this.initialAngle,u=this.initialAngle;this.strokeWidth=n.config.stroke.show?n.config.stroke.width:0;for(var h=0;h<e.length;h++){var d=r.group({class:"apexcharts-series apexcharts-pie-series",seriesName:b.escapeString(n.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});o.add(d),l=u,c=(s=c)+e[h],u=l+this.prevSectorAngleArr[h];var f=c<s?this.fullAngle+c-s:c-s,p=i.fillPath({seriesNumber:h,size:this.sliceSizes[h],value:t[h]}),g=this.getChangedPath(l,u),v=r.drawPath({d:g,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[h]:this.lineColorArr,strokeWidth:0,fill:p,fillOpacity:n.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(h)});if(v.attr({index:0,j:h}),a.setSelectionFilter(v,0,h),n.config.chart.dropShadow.enabled){var m=n.config.chart.dropShadow;a.dropShadow(v,m,h)}this.addListeners(v,this.donutDataLabels),w.setAttrs(v.node,{"data:angle":f,"data:startAngle":s,"data:strokeWidth":this.strokeWidth,"data:value":t[h]});var x={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?x=b.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize/1.25+n.config.plotOptions.pie.dataLabels.offset,(s+f/2)%this.fullAngle):"donut"===this.chartType&&(x=b.polarToCartesian(this.centerX,this.centerY,(n.globals.radialSize+this.donutSize)/2+n.config.plotOptions.pie.dataLabels.offset,(s+f/2)%this.fullAngle)),d.add(v);var y=0;if(!this.initialAnim||n.globals.resized||n.globals.dataChanged?this.animBeginArr.push(0):(0===(y=f/this.fullAngle*n.config.chart.animations.speed)&&(y=1),this.animDur=y+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&n.globals.dataChanged?this.animatePaths(v,{size:this.sliceSizes[h],endAngle:c,startAngle:s,prevStartAngle:l,prevEndAngle:u,animateStartingPos:!0,i:h,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:n.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(v,{size:this.sliceSizes[h],endAngle:c,startAngle:s,i:h,totalItems:e.length-1,animBeginArr:this.animBeginArr,dur:y}),n.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&v.click(this.pieClicked.bind(this,h)),void 0!==n.globals.selectedDataPoints[0]&&n.globals.selectedDataPoints[0].indexOf(h)>-1&&this.pieClicked(h),n.config.dataLabels.enabled){var S=x.x,C=x.y,I=100*f/this.fullAngle+"%";if(0!==f&&n.config.plotOptions.pie.dataLabels.minAngleToShowLabel<e[h]){var A=n.config.dataLabels.formatter;void 0!==A&&(I=A(n.globals.seriesPercent[h][0],{seriesIndex:h,w:n}));var T=n.globals.dataLabels.style.colors[h],N=r.group({class:"apexcharts-datalabels"}),E=r.drawText({x:S,y:C,text:I,textAnchor:"middle",fontSize:n.config.dataLabels.style.fontSize,fontFamily:n.config.dataLabels.style.fontFamily,fontWeight:n.config.dataLabels.style.fontWeight,foreColor:T});if(N.add(E),n.config.dataLabels.dropShadow.enabled){var R=n.config.dataLabels.dropShadow;a.dropShadow(E,R)}E.node.classList.add("apexcharts-pie-label"),n.config.chart.animations.animate&&!1===n.globals.resized&&(E.node.classList.add("apexcharts-pie-label-delay"),E.node.style.animationDelay=n.config.chart.animations.speed/940+"s"),this.sliceLabels.push(N)}}}return o}},{key:"addListeners",value:function(e,t){var n=new w(this.ctx);e.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this,e)),e.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",n.pathMouseDown.bind(this,e)),this.donutDataLabels.total.showAlways||(e.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,e.node,t)))}},{key:"animatePaths",value:function(e,t){var n=this.w,a=t.endAngle<t.startAngle?this.fullAngle+t.endAngle-t.startAngle:t.endAngle-t.startAngle,r=a,i=t.startAngle,o=t.startAngle;void 0!==t.prevStartAngle&&void 0!==t.prevEndAngle&&(i=t.prevEndAngle,r=t.prevEndAngle<t.prevStartAngle?this.fullAngle+t.prevEndAngle-t.prevStartAngle:t.prevEndAngle-t.prevStartAngle),t.i===n.config.series.length-1&&(a+o>this.fullAngle?t.endAngle=t.endAngle-(a+o):a+o<this.fullAngle&&(t.endAngle=t.endAngle+(this.fullAngle-(a+o)))),a===this.fullAngle&&(a=this.fullAngle-.01),this.animateArc(e,i,o,a,r,t)}},{key:"animateArc",value:function(e,t,n,a,r,i){var o,s=this,l=this.w,c=new y(this.ctx),u=i.size;(isNaN(t)||isNaN(r))&&(t=n,r=a,i.dur=0);var h=a,d=n,f=t<n?this.fullAngle+t-n:t-n;l.globals.dataChanged&&i.shouldSetPrevPaths&&i.prevEndAngle&&(o=s.getPiePath({me:s,startAngle:i.prevStartAngle,angle:i.prevEndAngle<i.prevStartAngle?this.fullAngle+i.prevEndAngle-i.prevStartAngle:i.prevEndAngle-i.prevStartAngle,size:u}),e.attr({d:o})),0!==i.dur?e.animate(i.dur,l.globals.easing,i.animBeginArr[i.i]).afterAll((function(){"pie"!==s.chartType&&"donut"!==s.chartType&&"polarArea"!==s.chartType||this.animate(l.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":s.strokeWidth}),i.i===l.config.series.length-1&&c.animationCompleted(e)})).during((function(l){h=f+(a-f)*l,i.animateStartingPos&&(h=r+(a-r)*l,d=t-r+(n-(t-r))*l),o=s.getPiePath({me:s,startAngle:d,angle:h,size:u}),e.node.setAttribute("data:pathOrig",o),e.attr({d:o})})):(o=s.getPiePath({me:s,startAngle:d,angle:a,size:u}),i.isTrack||(l.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",o),e.attr({d:o,"stroke-width":s.strokeWidth}))}},{key:"pieClicked",value:function(e){var t,n=this.w,a=this,r=a.sliceSizes[e]+(n.config.plotOptions.pie.expandOnClick?4:0),i=n.globals.dom.Paper.select(".apexcharts-".concat(a.chartType.toLowerCase(),"-slice-").concat(e)).members[0];if("true"!==i.attr("data:pieClicked")){var o=n.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(o,(function(e){e.setAttribute("data:pieClicked","false");var t=e.getAttribute("data:pathOrig");e.setAttribute("d",t)})),i.attr("data:pieClicked","true");var s=parseInt(i.attr("data:startAngle"),10),l=parseInt(i.attr("data:angle"),10);t=a.getPiePath({me:a,startAngle:s,angle:l,size:r}),360!==l&&i.plot(t)}else{i.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(i.node,this.donutDataLabels);var c=i.attr("data:pathOrig");i.attr({d:c})}}},{key:"getChangedPath",value:function(e,t){var n="";return this.dynamicAnim&&this.w.globals.dataChanged&&(n=this.getPiePath({me:this,startAngle:e,angle:t-e,size:this.size})),n}},{key:"getPiePath",value:function(e){var t=e.me,n=e.startAngle,a=e.angle,r=e.size,i=n,o=Math.PI*(i-90)/180,s=a+n;Math.ceil(s)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(s=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(s)>this.fullAngle&&(s-=this.fullAngle);var l=Math.PI*(s-90)/180,c=t.centerX+r*Math.cos(o),u=t.centerY+r*Math.sin(o),h=t.centerX+r*Math.cos(l),d=t.centerY+r*Math.sin(l),f=b.polarToCartesian(t.centerX,t.centerY,t.donutSize,s),p=b.polarToCartesian(t.centerX,t.centerY,t.donutSize,i),g=a>180?1:0,v=["M",c,u,"A",r,r,0,g,1,h,d];return"donut"===t.chartType?[].concat(v,["L",f.x,f.y,"A",t.donutSize,t.donutSize,0,g,0,p.x,p.y,"L",c,u,"z"]).join(" "):"pie"===t.chartType||"polarArea"===t.chartType?[].concat(v,["L",t.centerX,t.centerY,"L",c,u]).join(" "):[].concat(v).join(" ")}},{key:"drawPolarElements",value:function(e){var t=this.w,n=new $(this.ctx),a=new w(this.ctx),r=new Te(this.ctx),i=a.group(),o=a.group(),s=n.niceScale(0,Math.ceil(this.maxY),t.config.yaxis[0].tickAmount,0,!0),l=s.result.reverse(),c=s.result.length;this.maxY=s.niceMax;for(var u=t.globals.radialSize,h=u/(c-1),d=0;d<c-1;d++){var f=a.drawCircle(u);if(f.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":t.config.plotOptions.polarArea.rings.strokeWidth,stroke:t.config.plotOptions.polarArea.rings.strokeColor}),t.config.yaxis[0].show){var p=r.drawYAxisTexts(this.centerX,this.centerY-u+parseInt(t.config.yaxis[0].labels.style.fontSize,10)/2,d,l[d]);o.add(p)}i.add(f),u-=h}this.drawSpokes(e),e.add(i),e.add(o)}},{key:"renderInnerDataLabels",value:function(e,t){var n=this.w,a=new w(this.ctx),r=a.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(t.translateX?t.translateX:0,", ").concat(t.translateY?t.translateY:0,") scale(").concat(n.config.plotOptions.pie.customScale,")")}),i=e.total.show;r.node.style.opacity=t.opacity;var o,s,l=t.centerX,c=t.centerY;o=void 0===e.name.color?n.globals.colors[0]:e.name.color;var u=e.name.fontSize,h=e.name.fontFamily,d=e.name.fontWeight;s=void 0===e.value.color?n.config.chart.foreColor:e.value.color;var f=e.value.formatter,p="",g="";if(i?(o=e.total.color,u=e.total.fontSize,h=e.total.fontFamily,d=e.total.fontWeight,g=e.total.label,p=e.total.formatter(n)):1===n.globals.series.length&&(p=f(n.globals.series[0],n),g=n.globals.seriesNames[0]),g&&(g=e.name.formatter(g,e.total.show,n)),e.name.show){var v=a.drawText({x:l,y:c+parseFloat(e.name.offsetY),text:g,textAnchor:"middle",foreColor:o,fontSize:u,fontWeight:d,fontFamily:h});v.node.classList.add("apexcharts-datalabel-label"),r.add(v)}if(e.value.show){var m=e.name.show?parseFloat(e.value.offsetY)+16:e.value.offsetY,x=a.drawText({x:l,y:c+m,text:p,textAnchor:"middle",foreColor:s,fontWeight:e.value.fontWeight,fontSize:e.value.fontSize,fontFamily:e.value.fontFamily});x.node.classList.add("apexcharts-datalabel-value"),r.add(x)}return r}},{key:"printInnerLabels",value:function(e,t,n,a){var r,i=this.w;a?r=void 0===e.name.color?i.globals.colors[parseInt(a.parentNode.getAttribute("rel"),10)-1]:e.name.color:i.globals.series.length>1&&e.total.show&&(r=e.total.color);var o=i.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),s=i.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");n=(0,e.value.formatter)(n,i),a||"function"!=typeof e.total.formatter||(n=e.total.formatter(i));var l=t===e.total.label;t=e.name.formatter(t,l,i),null!==o&&(o.textContent=t),null!==s&&(s.textContent=n),null!==o&&(o.style.fill=r)}},{key:"printDataLabelsInner",value:function(e,t){var n=this.w,a=e.getAttribute("data:value"),r=n.globals.seriesNames[parseInt(e.parentNode.getAttribute("rel"),10)-1];n.globals.series.length>1&&this.printInnerLabels(t,r,a,e);var i=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==i&&(i.style.opacity=1)}},{key:"drawSpokes",value:function(e){var t=this,n=this.w,a=new w(this.ctx),r=n.config.plotOptions.polarArea.spokes;if(0!==r.strokeWidth){for(var i=[],o=360/n.globals.series.length,s=0;s<n.globals.series.length;s++)i.push(b.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize,n.config.plotOptions.pie.startAngle+o*s));i.forEach((function(n,i){var o=a.drawLine(n.x,n.y,t.centerX,t.centerY,Array.isArray(r.connectorColors)?r.connectorColors[i]:r.connectorColors);e.add(o)}))}}},{key:"revertDataLabelsInner",value:function(e,t,n){var a=this,r=this.w,i=r.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),o=!1,s=r.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),l=function(e){var n=e.makeSliceOut,r=e.printLabel;Array.prototype.forEach.call(s,(function(e){"true"===e.getAttribute("data:pieClicked")&&(n&&(o=!0),r&&a.printDataLabelsInner(e,t))}))};if(l({makeSliceOut:!0,printLabel:!1}),t.total.show&&r.globals.series.length>1)o&&!t.total.showAlways?l({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(t,t.total.label,t.total.formatter(r));else if(l({makeSliceOut:!1,printLabel:!0}),!o)if(r.globals.selectedDataPoints.length&&r.globals.series.length>1)if(r.globals.selectedDataPoints[0].length>0){var c=r.globals.selectedDataPoints[0],u=r.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(c));this.printDataLabelsInner(u,t)}else i&&r.globals.selectedDataPoints.length&&0===r.globals.selectedDataPoints[0].length&&(i.style.opacity=0);else i&&r.globals.series.length>1&&(i.style.opacity=0)}}]),e}(),Ee=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var n=this.w;this.graphics=new w(this.ctx),this.lineColorArr=void 0!==n.globals.stroke.colors?n.globals.stroke.colors:n.globals.colors,this.defaultSize=n.globals.svgHeight<n.globals.svgWidth?n.globals.gridHeight+1.5*n.globals.goldenPadding:n.globals.gridWidth,this.isLog=n.config.yaxis[0].logarithmic,this.coreUtils=new S(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(n.globals.maxY,0):n.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):n.globals.minY,this.polygons=n.config.plotOptions.radar.polygons,this.strokeWidth=n.config.stroke.show?n.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-n.config.chart.dropShadow.blur,n.config.xaxis.labels.show&&(this.size=this.size-n.globals.xAxisLabelsWidth/1.75),void 0!==n.config.plotOptions.radar.size&&(this.size=n.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return c(e,[{key:"draw",value:function(e){var t=this,n=this.w,a=new F(this.ctx),r=[],o=new M(this.ctx);e.length&&(this.dataPointsLen=e[n.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var s=n.globals.gridWidth/2,l=n.globals.gridHeight/2,c=s+n.config.plotOptions.radar.offsetX,u=l+n.config.plotOptions.radar.offsetY,h=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(c||0,", ").concat(u||0,")")}),d=[],f=null,p=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),e.forEach((function(e,s){var l=e.length===n.globals.dataPoints,c=t.graphics.group().attr({class:"apexcharts-series","data:longestSeries":l,seriesName:b.escapeString(n.globals.seriesNames[s]),rel:s+1,"data:realIndex":s});t.dataRadiusOfPercent[s]=[],t.dataRadius[s]=[],t.angleArr[s]=[],e.forEach((function(e,n){var a=Math.abs(t.maxValue-t.minValue);e+=Math.abs(t.minValue),t.isLog&&(e=t.coreUtils.getLogVal(e,0)),t.dataRadiusOfPercent[s][n]=e/a,t.dataRadius[s][n]=t.dataRadiusOfPercent[s][n]*t.size,t.angleArr[s][n]=n*t.disAngle})),d=t.getDataPointsPos(t.dataRadius[s],t.angleArr[s]);var u=t.createPaths(d,{x:0,y:0});f=t.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),p=t.graphics.group({class:"apexcharts-datalabels","data:realIndex":s}),n.globals.delayedElements.push({el:f.node,index:s});var h={i:s,realIndex:s,animationDelay:s,initialSpeed:n.config.chart.animations.speed,dataChangeSpeed:n.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:n.globals.stroke.colors[s],strokeLineCap:n.config.stroke.lineCap},g=null;n.globals.previousPaths.length>0&&(g=t.getPreviousPath(s));for(var v=0;v<u.linePathsTo.length;v++){var m=t.graphics.renderPaths(i(i({},h),{},{pathFrom:null===g?u.linePathsFrom[v]:g,pathTo:u.linePathsTo[v],strokeWidth:Array.isArray(t.strokeWidth)?t.strokeWidth[s]:t.strokeWidth,fill:"none",drawShadow:!1}));c.add(m);var x=a.fillPath({seriesNumber:s}),y=t.graphics.renderPaths(i(i({},h),{},{pathFrom:null===g?u.areaPathsFrom[v]:g,pathTo:u.areaPathsTo[v],strokeWidth:0,fill:x,drawShadow:!1}));if(n.config.chart.dropShadow.enabled){var w=new k(t.ctx),S=n.config.chart.dropShadow;w.dropShadow(y,Object.assign({},S,{noUserSpaceOnUse:!0}),s)}c.add(y)}e.forEach((function(e,a){var r=new D(t.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:s,dataPointIndex:a}),l=t.graphics.drawMarker(d[a].x,d[a].y,r);l.attr("rel",a),l.attr("j",a),l.attr("index",s),l.node.setAttribute("default-marker-size",r.pSize);var u=t.graphics.group({class:"apexcharts-series-markers"});u&&u.add(l),f.add(u),c.add(f);var h=n.config.dataLabels;if(h.enabled){var g=h.formatter(n.globals.series[s][a],{seriesIndex:s,dataPointIndex:a,w:n});o.plotDataLabelsText({x:d[a].x,y:d[a].y,text:g,textAnchor:"middle",i:s,j:s,parent:p,offsetCorrection:!1,dataLabelsConfig:i({},h)})}c.add(p)})),r.push(c)})),this.drawPolygons({parent:h}),n.config.xaxis.labels.show){var g=this.drawXAxisTexts();h.add(g)}return r.forEach((function(e){h.add(e)})),h.add(this.yaxisLabels),h}},{key:"drawPolygons",value:function(e){for(var t=this,n=this.w,a=e.parent,r=new Te(this.ctx),i=n.globals.yAxisScale[0].result.reverse(),o=i.length,s=[],l=this.size/(o-1),c=0;c<o;c++)s[c]=l*c;s.reverse();var u=[],h=[];s.forEach((function(e,n){var a=b.getPolygonPos(e,t.dataPointsLen),r="";a.forEach((function(e,a){if(0===n){var i=t.graphics.drawLine(e.x,e.y,0,0,Array.isArray(t.polygons.connectorColors)?t.polygons.connectorColors[a]:t.polygons.connectorColors);h.push(i)}0===a&&t.yaxisLabelsTextsPos.push({x:e.x,y:e.y}),r+=e.x+","+e.y+" "})),u.push(r)})),u.forEach((function(e,r){var i=t.polygons.strokeColors,o=t.polygons.strokeWidth,s=t.graphics.drawPolygon(e,Array.isArray(i)?i[r]:i,Array.isArray(o)?o[r]:o,n.globals.radarPolygons.fill.colors[r]);a.add(s)})),h.forEach((function(e){a.add(e)})),n.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach((function(e,n){var a=r.drawYAxisTexts(e.x,e.y,n,i[n]);t.yaxisLabels.add(a)}))}},{key:"drawXAxisTexts",value:function(){var e=this,t=this.w,n=t.config.xaxis.labels,a=this.graphics.group({class:"apexcharts-xaxis"}),r=b.getPolygonPos(this.size,this.dataPointsLen);return t.globals.labels.forEach((function(o,s){var l=t.config.xaxis.labels.formatter,c=new M(e.ctx);if(r[s]){var u=e.getTextPos(r[s],e.size),h=l(o,{seriesIndex:-1,dataPointIndex:s,w:t});c.plotDataLabelsText({x:u.newX,y:u.newY,text:h,textAnchor:u.textAnchor,i:s,j:s,parent:a,color:Array.isArray(n.style.colors)&&n.style.colors[s]?n.style.colors[s]:"#a8a8a8",dataLabelsConfig:i({textAnchor:u.textAnchor,dropShadow:{enabled:!1}},n),offsetCorrection:!1})}})),a}},{key:"createPaths",value:function(e,t){var n=this,a=[],r=[],i=[],o=[];if(e.length){r=[this.graphics.move(t.x,t.y)],o=[this.graphics.move(t.x,t.y)];var s=this.graphics.move(e[0].x,e[0].y),l=this.graphics.move(e[0].x,e[0].y);e.forEach((function(t,a){s+=n.graphics.line(t.x,t.y),l+=n.graphics.line(t.x,t.y),a===e.length-1&&(s+="Z",l+="Z")})),a.push(s),i.push(l)}return{linePathsFrom:r,linePathsTo:a,areaPathsFrom:o,areaPathsTo:i}}},{key:"getTextPos",value:function(e,t){var n="middle",a=e.x,r=e.y;return Math.abs(e.x)>=10?e.x>0?(n="start",a+=10):e.x<0&&(n="end",a-=10):n="middle",Math.abs(e.y)>=t-10&&(e.y<0?r-=10:e.y>0&&(r+=10)),{textAnchor:n,newX:a,newY:r}}},{key:"getPreviousPath",value:function(e){for(var t=this.w,n=null,a=0;a<t.globals.previousPaths.length;a++){var r=t.globals.previousPaths[a];r.paths.length>0&&parseInt(r.realIndex,10)===parseInt(e,10)&&void 0!==t.globals.previousPaths[a].paths[0]&&(n=t.globals.previousPaths[a].paths[0].d)}return n}},{key:"getDataPointsPos",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;e=e||[],t=t||[];for(var a=[],r=0;r<n;r++){var i={};i.x=e[r]*Math.sin(t[r]),i.y=-e[r]*Math.cos(t[r]),a.push(i)}return a}}]),e}(),Re=function(e){h(n,Ne);var t=g(n);function n(e){var a;s(this,n),(a=t.call(this,e)).ctx=e,a.w=e.w,a.animBeginArr=[0],a.animDur=0;var r=a.w;return a.startAngle=r.config.plotOptions.radialBar.startAngle,a.endAngle=r.config.plotOptions.radialBar.endAngle,a.totalAngle=Math.abs(r.config.plotOptions.radialBar.endAngle-r.config.plotOptions.radialBar.startAngle),a.trackStartAngle=r.config.plotOptions.radialBar.track.startAngle,a.trackEndAngle=r.config.plotOptions.radialBar.track.endAngle,a.donutDataLabels=a.w.config.plotOptions.radialBar.dataLabels,a.radialDataLabels=a.donutDataLabels,a.trackStartAngle||(a.trackStartAngle=a.startAngle),a.trackEndAngle||(a.trackEndAngle=a.endAngle),360===a.endAngle&&(a.endAngle=359.99),a.margin=parseInt(r.config.plotOptions.radialBar.track.margin,10),a}return c(n,[{key:"draw",value:function(e){var t=this.w,n=new w(this.ctx),a=n.group({class:"apexcharts-radialbar"});if(t.globals.noData)return a;var r=n.group(),i=this.defaultSize/2,o=t.globals.gridWidth/2,s=this.defaultSize/2.05;t.config.chart.sparkline.enabled||(s=s-t.config.stroke.width-t.config.chart.dropShadow.blur);var l=t.globals.fill.colors;if(t.config.plotOptions.radialBar.track.show){var c=this.drawTracks({size:s,centerX:o,centerY:i,colorArr:l,series:e});r.add(c)}var u=this.drawArcs({size:s,centerX:o,centerY:i,colorArr:l,series:e}),h=360;t.config.plotOptions.radialBar.startAngle<0&&(h=this.totalAngle);var d=(360-h)/360;if(t.globals.radialSize=s-s*d,this.radialDataLabels.value.show){var f=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);t.globals.radialSize+=f*d}return r.add(u.g),"front"===t.config.plotOptions.radialBar.hollow.position&&(u.g.add(u.elHollow),u.dataLabels&&u.g.add(u.dataLabels)),a.add(r),a}},{key:"drawTracks",value:function(e){var t=this.w,n=new w(this.ctx),a=n.group({class:"apexcharts-tracks"}),r=new k(this.ctx),i=new F(this.ctx),o=this.getStrokeWidth(e);e.size=e.size-o/2;for(var s=0;s<e.series.length;s++){var l=n.group({class:"apexcharts-radialbar-track apexcharts-track"});a.add(l),l.attr({rel:s+1}),e.size=e.size-o-this.margin;var c=t.config.plotOptions.radialBar.track,u=i.fillPath({seriesNumber:0,size:e.size,fillColors:Array.isArray(c.background)?c.background[s]:c.background,solid:!0}),h=this.trackStartAngle,d=this.trackEndAngle;Math.abs(d)+Math.abs(h)>=360&&(d=360-Math.abs(this.startAngle)-.1);var f=n.drawPath({d:"",stroke:u,strokeWidth:o*parseInt(c.strokeWidth,10)/100,fill:"none",strokeOpacity:c.opacity,classes:"apexcharts-radialbar-area"});if(c.dropShadow.enabled){var p=c.dropShadow;r.dropShadow(f,p)}l.add(f),f.attr("id","apexcharts-radialbarTrack-"+s),this.animatePaths(f,{centerX:e.centerX,centerY:e.centerY,endAngle:d,startAngle:h,size:e.size,i:s,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:t.globals.easing})}return a}},{key:"drawArcs",value:function(e){var t=this.w,n=new w(this.ctx),a=new F(this.ctx),r=new k(this.ctx),i=n.group(),o=this.getStrokeWidth(e);e.size=e.size-o/2;var s=t.config.plotOptions.radialBar.hollow.background,l=e.size-o*e.series.length-this.margin*e.series.length-o*parseInt(t.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,c=l-t.config.plotOptions.radialBar.hollow.margin;void 0!==t.config.plotOptions.radialBar.hollow.image&&(s=this.drawHollowImage(e,i,l,s));var u=this.drawHollow({size:c,centerX:e.centerX,centerY:e.centerY,fill:s||"transparent"});if(t.config.plotOptions.radialBar.hollow.dropShadow.enabled){var h=t.config.plotOptions.radialBar.hollow.dropShadow;r.dropShadow(u,h)}var d=1;!this.radialDataLabels.total.show&&t.globals.series.length>1&&(d=0);var f=null;this.radialDataLabels.show&&(f=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:l,centerX:e.centerX,centerY:e.centerY,opacity:d})),"back"===t.config.plotOptions.radialBar.hollow.position&&(i.add(u),f&&i.add(f));var p=!1;t.config.plotOptions.radialBar.inverseOrder&&(p=!0);for(var g=p?e.series.length-1:0;p?g>=0:g<e.series.length;p?g--:g++){var v=n.group({class:"apexcharts-series apexcharts-radial-series",seriesName:b.escapeString(t.globals.seriesNames[g])});i.add(v),v.attr({rel:g+1,"data:realIndex":g}),this.ctx.series.addCollapsedClassToSeries(v,g),e.size=e.size-o-this.margin;var m=a.fillPath({seriesNumber:g,size:e.size,value:e.series[g]}),x=this.startAngle,y=void 0,S=b.negToZero(e.series[g]>100?100:e.series[g])/100,C=Math.round(this.totalAngle*S)+this.startAngle,I=void 0;t.globals.dataChanged&&(y=this.startAngle,I=Math.round(this.totalAngle*b.negToZero(t.globals.previousPaths[g])/100)+y),Math.abs(C)+Math.abs(x)>=360&&(C-=.01),Math.abs(I)+Math.abs(y)>=360&&(I-=.01);var A=C-x,T=Array.isArray(t.config.stroke.dashArray)?t.config.stroke.dashArray[g]:t.config.stroke.dashArray,N=n.drawPath({d:"",stroke:m,strokeWidth:o,fill:"none",fillOpacity:t.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+g,strokeDashArray:T});if(w.setAttrs(N.node,{"data:angle":A,"data:value":e.series[g]}),t.config.chart.dropShadow.enabled){var E=t.config.chart.dropShadow;r.dropShadow(N,E,g)}r.setSelectionFilter(N,0,g),this.addListeners(N,this.radialDataLabels),v.add(N),N.attr({index:0,j:g});var R=0;!this.initialAnim||t.globals.resized||t.globals.dataChanged||(R=t.config.chart.animations.speed),t.globals.dataChanged&&(R=t.config.chart.animations.dynamicAnimation.speed),this.animDur=R/(1.2*e.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(N,{centerX:e.centerX,centerY:e.centerY,endAngle:C,startAngle:x,prevEndAngle:I,prevStartAngle:y,size:e.size,i:g,totalItems:2,animBeginArr:this.animBeginArr,dur:R,shouldSetPrevPaths:!0,easing:t.globals.easing})}return{g:i,elHollow:u,dataLabels:f}}},{key:"drawHollow",value:function(e){var t=new w(this.ctx).drawCircle(2*e.size);return t.attr({class:"apexcharts-radialbar-hollow",cx:e.centerX,cy:e.centerY,r:e.size,fill:e.fill}),t}},{key:"drawHollowImage",value:function(e,t,n,a){var r=this.w,i=new F(this.ctx),o=b.randomId(),s=r.config.plotOptions.radialBar.hollow.image;if(r.config.plotOptions.radialBar.hollow.imageClipped)i.clippedImgArea({width:n,height:n,image:s,patternID:"pattern".concat(r.globals.cuid).concat(o)}),a="url(#pattern".concat(r.globals.cuid).concat(o,")");else{var l=r.config.plotOptions.radialBar.hollow.imageWidth,c=r.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===l&&void 0===c){var u=r.globals.dom.Paper.image(s).loaded((function(t){this.move(e.centerX-t.width/2+r.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-t.height/2+r.config.plotOptions.radialBar.hollow.imageOffsetY)}));t.add(u)}else{var h=r.globals.dom.Paper.image(s).loaded((function(t){this.move(e.centerX-l/2+r.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-c/2+r.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(l,c)}));t.add(h)}}return a}},{key:"getStrokeWidth",value:function(e){var t=this.w;return e.size*(100-parseInt(t.config.plotOptions.radialBar.hollow.size,10))/100/(e.series.length+1)-this.margin}}]),n}(),Fe=function(){function e(t){s(this,e),this.w=t.w,this.lineCtx=t}return c(e,[{key:"sameValueSeriesFix",value:function(e,t){var n=this.w;if("line"===n.config.chart.type&&("gradient"===n.config.fill.type||"gradient"===n.config.fill.type[e])&&new S(this.lineCtx.ctx,n).seriesHaveSameValues(e)){var a=t[e].slice();a[a.length-1]=a[a.length-1]+1e-6,t[e]=a}return t}},{key:"calculatePoints",value:function(e){var t=e.series,n=e.realIndex,a=e.x,r=e.y,i=e.i,o=e.j,s=e.prevY,l=this.w,c=[],u=[];if(0===o){var h=this.lineCtx.categoryAxisCorrection+l.config.markers.offsetX;l.globals.isXNumeric&&(h=(l.globals.seriesX[n][0]-l.globals.minX)/this.lineCtx.xRatio+l.config.markers.offsetX),c.push(h),u.push(b.isNumber(t[i][0])?s+l.config.markers.offsetY:null),c.push(a+l.config.markers.offsetX),u.push(b.isNumber(t[i][o+1])?r+l.config.markers.offsetY:null)}else c.push(a+l.config.markers.offsetX),u.push(b.isNumber(t[i][o+1])?r+l.config.markers.offsetY:null);return{x:c,y:u}}},{key:"checkPreviousPaths",value:function(e){for(var t=e.pathFromLine,n=e.pathFromArea,a=e.realIndex,r=this.w,i=0;i<r.globals.previousPaths.length;i++){var o=r.globals.previousPaths[i];("line"===o.type||"area"===o.type)&&o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(a,10)&&("line"===o.type?(this.lineCtx.appendPathFrom=!1,t=r.globals.previousPaths[i].paths[0].d):"area"===o.type&&(this.lineCtx.appendPathFrom=!1,n=r.globals.previousPaths[i].paths[0].d,r.config.stroke.show&&r.globals.previousPaths[i].paths[1]&&(t=r.globals.previousPaths[i].paths[1].d)))}return{pathFromLine:t,pathFromArea:n}}},{key:"determineFirstPrevY",value:function(e){var t=e.i,n=e.series,a=e.prevY,r=e.lineYPosition,i=this.w;if(void 0!==n[t][0])a=(r=i.config.chart.stacked&&t>0?this.lineCtx.prevSeriesY[t-1][0]:this.lineCtx.zeroY)-n[t][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?n[t][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(i.config.chart.stacked&&t>0&&void 0===n[t][0])for(var o=t-1;o>=0;o--)if(null!==n[o][0]&&void 0!==n[o][0]){a=r=this.lineCtx.prevSeriesY[o][0];break}return{prevY:a,lineYPosition:r}}}]),e}(),De=function(){function e(t,n,a){s(this,e),this.ctx=t,this.w=t.w,this.xyRatios=n,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||a,this.scatter=new L(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Fe(this),this.markers=new D(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return c(e,[{key:"draw",value:function(e,t,n){var a=this.w,r=new w(this.ctx),i=a.globals.comboCharts?t:a.config.chart.type,o=r.group({class:"apexcharts-".concat(i,"-series apexcharts-plot-series")}),s=new S(this.ctx,a);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,e=s.getLogSeries(e),this.yRatio=s.getLogYRatios(this.yRatio);for(var l=[],c=0;c<e.length;c++){e=this.lineHelpers.sameValueSeriesFix(c,e);var u=a.globals.comboCharts?n[c]:c;this._initSerieVariables(e,c,u);var h=[],d=[],f=a.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,u),a.globals.isXNumeric&&a.globals.seriesX.length>0&&(f=(a.globals.seriesX[u][0]-a.globals.minX)/this.xRatio),d.push(f);var p,g=f,v=g,m=this.zeroY;m=this.lineHelpers.determineFirstPrevY({i:c,series:e,prevY:m,lineYPosition:0}).prevY,h.push(m),p=m;var x=this._calculatePathsFrom({series:e,i:c,realIndex:u,prevX:v,prevY:m}),b=this._iterateOverDataPoints({series:e,realIndex:u,i:c,x:f,y:1,pX:g,pY:p,pathsFrom:x,linePaths:[],areaPaths:[],seriesIndex:n,lineYPosition:0,xArrj:d,yArrj:h});this._handlePaths({type:i,realIndex:u,i:c,paths:b}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),l.push(this.elSeries)}if(a.config.chart.stacked)for(var y=l.length;y>0;y--)o.add(l[y-1]);else for(var k=0;k<l.length;k++)o.add(l[k]);return o}},{key:"_initSerieVariables",value:function(e,t,n){var a=this.w,r=new w(this.ctx);this.xDivision=a.globals.gridWidth/(a.globals.dataPoints-("on"===a.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(a.config.stroke.width)?a.config.stroke.width[n]:a.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=n),this.isReversed=a.config.yaxis[this.yaxisIndex]&&a.config.yaxis[this.yaxisIndex].reversed,this.zeroY=a.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?a.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>a.globals.gridHeight||"end"===a.config.plotOptions.area.fillTo)&&(this.areaBottomY=a.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=r.group({class:"apexcharts-series",seriesName:b.escapeString(a.globals.seriesNames[n])}),this.elPointsMain=r.group({class:"apexcharts-series-markers-wrap","data:realIndex":n}),this.elDataLabelsWrap=r.group({class:"apexcharts-datalabels","data:realIndex":n});var i=e[t].length===a.globals.dataPoints;this.elSeries.attr({"data:longestSeries":i,rel:t+1,"data:realIndex":n}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(e){var t,n,a,r,i=e.series,o=e.i,s=e.realIndex,l=e.prevX,c=e.prevY,u=this.w,h=new w(this.ctx);if(null===i[o][0]){for(var d=0;d<i[o].length;d++)if(null!==i[o][d]){l=this.xDivision*d,c=this.zeroY-i[o][d]/this.yRatio[this.yaxisIndex],t=h.move(l,c),n=h.move(l,this.areaBottomY);break}}else t=h.move(l,c),n=h.move(l,this.areaBottomY)+h.line(l,c);if(a=h.move(-1,this.zeroY)+h.line(-1,this.zeroY),r=h.move(-1,this.zeroY)+h.line(-1,this.zeroY),u.globals.previousPaths.length>0){var f=this.lineHelpers.checkPreviousPaths({pathFromLine:a,pathFromArea:r,realIndex:s});a=f.pathFromLine,r=f.pathFromArea}return{prevX:l,prevY:c,linePath:t,areaPath:n,pathFromLine:a,pathFromArea:r}}},{key:"_handlePaths",value:function(e){var t=e.type,n=e.realIndex,a=e.i,r=e.paths,o=this.w,s=new w(this.ctx),l=new F(this.ctx);this.prevSeriesY.push(r.yArrj),o.globals.seriesXvalues[n]=r.xArrj,o.globals.seriesYvalues[n]=r.yArrj;var c=o.config.forecastDataPoints;if(c.count>0){var u=o.globals.seriesXvalues[n][o.globals.seriesXvalues[n].length-c.count-1],h=s.drawRect(u,0,o.globals.gridWidth,o.globals.gridHeight,0);o.globals.dom.elForecastMask.appendChild(h.node);var d=s.drawRect(0,0,u,o.globals.gridHeight,0);o.globals.dom.elNonForecastMask.appendChild(d.node)}this.pointsChart||o.globals.delayedElements.push({el:this.elPointsMain.node,index:n});var f={i:a,realIndex:n,animationDelay:a,initialSpeed:o.config.chart.animations.speed,dataChangeSpeed:o.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(t)};if("area"===t)for(var p=l.fillPath({seriesNumber:n}),g=0;g<r.areaPaths.length;g++){var v=s.renderPaths(i(i({},f),{},{pathFrom:r.pathFromArea,pathTo:r.areaPaths[g],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:p}));this.elSeries.add(v)}if(o.config.stroke.show&&!this.pointsChart){var m=null;if("line"===t)m=l.fillPath({seriesNumber:n,i:a});else if("solid"===o.config.stroke.fill.type)m=o.globals.stroke.colors[n];else{var x=o.config.fill;o.config.fill=o.config.stroke.fill,m=l.fillPath({seriesNumber:n,i:a}),o.config.fill=x}for(var b=0;b<r.linePaths.length;b++){var y=i(i({},f),{},{pathFrom:r.pathFromLine,pathTo:r.linePaths[b],stroke:m,strokeWidth:this.strokeWidth,strokeLineCap:o.config.stroke.lineCap,fill:"none"}),k=s.renderPaths(y);if(this.elSeries.add(k),c.count>0){var S=s.renderPaths(y);S.node.setAttribute("stroke-dasharray",c.dashArray),c.strokeWidth&&S.node.setAttribute("stroke-width",c.strokeWidth),this.elSeries.add(S),S.attr("clip-path","url(#forecastMask".concat(o.globals.cuid,")")),k.attr("clip-path","url(#nonForecastMask".concat(o.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(e){for(var t=e.series,n=e.realIndex,a=e.i,r=e.x,i=e.y,o=e.pX,s=e.pY,l=e.pathsFrom,c=e.linePaths,u=e.areaPaths,h=e.seriesIndex,d=e.lineYPosition,f=e.xArrj,p=e.yArrj,g=this.w,v=new w(this.ctx),m=this.yRatio,x=l.prevY,y=l.linePath,k=l.areaPath,S=l.pathFromLine,C=l.pathFromArea,I=b.isNumber(g.globals.minYArr[n])?g.globals.minYArr[n]:g.globals.minY,A=g.globals.dataPoints>1?g.globals.dataPoints-1:g.globals.dataPoints,T=0;T<A;T++){var N=void 0===t[a][T+1]||null===t[a][T+1];if(g.globals.isXNumeric){var E=g.globals.seriesX[n][T+1];void 0===g.globals.seriesX[n][T+1]&&(E=g.globals.seriesX[n][A-1]),r=(E-g.globals.minX)/this.xRatio}else r+=this.xDivision;d=g.config.chart.stacked&&a>0&&g.globals.collapsedSeries.length<g.config.series.length-1?this.prevSeriesY[function(e){for(var t=e,n=0;n<g.globals.series.length;n++)if(g.globals.collapsedSeriesIndices.indexOf(e)>-1){t--;break}return t>=0?t:0}(a-1)][T+1]:this.zeroY,i=N?d-I/m[this.yaxisIndex]+2*(this.isReversed?I/m[this.yaxisIndex]:0):d-t[a][T+1]/m[this.yaxisIndex]+2*(this.isReversed?t[a][T+1]/m[this.yaxisIndex]:0),f.push(r),p.push(i);var R=this.lineHelpers.calculatePoints({series:t,x:r,y:i,realIndex:n,i:a,j:T,prevY:x}),F=this._createPaths({series:t,i:a,realIndex:n,j:T,x:r,y:i,pX:o,pY:s,linePath:y,areaPath:k,linePaths:c,areaPaths:u,seriesIndex:h});u=F.areaPaths,c=F.linePaths,o=F.pX,s=F.pY,k=F.areaPath,y=F.linePath,this.appendPathFrom&&(S+=v.line(r,this.zeroY),C+=v.line(r,this.zeroY)),this.handleNullDataPoints(t,R,a,T,n),this._handleMarkersAndLabels({pointsPos:R,series:t,x:r,y:i,prevY:x,i:a,j:T,realIndex:n})}return{yArrj:p,xArrj:f,pathFromArea:C,areaPaths:u,pathFromLine:S,linePaths:c}}},{key:"_handleMarkersAndLabels",value:function(e){var t=e.pointsPos;e.series,e.x,e.y,e.prevY;var n=e.i,a=e.j,r=e.realIndex,i=this.w,o=new M(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,a,{realIndex:r,pointsPos:t,zRatio:this.zRatio,elParent:this.elPointsMain});else{i.globals.series[n].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var s=this.markers.plotChartMarkers(t,r,a+1);null!==s&&this.elPointsMain.add(s)}var l=o.drawDataLabel(t,r,a+1,null);null!==l&&this.elDataLabelsWrap.add(l)}},{key:"_createPaths",value:function(e){var t=e.series,n=e.i,a=e.realIndex,r=e.j,i=e.x,o=e.y,s=e.pX,l=e.pY,c=e.linePath,u=e.areaPath,h=e.linePaths,d=e.areaPaths,f=e.seriesIndex,p=this.w,g=new w(this.ctx),v=p.config.stroke.curve,m=this.areaBottomY;if(Array.isArray(p.config.stroke.curve)&&(v=Array.isArray(f)?p.config.stroke.curve[f[n]]:p.config.stroke.curve[n]),"smooth"===v){var x=.35*(i-s);p.globals.hasNullValues?(null!==t[n][r]&&(null!==t[n][r+1]?(c=g.move(s,l)+g.curve(s+x,l,i-x,o,i+1,o),u=g.move(s+1,l)+g.curve(s+x,l,i-x,o,i+1,o)+g.line(i,m)+g.line(s,m)+"z"):(c=g.move(s,l),u=g.move(s,l)+"z")),h.push(c),d.push(u)):(c+=g.curve(s+x,l,i-x,o,i,o),u+=g.curve(s+x,l,i-x,o,i,o)),s=i,l=o,r===t[n].length-2&&(u=u+g.curve(s,l,i,o,i,m)+g.move(i,o)+"z",p.globals.hasNullValues||(h.push(c),d.push(u)))}else{if(null===t[n][r+1]){c+=g.move(i,o);var b=p.globals.isXNumeric?(p.globals.seriesX[a][r]-p.globals.minX)/this.xRatio:i-this.xDivision;u=u+g.line(b,m)+g.move(i,o)+"z"}null===t[n][r]&&(c+=g.move(i,o),u+=g.move(i,m)),"stepline"===v?(c=c+g.line(i,null,"H")+g.line(null,o,"V"),u=u+g.line(i,null,"H")+g.line(null,o,"V")):"straight"===v&&(c+=g.line(i,o),u+=g.line(i,o)),r===t[n].length-2&&(u=u+g.line(i,m)+g.move(i,o)+"z",h.push(c),d.push(u))}return{linePaths:h,areaPaths:d,pX:s,pY:l,linePath:c,areaPath:u}}},{key:"handleNullDataPoints",value:function(e,t,n,a,r){var i=this.w;if(null===e[n][a]&&i.config.markers.showNullDataPoints||1===e[n].length){var o=this.markers.plotChartMarkers(t,r,a+1,this.strokeWidth-i.config.markers.strokeWidth/2,!0);null!==o&&this.elPointsMain.add(o)}}}]),e}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function e(t,n,a,r){this.xoffset=t,this.yoffset=n,this.height=r,this.width=a,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(e){var t,n=[],a=this.xoffset,r=this.yoffset,o=i(e)/this.height,s=i(e)/this.width;if(this.width>=this.height)for(t=0;t<e.length;t++)n.push([a,r,a+o,r+e[t]/o]),r+=e[t]/o;else for(t=0;t<e.length;t++)n.push([a,r,a+e[t]/s,r+s]),a+=e[t]/s;return n},this.cutArea=function(t){var n;if(this.width>=this.height){var a=t/this.height,r=this.width-a;n=new e(this.xoffset+a,this.yoffset,r,this.height)}else{var i=t/this.width,o=this.height-i;n=new e(this.xoffset,this.yoffset+i,this.width,o)}return n}}function t(t,a,r,o,s){return o=void 0===o?0:o,s=void 0===s?0:s,function(e){var t,n,a=[];for(t=0;t<e.length;t++)for(n=0;n<e[t].length;n++)a.push(e[t][n]);return a}(n(function(e,t){var n,a=[],r=t/i(e);for(n=0;n<e.length;n++)a[n]=e[n]*r;return a}(t,a*r),[],new e(o,s,a,r),[]))}function n(e,t,r,o){var s,l,c;if(0!==e.length)return s=r.shortestEdge(),function(e,t,n){var r;return 0===e.length||((r=e.slice()).push(t),a(e,n)>=a(r,n))}(t,l=e[0],s)?(t.push(l),n(e.slice(1),t,r,o)):(c=r.cutArea(i(t),o),o.push(r.getCoordinates(t)),n(e,[],c,o)),o;o.push(r.getCoordinates(t))}function a(e,t){var n=Math.min.apply(Math,e),a=Math.max.apply(Math,e),r=i(e);return Math.max(Math.pow(t,2)*a/Math.pow(r,2),Math.pow(r,2)/(Math.pow(t,2)*n))}function r(e){return e&&e.constructor===Array}function i(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t];return n}function o(e){var t,n=0;if(r(e[0]))for(t=0;t<e.length;t++)n+=o(e[t]);else n=i(e);return n}return function e(n,a,i,s,l){s=void 0===s?0:s,l=void 0===l?0:l;var c,u,h=[],d=[];if(r(n[0])){for(u=0;u<n.length;u++)h[u]=o(n[u]);for(c=t(h,a,i,s,l),u=0;u<n.length;u++)d.push(e(n[u],c[u][2]-c[u][0],c[u][3]-c[u][1],c[u][0],c[u][1]))}else d=t(n,a,i,s,l);return d}}();var Le,Me,Oe=function(){function e(t,n){s(this,e),this.ctx=t,this.w=t.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Ie(t),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return c(e,[{key:"draw",value:function(e){var t=this,n=this.w,a=new w(this.ctx),r=new F(this.ctx),i=a.group({class:"apexcharts-treemap"});if(n.globals.noData)return i;var o=[];return e.forEach((function(e){var t=e.map((function(e){return Math.abs(e)}));o.push(t)})),this.negRange=this.helpers.checkColorRange(),n.config.series.forEach((function(e,n){e.data.forEach((function(e){Array.isArray(t.labels[n])||(t.labels[n]=[]),t.labels[n].push(e.x)}))})),window.TreemapSquared.generate(o,n.globals.gridWidth,n.globals.gridHeight).forEach((function(o,s){var l=a.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:b.escapeString(n.globals.seriesNames[s]),rel:s+1,"data:realIndex":s});if(n.config.chart.dropShadow.enabled){var c=n.config.chart.dropShadow;new k(t.ctx).dropShadow(i,c,s)}var u=a.group({class:"apexcharts-data-labels"});o.forEach((function(i,o){var c=i[0],u=i[1],h=i[2],d=i[3],f=a.drawRect(c,u,h-c,d-u,0,"#fff",1,t.strokeWidth,n.config.plotOptions.treemap.useFillColorAsStroke?g:n.globals.stroke.colors[s]);f.attr({cx:c,cy:u,index:s,i:s,j:o,width:h-c,height:d-u});var p=t.helpers.getShadeColor(n.config.chart.type,s,o,t.negRange),g=p.color;void 0!==n.config.series[s].data[o]&&n.config.series[s].data[o].fillColor&&(g=n.config.series[s].data[o].fillColor);var v=r.fillPath({color:g,seriesNumber:s,dataPointIndex:o});f.node.classList.add("apexcharts-treemap-rect"),f.attr({fill:v}),t.helpers.addListeners(f);var m={x:c+(h-c)/2,y:u+(d-u)/2,width:0,height:0},x={x:c,y:u,width:h-c,height:d-u};if(n.config.chart.animations.enabled&&!n.globals.dataChanged){var b=1;n.globals.resized||(b=n.config.chart.animations.speed),t.animateTreemap(f,m,x,b)}if(n.globals.dataChanged){var y=1;t.dynamicAnim.enabled&&n.globals.shouldAnimate&&(y=t.dynamicAnim.speed,n.globals.previousPaths[s]&&n.globals.previousPaths[s][o]&&n.globals.previousPaths[s][o].rect&&(m=n.globals.previousPaths[s][o].rect),t.animateTreemap(f,m,x,y))}var k=t.getFontSize(i),w=n.config.dataLabels.formatter(t.labels[s][o],{value:n.globals.series[s][o],seriesIndex:s,dataPointIndex:o,w:n}),S=t.helpers.calculateDataLabels({text:w,x:(c+h)/2,y:(u+d)/2+t.strokeWidth/2+k/3,i:s,j:o,colorProps:p,fontSize:k,series:e});n.config.dataLabels.enabled&&S&&t.rotateToFitLabel(S,w,c,u,h,d),l.add(f),null!==S&&l.add(S)})),l.add(u),i.add(l)})),i}},{key:"getFontSize",value:function(e){var t,n,a=this.w,r=function e(t){var n,a=0;if(Array.isArray(t[0]))for(n=0;n<t.length;n++)a+=e(t[n]);else for(n=0;n<t.length;n++)a+=t[n].length;return a}(this.labels)/function e(t){var n,a=0;if(Array.isArray(t[0]))for(n=0;n<t.length;n++)a+=e(t[n]);else for(n=0;n<t.length;n++)a+=1;return a}(this.labels);return t=(e[2]-e[0])*(e[3]-e[1]),n=Math.pow(t,.5),Math.min(n/r,parseInt(a.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(e,t,n,a,r,i){var o=new w(this.ctx),s=o.getTextRects(t);if(s.width+5>r-n&&s.width<=i-a){var l=o.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(-90 ".concat(l.x," ").concat(l.y,")"))}}},{key:"animateTreemap",value:function(e,t,n,a){var r=new y(this.ctx);r.animateRect(e,{x:t.x,y:t.y,width:t.width,height:t.height},{x:n.x,y:n.y,width:n.width,height:n.height},a,(function(){r.animationCompleted(e)}))}}]),e}(),Pe=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return c(e,[{key:"calculateTimeScaleTicks",value:function(e,t){var n=this,a=this.w;if(a.globals.allSeriesCollapsed)return a.globals.labels=[],a.globals.timescaleLabels=[],[];var r=new B(this.ctx),o=(t-e)/864e5;this.determineInterval(o),a.globals.disableZoomIn=!1,a.globals.disableZoomOut=!1,o<.00011574074074074075?a.globals.disableZoomIn=!0:o>5e4&&(a.globals.disableZoomOut=!0);var s=r.getTimeUnitsfromTimestamp(e,t,this.utc),l=a.globals.gridWidth/o,c=l/24,u=c/60,h=u/60,d=Math.floor(24*o),f=Math.floor(1440*o),p=Math.floor(86400*o),g=Math.floor(o),v=Math.floor(o/30),m=Math.floor(o/365),x={minMillisecond:s.minMillisecond,minSecond:s.minSecond,minMinute:s.minMinute,minHour:s.minHour,minDate:s.minDate,minMonth:s.minMonth,minYear:s.minYear},b={firstVal:x,currentMillisecond:x.minMillisecond,currentSecond:x.minSecond,currentMinute:x.minMinute,currentHour:x.minHour,currentMonthDate:x.minDate,currentDate:x.minDate,currentMonth:x.minMonth,currentYear:x.minYear,daysWidthOnXAxis:l,hoursWidthOnXAxis:c,minutesWidthOnXAxis:u,secondsWidthOnXAxis:h,numberOfSeconds:p,numberOfMinutes:f,numberOfHours:d,numberOfDays:g,numberOfMonths:v,numberOfYears:m};switch(this.tickInterval){case"years":this.generateYearScale(b);break;case"months":case"half_year":this.generateMonthScale(b);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(b);break;case"hours":this.generateHourScale(b);break;case"minutes_fives":case"minutes":this.generateMinuteScale(b);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(b)}var y=this.timeScaleArray.map((function(e){var t={position:e.position,unit:e.unit,year:e.year,day:e.day?e.day:1,hour:e.hour?e.hour:0,month:e.month+1};return"month"===e.unit?i(i({},t),{},{day:1,value:e.value+1}):"day"===e.unit||"hour"===e.unit?i(i({},t),{},{value:e.value}):"minute"===e.unit?i(i({},t),{},{value:e.value,minute:e.value}):"second"===e.unit?i(i({},t),{},{value:e.value,minute:e.minute,second:e.second}):e}));return y.filter((function(e){var t=1,r=Math.ceil(a.globals.gridWidth/120),i=e.value;void 0!==a.config.xaxis.tickAmount&&(r=a.config.xaxis.tickAmount),y.length>r&&(t=Math.floor(y.length/r));var o=!1,s=!1;switch(n.tickInterval){case"years":"year"===e.unit&&(o=!0);break;case"half_year":t=7,"year"===e.unit&&(o=!0);break;case"months":t=1,"year"===e.unit&&(o=!0);break;case"months_fortnight":t=15,"year"!==e.unit&&"month"!==e.unit||(o=!0),30===i&&(s=!0);break;case"months_days":t=10,"month"===e.unit&&(o=!0),30===i&&(s=!0);break;case"week_days":t=8,"month"===e.unit&&(o=!0);break;case"days":t=1,"month"===e.unit&&(o=!0);break;case"hours":"day"===e.unit&&(o=!0);break;case"minutes_fives":case"seconds_fives":i%5!=0&&(s=!0);break;case"seconds_tens":i%10!=0&&(s=!0)}if("hours"===n.tickInterval||"minutes_fives"===n.tickInterval||"seconds_tens"===n.tickInterval||"seconds_fives"===n.tickInterval){if(!s)return!0}else if((i%t==0||o)&&!s)return!0}))}},{key:"recalcDimensionsBasedOnFormat",value:function(e,t){var n=this.w,a=this.formatDates(e),r=this.removeOverlappingTS(a);n.globals.timescaleLabels=r.slice(),new he(this.ctx).plotCoords()}},{key:"determineInterval",value:function(e){var t=24*e,n=60*t;switch(!0){case e/365>5:this.tickInterval="years";break;case e>800:this.tickInterval="half_year";break;case e>180:this.tickInterval="months";break;case e>90:this.tickInterval="months_fortnight";break;case e>60:this.tickInterval="months_days";break;case e>30:this.tickInterval="week_days";break;case e>2:this.tickInterval="days";break;case t>2.4:this.tickInterval="hours";break;case n>15:this.tickInterval="minutes_fives";break;case n>5:this.tickInterval="minutes";break;case n>1:this.tickInterval="seconds_tens";break;case 60*n>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(e){var t=e.firstVal,n=e.currentMonth,a=e.currentYear,r=e.daysWidthOnXAxis,i=e.numberOfYears,o=t.minYear,s=0,l=new B(this.ctx),c="year";if(t.minDate>1||t.minMonth>0){var u=l.determineRemainingDaysOfYear(t.minYear,t.minMonth,t.minDate);s=(l.determineDaysOfYear(t.minYear)-u+1)*r,o=t.minYear+1,this.timeScaleArray.push({position:s,value:o,unit:c,year:o,month:b.monthMod(n+1)})}else 1===t.minDate&&0===t.minMonth&&this.timeScaleArray.push({position:s,value:o,unit:c,year:a,month:b.monthMod(n+1)});for(var h=o,d=s,f=0;f<i;f++)h++,d=l.determineDaysOfYear(h-1)*r+d,this.timeScaleArray.push({position:d,value:h,unit:c,year:h,month:1})}},{key:"generateMonthScale",value:function(e){var t=e.firstVal,n=e.currentMonthDate,a=e.currentMonth,r=e.currentYear,i=e.daysWidthOnXAxis,o=e.numberOfMonths,s=a,l=0,c=new B(this.ctx),u="month",h=0;if(t.minDate>1){l=(c.determineDaysOfMonths(a+1,t.minYear)-n+1)*i,s=b.monthMod(a+1);var d=r+h,f=b.monthMod(s),p=s;0===s&&(u="year",p=d,f=1,d+=h+=1),this.timeScaleArray.push({position:l,value:p,unit:u,year:d,month:f})}else this.timeScaleArray.push({position:l,value:s,unit:u,year:r,month:b.monthMod(a)});for(var g=s+1,v=l,m=0,x=1;m<o;m++,x++){0===(g=b.monthMod(g))?(u="year",h+=1):u="month";var y=this._getYear(r,g,h);v=c.determineDaysOfMonths(g,y)*i+v;var k=0===g?y:g;this.timeScaleArray.push({position:v,value:k,unit:u,year:y,month:0===g?1:g}),g++}}},{key:"generateDayScale",value:function(e){var t=e.firstVal,n=e.currentMonth,a=e.currentYear,r=e.hoursWidthOnXAxis,i=e.numberOfDays,o=new B(this.ctx),s="day",l=t.minDate+1,c=l,u=function(e,t,n){return e>o.determineDaysOfMonths(t+1,n)?(c=1,s="month",d=t+=1,t):t},h=(24-t.minHour)*r,d=l,f=u(c,n,a);0===t.minHour&&1===t.minDate?(h=0,d=b.monthMod(t.minMonth),s="month",c=t.minDate,i++):1!==t.minDate&&0===t.minHour&&0===t.minMinute&&(h=0,l=t.minDate,d=l,f=u(c=l,n,a)),this.timeScaleArray.push({position:h,value:d,unit:s,year:this._getYear(a,f,0),month:b.monthMod(f),day:c});for(var p=h,g=0;g<i;g++){s="day",f=u(c+=1,f,this._getYear(a,f,0));var v=this._getYear(a,f,0);p=24*r+p;var m=1===c?b.monthMod(f):c;this.timeScaleArray.push({position:p,value:m,unit:s,year:v,month:b.monthMod(f),day:m})}}},{key:"generateHourScale",value:function(e){var t=e.firstVal,n=e.currentDate,a=e.currentMonth,r=e.currentYear,i=e.minutesWidthOnXAxis,o=e.numberOfHours,s=new B(this.ctx),l="hour",c=function(e,t){return e>s.determineDaysOfMonths(t+1,r)&&(g=1,t+=1),{month:t,date:g}},u=function(e,t){return e>s.determineDaysOfMonths(t+1,r)?t+=1:t},h=60-(t.minMinute+t.minSecond/60),d=h*i,f=t.minHour+1,p=f+1;60===h&&(d=0,p=(f=t.minHour)+1);var g=n,v=u(g,a);this.timeScaleArray.push({position:d,value:f,unit:l,day:g,hour:p,year:r,month:b.monthMod(v)});for(var m=d,x=0;x<o;x++){l="hour",p>=24&&(p=0,l="day",v=c(g+=1,v).month,v=u(g,v));var y=this._getYear(r,v,0);m=0===p&&0===x?h*i:60*i+m;var k=0===p?g:p;this.timeScaleArray.push({position:m,value:k,unit:l,hour:p,day:g,year:y,month:b.monthMod(v)}),p++}}},{key:"generateMinuteScale",value:function(e){for(var t=e.currentMillisecond,n=e.currentSecond,a=e.currentMinute,r=e.currentHour,i=e.currentDate,o=e.currentMonth,s=e.currentYear,l=e.minutesWidthOnXAxis,c=e.secondsWidthOnXAxis,u=e.numberOfMinutes,h=a+1,d=i,f=o,p=s,g=r,v=(60-n-t/1e3)*c,m=0;m<u;m++)h>=60&&(h=0,24===(g+=1)&&(g=0)),this.timeScaleArray.push({position:v,value:h,unit:"minute",hour:g,minute:h,day:d,year:this._getYear(p,f,0),month:b.monthMod(f)}),v+=l,h++}},{key:"generateSecondScale",value:function(e){for(var t=e.currentMillisecond,n=e.currentSecond,a=e.currentMinute,r=e.currentHour,i=e.currentDate,o=e.currentMonth,s=e.currentYear,l=e.secondsWidthOnXAxis,c=e.numberOfSeconds,u=n+1,h=a,d=i,f=o,p=s,g=r,v=(1e3-t)/1e3*l,m=0;m<c;m++)u>=60&&(u=0,++h>=60&&(h=0,24===++g&&(g=0))),this.timeScaleArray.push({position:v,value:u,unit:"second",hour:g,minute:h,second:u,day:d,year:this._getYear(p,f,0),month:b.monthMod(f)}),v+=l,u++}},{key:"createRawDateString",value:function(e,t){var n=e.year;return 0===e.month&&(e.month=1),n+="-"+("0"+e.month.toString()).slice(-2),"day"===e.unit?n+="day"===e.unit?"-"+("0"+t).slice(-2):"-01":n+="-"+("0"+(e.day?e.day:"1")).slice(-2),"hour"===e.unit?n+="hour"===e.unit?"T"+("0"+t).slice(-2):"T00":n+="T"+("0"+(e.hour?e.hour:"0")).slice(-2),"minute"===e.unit?n+=":"+("0"+t).slice(-2):n+=":"+(e.minute?("0"+e.minute).slice(-2):"00"),"second"===e.unit?n+=":"+("0"+t).slice(-2):n+=":00",this.utc&&(n+=".000Z"),n}},{key:"formatDates",value:function(e){var t=this,n=this.w;return e.map((function(e){var a=e.value.toString(),r=new B(t.ctx),i=t.createRawDateString(e,a),o=r.getDate(r.parseDate(i));if(t.utc||(o=r.getDate(r.parseDateWithTimezone(i))),void 0===n.config.xaxis.labels.format){var s="dd MMM",l=n.config.xaxis.labels.datetimeFormatter;"year"===e.unit&&(s=l.year),"month"===e.unit&&(s=l.month),"day"===e.unit&&(s=l.day),"hour"===e.unit&&(s=l.hour),"minute"===e.unit&&(s=l.minute),"second"===e.unit&&(s=l.second),a=r.formatDate(o,s)}else a=r.formatDate(o,n.config.xaxis.labels.format);return{dateString:i,position:e.position,value:a,unit:e.unit,year:e.year,month:e.month}}))}},{key:"removeOverlappingTS",value:function(e){var t,n=this,a=new w(this.ctx),r=!1;e.length>0&&e[0].value&&e.every((function(t){return t.value.length===e[0].value.length}))&&(r=!0,t=a.getTextRects(e[0].value).width);var i=0,o=e.map((function(o,s){if(s>0&&n.w.config.xaxis.labels.hideOverlappingLabels){var l=r?t:a.getTextRects(e[i].value).width,c=e[i].position;return o.position>c+l+10?(i=s,o):null}return o}));return o.filter((function(e){return null!==e}))}},{key:"_getYear",value:function(e,t,n){return e+Math.floor(t/12)+n}}]),e}(),_e=function(){function e(t,n){s(this,e),this.ctx=n,this.w=n.w,this.el=t}return c(e,[{key:"setupElements",value:function(){var e=this.w.globals,t=this.w.config,n=t.chart.type;e.axisCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(n)>-1,e.xyCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble"].indexOf(n)>-1,e.isBarHorizontal=("bar"===t.chart.type||"rangeBar"===t.chart.type||"boxPlot"===t.chart.type)&&t.plotOptions.bar.horizontal,e.chartClass=".apexcharts"+e.chartID,e.dom.baseEl=this.el,e.dom.elWrap=document.createElement("div"),w.setAttrs(e.dom.elWrap,{id:e.chartClass.substring(1),class:"apexcharts-canvas "+e.chartClass.substring(1)}),this.el.appendChild(e.dom.elWrap),e.dom.Paper=new window.SVG.Doc(e.dom.elWrap),e.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(t.chart.offsetX,", ").concat(t.chart.offsetY,")")}),e.dom.Paper.node.style.background=t.chart.background,this.setSVGDimensions(),e.dom.elGraphical=e.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),e.dom.elAnnotations=e.dom.Paper.group().attr({class:"apexcharts-annotations"}),e.dom.elDefs=e.dom.Paper.defs(),e.dom.elLegendWrap=document.createElement("div"),e.dom.elLegendWrap.classList.add("apexcharts-legend"),e.dom.elWrap.appendChild(e.dom.elLegendWrap),e.dom.Paper.add(e.dom.elGraphical),e.dom.elGraphical.add(e.dom.elDefs)}},{key:"plotChartType",value:function(e,t){var n=this.w,a=n.config,r=n.globals,i={series:[],i:[]},o={series:[],i:[]},s={series:[],i:[]},l={series:[],i:[]},c={series:[],i:[]},u={series:[],i:[]},h={series:[],i:[]};r.series.map((function(t,d){var f=0;void 0!==e[d].type?("column"===e[d].type||"bar"===e[d].type?(r.series.length>1&&a.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),c.series.push(t),c.i.push(d),f++,n.globals.columnSeries=c.series):"area"===e[d].type?(o.series.push(t),o.i.push(d),f++):"line"===e[d].type?(i.series.push(t),i.i.push(d),f++):"scatter"===e[d].type?(s.series.push(t),s.i.push(d)):"bubble"===e[d].type?(l.series.push(t),l.i.push(d),f++):"candlestick"===e[d].type?(u.series.push(t),u.i.push(d),f++):"boxPlot"===e[d].type?(h.series.push(t),h.i.push(d),f++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble"),f>1&&(r.comboCharts=!0)):(i.series.push(t),i.i.push(d))}));var d=new De(this.ctx,t),f=new Ce(this.ctx,t);this.ctx.pie=new Ne(this.ctx);var p=new Re(this.ctx);this.ctx.rangeBar=new W(this.ctx,t);var g=new Ee(this.ctx),v=[];if(r.comboCharts){if(o.series.length>0&&v.push(d.draw(o.series,"area",o.i)),c.series.length>0)if(n.config.chart.stacked){var m=new Se(this.ctx,t);v.push(m.draw(c.series,c.i))}else this.ctx.bar=new z(this.ctx,t),v.push(this.ctx.bar.draw(c.series,c.i));if(i.series.length>0&&v.push(d.draw(i.series,"line",i.i)),u.series.length>0&&v.push(f.draw(u.series,u.i)),h.series.length>0&&v.push(f.draw(h.series,h.i)),s.series.length>0){var x=new De(this.ctx,t,!0);v.push(x.draw(s.series,"scatter",s.i))}if(l.series.length>0){var b=new De(this.ctx,t,!0);v.push(b.draw(l.series,"bubble",l.i))}}else switch(a.chart.type){case"line":v=d.draw(r.series,"line");break;case"area":v=d.draw(r.series,"area");break;case"bar":a.chart.stacked?v=new Se(this.ctx,t).draw(r.series):(this.ctx.bar=new z(this.ctx,t),v=this.ctx.bar.draw(r.series));break;case"candlestick":case"boxPlot":v=new Ce(this.ctx,t).draw(r.series);break;case"rangeBar":v=this.ctx.rangeBar.draw(r.series);break;case"heatmap":v=new Ae(this.ctx,t).draw(r.series);break;case"treemap":v=new Oe(this.ctx,t).draw(r.series);break;case"pie":case"donut":case"polarArea":v=this.ctx.pie.draw(r.series);break;case"radialBar":v=p.draw(r.series);break;case"radar":v=g.draw(r.series);break;default:v=d.draw(r.series)}return v}},{key:"setSVGDimensions",value:function(){var e=this.w.globals,t=this.w.config;e.svgWidth=t.chart.width,e.svgHeight=t.chart.height;var n=b.getDimensions(this.el),a=t.chart.width.toString().split(/[0-9]+/g).pop();"%"===a?b.isNumber(n[0])&&(0===n[0].width&&(n=b.getDimensions(this.el.parentNode)),e.svgWidth=n[0]*parseInt(t.chart.width,10)/100):"px"!==a&&""!==a||(e.svgWidth=parseInt(t.chart.width,10));var r=t.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==e.svgHeight&&""!==e.svgHeight)if("%"===r){var i=b.getDimensions(this.el.parentNode);e.svgHeight=i[1]*parseInt(t.chart.height,10)/100}else e.svgHeight=parseInt(t.chart.height,10);else e.axisCharts?e.svgHeight=e.svgWidth/1.61:e.svgHeight=e.svgWidth/1.2;if(e.svgWidth<0&&(e.svgWidth=0),e.svgHeight<0&&(e.svgHeight=0),w.setAttrs(e.dom.Paper.node,{width:e.svgWidth,height:e.svgHeight}),"%"!==r){var o=t.chart.sparkline.enabled?0:e.axisCharts?t.chart.parentHeightOffset:0;e.dom.Paper.node.parentNode.parentNode.style.minHeight=e.svgHeight+o+"px"}e.dom.elWrap.style.width=e.svgWidth+"px",e.dom.elWrap.style.height=e.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var e=this.w.globals,t=e.translateY,n={transform:"translate("+e.translateX+", "+t+")"};w.setAttrs(e.dom.elGraphical.node,n)}},{key:"resizeNonAxisCharts",value:function(){var e=this.w,t=e.globals,n=0,a=e.config.chart.sparkline.enabled?1:15;a+=e.config.grid.padding.bottom,"top"!==e.config.legend.position&&"bottom"!==e.config.legend.position||!e.config.legend.show||e.config.legend.floating||(n=new fe(this.ctx).legendHelpers.getLegendBBox().clwh+10);var r=e.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),i=2.05*e.globals.radialSize;if(r&&!e.config.chart.sparkline.enabled&&0!==e.config.plotOptions.radialBar.startAngle){var o=b.getBoundingClientRect(r);i=o.bottom;var s=o.bottom-o.top;i=Math.max(2.05*e.globals.radialSize,s)}var l=i+t.translateY+n+a;t.dom.elLegendForeign&&t.dom.elLegendForeign.setAttribute("height",l),e.config.chart.height&&String(e.config.chart.height).indexOf("%")>0||(t.dom.elWrap.style.height=l+"px",w.setAttrs(t.dom.Paper.node,{height:l}),t.dom.Paper.node.parentNode.parentNode.style.minHeight=l+"px")}},{key:"coreCalculations",value:function(){new Q(this.ctx).init()}},{key:"resetGlobals",value:function(){var e=this,t=function(){return e.w.config.series.map((function(e){return[]}))},n=new U,a=this.w.globals;n.initGlobalVars(a),a.seriesXvalues=t(),a.seriesYvalues=t()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var e=null,t=this.w;if(t.globals.axisCharts){if("back"===t.config.xaxis.crosshairs.position&&new ae(this.ctx).drawXCrosshairs(),"back"===t.config.yaxis[0].crosshairs.position&&new ae(this.ctx).drawYCrosshairs(),"datetime"===t.config.xaxis.type&&void 0===t.config.xaxis.labels.formatter){this.ctx.timeScale=new Pe(this.ctx);var n=[];isFinite(t.globals.minX)&&isFinite(t.globals.maxX)&&!t.globals.isBarHorizontal?n=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minX,t.globals.maxX):t.globals.isBarHorizontal&&(n=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minY,t.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(n)}e=new S(this.ctx).getCalculatedRatios()}return e}},{key:"updateSourceChart",value:function(e){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:e.w.globals.minX,max:e.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var e=this,t=this.w;if(t.config.chart.brush.enabled&&"function"!=typeof t.config.chart.events.selection){var n=t.config.chart.brush.targets||[t.config.chart.brush.target];n.forEach((function(t){var n=ApexCharts.getChartByID(t);n.w.globals.brushSource=e.ctx,"function"!=typeof n.w.config.chart.events.zoomed&&(n.w.config.chart.events.zoomed=function(){e.updateSourceChart(n)}),"function"!=typeof n.w.config.chart.events.scrolled&&(n.w.config.chart.events.scrolled=function(){e.updateSourceChart(n)})})),t.config.chart.events.selection=function(e,a){n.forEach((function(e){var n=ApexCharts.getChartByID(e),r=b.clone(t.config.yaxis);if(t.config.chart.brush.autoScaleYaxis&&1===n.w.globals.series.length){var o=new $(n);r=o.autoScaleY(n,r,a)}var s=n.w.config.yaxis.reduce((function(e,t,a){return[].concat(v(e),[i(i({},n.w.config.yaxis[a]),{},{min:r[0].min,max:r[0].max})])}),[]);n.ctx.updateHelpers._updateOptions({xaxis:{min:a.xaxis.min,max:a.xaxis.max},yaxis:s},!1,!1,!1,!1)}))}}}}]),e}(),ze=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"_updateOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise((function(s){var l=[t.ctx];r&&(l=t.ctx.getSyncedCharts()),t.ctx.w.globals.isExecCalled&&(l=[t.ctx],t.ctx.w.globals.isExecCalled=!1),l.forEach((function(r,c){var u=r.w;if(u.globals.shouldAnimate=a,n||(u.globals.resized=!0,u.globals.dataChanged=!0,a&&r.series.getPreviousPaths()),e&&"object"===o(e)&&(r.config=new V(e),e=S.extendArrayProps(r.config,e,u),r.w.globals.chartID!==t.ctx.w.globals.chartID&&delete e.series,u.config=b.extend(u.config,e),i&&(u.globals.lastXAxis=e.xaxis?b.clone(e.xaxis):[],u.globals.lastYAxis=e.yaxis?b.clone(e.yaxis):[],u.globals.initialConfig=b.extend({},u.config),u.globals.initialSeries=b.clone(u.config.series),e.series))){for(var h=0;h<u.globals.collapsedSeriesIndices.length;h++){var d=u.config.series[u.globals.collapsedSeriesIndices[h]];u.globals.collapsedSeries[h].data=u.globals.axisCharts?d.data.slice():d}for(var f=0;f<u.globals.ancillaryCollapsedSeriesIndices.length;f++){var p=u.config.series[u.globals.ancillaryCollapsedSeriesIndices[f]];u.globals.ancillaryCollapsedSeries[f].data=u.globals.axisCharts?p.data.slice():p}r.series.emptyCollapsedSeries(u.config.series)}return r.update(e).then((function(){c===l.length-1&&s(r)}))}))}))}},{key:"_updateSeries",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(r){var i,o=n.w;return o.globals.shouldAnimate=t,o.globals.dataChanged=!0,t&&n.ctx.series.getPreviousPaths(),o.globals.axisCharts?(0===(i=e.map((function(e,t){return n._extendSeries(e,t)}))).length&&(i=[{data:[]}]),o.config.series=i):o.config.series=e.slice(),a&&(o.globals.initialSeries=b.clone(o.config.series)),n.ctx.update().then((function(){r(n.ctx)}))}))}},{key:"_extendSeries",value:function(e,t){var n=this.w,a=n.config.series[t];return i(i({},n.config.series[t]),{},{name:e.name?e.name:a&&a.name,color:e.color?e.color:a&&a.color,type:e.type?e.type:a&&a.type,data:e.data?e.data:a&&a.data})}},{key:"toggleDataPointSelection",value:function(e,t){var n=this.w,a=null,r=".apexcharts-series[data\\:realIndex='".concat(e,"']");return n.globals.axisCharts?a=n.globals.dom.Paper.select("".concat(r," path[j='").concat(t,"'], ").concat(r," circle[j='").concat(t,"'], ").concat(r," rect[j='").concat(t,"']")).members[0]:void 0===t&&(a=n.globals.dom.Paper.select("".concat(r," path[j='").concat(e,"']")).members[0],"pie"!==n.config.chart.type&&"polarArea"!==n.config.chart.type&&"donut"!==n.config.chart.type||this.ctx.pie.pieClicked(e)),a?(new w(this.ctx).pathMouseDown(a,null),a.node?a.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(e){var t=this.w;if(["min","max"].forEach((function(n){void 0!==e.xaxis[n]&&(t.config.xaxis[n]=e.xaxis[n],t.globals.lastXAxis[n]=e.xaxis[n])})),e.xaxis.categories&&e.xaxis.categories.length&&(t.config.xaxis.categories=e.xaxis.categories),t.config.xaxis.convertedCatToNumeric){var n=new H(e);e=n.convertCatToNumericXaxis(e,this.ctx)}return e}},{key:"forceYAxisUpdate",value:function(e){var t=this.w;return t.config.chart.stacked&&"100%"===t.config.chart.stackType&&(Array.isArray(e.yaxis)?e.yaxis.forEach((function(t,n){e.yaxis[n].min=0,e.yaxis[n].max=100})):(e.yaxis.min=0,e.yaxis.max=100)),e}},{key:"revertDefaultAxisMinMax",value:function(e){var t=this,n=this.w,a=n.globals.lastXAxis,r=n.globals.lastYAxis;e&&e.xaxis&&(a=e.xaxis),e&&e.yaxis&&(r=e.yaxis),n.config.xaxis.min=a.min,n.config.xaxis.max=a.max;n.config.yaxis.map((function(e,a){n.globals.zoomed||void 0!==r[a]?function(e){void 0!==r[e]&&(n.config.yaxis[e].min=r[e].min,n.config.yaxis[e].max=r[e].max)}(a):void 0!==t.ctx.opts.yaxis[a]&&(e.min=t.ctx.opts.yaxis[a].min,e.max=t.ctx.opts.yaxis[a].max)}))}}]),e}();Le="undefined"!=typeof window?window:void 0,Me=function(e,t){var n=(void 0!==this?this:e).SVG=function(e){if(n.supported)return e=new n.Doc(e),n.parser.draw||n.prepare(),e};if(n.ns="http://www.w3.org/2000/svg",n.xmlns="http://www.w3.org/2000/xmlns/",n.xlink="http://www.w3.org/1999/xlink",n.svgjs="http://svgjs.dev",n.supported=!0,!n.supported)return!1;n.did=1e3,n.eid=function(e){return"Svgjs"+h(e)+n.did++},n.create=function(e){var n=t.createElementNS(this.ns,e);return n.setAttribute("id",this.eid(e)),n},n.extend=function(){var e,t;t=(e=[].slice.call(arguments)).pop();for(var a=e.length-1;a>=0;a--)if(e[a])for(var r in t)e[a].prototype[r]=t[r];n.Set&&n.Set.inherit&&n.Set.inherit()},n.invent=function(e){var t="function"==typeof e.create?e.create:function(){this.constructor.call(this,n.create(e.create))};return e.inherit&&(t.prototype=new e.inherit),e.extend&&n.extend(t,e.extend),e.construct&&n.extend(e.parent||n.Container,e.construct),t},n.adopt=function(t){return t?t.instance?t.instance:((a="svg"==t.nodeName?t.parentNode instanceof e.SVGElement?new n.Nested:new n.Doc:"linearGradient"==t.nodeName?new n.Gradient("linear"):"radialGradient"==t.nodeName?new n.Gradient("radial"):n[h(t.nodeName)]?new(n[h(t.nodeName)]):new n.Element(t)).type=t.nodeName,a.node=t,t.instance=a,a instanceof n.Doc&&a.namespace().defs(),a.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),a):null;var a},n.prepare=function(){var e=t.getElementsByTagName("body")[0],a=(e?new n.Doc(e):n.adopt(t.documentElement).nested()).size(2,0);n.parser={body:e||t.documentElement,draw:a.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:a.polyline().node,path:a.path().node,native:n.create("svg")}},n.parser={native:n.create("svg")},t.addEventListener("DOMContentLoaded",(function(){n.parser.draw||n.prepare()}),!1),n.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},n.utils={map:function(e,t){for(var n=e.length,a=[],r=0;r<n;r++)a.push(t(e[r]));return a},filter:function(e,t){for(var n=e.length,a=[],r=0;r<n;r++)t(e[r])&&a.push(e[r]);return a},filterSVGElements:function(t){return this.filter(t,(function(t){return t instanceof e.SVGElement}))}},n.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},n.Color=function(e){var t,a;this.r=0,this.g=0,this.b=0,e&&("string"==typeof e?n.regex.isRgb.test(e)?(t=n.regex.rgb.exec(e.replace(n.regex.whitespace,"")),this.r=parseInt(t[1]),this.g=parseInt(t[2]),this.b=parseInt(t[3])):n.regex.isHex.test(e)&&(t=n.regex.hex.exec(4==(a=e).length?["#",a.substring(1,2),a.substring(1,2),a.substring(2,3),a.substring(2,3),a.substring(3,4),a.substring(3,4)].join(""):a),this.r=parseInt(t[1],16),this.g=parseInt(t[2],16),this.b=parseInt(t[3],16)):"object"===o(e)&&(this.r=e.r,this.g=e.g,this.b=e.b))},n.extend(n.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+d(this.r)+d(this.g)+d(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(e){return this.destination=new n.Color(e),this},at:function(e){return this.destination?(e=e<0?0:e>1?1:e,new n.Color({r:~~(this.r+(this.destination.r-this.r)*e),g:~~(this.g+(this.destination.g-this.g)*e),b:~~(this.b+(this.destination.b-this.b)*e)})):this}}),n.Color.test=function(e){return e+="",n.regex.isHex.test(e)||n.regex.isRgb.test(e)},n.Color.isRgb=function(e){return e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b},n.Color.isColor=function(e){return n.Color.isRgb(e)||n.Color.test(e)},n.Array=function(e,t){0==(e=(e||[]).valueOf()).length&&t&&(e=t.valueOf()),this.value=this.parse(e)},n.extend(n.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(e){return e=e.valueOf(),Array.isArray(e)?e:this.split(e)}}),n.PointArray=function(e,t){n.Array.call(this,e,t||[[0,0]])},n.PointArray.prototype=new n.Array,n.PointArray.prototype.constructor=n.PointArray;for(var a={M:function(e,t,n){return t.x=n.x=e[0],t.y=n.y=e[1],["M",t.x,t.y]},L:function(e,t){return t.x=e[0],t.y=e[1],["L",e[0],e[1]]},H:function(e,t){return t.x=e[0],["H",e[0]]},V:function(e,t){return t.y=e[0],["V",e[0]]},C:function(e,t){return t.x=e[4],t.y=e[5],["C",e[0],e[1],e[2],e[3],e[4],e[5]]},Q:function(e,t){return t.x=e[2],t.y=e[3],["Q",e[0],e[1],e[2],e[3]]},Z:function(e,t,n){return t.x=n.x,t.y=n.y,["Z"]}},r="mlhvqtcsaz".split(""),i=0,s=r.length;i<s;++i)a[r[i]]=function(e){return function(t,n,r){if("H"==e)t[0]=t[0]+n.x;else if("V"==e)t[0]=t[0]+n.y;else if("A"==e)t[5]=t[5]+n.x,t[6]=t[6]+n.y;else for(var i=0,o=t.length;i<o;++i)t[i]=t[i]+(i%2?n.y:n.x);if(a&&"function"==typeof a[e])return a[e](t,n,r)}}(r[i].toUpperCase());n.PathArray=function(e,t){n.Array.call(this,e,t||[["M",0,0]])},n.PathArray.prototype=new n.Array,n.PathArray.prototype.constructor=n.PathArray,n.extend(n.PathArray,{toString:function(){return function(e){for(var t=0,n=e.length,a="";t<n;t++)a+=e[t][0],null!=e[t][1]&&(a+=e[t][1],null!=e[t][2]&&(a+=" ",a+=e[t][2],null!=e[t][3]&&(a+=" ",a+=e[t][3],a+=" ",a+=e[t][4],null!=e[t][5]&&(a+=" ",a+=e[t][5],a+=" ",a+=e[t][6],null!=e[t][7]&&(a+=" ",a+=e[t][7])))));return a+" "}(this.value)},move:function(e,t){var n=this.bbox();return n.x,n.y,this},at:function(e){if(!this.destination)return this;for(var t=this.value,a=this.destination.value,r=[],i=new n.PathArray,o=0,s=t.length;o<s;o++){r[o]=[t[o][0]];for(var l=1,c=t[o].length;l<c;l++)r[o][l]=t[o][l]+(a[o][l]-t[o][l])*e;"A"===r[o][0]&&(r[o][4]=+(0!=r[o][4]),r[o][5]=+(0!=r[o][5]))}return i.value=r,i},parse:function(e){if(e instanceof n.PathArray)return e.valueOf();var t,r={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};e="string"==typeof e?e.replace(n.regex.numbersWithDots,c).replace(n.regex.pathLetters," $& ").replace(n.regex.hyphen,"$1 -").trim().split(n.regex.delimiter):e.reduce((function(e,t){return[].concat.call(e,t)}),[]);var i=[],o=new n.Point,s=new n.Point,l=0,u=e.length;do{n.regex.isPathLetter.test(e[l])?(t=e[l],++l):"M"==t?t="L":"m"==t&&(t="l"),i.push(a[t].call(null,e.slice(l,l+=r[t.toUpperCase()]).map(parseFloat),o,s))}while(u>l);return i},bbox:function(){return n.parser.draw||n.prepare(),n.parser.path.setAttribute("d",this.toString()),n.parser.path.getBBox()}}),n.Number=n.invent({create:function(e,t){this.value=0,this.unit=t||"","number"==typeof e?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:"string"==typeof e?(t=e.match(n.regex.numberAndUnit))&&(this.value=parseFloat(t[1]),"%"==t[5]?this.value/=100:"s"==t[5]&&(this.value*=1e3),this.unit=t[5]):e instanceof n.Number&&(this.value=e.valueOf(),this.unit=e.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(e){return e=new n.Number(e),new n.Number(this+e,this.unit||e.unit)},minus:function(e){return e=new n.Number(e),new n.Number(this-e,this.unit||e.unit)},times:function(e){return e=new n.Number(e),new n.Number(this*e,this.unit||e.unit)},divide:function(e){return e=new n.Number(e),new n.Number(this/e,this.unit||e.unit)},to:function(e){var t=new n.Number(this);return"string"==typeof e&&(t.unit=e),t},morph:function(e){return this.destination=new n.Number(e),e.relative&&(this.destination.value+=this.value),this},at:function(e){return this.destination?new n.Number(this.destination).minus(this).times(e).plus(this):this}}}),n.Element=n.invent({create:function(e){this._stroke=n.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=e)&&(this.type=e.nodeName,this.node.instance=this,this._stroke=e.getAttribute("stroke")||this._stroke)},extend:{x:function(e){return this.attr("x",e)},y:function(e){return this.attr("y",e)},cx:function(e){return null==e?this.x()+this.width()/2:this.x(e-this.width()/2)},cy:function(e){return null==e?this.y()+this.height()/2:this.y(e-this.height()/2)},move:function(e,t){return this.x(e).y(t)},center:function(e,t){return this.cx(e).cy(t)},width:function(e){return this.attr("width",e)},height:function(e){return this.attr("height",e)},size:function(e,t){var a=f(this,e,t);return this.width(new n.Number(a.width)).height(new n.Number(a.height))},clone:function(e){this.writeDataToDom();var t=v(this.node.cloneNode(!0));return e?e.add(t):this.after(t),t},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(e){return this.after(e).remove(),e},addTo:function(e){return e.put(this)},putIn:function(e){return e.add(this)},id:function(e){return this.attr("id",e)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var e=this.attr("class");return null==e?[]:e.trim().split(n.regex.delimiter)},hasClass:function(e){return-1!=this.classes().indexOf(e)},addClass:function(e){if(!this.hasClass(e)){var t=this.classes();t.push(e),this.attr("class",t.join(" "))}return this},removeClass:function(e){return this.hasClass(e)&&this.attr("class",this.classes().filter((function(t){return t!=e})).join(" ")),this},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)},reference:function(e){return n.get(this.attr(e))},parent:function(t){var a=this;if(!a.node.parentNode)return null;if(a=n.adopt(a.node.parentNode),!t)return a;for(;a&&a.node instanceof e.SVGElement;){if("string"==typeof t?a.matches(t):a instanceof t)return a;if(!a.node.parentNode||"#document"==a.node.parentNode.nodeName)return null;a=n.adopt(a.node.parentNode)}},doc:function(){return this instanceof n.Doc?this:this.parent(n.Doc)},parents:function(e){var t=[],n=this;do{if(!(n=n.parent(e))||!n.node)break;t.push(n)}while(n.parent);return t},matches:function(e){return function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}(this.node,e)},native:function(){return this.node},svg:function(e){var a=t.createElement("svg");if(!(e&&this instanceof n.Parent))return a.appendChild(e=t.createElement("svg")),this.writeDataToDom(),e.appendChild(this.node.cloneNode(!0)),a.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");a.innerHTML="<svg>"+e.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var r=0,i=a.firstChild.childNodes.length;r<i;r++)this.node.appendChild(a.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each((function(){this.writeDataToDom()})),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(e){return this.dom=e,this},is:function(e){return function(e,t){return e instanceof t}(this,e)}}}),n.easing={"-":function(e){return e},"<>":function(e){return-Math.cos(e*Math.PI)/2+.5},">":function(e){return Math.sin(e*Math.PI/2)},"<":function(e){return 1-Math.cos(e*Math.PI/2)}},n.morph=function(e){return function(t,a){return new n.MorphObj(t,a).at(e)}},n.Situation=n.invent({create:function(e){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new n.Number(e.duration).valueOf(),this.delay=new n.Number(e.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=e.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),n.FX=n.invent({create:function(e){this._target=e,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(e,t,a){"object"===o(e)&&(t=e.ease,a=e.delay,e=e.duration);var r=new n.Situation({duration:e||1e3,delay:a||0,ease:n.easing[t||"-"]||t});return this.queue(r),this},target:function(e){return e&&e instanceof n.Element?(this._target=e,this):this._target},timeToAbsPos:function(e){return(e-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(e){return this.situation.duration/this._speed*e+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=e.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){e.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(e){return("function"==typeof e||e instanceof n.Situation)&&this.situations.push(e),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof n.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var e,t=this.situation;if(t.init)return this;for(var a in t.animations){e=this.target()[a](),Array.isArray(e)||(e=[e]),Array.isArray(t.animations[a])||(t.animations[a]=[t.animations[a]]);for(var r=e.length;r--;)t.animations[a][r]instanceof n.Number&&(e[r]=new n.Number(e[r])),t.animations[a][r]=e[r].morph(t.animations[a][r])}for(var a in t.attrs)t.attrs[a]=new n.MorphObj(this.target().attr(a),t.attrs[a]);for(var a in t.styles)t.styles[a]=new n.MorphObj(this.target().style(a),t.styles[a]);return t.initialTransformation=this.target().matrixify(),t.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(e,t){var n=this.active;return this.active=!1,t&&this.clearQueue(),e&&this.situation&&(!n&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(e){var t=this.last();return this.target().on("finished.fx",(function n(a){a.detail.situation==t&&(e.call(this,t),this.off("finished.fx",n))})),this._callStart()},during:function(e){var t=this.last(),a=function(a){a.detail.situation==t&&e.call(this,a.detail.pos,n.morph(a.detail.pos),a.detail.eased,t)};return this.target().off("during.fx",a).on("during.fx",a),this.after((function(){this.off("during.fx",a)})),this._callStart()},afterAll:function(e){var t=function t(n){e.call(this),this.off("allfinished.fx",t)};return this.target().off("allfinished.fx",t).on("allfinished.fx",t),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(e,t,n){return this.last()[n||"animations"][e]=t,this._callStart()},step:function(e){var t,n,a;e||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(t=Math.max(this.absPos,0),n=Math.floor(t),!0===this.situation.loops||n<this.situation.loops?(this.pos=t-n,a=this.situation.loop,this.situation.loop=n):(this.absPos=this.situation.loops,this.pos=1,a=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-a)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var r=this.situation.ease(this.pos);for(var i in this.situation.once)i>this.lastPos&&i<=r&&(this.situation.once[i].call(this.target(),this.pos,r),delete this.situation.once[i]);return this.active&&this.target().fire("during",{pos:this.pos,eased:r,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=r,this):this},eachAt:function(){var e,t=this,a=this.target(),r=this.situation;for(var i in r.animations)e=[].concat(r.animations[i]).map((function(e){return"string"!=typeof e&&e.at?e.at(r.ease(t.pos),t.pos):e})),a[i].apply(a,e);for(var i in r.attrs)e=[i].concat(r.attrs[i]).map((function(e){return"string"!=typeof e&&e.at?e.at(r.ease(t.pos),t.pos):e})),a.attr.apply(a,e);for(var i in r.styles)e=[i].concat(r.styles[i]).map((function(e){return"string"!=typeof e&&e.at?e.at(r.ease(t.pos),t.pos):e})),a.style.apply(a,e);if(r.transforms.length){e=r.initialTransformation,i=0;for(var o=r.transforms.length;i<o;i++){var s=r.transforms[i];s instanceof n.Matrix?e=s.relative?e.multiply((new n.Matrix).morph(s).at(r.ease(this.pos))):e.morph(s).at(r.ease(this.pos)):(s.relative||s.undo(e.extract()),e=e.multiply(s.at(r.ease(this.pos))))}a.matrix(e)}return this},once:function(e,t,n){var a=this.last();return n||(e=a.ease(e)),a.once[e]=t,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:n.Element,construct:{animate:function(e,t,a){return(this.fx||(this.fx=new n.FX(this))).animate(e,t,a)},delay:function(e){return(this.fx||(this.fx=new n.FX(this))).delay(e)},stop:function(e,t){return this.fx&&this.fx.stop(e,t),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),n.MorphObj=n.invent({create:function(e,t){return n.Color.isColor(t)?new n.Color(e).morph(t):n.regex.delimiter.test(e)?n.regex.pathLetters.test(e)?new n.PathArray(e).morph(t):new n.Array(e).morph(t):n.regex.numberAndUnit.test(t)?new n.Number(e).morph(t):(this.value=e,void(this.destination=t))},extend:{at:function(e,t){return t<1?this.value:this.destination},valueOf:function(){return this.value}}}),n.extend(n.FX,{attr:function(e,t,n){if("object"===o(e))for(var a in e)this.attr(a,e[a]);else this.add(e,t,"attrs");return this},plot:function(e,t,n,a){return 4==arguments.length?this.plot([e,t,n,a]):this.add("plot",new(this.target().morphArray)(e))}}),n.Box=n.invent({create:function(e,t,a,r){if(!("object"!==o(e)||e instanceof n.Element))return n.Box.call(this,null!=e.left?e.left:e.x,null!=e.top?e.top:e.y,e.width,e.height);4==arguments.length&&(this.x=e,this.y=t,this.width=a,this.height=r),m(this)}}),n.BBox=n.invent({create:function(e){if(n.Box.apply(this,[].slice.call(arguments)),e instanceof n.Element){var a;try{if(!t.documentElement.contains){for(var r=e.node;r.parentNode;)r=r.parentNode;if(r!=t)throw new Error("Element not in the dom")}a=e.node.getBBox()}catch(t){if(e instanceof n.Shape){n.parser.draw||n.prepare();var i=e.clone(n.parser.draw.instance).show();i&&i.node&&"function"==typeof i.node.getBBox&&(a=i.node.getBBox()),i&&"function"==typeof i.remove&&i.remove()}else a={x:e.node.clientLeft,y:e.node.clientTop,width:e.node.clientWidth,height:e.node.clientHeight}}n.Box.call(this,a)}},inherit:n.Box,parent:n.Element,construct:{bbox:function(){return new n.BBox(this)}}}),n.BBox.prototype.constructor=n.BBox,n.Matrix=n.invent({create:function(e){var t=g([1,0,0,1,0,0]);e=null===e?t:e instanceof n.Element?e.matrixify():"string"==typeof e?g(e.split(n.regex.delimiter).map(parseFloat)):6==arguments.length?g([].slice.call(arguments)):Array.isArray(e)?g(e):e&&"object"===o(e)?e:t;for(var a=b.length-1;a>=0;--a)this[b[a]]=null!=e[b[a]]?e[b[a]]:t[b[a]]},extend:{extract:function(){var e=p(this,0,1);p(this,1,0);var t=180/Math.PI*Math.atan2(e.y,e.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(t*Math.PI/180)+this.f*Math.sin(t*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(t*Math.PI/180)+this.e*Math.sin(-t*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:t,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new n.Matrix(this)}},clone:function(){return new n.Matrix(this)},morph:function(e){return this.destination=new n.Matrix(e),this},multiply:function(e){return new n.Matrix(this.native().multiply(function(e){return e instanceof n.Matrix||(e=new n.Matrix(e)),e}(e).native()))},inverse:function(){return new n.Matrix(this.native().inverse())},translate:function(e,t){return new n.Matrix(this.native().translate(e||0,t||0))},native:function(){for(var e=n.parser.native.createSVGMatrix(),t=b.length-1;t>=0;t--)e[b[t]]=this[b[t]];return e},toString:function(){return"matrix("+x(this.a)+","+x(this.b)+","+x(this.c)+","+x(this.d)+","+x(this.e)+","+x(this.f)+")"}},parent:n.Element,construct:{ctm:function(){return new n.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof n.Nested){var e=this.rect(1,1),t=e.node.getScreenCTM();return e.remove(),new n.Matrix(t)}return new n.Matrix(this.node.getScreenCTM())}}}),n.Point=n.invent({create:function(e,t){var n;n=Array.isArray(e)?{x:e[0],y:e[1]}:"object"===o(e)?{x:e.x,y:e.y}:null!=e?{x:e,y:null!=t?t:e}:{x:0,y:0},this.x=n.x,this.y=n.y},extend:{clone:function(){return new n.Point(this)},morph:function(e,t){return this.destination=new n.Point(e,t),this}}}),n.extend(n.Element,{point:function(e,t){return new n.Point(e,t).transform(this.screenCTM().inverse())}}),n.extend(n.Element,{attr:function(e,t,a){if(null==e){for(e={},a=(t=this.node.attributes).length-1;a>=0;a--)e[t[a].nodeName]=n.regex.isNumber.test(t[a].nodeValue)?parseFloat(t[a].nodeValue):t[a].nodeValue;return e}if("object"===o(e))for(var r in e)this.attr(r,e[r]);else if(null===t)this.node.removeAttribute(e);else{if(null==t)return null==(t=this.node.getAttribute(e))?n.defaults.attrs[e]:n.regex.isNumber.test(t)?parseFloat(t):t;"stroke-width"==e?this.attr("stroke",parseFloat(t)>0?this._stroke:null):"stroke"==e&&(this._stroke=t),"fill"!=e&&"stroke"!=e||(n.regex.isImage.test(t)&&(t=this.doc().defs().image(t,0,0)),t instanceof n.Image&&(t=this.doc().defs().pattern(0,0,(function(){this.add(t)})))),"number"==typeof t?t=new n.Number(t):n.Color.isColor(t)?t=new n.Color(t):Array.isArray(t)&&(t=new n.Array(t)),"leading"==e?this.leading&&this.leading(t):"string"==typeof a?this.node.setAttributeNS(a,e,t.toString()):this.node.setAttribute(e,t.toString()),!this.rebuild||"font-size"!=e&&"x"!=e||this.rebuild(e,t)}return this}}),n.extend(n.Element,{transform:function(e,t){var a;return"object"!==o(e)?(a=new n.Matrix(this).extract(),"string"==typeof e?a[e]:a):(a=new n.Matrix(this),t=!!t||!!e.relative,null!=e.a&&(a=t?a.multiply(new n.Matrix(e)):new n.Matrix(e)),this.attr("transform",a))}}),n.extend(n.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(n.regex.transforms).slice(0,-1).map((function(e){var t=e.trim().split("(");return[t[0],t[1].split(n.regex.delimiter).map((function(e){return parseFloat(e)}))]})).reduce((function(e,t){return"matrix"==t[0]?e.multiply(g(t[1])):e[t[0]].apply(e,t[1])}),new n.Matrix)},toParent:function(e){if(this==e)return this;var t=this.screenCTM(),n=e.screenCTM().inverse();return this.addTo(e).untransform().transform(n.multiply(t)),this},toDoc:function(){return this.toParent(this.doc())}}),n.Transformation=n.invent({create:function(e,t){if(arguments.length>1&&"boolean"!=typeof t)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(e))for(var n=0,a=this.arguments.length;n<a;++n)this[this.arguments[n]]=e[n];else if(e&&"object"===o(e))for(n=0,a=this.arguments.length;n<a;++n)this[this.arguments[n]]=e[this.arguments[n]];this.inversed=!1,!0===t&&(this.inversed=!0)}}),n.Translate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(e,t){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),n.extend(n.Element,{style:function(e,t){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===o(e))for(var a in e)this.style(a,e[a]);else{if(!n.regex.isCss.test(e))return this.node.style[u(e)];for(e=e.split(/\s*;\s*/).filter((function(e){return!!e})).map((function(e){return e.split(/\s*:\s*/)}));t=e.pop();)this.style(t[0],t[1])}else this.node.style[u(e)]=null===t||n.regex.isBlank.test(t)?"":t;return this}}),n.Parent=n.invent({create:function(e){this.constructor.call(this,e)},inherit:n.Element,extend:{children:function(){return n.utils.map(n.utils.filterSVGElements(this.node.childNodes),(function(e){return n.adopt(e)}))},add:function(e,t){return null==t?this.node.appendChild(e.node):e.node!=this.node.childNodes[t]&&this.node.insertBefore(e.node,this.node.childNodes[t]),this},put:function(e,t){return this.add(e,t),e},has:function(e){return this.index(e)>=0},index:function(e){return[].slice.call(this.node.childNodes).indexOf(e.node)},get:function(e){return n.adopt(this.node.childNodes[e])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(e,t){for(var a=this.children(),r=0,i=a.length;r<i;r++)a[r]instanceof n.Element&&e.apply(a[r],[r,a]),t&&a[r]instanceof n.Container&&a[r].each(e,t);return this},removeElement:function(e){return this.node.removeChild(e.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),n.extend(n.Parent,{ungroup:function(e,t){return 0===t||this instanceof n.Defs||this.node==n.parser.draw||(e=e||(this instanceof n.Doc?this:this.parent(n.Parent)),t=t||1/0,this.each((function(){return this instanceof n.Defs?this:this instanceof n.Parent?this.ungroup(e,t-1):this.toParent(e)})),this.node.firstChild||this.remove()),this},flatten:function(e,t){return this.ungroup(e,t)}}),n.Container=n.invent({create:function(e){this.constructor.call(this,e)},inherit:n.Parent}),n.ViewBox=n.invent({parent:n.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach((function(e){n.Element.prototype[e]=function(t){return n.on(this.node,e,t),this}})),n.listeners=[],n.handlerMap=[],n.listenerId=0,n.on=function(e,t,a,r,i){var o=a.bind(r||e.instance||e),s=(n.handlerMap.indexOf(e)+1||n.handlerMap.push(e))-1,l=t.split(".")[0],c=t.split(".")[1]||"*";n.listeners[s]=n.listeners[s]||{},n.listeners[s][l]=n.listeners[s][l]||{},n.listeners[s][l][c]=n.listeners[s][l][c]||{},a._svgjsListenerId||(a._svgjsListenerId=++n.listenerId),n.listeners[s][l][c][a._svgjsListenerId]=o,e.addEventListener(l,o,i||{passive:!0})},n.off=function(e,t,a){var r=n.handlerMap.indexOf(e),i=t&&t.split(".")[0],o=t&&t.split(".")[1],s="";if(-1!=r)if(a){if("function"==typeof a&&(a=a._svgjsListenerId),!a)return;n.listeners[r][i]&&n.listeners[r][i][o||"*"]&&(e.removeEventListener(i,n.listeners[r][i][o||"*"][a],!1),delete n.listeners[r][i][o||"*"][a])}else if(o&&i){if(n.listeners[r][i]&&n.listeners[r][i][o]){for(var l in n.listeners[r][i][o])n.off(e,[i,o].join("."),l);delete n.listeners[r][i][o]}}else if(o)for(var c in n.listeners[r])for(var s in n.listeners[r][c])o===s&&n.off(e,[c,o].join("."));else if(i){if(n.listeners[r][i]){for(var s in n.listeners[r][i])n.off(e,[i,s].join("."));delete n.listeners[r][i]}}else{for(var c in n.listeners[r])n.off(e,c);delete n.listeners[r],delete n.handlerMap[r]}},n.extend(n.Element,{on:function(e,t,a,r){return n.on(this.node,e,t,a,r),this},off:function(e,t){return n.off(this.node,e,t),this},fire:function(t,a){return t instanceof e.Event?this.node.dispatchEvent(t):this.node.dispatchEvent(t=new n.CustomEvent(t,{detail:a,cancelable:!0})),this._event=t,this},event:function(){return this._event}}),n.Defs=n.invent({create:"defs",inherit:n.Container}),n.G=n.invent({create:"g",inherit:n.Container,extend:{x:function(e){return null==e?this.transform("x"):this.transform({x:e-this.x()},!0)}},construct:{group:function(){return this.put(new n.G)}}}),n.Doc=n.invent({create:function(e){e&&("svg"==(e="string"==typeof e?t.getElementById(e):e).nodeName?this.constructor.call(this,e):(this.constructor.call(this,n.create("svg")),e.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:n.Container,extend:{namespace:function(){return this.attr({xmlns:n.ns,version:"1.1"}).attr("xmlns:xlink",n.xlink,n.xmlns).attr("xmlns:svgjs",n.svgjs,n.xmlns)},defs:function(){var e;return this._defs||((e=this.node.getElementsByTagName("defs")[0])?this._defs=n.adopt(e):this._defs=new n.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,n.parser.draw&&!n.parser.draw.parentNode&&this.node.appendChild(n.parser.draw),this},clone:function(e){this.writeDataToDom();var t=this.node,n=v(t.cloneNode(!0));return e?(e.node||e).appendChild(n.node):t.parentNode.insertBefore(n.node,t.nextSibling),n}}}),n.extend(n.Element,{}),n.Gradient=n.invent({create:function(e){this.constructor.call(this,n.create(e+"Gradient")),this.type=e},inherit:n.Container,extend:{at:function(e,t,a){return this.put(new n.Stop).update(e,t,a)},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(e,t,a){return"transform"==e&&(e="gradientTransform"),n.Container.prototype.attr.call(this,e,t,a)}},construct:{gradient:function(e,t){return this.defs().gradient(e,t)}}}),n.extend(n.Gradient,n.FX,{from:function(e,t){return"radial"==(this._target||this).type?this.attr({fx:new n.Number(e),fy:new n.Number(t)}):this.attr({x1:new n.Number(e),y1:new n.Number(t)})},to:function(e,t){return"radial"==(this._target||this).type?this.attr({cx:new n.Number(e),cy:new n.Number(t)}):this.attr({x2:new n.Number(e),y2:new n.Number(t)})}}),n.extend(n.Defs,{gradient:function(e,t){return this.put(new n.Gradient(e)).update(t)}}),n.Stop=n.invent({create:"stop",inherit:n.Element,extend:{update:function(e){return("number"==typeof e||e instanceof n.Number)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new n.Number(e.offset)),this}}}),n.Pattern=n.invent({create:"pattern",inherit:n.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},toString:function(){return this.fill()},attr:function(e,t,a){return"transform"==e&&(e="patternTransform"),n.Container.prototype.attr.call(this,e,t,a)}},construct:{pattern:function(e,t,n){return this.defs().pattern(e,t,n)}}}),n.extend(n.Defs,{pattern:function(e,t,a){return this.put(new n.Pattern).update(a).attr({x:0,y:0,width:e,height:t,patternUnits:"userSpaceOnUse"})}}),n.Shape=n.invent({create:function(e){this.constructor.call(this,e)},inherit:n.Element}),n.Symbol=n.invent({create:"symbol",inherit:n.Container,construct:{symbol:function(){return this.put(new n.Symbol)}}}),n.Use=n.invent({create:"use",inherit:n.Shape,extend:{element:function(e,t){return this.attr("href",(t||"")+"#"+e,n.xlink)}},construct:{use:function(e,t){return this.put(new n.Use).element(e,t)}}}),n.Rect=n.invent({create:"rect",inherit:n.Shape,construct:{rect:function(e,t){return this.put(new n.Rect).size(e,t)}}}),n.Circle=n.invent({create:"circle",inherit:n.Shape,construct:{circle:function(e){return this.put(new n.Circle).rx(new n.Number(e).divide(2)).move(0,0)}}}),n.extend(n.Circle,n.FX,{rx:function(e){return this.attr("r",e)},ry:function(e){return this.rx(e)}}),n.Ellipse=n.invent({create:"ellipse",inherit:n.Shape,construct:{ellipse:function(e,t){return this.put(new n.Ellipse).size(e,t).move(0,0)}}}),n.extend(n.Ellipse,n.Rect,n.FX,{rx:function(e){return this.attr("rx",e)},ry:function(e){return this.attr("ry",e)}}),n.extend(n.Circle,n.Ellipse,{x:function(e){return null==e?this.cx()-this.rx():this.cx(e+this.rx())},y:function(e){return null==e?this.cy()-this.ry():this.cy(e+this.ry())},cx:function(e){return null==e?this.attr("cx"):this.attr("cx",e)},cy:function(e){return null==e?this.attr("cy"):this.attr("cy",e)},width:function(e){return null==e?2*this.rx():this.rx(new n.Number(e).divide(2))},height:function(e){return null==e?2*this.ry():this.ry(new n.Number(e).divide(2))},size:function(e,t){var a=f(this,e,t);return this.rx(new n.Number(a.width).divide(2)).ry(new n.Number(a.height).divide(2))}}),n.Line=n.invent({create:"line",inherit:n.Shape,extend:{array:function(){return new n.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(e,t,a,r){return null==e?this.array():(e=void 0!==t?{x1:e,y1:t,x2:a,y2:r}:new n.PointArray(e).toLine(),this.attr(e))},move:function(e,t){return this.attr(this.array().move(e,t).toLine())},size:function(e,t){var n=f(this,e,t);return this.attr(this.array().size(n.width,n.height).toLine())}},construct:{line:function(e,t,a,r){return n.Line.prototype.plot.apply(this.put(new n.Line),null!=e?[e,t,a,r]:[0,0,0,0])}}}),n.Polyline=n.invent({create:"polyline",inherit:n.Shape,construct:{polyline:function(e){return this.put(new n.Polyline).plot(e||new n.PointArray)}}}),n.Polygon=n.invent({create:"polygon",inherit:n.Shape,construct:{polygon:function(e){return this.put(new n.Polygon).plot(e||new n.PointArray)}}}),n.extend(n.Polyline,n.Polygon,{array:function(){return this._array||(this._array=new n.PointArray(this.attr("points")))},plot:function(e){return null==e?this.array():this.clear().attr("points","string"==typeof e?e:this._array=new n.PointArray(e))},clear:function(){return delete this._array,this},move:function(e,t){return this.attr("points",this.array().move(e,t))},size:function(e,t){var n=f(this,e,t);return this.attr("points",this.array().size(n.width,n.height))}}),n.extend(n.Line,n.Polyline,n.Polygon,{morphArray:n.PointArray,x:function(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)},width:function(e){var t=this.bbox();return null==e?t.width:this.size(e,t.height)},height:function(e){var t=this.bbox();return null==e?t.height:this.size(t.width,e)}}),n.Path=n.invent({create:"path",inherit:n.Shape,extend:{morphArray:n.PathArray,array:function(){return this._array||(this._array=new n.PathArray(this.attr("d")))},plot:function(e){return null==e?this.array():this.clear().attr("d","string"==typeof e?e:this._array=new n.PathArray(e))},clear:function(){return delete this._array,this}},construct:{path:function(e){return this.put(new n.Path).plot(e||new n.PathArray)}}}),n.Image=n.invent({create:"image",inherit:n.Shape,extend:{load:function(t){if(!t)return this;var a=this,r=new e.Image;return n.on(r,"load",(function(){n.off(r);var e=a.parent(n.Pattern);null!==e&&(0==a.width()&&0==a.height()&&a.size(r.width,r.height),e&&0==e.width()&&0==e.height()&&e.size(a.width(),a.height()),"function"==typeof a._loaded&&a._loaded.call(a,{width:r.width,height:r.height,ratio:r.width/r.height,url:t}))})),n.on(r,"error",(function(e){n.off(r),"function"==typeof a._error&&a._error.call(a,e)})),this.attr("href",r.src=this.src=t,n.xlink)},loaded:function(e){return this._loaded=e,this},error:function(e){return this._error=e,this}},construct:{image:function(e,t,a){return this.put(new n.Image).load(e).size(t||0,a||t||0)}}}),n.Text=n.invent({create:function(){this.constructor.call(this,n.create("text")),this.dom.leading=new n.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",n.defaults.attrs["font-family"])},inherit:n.Shape,extend:{x:function(e){return null==e?this.attr("x"):this.attr("x",e)},text:function(e){if(void 0===e){e="";for(var t=this.node.childNodes,a=0,r=t.length;a<r;++a)0!=a&&3!=t[a].nodeType&&1==n.adopt(t[a]).dom.newLined&&(e+="\n"),e+=t[a].textContent;return e}if(this.clear().build(!0),"function"==typeof e)e.call(this,this);else{a=0;for(var i=(e=e.split("\n")).length;a<i;a++)this.tspan(e[a]).newLine()}return this.build(!1).rebuild()},size:function(e){return this.attr("font-size",e).rebuild()},leading:function(e){return null==e?this.dom.leading:(this.dom.leading=new n.Number(e),this.rebuild())},lines:function(){var e=(this.textPath&&this.textPath()||this).node,t=n.utils.map(n.utils.filterSVGElements(e.childNodes),(function(e){return n.adopt(e)}));return new n.Set(t)},rebuild:function(e){if("boolean"==typeof e&&(this._rebuild=e),this._rebuild){var t=this,a=0,r=this.dom.leading*new n.Number(this.attr("font-size"));this.lines().each((function(){this.dom.newLined&&(t.textPath()||this.attr("x",t.attr("x")),"\n"==this.text()?a+=r:(this.attr("dy",r+a),a=0))})),this.fire("rebuild")}return this},build:function(e){return this._build=!!e,this},setData:function(e){return this.dom=e,this.dom.leading=new n.Number(e.leading||1.3),this}},construct:{text:function(e){return this.put(new n.Text).text(e)},plain:function(e){return this.put(new n.Text).plain(e)}}}),n.Tspan=n.invent({create:"tspan",inherit:n.Shape,extend:{text:function(e){return null==e?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof e?e.call(this,this):this.plain(e),this)},dx:function(e){return this.attr("dx",e)},dy:function(e){return this.attr("dy",e)},newLine:function(){var e=this.parent(n.Text);return this.dom.newLined=!0,this.dy(e.dom.leading*e.attr("font-size")).attr("x",e.x())}}}),n.extend(n.Text,n.Tspan,{plain:function(e){return!1===this._build&&this.clear(),this.node.appendChild(t.createTextNode(e)),this},tspan:function(e){var t=(this.textPath&&this.textPath()||this).node,a=new n.Tspan;return!1===this._build&&this.clear(),t.appendChild(a.node),a.text(e)},clear:function(){for(var e=(this.textPath&&this.textPath()||this).node;e.hasChildNodes();)e.removeChild(e.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),n.TextPath=n.invent({create:"textPath",inherit:n.Parent,parent:n.Text,construct:{morphArray:n.PathArray,array:function(){var e=this.track();return e?e.array():null},plot:function(e){var t=this.track(),n=null;return t&&(n=t.plot(e)),null==e?n:this},track:function(){var e=this.textPath();if(e)return e.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return n.adopt(this.node.firstChild)}}}),n.Nested=n.invent({create:function(){this.constructor.call(this,n.create("svg")),this.style("overflow","visible")},inherit:n.Container,construct:{nested:function(){return this.put(new n.Nested)}}});var l={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(e,t){return"color"==t?e:e+"-"+t}};function c(e,t,a,r){return a+r.replace(n.regex.dots," .")}function u(e){return e.toLowerCase().replace(/-(.)/g,(function(e,t){return t.toUpperCase()}))}function h(e){return e.charAt(0).toUpperCase()+e.slice(1)}function d(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function f(e,t,n){if(null==t||null==n){var a=e.bbox();null==t?t=a.width/a.height*n:null==n&&(n=a.height/a.width*t)}return{width:t,height:n}}function p(e,t,n){return{x:t*e.a+n*e.c+0,y:t*e.b+n*e.d+0}}function g(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}function v(t){for(var a=t.childNodes.length-1;a>=0;a--)t.childNodes[a]instanceof e.SVGElement&&v(t.childNodes[a]);return n.adopt(t).id(n.eid(t.nodeName))}function m(e){return null==e.x&&(e.x=0,e.y=0,e.width=0,e.height=0),e.w=e.width,e.h=e.height,e.x2=e.x+e.width,e.y2=e.y+e.height,e.cx=e.x+e.width/2,e.cy=e.y+e.height/2,e}function x(e){return Math.abs(e)>1e-37?e:0}["fill","stroke"].forEach((function(e){var t={};t[e]=function(t){if(void 0===t)return this;if("string"==typeof t||n.Color.isRgb(t)||t&&"function"==typeof t.fill)this.attr(e,t);else for(var a=l[e].length-1;a>=0;a--)null!=t[l[e][a]]&&this.attr(l.prefix(e,l[e][a]),t[l[e][a]]);return this},n.extend(n.Element,n.FX,t)})),n.extend(n.Element,n.FX,{translate:function(e,t){return this.transform({x:e,y:t})},matrix:function(e){return this.attr("transform",new n.Matrix(6==arguments.length?[].slice.call(arguments):e))},opacity:function(e){return this.attr("opacity",e)},dx:function(e){return this.x(new n.Number(e).plus(this instanceof n.FX?0:this.x()),!0)},dy:function(e){return this.y(new n.Number(e).plus(this instanceof n.FX?0:this.y()),!0)}}),n.extend(n.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(e){return this.node.getPointAtLength(e)}}),n.Set=n.invent({create:function(e){Array.isArray(e)?this.members=e:this.clear()},extend:{add:function(){for(var e=[].slice.call(arguments),t=0,n=e.length;t<n;t++)this.members.push(e[t]);return this},remove:function(e){var t=this.index(e);return t>-1&&this.members.splice(t,1),this},each:function(e){for(var t=0,n=this.members.length;t<n;t++)e.apply(this.members[t],[t,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(e){return this.index(e)>=0},index:function(e){return this.members.indexOf(e)},get:function(e){return this.members[e]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(e){return new n.Set(e)}}}),n.FX.Set=n.invent({create:function(e){this.set=e}}),n.Set.inherit=function(){var e=[];for(var t in n.Shape.prototype)"function"==typeof n.Shape.prototype[t]&&"function"!=typeof n.Set.prototype[t]&&e.push(t);for(var t in e.forEach((function(e){n.Set.prototype[e]=function(){for(var t=0,a=this.members.length;t<a;t++)this.members[t]&&"function"==typeof this.members[t][e]&&this.members[t][e].apply(this.members[t],arguments);return"animate"==e?this.fx||(this.fx=new n.FX.Set(this)):this}})),e=[],n.FX.prototype)"function"==typeof n.FX.prototype[t]&&"function"!=typeof n.FX.Set.prototype[t]&&e.push(t);e.forEach((function(e){n.FX.Set.prototype[e]=function(){for(var t=0,n=this.set.members.length;t<n;t++)this.set.members[t].fx[e].apply(this.set.members[t].fx,arguments);return this}}))},n.extend(n.Element,{}),n.extend(n.Element,{remember:function(e,t){if("object"===o(arguments[0]))for(var n in e)this.remember(n,e[n]);else{if(1==arguments.length)return this.memory()[e];this.memory()[e]=t}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var e=arguments.length-1;e>=0;e--)delete this.memory()[arguments[e]];return this},memory:function(){return this._memory||(this._memory={})}}),n.get=function(e){var a=t.getElementById(function(e){var t=(e||"").toString().match(n.regex.reference);if(t)return t[1]}(e)||e);return n.adopt(a)},n.select=function(e,a){return new n.Set(n.utils.map((a||t).querySelectorAll(e),(function(e){return n.adopt(e)})))},n.extend(n.Parent,{select:function(e){return n.select(e,this.node)}});var b="abcdef".split("");if("function"!=typeof e.CustomEvent){var y=function(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var a=t.createEvent("CustomEvent");return a.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),a};y.prototype=e.Event.prototype,n.CustomEvent=y}else n.CustomEvent=e.CustomEvent;return n},void 0!==(a=function(){return Me(Le,Le.document)}.call(t,n,t,e))&&(e.exports=a),function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(e,t){return this.add(e,t),!e.attr("in")&&this.autoSetIn&&e.attr("in",this.source),e.attr("result")||e.attr("result",e),e},blend:function(e,t,n){return this.put(new SVG.BlendEffect(e,t,n))},colorMatrix:function(e,t){return this.put(new SVG.ColorMatrixEffect(e,t))},convolveMatrix:function(e){return this.put(new SVG.ConvolveMatrixEffect(e))},componentTransfer:function(e){return this.put(new SVG.ComponentTransferEffect(e))},composite:function(e,t,n){return this.put(new SVG.CompositeEffect(e,t,n))},flood:function(e,t){return this.put(new SVG.FloodEffect(e,t))},offset:function(e,t){return this.put(new SVG.OffsetEffect(e,t))},image:function(e){return this.put(new SVG.ImageEffect(e))},merge:function(){var e=[void 0];for(var t in arguments)e.push(arguments[t]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,e)))},gaussianBlur:function(e,t){return this.put(new SVG.GaussianBlurEffect(e,t))},morphology:function(e,t){return this.put(new SVG.MorphologyEffect(e,t))},diffuseLighting:function(e,t,n){return this.put(new SVG.DiffuseLightingEffect(e,t,n))},displacementMap:function(e,t,n,a,r){return this.put(new SVG.DisplacementMapEffect(e,t,n,a,r))},specularLighting:function(e,t,n,a){return this.put(new SVG.SpecularLightingEffect(e,t,n,a))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(e,t,n,a,r){return this.put(new SVG.TurbulenceEffect(e,t,n,a,r))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(e){var t=this.put(new SVG.Filter);return"function"==typeof e&&e.call(t,t),t}}),SVG.extend(SVG.Container,{filter:function(e){return this.defs().filter(e)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(e){return this.filterer=e instanceof SVG.Element?e:this.doc().filter(e),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(e){return this.filterer&&!0===e&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",e)},result:function(e){return null==e?this.attr("result"):this.attr("result",e)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",e)},result:function(e){return null==e?this.attr("result"):this.attr("result",e)},toString:function(){return this.result()}}});var e={blend:function(e,t){return this.parent()&&this.parent().blend(this,e,t)},colorMatrix:function(e,t){return this.parent()&&this.parent().colorMatrix(e,t).in(this)},convolveMatrix:function(e){return this.parent()&&this.parent().convolveMatrix(e).in(this)},componentTransfer:function(e){return this.parent()&&this.parent().componentTransfer(e).in(this)},composite:function(e,t){return this.parent()&&this.parent().composite(this,e,t)},flood:function(e,t){return this.parent()&&this.parent().flood(e,t)},offset:function(e,t){return this.parent()&&this.parent().offset(e,t).in(this)},image:function(e){return this.parent()&&this.parent().image(e)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(e,t){return this.parent()&&this.parent().gaussianBlur(e,t).in(this)},morphology:function(e,t){return this.parent()&&this.parent().morphology(e,t).in(this)},diffuseLighting:function(e,t,n){return this.parent()&&this.parent().diffuseLighting(e,t,n).in(this)},displacementMap:function(e,t,n,a){return this.parent()&&this.parent().displacementMap(this,e,t,n,a)},specularLighting:function(e,t,n,a){return this.parent()&&this.parent().specularLighting(e,t,n,a).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(e,t,n,a,r){return this.parent()&&this.parent().turbulence(e,t,n,a,r).in(this)}};SVG.extend(SVG.Effect,e),SVG.extend(SVG.ParentEffect,e),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(e){this.attr("in",e)}}});var t={blend:function(e,t,n){this.attr({in:e,in2:t,mode:n||"normal"})},colorMatrix:function(e,t){"matrix"==e&&(t=r(t)),this.attr({type:e,values:void 0===t?null:t})},convolveMatrix:function(e){e=r(e),this.attr({order:Math.sqrt(e.split(" ").length),kernelMatrix:e})},composite:function(e,t,n){this.attr({in:e,in2:t,operator:n})},flood:function(e,t){this.attr("flood-color",e),null!=t&&this.attr("flood-opacity",t)},offset:function(e,t){this.attr({dx:e,dy:t})},image:function(e){this.attr("href",e,SVG.xlink)},displacementMap:function(e,t,n,a,r){this.attr({in:e,in2:t,scale:n,xChannelSelector:a,yChannelSelector:r})},gaussianBlur:function(e,t){null!=e||null!=t?this.attr("stdDeviation",i(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(e,t){this.attr({operator:e,radius:t})},tile:function(){},turbulence:function(e,t,n,a,r){this.attr({numOctaves:t,seed:n,stitchTiles:a,baseFrequency:e,type:r})}},n={merge:function(){var e;if(arguments[0]instanceof SVG.Set){var t=this;arguments[0].each((function(e){this instanceof SVG.MergeNode?t.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&t.put(new SVG.MergeNode(this))}))}else{e=Array.isArray(arguments[0])?arguments[0]:arguments;for(var n=0;n<e.length;n++)e[n]instanceof SVG.MergeNode?this.put(e[n]):this.put(new SVG.MergeNode(e[n]))}},componentTransfer:function(e){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(e){this[e]=new(SVG["Func"+e.toUpperCase()])("identity"),this.rgb.add(this[e]),this.node.appendChild(this[e].node)}.bind(this)),e)for(var t in e.rgb&&(["r","g","b"].forEach(function(t){this[t].attr(e.rgb)}.bind(this)),delete e.rgb),e)this[t].attr(e[t])},diffuseLighting:function(e,t,n){this.attr({surfaceScale:e,diffuseConstant:t,kernelUnitLength:n})},specularLighting:function(e,t,n,a){this.attr({surfaceScale:e,diffuseConstant:t,specularExponent:n,kernelUnitLength:a})}},a={distantLight:function(e,t){this.attr({azimuth:e,elevation:t})},pointLight:function(e,t,n){this.attr({x:e,y:t,z:n})},spotLight:function(e,t,n,a,r,i){this.attr({x:e,y:t,z:n,pointsAtX:a,pointsAtY:r,pointsAtZ:i})},mergeNode:function(e){this.attr("in",e)}};function r(e){return Array.isArray(e)&&(e=new SVG.Array(e)),e.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function i(e){if(!Array.isArray(e))return e;for(var t=0,n=e.length,a=[];t<n;t++)a.push(e[t]);return a.join(" ")}function o(){var e=function(){};for(var t in"function"==typeof arguments[arguments.length-1]&&(e=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var n in arguments[t])e(arguments[t][n],n,arguments[t])}["r","g","b","a"].forEach((function(e){a["Func"+e.toUpperCase()]=function(e){switch(this.attr("type",e),e){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}})),o(t,(function(e,t){var n=t.charAt(0).toUpperCase()+t.slice(1);SVG[n+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),e.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})})),o(n,(function(e,t){var n=t.charAt(0).toUpperCase()+t.slice(1);SVG[n+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),e.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})})),o(a,(function(e,t){var n=t.charAt(0).toUpperCase()+t.slice(1);SVG[n]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),e.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})})),SVG.extend(SVG.MergeEffect,{in:function(e){return e instanceof SVG.MergeNode?this.add(e,0):this.add(new SVG.MergeNode(e),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",e)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function e(e,r,i,o,s,l,c){for(var u=e.slice(r,i||c),h=o.slice(s,l||c),d=0,f={pos:[0,0],start:[0,0]},p={pos:[0,0],start:[0,0]};u[d]=t.call(f,u[d]),h[d]=t.call(p,h[d]),u[d][0]!=h[d][0]||"M"==u[d][0]||"A"==u[d][0]&&(u[d][4]!=h[d][4]||u[d][5]!=h[d][5])?(Array.prototype.splice.apply(u,[d,1].concat(a.call(f,u[d]))),Array.prototype.splice.apply(h,[d,1].concat(a.call(p,h[d])))):(u[d]=n.call(f,u[d]),h[d]=n.call(p,h[d])),++d!=u.length||d!=h.length;)d==u.length&&u.push(["C",f.pos[0],f.pos[1],f.pos[0],f.pos[1],f.pos[0],f.pos[1]]),d==h.length&&h.push(["C",p.pos[0],p.pos[1],p.pos[0],p.pos[1],p.pos[0],p.pos[1]]);return{start:u,dest:h}}function t(e){switch(e[0]){case"z":case"Z":e[0]="L",e[1]=this.start[0],e[2]=this.start[1];break;case"H":e[0]="L",e[2]=this.pos[1];break;case"V":e[0]="L",e[2]=e[1],e[1]=this.pos[0];break;case"T":e[0]="Q",e[3]=e[1],e[4]=e[2],e[1]=this.reflection[1],e[2]=this.reflection[0];break;case"S":e[0]="C",e[6]=e[4],e[5]=e[3],e[4]=e[2],e[3]=e[1],e[2]=this.reflection[1],e[1]=this.reflection[0]}return e}function n(e){var t=e.length;return this.pos=[e[t-2],e[t-1]],-1!="SCQT".indexOf(e[0])&&(this.reflection=[2*this.pos[0]-e[t-4],2*this.pos[1]-e[t-3]]),e}function a(e){var t=[e];switch(e[0]){case"M":return this.pos=this.start=[e[1],e[2]],t;case"L":e[5]=e[3]=e[1],e[6]=e[4]=e[2],e[1]=this.pos[0],e[2]=this.pos[1];break;case"Q":e[6]=e[4],e[5]=e[3],e[4]=1*e[4]/3+2*e[2]/3,e[3]=1*e[3]/3+2*e[1]/3,e[2]=1*this.pos[1]/3+2*e[2]/3,e[1]=1*this.pos[0]/3+2*e[1]/3;break;case"A":e=(t=function(e,t){var n,a,r,i,o,s,l,c,u,h,d,f,p,g,v,m,x,b,y,k,w,S,C,I,A,T,N=Math.abs(t[1]),E=Math.abs(t[2]),R=t[3]%360,F=t[4],D=t[5],L=t[6],M=t[7],O=new SVG.Point(e),P=new SVG.Point(L,M),_=[];if(0===N||0===E||O.x===P.x&&O.y===P.y)return[["C",O.x,O.y,P.x,P.y,P.x,P.y]];for((a=(n=new SVG.Point((O.x-P.x)/2,(O.y-P.y)/2).transform((new SVG.Matrix).rotate(R))).x*n.x/(N*N)+n.y*n.y/(E*E))>1&&(N*=a=Math.sqrt(a),E*=a),r=(new SVG.Matrix).rotate(R).scale(1/N,1/E).rotate(-R),O=O.transform(r),s=(i=[(P=P.transform(r)).x-O.x,P.y-O.y])[0]*i[0]+i[1]*i[1],o=Math.sqrt(s),i[0]/=o,i[1]/=o,l=s<4?Math.sqrt(1-s/4):0,F===D&&(l*=-1),c=new SVG.Point((P.x+O.x)/2+l*-i[1],(P.y+O.y)/2+l*i[0]),u=new SVG.Point(O.x-c.x,O.y-c.y),h=new SVG.Point(P.x-c.x,P.y-c.y),d=Math.acos(u.x/Math.sqrt(u.x*u.x+u.y*u.y)),u.y<0&&(d*=-1),f=Math.acos(h.x/Math.sqrt(h.x*h.x+h.y*h.y)),h.y<0&&(f*=-1),D&&d>f&&(f+=2*Math.PI),!D&&d<f&&(f-=2*Math.PI),m=[],x=d,p=(f-d)/(g=Math.ceil(2*Math.abs(d-f)/Math.PI)),v=4*Math.tan(p/4)/3,w=0;w<=g;w++)y=Math.cos(x),b=Math.sin(x),k=new SVG.Point(c.x+y,c.y+b),m[w]=[new SVG.Point(k.x+v*b,k.y-v*y),k,new SVG.Point(k.x-v*b,k.y+v*y)],x+=p;for(m[0][0]=m[0][1].clone(),m[m.length-1][2]=m[m.length-1][1].clone(),r=(new SVG.Matrix).rotate(R).scale(N,E).rotate(-R),w=0,S=m.length;w<S;w++)m[w][0]=m[w][0].transform(r),m[w][1]=m[w][1].transform(r),m[w][2]=m[w][2].transform(r);for(w=1,S=m.length;w<S;w++)C=(k=m[w-1][2]).x,I=k.y,A=(k=m[w][0]).x,T=k.y,L=(k=m[w][1]).x,M=k.y,_.push(["C",C,I,A,T,L,M]);return _}(this.pos,e))[0]}return e[0]="C",this.pos=[e[5],e[6]],this.reflection=[2*e[5]-e[3],2*e[6]-e[4]],t}function r(e,t){if(!1===t)return!1;for(var n=t,a=e.length;n<a;++n)if("M"==e[n][0])return n;return!1}SVG.extend(SVG.PathArray,{morph:function(t){for(var n=this.value,a=this.parse(t),i=0,o=0,s=!1,l=!1;!1!==i||!1!==o;){var c;s=r(n,!1!==i&&i+1),l=r(a,!1!==o&&o+1),!1===i&&(i=0==(c=new SVG.PathArray(u.start).bbox()).height||0==c.width?n.push(n[0])-1:n.push(["M",c.x+c.width/2,c.y+c.height/2])-1),!1===o&&(o=0==(c=new SVG.PathArray(u.dest).bbox()).height||0==c.width?a.push(a[0])-1:a.push(["M",c.x+c.width/2,c.y+c.height/2])-1);var u=e(n,i,s,a,o,l);n=n.slice(0,i).concat(u.start,!1===s?[]:n.slice(s)),a=a.slice(0,o).concat(u.dest,!1===l?[]:a.slice(l)),i=!1!==s&&i+u.start.length,o=!1!==l&&o+u.dest.length}return this.value=n,this.destination=new SVG.PathArray,this.destination.value=a,this}})}(),function(){function e(e){e.remember("_draggable",this),this.el=e}e.prototype.init=function(e,t){var n=this;this.constraint=e,this.value=t,this.el.on("mousedown.drag",(function(e){n.start(e)})),this.el.on("touchstart.drag",(function(e){n.start(e)}))},e.prototype.transformPoint=function(e,t){var n=(e=e||window.event).changedTouches&&e.changedTouches[0]||e;return this.p.x=n.clientX-(t||0),this.p.y=n.clientY,this.p.matrixTransform(this.m)},e.prototype.getBBox=function(){var e=this.el.bbox();return this.el instanceof SVG.Nested&&(e=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(e.x=this.el.x(),e.y=this.el.y()),e},e.prototype.start=function(e){if("click"!=e.type&&"mousedown"!=e.type&&"mousemove"!=e.type||1==(e.which||e.buttons)){var t=this;if(this.el.fire("beforedrag",{event:e,handler:this}),!this.el.event().defaultPrevented){e.preventDefault(),e.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var n,a=this.getBBox();if(this.el instanceof SVG.Text)switch(n=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":n/=2;break;case"start":n=0}this.startPoints={point:this.transformPoint(e,n),box:a,transform:this.el.transform()},SVG.on(window,"mousemove.drag",(function(e){t.drag(e)})),SVG.on(window,"touchmove.drag",(function(e){t.drag(e)})),SVG.on(window,"mouseup.drag",(function(e){t.end(e)})),SVG.on(window,"touchend.drag",(function(e){t.end(e)})),this.el.fire("dragstart",{event:e,p:this.startPoints.point,m:this.m,handler:this})}}},e.prototype.drag=function(e){var t=this.getBBox(),n=this.transformPoint(e),a=this.startPoints.box.x+n.x-this.startPoints.point.x,r=this.startPoints.box.y+n.y-this.startPoints.point.y,i=this.constraint,o=n.x-this.startPoints.point.x,s=n.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:e,p:n,m:this.m,handler:this}),this.el.event().defaultPrevented)return n;if("function"==typeof i){var l=i.call(this.el,a,r,this.m);"boolean"==typeof l&&(l={x:l,y:l}),!0===l.x?this.el.x(a):!1!==l.x&&this.el.x(l.x),!0===l.y?this.el.y(r):!1!==l.y&&this.el.y(l.y)}else"object"==typeof i&&(null!=i.minX&&a<i.minX?o=(a=i.minX)-this.startPoints.box.x:null!=i.maxX&&a>i.maxX-t.width&&(o=(a=i.maxX-t.width)-this.startPoints.box.x),null!=i.minY&&r<i.minY?s=(r=i.minY)-this.startPoints.box.y:null!=i.maxY&&r>i.maxY-t.height&&(s=(r=i.maxY-t.height)-this.startPoints.box.y),null!=i.snapToGrid&&(a-=a%i.snapToGrid,r-=r%i.snapToGrid,o-=o%i.snapToGrid,s-=s%i.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:o,y:s},!0):this.el.move(a,r));return n},e.prototype.end=function(e){var t=this.drag(e);this.el.fire("dragend",{event:e,p:t,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(t,n){"function"!=typeof t&&"object"!=typeof t||(n=t,t=!0);var a=this.remember("_draggable")||new e(this);return(t=void 0===t||t)?a.init(n||{},t):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function e(e){this.el=e,e.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(e,t,n){var a="string"!=typeof e?e:t[e];return n?a/2:a},this.pointCoords=function(e,t){var n=this.pointsList[e];return{x:this.pointCoord(n[0],t,"t"===e||"b"===e),y:this.pointCoord(n[1],t,"r"===e||"l"===e)}}}e.prototype.init=function(e,t){var n=this.el.bbox();this.options={};var a=this.el.selectize.defaults.points;for(var r in this.el.selectize.defaults)this.options[r]=this.el.selectize.defaults[r],void 0!==t[r]&&(this.options[r]=t[r]);var i=["points","pointsExclude"];for(var r in i){var o=this.options[i[r]];"string"==typeof o?o=o.length>0?o.split(/\s*,\s*/i):[]:"boolean"==typeof o&&"points"===i[r]&&(o=o?a:[]),this.options[i[r]]=o}this.options.points=[a,this.options.points].reduce((function(e,t){return e.filter((function(e){return t.indexOf(e)>-1}))})),this.options.points=[this.options.points,this.options.pointsExclude].reduce((function(e,t){return e.filter((function(e){return t.indexOf(e)<0}))})),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(n.x,n.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(e):this.selectRect(e),this.observe(),this.cleanup()},e.prototype.selectPoints=function(e){return this.pointSelection.isSelected=e,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},e.prototype.getPointArray=function(){var e=this.el.bbox();return this.el.array().valueOf().map((function(t){return[t[0]-e.x,t[1]-e.y]}))},e.prototype.drawPoints=function(){for(var e=this,t=this.getPointArray(),n=0,a=t.length;n<a;++n){var r=function(t){return function(n){(n=n||window.event).preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation();var a=n.pageX||n.touches[0].pageX,r=n.pageY||n.touches[0].pageY;e.el.fire("point",{x:a,y:r,i:t,event:n})}}(n),i=this.drawPoint(t[n][0],t[n][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",r).on("mousedown",r);this.pointSelection.set.add(i)}},e.prototype.drawPoint=function(e,t){var n=this.options.pointType;switch(n){case"circle":return this.drawCircle(e,t);case"rect":return this.drawRect(e,t);default:if("function"==typeof n)return n.call(this,e,t);throw new Error("Unknown "+n+" point type!")}},e.prototype.drawCircle=function(e,t){return this.nested.circle(this.options.pointSize).center(e,t)},e.prototype.drawRect=function(e,t){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(e,t)},e.prototype.updatePointSelection=function(){var e=this.getPointArray();this.pointSelection.set.each((function(t){this.cx()===e[t][0]&&this.cy()===e[t][1]||this.center(e[t][0],e[t][1])}))},e.prototype.updateRectSelection=function(){var e=this,t=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:t.width,height:t.height}),this.options.points.length&&this.options.points.map((function(n,a){var r=e.pointCoords(n,t);e.rectSelection.set.get(a+1).center(r.x,r.y)})),this.options.rotationPoint){var n=this.rectSelection.set.length();this.rectSelection.set.get(n-1).center(t.width/2,20)}},e.prototype.selectRect=function(e){var t=this,n=this.el.bbox();function a(e){return function(n){(n=n||window.event).preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation();var a=n.pageX||n.touches[0].pageX,r=n.pageY||n.touches[0].pageY;t.el.fire(e,{x:a,y:r,event:n})}}if(this.rectSelection.isSelected=e,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(n.width,n.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map((function(e,r){var i=t.pointCoords(e,n),o=t.drawPoint(i.x,i.y).attr("class",t.options.classPoints+"_"+e).on("mousedown",a(e)).on("touchstart",a(e));t.rectSelection.set.add(o)})),this.rectSelection.set.each((function(){this.addClass(t.options.classPoints)}))),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var r=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation();var n=e.pageX||e.touches[0].pageX,a=e.pageY||e.touches[0].pageY;t.el.fire("rot",{x:n,y:a,event:e})},i=this.drawPoint(n.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",r).on("mousedown",r);this.rectSelection.set.add(i)}},e.prototype.handler=function(){var e=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(e.x,e.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},e.prototype.observe=function(){var e=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver((function(){e.handler()})),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(e){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",(function(){e.handler()}))},e.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each((function(){this.remove()})),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each((function(){this.remove()})),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(t,n){return"object"==typeof t&&(n=t,t=!0),(this.remember("_selectHandler")||new e(this)).init(void 0===t||t,n||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function e(e){e.remember("_resizeHandler",this),this.el=e,this.parameters={},this.lastUpdateCall=null,this.p=e.doc().node.createSVGPoint()}e.prototype.transformPoint=function(e,t,n){return this.p.x=e-(this.offset.x-window.pageXOffset),this.p.y=t-(this.offset.y-window.pageYOffset),this.p.matrixTransform(n||this.m)},e.prototype._extractPosition=function(e){return{x:null!=e.clientX?e.clientX:e.touches[0].clientX,y:null!=e.clientY?e.clientY:e.touches[0].clientY}},e.prototype.init=function(e){var t=this;if(this.stop(),"stop"!==e){for(var n in this.options={},this.el.resize.defaults)this.options[n]=this.el.resize.defaults[n],void 0!==e[n]&&(this.options[n]=e[n]);this.el.on("lt.resize",(function(e){t.resize(e||window.event)})),this.el.on("rt.resize",(function(e){t.resize(e||window.event)})),this.el.on("rb.resize",(function(e){t.resize(e||window.event)})),this.el.on("lb.resize",(function(e){t.resize(e||window.event)})),this.el.on("t.resize",(function(e){t.resize(e||window.event)})),this.el.on("r.resize",(function(e){t.resize(e||window.event)})),this.el.on("b.resize",(function(e){t.resize(e||window.event)})),this.el.on("l.resize",(function(e){t.resize(e||window.event)})),this.el.on("rot.resize",(function(e){t.resize(e||window.event)})),this.el.on("point.resize",(function(e){t.resize(e||window.event)})),this.update()}},e.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},e.prototype.resize=function(e){var t=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var n=this._extractPosition(e.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(n.x,n.y),x:e.detail.x,y:e.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==e.detail.i){var a=this.el.array().valueOf();this.parameters.i=e.detail.i,this.parameters.pointCoords=[a[e.detail.i][0],a[e.detail.i][1]]}switch(e.type){case"lt":this.calc=function(e,t){var n=this.snapToGrid(e,t);if(this.parameters.box.width-n[0]>0&&this.parameters.box.height-n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-n[0]);n=this.checkAspectRatio(n),this.el.move(this.parameters.box.x+n[0],this.parameters.box.y+n[1]).size(this.parameters.box.width-n[0],this.parameters.box.height-n[1])}};break;case"rt":this.calc=function(e,t){var n=this.snapToGrid(e,t,2);if(this.parameters.box.width+n[0]>0&&this.parameters.box.height-n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+n[0]);n=this.checkAspectRatio(n,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+n[1]).size(this.parameters.box.width+n[0],this.parameters.box.height-n[1])}};break;case"rb":this.calc=function(e,t){var n=this.snapToGrid(e,t,0);if(this.parameters.box.width+n[0]>0&&this.parameters.box.height+n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+n[0]);n=this.checkAspectRatio(n),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+n[0],this.parameters.box.height+n[1])}};break;case"lb":this.calc=function(e,t){var n=this.snapToGrid(e,t,1);if(this.parameters.box.width-n[0]>0&&this.parameters.box.height+n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-n[0]);n=this.checkAspectRatio(n,!0),this.el.move(this.parameters.box.x+n[0],this.parameters.box.y).size(this.parameters.box.width-n[0],this.parameters.box.height+n[1])}};break;case"t":this.calc=function(e,t){var n=this.snapToGrid(e,t,2);if(this.parameters.box.height-n[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+n[1]).height(this.parameters.box.height-n[1])}};break;case"r":this.calc=function(e,t){var n=this.snapToGrid(e,t,0);if(this.parameters.box.width+n[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+n[0])}};break;case"b":this.calc=function(e,t){var n=this.snapToGrid(e,t,0);if(this.parameters.box.height+n[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+n[1])}};break;case"l":this.calc=function(e,t){var n=this.snapToGrid(e,t,1);if(this.parameters.box.width-n[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+n[0],this.parameters.box.y).width(this.parameters.box.width-n[0])}};break;case"rot":this.calc=function(e,t){var n=e+this.parameters.p.x,a=t+this.parameters.p.y,r=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),i=Math.atan2(a-this.parameters.box.y-this.parameters.box.height/2,n-this.parameters.box.x-this.parameters.box.width/2),o=this.parameters.rotation+180*(i-r)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(o-o%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(e,t){var n=this.snapToGrid(e,t,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),a=this.el.array().valueOf();a[this.parameters.i][0]=this.parameters.pointCoords[0]+n[0],a[this.parameters.i][1]=this.parameters.pointCoords[1]+n[1],this.el.plot(a)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:e}),SVG.on(window,"touchmove.resize",(function(e){t.update(e||window.event)})),SVG.on(window,"touchend.resize",(function(){t.done()})),SVG.on(window,"mousemove.resize",(function(e){t.update(e||window.event)})),SVG.on(window,"mouseup.resize",(function(){t.done()}))},e.prototype.update=function(e){if(e){var t=this._extractPosition(e),n=this.transformPoint(t.x,t.y),a=n.x-this.parameters.p.x,r=n.y-this.parameters.p.y;this.lastUpdateCall=[a,r],this.calc(a,r),this.el.fire("resizing",{dx:a,dy:r,event:e})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},e.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},e.prototype.snapToGrid=function(e,t,n,a){var r;return void 0!==a?r=[(n+e)%this.options.snapToGrid,(a+t)%this.options.snapToGrid]:(n=null==n?3:n,r=[(this.parameters.box.x+e+(1&n?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+t+(2&n?0:this.parameters.box.height))%this.options.snapToGrid]),e<0&&(r[0]-=this.options.snapToGrid),t<0&&(r[1]-=this.options.snapToGrid),e-=Math.abs(r[0])<this.options.snapToGrid/2?r[0]:r[0]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),t-=Math.abs(r[1])<this.options.snapToGrid/2?r[1]:r[1]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(e,t,n,a)},e.prototype.constraintToBox=function(e,t,n,a){var r,i,o=this.options.constraint||{};return void 0!==a?(r=n,i=a):(r=this.parameters.box.x+(1&n?0:this.parameters.box.width),i=this.parameters.box.y+(2&n?0:this.parameters.box.height)),void 0!==o.minX&&r+e<o.minX&&(e=o.minX-r),void 0!==o.maxX&&r+e>o.maxX&&(e=o.maxX-r),void 0!==o.minY&&i+t<o.minY&&(t=o.minY-i),void 0!==o.maxY&&i+t>o.maxY&&(t=o.maxY-i),[e,t]},e.prototype.checkAspectRatio=function(e,t){if(!this.options.saveAspectRatio)return e;var n=e.slice(),a=this.parameters.box.width/this.parameters.box.height,r=this.parameters.box.width+e[0],i=this.parameters.box.height-e[1],o=r/i;return o<a?(n[1]=r/a-this.parameters.box.height,t&&(n[1]=-n[1])):o>a&&(n[0]=this.parameters.box.width-i*a,t&&(n[0]=-n[0])),n},SVG.extend(SVG.Element,{resize:function(t){return(this.remember("_resizeHandler")||new e(this)).init(t||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var Be=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new y(this.ctx),this.ctx.axes=new ne(this.ctx),this.ctx.core=new _e(this.ctx.el,this.ctx),this.ctx.config=new V({}),this.ctx.data=new G(this.ctx),this.ctx.grid=new Z(this.ctx),this.ctx.graphics=new w(this.ctx),this.ctx.coreUtils=new S(this.ctx),this.ctx.crosshairs=new ae(this.ctx),this.ctx.events=new ee(this.ctx),this.ctx.exports=new q(this.ctx),this.ctx.localization=new te(this.ctx),this.ctx.options=new E,this.ctx.responsive=new re(this.ctx),this.ctx.series=new P(this.ctx),this.ctx.theme=new ie(this.ctx),this.ctx.formatters=new Y(this.ctx),this.ctx.titleSubtitle=new oe(this.ctx),this.ctx.legend=new fe(this.ctx),this.ctx.toolbar=new pe(this.ctx),this.ctx.dimensions=new he(this.ctx),this.ctx.updateHelpers=new ze(this.ctx),this.ctx.zoomPanSelection=new ge(this.ctx),this.ctx.w.globals.tooltip=new we(this.ctx)}}]),e}(),We=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"clear",value:function(e){var t=e.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:t})}},{key:"killSVG",value:function(e){e.each((function(e,t){this.removeClass("*"),this.off(),this.stop()}),!0),e.ungroup(),e.clear()}},{key:"clearDomElements",value:function(e){var t=this,n=e.isUpdating,a=this.w.globals.dom.Paper.node;a.parentNode&&a.parentNode.parentNode&&!n&&(a.parentNode.parentNode.style.minHeight="unset");var r=this.w.globals.dom.baseEl;r&&this.ctx.eventList.forEach((function(e){r.removeEventListener(e,t.ctx.events.documentEvent)}));var i=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(i.Paper),i.Paper.remove(),i.elWrap=null,i.elGraphical=null,i.elAnnotations=null,i.elLegendWrap=null,i.baseEl=null,i.elGridRect=null,i.elGridRectMask=null,i.elGridRectMarkerMask=null,i.elForecastMask=null,i.elNonForecastMask=null,i.elDefs=null}}]),e}(),He=new WeakMap,Ve=function(){function e(t,n){s(this,e),this.opts=n,this.ctx=this,this.w=new X(n).init(),this.el=t,this.w.globals.cuid=b.randomId(),this.w.globals.chartID=this.w.config.chart.id?b.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Be(this).initModules(),this.create=b.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return c(e,[{key:"render",value:function(){var e=this;return new Promise((function(t,n){if(null!==e.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),e.w.config.chart.id&&Apex._chartInstances.push({id:e.w.globals.chartID,group:e.w.config.chart.group,chart:e}),e.setLocale(e.w.config.chart.defaultLocale);var a=e.w.config.chart.events.beforeMount;if("function"==typeof a&&a(e,e.w),e.events.fireEvent("beforeMount",[e,e.w]),window.addEventListener("resize",e.windowResizeHandler),function(e,t){var n=!1,a=e.getBoundingClientRect();"none"!==e.style.display&&0!==a.width||(n=!0);var r=new ResizeObserver((function(a){n&&t.call(e,a),n=!0}));e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(e.children).forEach((function(e){return r.observe(e)})):r.observe(e),He.set(t,r)}(e.el.parentNode,e.parentResizeHandler),!e.css){var r=e.el.getRootNode&&e.el.getRootNode(),i=b.is("ShadowRoot",r),o=e.el.ownerDocument,s=o.getElementById("apexcharts-css");!i&&s||(e.css=document.createElement("style"),e.css.id="apexcharts-css",e.css.textContent='.apexcharts-canvas {\n  position: relative;\n  user-select: none;\n  /* cannot give overflow: hidden as it will crop tooltips which overflow outside chart area */\n}\n\n\n/* scrollbar is not visible by default for legend, hence forcing the visibility */\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px;\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n}\n\n\n.apexcharts-inner {\n  position: relative;\n}\n\n.apexcharts-text tspan {\n  font-family: inherit;\n}\n\n.legend-mouseover-inactive {\n  transition: 0.15s ease all;\n  opacity: 0.20;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0;\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, 0.96);\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, 0.8);\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit;\n}\n\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #ECEFF1;\n  border-bottom: 1px solid #ddd;\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, 0.7);\n  border-bottom: 1px solid #333;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  font-weight: 600;\n  margin-left: 5px;\n}\n\n.apexcharts-tooltip-title:empty,\n.apexcharts-tooltip-text-y-label:empty,\n.apexcharts-tooltip-text-y-value:empty,\n.apexcharts-tooltip-text-goals-label:empty,\n.apexcharts-tooltip-text-goals-value:empty,\n.apexcharts-tooltip-text-z-value:empty {\n  display: none;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  font-weight: 600;\n}\n\n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-goals-group, \n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  display: flex;\n}\n.apexcharts-tooltip-text-goals-label:not(:empty),\n.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px;\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0px;\n  margin-right: 10px;\n  border-radius: 50%;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px;\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0 !important;\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-box, .apexcharts-custom-tooltip {\n  padding: 4px 8px;\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0;\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: bold;\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px;\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777;\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.apexcharts-xaxistooltip {\n  opacity: 0;\n  padding: 9px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-left: -6px;\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-left: -7px;\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%;\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%;\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #ECEFF1;\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #ECEFF1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  padding: 4px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-top: -6px;\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-top: -7px;\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%;\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%;\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1;\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none;\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0;\n}\n\n.apexcharts-selection-rect {\n  cursor: move;\n}\n\n.svg_select_boundingRect, .svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n}\n.apexcharts-selection-rect + g .svg_select_boundingRect,\n.apexcharts-selection-rect + g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.apexcharts-selection-rect + g .svg_select_points_l,\n.apexcharts-selection-rect + g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon,\n.apexcharts-reset-icon,\n.apexcharts-pan-icon,\n.apexcharts-selection-icon,\n.apexcharts-menu-icon,\n.apexcharts-toolbar-custom-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6E8192;\n  text-align: center;\n}\n\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-menu-icon svg {\n  fill: #6E8192;\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(0.76)\n}\n\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg {\n  fill: #f3f4f5;\n}\n\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg {\n  fill: #008FFB;\n}\n\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg {\n  fill: #333;\n}\n\n.apexcharts-selection-icon,\n.apexcharts-menu-icon {\n  position: relative;\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px;\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-reset-icon,\n.apexcharts-menu-icon {\n  transform: scale(0.85);\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(0.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px;\n}\n\n.apexcharts-pan-icon {\n  transform: scale(0.62);\n  position: relative;\n  left: 1px;\n  top: 0px;\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6E8192;\n  stroke-width: 2;\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008FFB;\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333;\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0px 6px 2px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: 0.15s ease all;\n  pointer-events: none;\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee;\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n\n@media screen and (min-width: 768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1;\n  }\n}\n\n.apexcharts-datalabel.apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-pie-label,\n.apexcharts-datalabels,\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value {\n  cursor: default;\n  pointer-events: none;\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: 0.3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease;\n}\n\n.apexcharts-canvas .apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-gridline,\n.apexcharts-annotation-rect,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-line,\n.apexcharts-zoom-rect,\n.apexcharts-toolbar svg,\n.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-radar-series path,\n.apexcharts-radar-series polygon {\n  pointer-events: none;\n}\n\n\n/* markers */\n\n.apexcharts-marker {\n  transition: 0.15s ease all;\n}\n\n@keyframes opaque {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n\n/* Resize generated styles */\n\n@keyframes resizeanim {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n}\n\n.resize-triggers,\n.resize-triggers>div,\n.contract-trigger:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.resize-triggers>div {\n  background: #eee;\n  overflow: auto;\n}\n\n.contract-trigger:before {\n  width: 200%;\n  height: 200%;\n}',i?r.prepend(e.css):o.head.appendChild(e.css))}var l=e.create(e.w.config.series,{});if(!l)return t(e);e.mount(l).then((function(){"function"==typeof e.w.config.chart.events.mounted&&e.w.config.chart.events.mounted(e,e.w),e.events.fireEvent("mounted",[e,e.w]),t(l)})).catch((function(e){n(e)}))}else n(new Error("Element not found"))}))}},{key:"create",value:function(e,t){var n=this.w;new Be(this).initModules();var a=this.w.globals;if(a.noData=!1,a.animationEnded=!1,this.responsive.checkResponsiveConfig(t),n.config.xaxis.convertedCatToNumeric&&new H(n.config).convertCatToNumericXaxis(n.config,this.ctx),null===this.el)return a.animationEnded=!0,null;if(this.core.setupElements(),"treemap"===n.config.chart.type&&(n.config.grid.show=!1,n.config.yaxis[0].show=!1),0===a.svgWidth)return a.animationEnded=!0,null;var r=S.checkComboSeries(e);a.comboCharts=r.comboCharts,a.comboBarCount=r.comboBarCount;var i=e.every((function(e){return e.data&&0===e.data.length}));(0===e.length||i)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(e),this.theme.init(),new D(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),a.noData&&a.collapsedSeries.length!==a.series.length&&!n.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),a.axisCharts&&(this.core.coreCalculations(),"category"!==n.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=n.globals.minX,this.ctx.toolbar.maxX=n.globals.maxX),this.formatters.heatmapLabelFormatters(),new S(this).getLargestMarkerSize(),this.dimensions.plotCoords();var o=this.core.xySettings();this.grid.createGridMask();var s=this.core.plotChartType(e,o),l=new M(this);l.bringForward(),n.config.dataLabels.background.enabled&&l.dataLabelsBackground(),this.core.shiftGraphPosition();var c={plot:{left:n.globals.translateX,top:n.globals.translateY,width:n.globals.gridWidth,height:n.globals.gridHeight}};return{elGraph:s,xyRatios:o,elInner:n.globals.dom.elGraphical,dimensions:c}}},{key:"mount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this,a=n.w;return new Promise((function(r,i){if(null===n.el)return i(new Error("Not enough data to display or target element not found"));(null===t||a.globals.allSeriesCollapsed)&&n.series.handleNoData(),"treemap"!==a.config.chart.type&&n.axes.drawAxis(a.config.chart.type,t.xyRatios),n.grid=new Z(n);var o=n.grid.drawGrid();n.annotations=new R(n),n.annotations.drawImageAnnos(),n.annotations.drawTextAnnos(),"back"===a.config.grid.position&&o&&a.globals.dom.elGraphical.add(o.el);var s=new K(e.ctx),l=new J(e.ctx);if(null!==o&&(s.xAxisLabelCorrections(o.xAxisTickWidth),l.setYAxisTextAlignments(),a.config.yaxis.map((function(e,t){-1===a.globals.ignoreYAxisIndexes.indexOf(t)&&l.yAxisTitleRotate(t,e.opposite)}))),"back"===a.config.annotations.position&&(a.globals.dom.Paper.add(a.globals.dom.elAnnotations),n.annotations.drawAxesAnnotations()),Array.isArray(t.elGraph))for(var c=0;c<t.elGraph.length;c++)a.globals.dom.elGraphical.add(t.elGraph[c]);else a.globals.dom.elGraphical.add(t.elGraph);if("front"===a.config.grid.position&&o&&a.globals.dom.elGraphical.add(o.el),"front"===a.config.xaxis.crosshairs.position&&n.crosshairs.drawXCrosshairs(),"front"===a.config.yaxis[0].crosshairs.position&&n.crosshairs.drawYCrosshairs(),"front"===a.config.annotations.position&&(a.globals.dom.Paper.add(a.globals.dom.elAnnotations),n.annotations.drawAxesAnnotations()),!a.globals.noData){if(a.config.tooltip.enabled&&!a.globals.noData&&n.w.globals.tooltip.drawTooltip(t.xyRatios),a.globals.axisCharts&&(a.globals.isXNumeric||a.config.xaxis.convertedCatToNumeric||a.globals.isRangeBar))(a.config.chart.zoom.enabled||a.config.chart.selection&&a.config.chart.selection.enabled||a.config.chart.pan&&a.config.chart.pan.enabled)&&n.zoomPanSelection.init({xyRatios:t.xyRatios});else{var u=a.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach((function(e){u[e]=!1}))}a.config.chart.toolbar.show&&!a.globals.allSeriesCollapsed&&n.toolbar.createToolbar()}a.globals.memory.methodsToExec.length>0&&a.globals.memory.methodsToExec.forEach((function(e){e.method(e.params,!1,e.context)})),a.globals.axisCharts||a.globals.noData||n.core.resizeNonAxisCharts(),r(n)}))}},{key:"destroy",value:function(){var e,t;window.removeEventListener("resize",this.windowResizeHandler),this.el.parentNode,e=this.parentResizeHandler,(t=He.get(e))&&(t.disconnect(),He.delete(e));var n=this.w.config.chart.id;n&&Apex._chartInstances.forEach((function(e,t){e.id===b.escapeString(n)&&Apex._chartInstances.splice(t,1)})),new We(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.w;return o.globals.selection=void 0,e.series&&(this.series.resetSeries(!1,!0,!1),e.series.length&&e.series[0].data&&(e.series=e.series.map((function(e,n){return t.updateHelpers._extendSeries(e,n)}))),this.updateHelpers.revertDefaultAxisMinMax()),e.xaxis&&(e=this.updateHelpers.forceXAxisUpdate(e)),e.yaxis&&(e=this.updateHelpers.forceYAxisUpdate(e)),o.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),e.theme&&(e=this.theme.updateThemeOptions(e)),this.updateHelpers._updateOptions(e,n,a,r,i)}},{key:"updateSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(e,t,n)}},{key:"appendSeries",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this.w.config.series.slice();return a.push(e),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(a,t,n)}},{key:"appendData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this;n.w.globals.dataChanged=!0,n.series.getPreviousPaths();for(var a=n.w.config.series.slice(),r=0;r<a.length;r++)if(null!==e[r]&&void 0!==e[r])for(var i=0;i<e[r].data.length;i++)a[r].data.push(e[r].data[i]);return n.w.config.series=a,t&&(n.w.globals.initialSeries=b.clone(n.w.config.series)),this.update()}},{key:"update",value:function(e){var t=this;return new Promise((function(n,a){new We(t.ctx).clear({isUpdating:!0});var r=t.create(t.w.config.series,e);if(!r)return n(t);t.mount(r).then((function(){"function"==typeof t.w.config.chart.events.updated&&t.w.config.chart.events.updated(t,t.w),t.events.fireEvent("updated",[t,t.w]),t.w.globals.isDirty=!0,n(t)})).catch((function(e){a(e)}))}))}},{key:"getSyncedCharts",value:function(){var e=this.getGroupedCharts(),t=[this];return e.length&&(t=[],e.forEach((function(e){t.push(e)}))),t}},{key:"getGroupedCharts",value:function(){var e=this;return Apex._chartInstances.filter((function(e){if(e.group)return!0})).map((function(t){return e.w.config.chart.group===t.group?t.chart:e}))}},{key:"toggleSeries",value:function(e){return this.series.toggleSeries(e)}},{key:"highlightSeriesOnLegendHover",value:function(e,t){return this.series.toggleSeriesOnHover(e,t)}},{key:"showSeries",value:function(e){this.series.showSeries(e)}},{key:"hideSeries",value:function(e){this.series.hideSeries(e)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(e,t)}},{key:"addEventListener",value:function(e,t){this.events.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.events.removeEventListener(e,t)}},{key:"addXaxisAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=this;n&&(a=n),a.annotations.addXaxisAnnotationExternal(e,t,a)}},{key:"addYaxisAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=this;n&&(a=n),a.annotations.addYaxisAnnotationExternal(e,t,a)}},{key:"addPointAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=this;n&&(a=n),a.annotations.addPointAnnotationExternal(e,t,a)}},{key:"clearAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=this;e&&(t=e),t.annotations.clearAnnotations(t)}},{key:"removeAnnotation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this;t&&(n=t),n.annotations.removeAnnotation(n,e)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(e,t){return this.coreUtils.getSeriesTotalsXRange(e,t)}},{key:"getHighestValueInSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Q(this.ctx);return t.getMinYMaxY(e).highestY}},{key:"getLowestValueInSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Q(this.ctx);return t.getMinYMaxY(e).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(e,t){return this.updateHelpers.toggleDataPointSelection(e,t)}},{key:"zoomX",value:function(e,t){this.ctx.toolbar.zoomUpdateOptions(e,t)}},{key:"setLocale",value:function(e){this.localization.setCurrentLocaleValues(e)}},{key:"dataURI",value:function(e){return new q(this.ctx).dataURI(e)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var e=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout((function(){e.w.globals.resized=!0,e.w.globals.dataChanged=!1,e.ctx.update()}),150)}},{key:"_windowResizeHandler",value:function(){var e=this.w.config.chart.redrawOnWindowResize;"function"==typeof e&&(e=e()),e&&this._windowResize()}}],[{key:"getChartByID",value:function(e){var t=b.escapeString(e),n=Apex._chartInstances.filter((function(e){return e.id===t}))[0];return n&&n.chart}},{key:"initOnLoad",value:function(){for(var t=document.querySelectorAll("[data-apexcharts]"),n=0;n<t.length;n++)new e(t[n],JSON.parse(t[n].getAttribute("data-options"))).render()}},{key:"exec",value:function(e,t){var n=this.getChartByID(e);if(n){n.w.globals.isExecCalled=!0;var a=null;if(-1!==n.publicMethods.indexOf(t)){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];a=n[t].apply(n,i)}return a}}},{key:"merge",value:function(e,t){return b.extend(e,t)}}]),e}();e.exports=Ve},9174:function(e,t,n){var a;e=n.nmd(e),function(r){var i=t,o=(e&&e.exports,"object"==typeof n.g&&n.g);o.global!==o&&o.window;var s=function(e){this.message=e};(s.prototype=new Error).name="InvalidCharacterError";var l=function(e){throw new s(e)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=/[\t\n\f\r ]/g,h={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,a,r,i=e.length%3,o="",s=-1,u=e.length-i;++s<u;)t=e.charCodeAt(s)<<16,n=e.charCodeAt(++s)<<8,a=e.charCodeAt(++s),o+=c.charAt((r=t+n+a)>>18&63)+c.charAt(r>>12&63)+c.charAt(r>>6&63)+c.charAt(63&r);return 2==i?(t=e.charCodeAt(s)<<8,n=e.charCodeAt(++s),o+=c.charAt((r=t+n)>>10)+c.charAt(r>>4&63)+c.charAt(r<<2&63)+"="):1==i&&(r=e.charCodeAt(s),o+=c.charAt(r>>2)+c.charAt(r<<4&63)+"=="),o},decode:function(e){var t=(e=String(e).replace(u,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var n,a,r=0,i="",o=-1;++o<t;)a=c.indexOf(e.charAt(o)),n=r%4?64*n+a:a,r++%4&&(i+=String.fromCharCode(255&n>>(-2*r&6)));return i},version:"1.0.0"};void 0===(a=function(){return h}.call(t,n,t,e))||(e.exports=a)}()},2110:function(e,t,n){"use strict";var a=n(8309),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return a.isMemo(e)?o:s[e.$$typeof]||r}s[a.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[a.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,a){if("string"!==typeof n){if(p){var r=f(n);r&&r!==p&&e(t,r,a)}var o=u(n);h&&(o=o.concat(h(n)));for(var s=l(t),g=l(n),v=0;v<o.length;++v){var m=o[v];if(!i[m]&&(!a||!a[m])&&(!g||!g[m])&&(!s||!s[m])){var x=d(n,m);try{c(t,m,x)}catch(b){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,a=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,x=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,y=n?Symbol.for("react.scope"):60119;function k(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case u:case h:case i:case s:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case v:case g:case l:return e;default:return t}}case r:return t}}}function w(e){return k(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=a,t.ForwardRef=d,t.Fragment=i,t.Lazy=v,t.Memo=g,t.Portal=r,t.Profiler=s,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return w(e)||k(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return k(e)===c},t.isContextProvider=function(e){return k(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return k(e)===d},t.isFragment=function(e){return k(e)===i},t.isLazy=function(e){return k(e)===v},t.isMemo=function(e){return k(e)===g},t.isPortal=function(e){return k(e)===r},t.isProfiler=function(e){return k(e)===s},t.isStrictMode=function(e){return k(e)===o},t.isSuspense=function(e){return k(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===h||e===s||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===g||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===x||e.$$typeof===b||e.$$typeof===y||e.$$typeof===m)},t.typeOf=k},8309:function(e,t,n){"use strict";e.exports=n(746)},8987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(I){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=a;var r={},i={};function o(e,t){var n,a,o;return t?(o=0<=(e>>>=0)&&e<256)&&(a=i[e])?a:(n=l(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(a=r[e])?a:(n=l(e,e<0?-1:0,!1),o&&(r[e]=n),n)}function s(e,t){if(isNaN(e))return t?m:v;if(t){if(e<0)return m;if(e>=f)return w}else{if(e<=-p)return S;if(e+1>=p)return k}return e<0?s(-e,t).neg():l(e%d|0,e/d|0,t)}function l(e,t,a){return new n(e,t,a)}n.fromInt=o,n.fromNumber=s,n.fromBits=l;var c=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return v;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var a;if((a=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===a)return u(e.substring(1),t,n).neg();for(var r=s(c(n,8)),i=v,o=0;o<e.length;o+=8){var l=Math.min(8,e.length-o),h=parseInt(e.substring(o,o+l),n);if(l<8){var d=s(c(n,l));i=i.mul(d).add(s(h))}else i=(i=i.mul(r)).add(s(h))}return i.unsigned=t,i}function h(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?u(e,t):l(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=u,n.fromValue=h;var d=4294967296,f=d*d,p=f/2,g=o(1<<24),v=o(0);n.ZERO=v;var m=o(0,!0);n.UZERO=m;var x=o(1);n.ONE=x;var b=o(1,!0);n.UONE=b;var y=o(-1);n.NEG_ONE=y;var k=l(-1,2147483647,!1);n.MAX_VALUE=k;var w=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=w;var S=l(0,-2147483648,!1);n.MIN_VALUE=S;var C=n.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),a=n.mul(t).sub(this);return n.toString(e)+a.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=s(c(e,6),this.unsigned),i=this,o="";;){var l=i.div(r),u=(i.sub(l.mul(r)).toInt()>>>0).toString(e);if((i=l).isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1===(1&this.low)},C.isEven=function(){return 0===(1&this.low)},C.equals=function(e){return a(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(a(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(x)},C.neg=C.negate,C.add=function(e){a(e)||(e=h(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,c=e.low>>>16,u=0,d=0,f=0,p=0;return f+=(p+=i+(65535&e.low))>>>16,d+=(f+=r+c)>>>16,u+=(d+=n+s)>>>16,u+=t+o,l((f&=65535)<<16|(p&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},C.subtract=function(e){return a(e)||(e=h(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return v;if(a(e)||(e=h(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return v;if(this.eq(S))return e.isOdd()?S:v;if(e.eq(S))return this.isOdd()?S:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,c=e.high>>>16,u=65535&e.high,d=e.low>>>16,f=65535&e.low,p=0,m=0,x=0,b=0;return x+=(b+=o*f)>>>16,m+=(x+=i*f)>>>16,x&=65535,m+=(x+=o*d)>>>16,p+=(m+=r*f)>>>16,m&=65535,p+=(m+=i*d)>>>16,m&=65535,p+=(m+=o*u)>>>16,p+=n*f+r*d+i*u+o*c,l((x&=65535)<<16|(b&=65535),(p&=65535)<<16|(m&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(a(e)||(e=h(e)),e.isZero())throw Error("division by zero");var n,r,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?m:v;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return m;if(e.gt(this.shru(1)))return b;i=m}else{if(this.eq(S))return e.eq(x)||e.eq(y)?S:e.eq(S)?x:(n=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?x:y:(r=this.sub(e.mul(n)),i=n.add(r.div(e)));if(e.eq(S))return this.unsigned?m:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=v}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),u=o<=48?1:c(2,o-48),d=s(n),f=d.mul(e);f.isNegative()||f.gt(r);)f=(d=s(n-=u,this.unsigned)).mul(e);d.isZero()&&(d=x),i=i.add(d),r=r.sub(f)}return i},C.div=C.divide,C.modulo=function(e){return a(e)||(e=h(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return l(~this.low,~this.high,this.unsigned)},C.and=function(e){return a(e)||(e=h(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return a(e)||(e=h(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return a(e)||(e=h(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,a){return a?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},888:function(e,t,n){"use strict";var a=n(9047);function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,o){if(o!==a){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3496:function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=u(n(8700)),s=n(2791),l=u(s),c=u(n(2007));function u(e){return e&&e.__esModule?e:{default:e}}window.ApexCharts=o.default;var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.default.createRef?n.chartRef=l.default.createRef():n.setRef=function(e){return n.chartRef=e},n.chart=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.Component),i(e,[{key:"render",value:function(){var e=this.props,t=(e.type,e.height,e.width,e.series,e.options,function(e,t){var n={};for(var a in e)0<=t.indexOf(a)||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["type","height","width","series","options"]));return l.default.createElement("div",r({ref:l.default.createRef?this.chartRef:this.setRef},t))}},{key:"componentDidMount",value:function(){var e=l.default.createRef?this.chartRef.current:this.chartRef;this.chart=new o.default(e,this.getConfig()),this.chart.render()}},{key:"getConfig",value:function(){var e=this.props,t=e.type,n=e.height,a=e.width,r=e.series,i=e.options,o={chart:{type:t,height:n,width:a},series:r};return this.extend(i,o)}},{key:"isObject",value:function(e){return e&&"object"===(void 0===e?"undefined":a(e))&&!Array.isArray(e)&&null!=e}},{key:"extend",value:function(e,t){var n=this;"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var a=arguments[n];if(null!=a)for(var r in a)a.hasOwnProperty(r)&&(t[r]=a[r])}return t});var a=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach((function(r){n.isObject(t[r])&&r in e?a[r]=n.extend(e[r],t[r]):Object.assign(a,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r,t[r]))})),a}},{key:"componentDidUpdate",value:function(e){if(!this.chart)return null;var t=this.props,n=t.options,a=t.series,r=t.height,i=t.width,o=JSON.stringify(e.options),s=JSON.stringify(e.series),l=JSON.stringify(n),c=JSON.stringify(a);o===l&&s===c&&r===e.height&&i===e.width||(s===c?this.chart.updateOptions(this.getConfig()):o===l&&r===e.height&&i===e.width?this.chart.updateSeries(a):this.chart.updateOptions(this.getConfig()))}},{key:"componentWillUnmount",value:function(){this.chart&&"function"==typeof this.chart.destroy&&this.chart.destroy()}}]),e}();(t.Z=h).propTypes={type:c.default.string.isRequired,width:c.default.any,height:c.default.any,series:c.default.array.isRequired,options:c.default.object.isRequired},h.defaultProps={type:"line",width:"100%",height:"auto"}},4463:function(e,t,n){"use strict";var a=n(2791),r=n(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,a,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function b(e,t,n,a){var r=v.hasOwnProperty(t)?v[t]:null;(null!==r?0!==r.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,a){if(null===t||"undefined"===typeof t||function(e,t,n,a){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,a))return!0;if(a)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,a)&&(n=null),a||null===r?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,a=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,x);v[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,x);v[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,x);v[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var y=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var P,_=Object.assign;function z(e){if(void 0===P)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var B=!1;function W(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),i=a.stack.split("\n"),o=r.length-1,s=i.length-1;1<=o&&0<=s&&r[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(r[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||r[o]!==i[s]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function H(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case I:return"Profiler";case C:return"StrictMode";case E:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case F:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function X(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){a=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function j(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=G(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return _({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;n=X(null!=t.value?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){$(e,t);var n=X(t.value),a=t.type;if(null!=n)"number"===a?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,X(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,a){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&a&&(e[n].defaultSelected=!0)}else{for(n=""+X(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(a&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return _({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:X(n)}}function ie(e,t){var n=X(t.value),a=X(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=a&&(e.defaultValue=""+a)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,a){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var a=0===n.indexOf("--"),r=ge(n,t[n],a);"float"===n&&(n="cssFloat"),a?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var me=_({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Ce=null;function Ie(e){if(e=br(e)){if("function"!==typeof we)throw Error(i(280));var t=e.stateNode;t&&(t=kr(t),we(e.stateNode,e.type,t))}}function Ae(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function Te(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ne(e,t){return e(t)}function Ee(){}var Re=!1;function Fe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ne(e,t,n)}finally{Re=!1,(null!==Se||null!==Ce)&&(Ee(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var a=kr(n);if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Le=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){Le=!1}function Oe(e,t,n,a,r,i,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Pe=!1,_e=null,ze=!1,Be=null,We={onError:function(e){Pe=!0,_e=e}};function He(e,t,n,a,r,i,o,s,l){Pe=!1,_e=null,Oe.apply(We,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if(Ve(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,a=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(a=r.return)){n=a;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Xe(r),e;if(o===a)return Xe(r),t;o=o.sibling}throw Error(i(188))}if(n.return!==a.return)n=r,a=o;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,a=o;break}if(l===a){s=!0,a=r,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,a=r;break}if(l===a){s=!0,a=o,n=r;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==a)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var je=r.unstable_scheduleCallback,qe=r.unstable_cancelCallback,Ke=r.unstable_shouldYield,Ze=r.unstable_requestPaint,$e=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,at=r.unstable_IdlePriority,rt=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var a=0,r=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~r;0!==s?a=ht(s):0!==(i&=o)&&(a=ht(i))}else 0!==(o=n&~r)?a=ht(o):0!==i&&(a=ht(i));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&r)&&((r=a&-a)>=(i=t&-t)||16===r&&0!==(4194240&i)))return t;if(0!==(4&a)&&(a|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)r=1<<(n=31-ot(t)),a|=e[n],t&=~r;return a}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-ot(n),r=1<<a;r&t|e[a]&t&&(e[a]|=t),n&=~r}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,wt,St,Ct,It,At=!1,Tt=[],Nt=null,Et=null,Rt=null,Ft=new Map,Dt=new Map,Lt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Ft.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Pt(e,t,n,a,r,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:i,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&wt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function _t(e){var t=xr(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void It(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=br(n))&&wt(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);ye=a,n.target.dispatchEvent(a),ye=null,t.shift()}return!0}function Bt(e,t,n){zt(e)&&n.delete(t)}function Wt(){At=!1,null!==Nt&&zt(Nt)&&(Nt=null),null!==Et&&zt(Et)&&(Et=null),null!==Rt&&zt(Rt)&&(Rt=null),Ft.forEach(Bt),Dt.forEach(Bt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Wt)))}function Vt(e){function t(t){return Ht(t,e)}if(0<Tt.length){Ht(Tt[0],e);for(var n=1;n<Tt.length;n++){var a=Tt[n];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Nt&&Ht(Nt,e),null!==Et&&Ht(Et,e),null!==Rt&&Ht(Rt,e),Ft.forEach(t),Dt.forEach(t),n=0;n<Lt.length;n++)(a=Lt[n]).blockedOn===e&&(a.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)_t(n),null===n.blockedOn&&Lt.shift()}var Ut=y.ReactCurrentBatchConfig,Xt=!0;function Gt(e,t,n,a){var r=bt,i=Ut.transition;Ut.transition=null;try{bt=1,jt(e,t,n,a)}finally{bt=r,Ut.transition=i}}function Yt(e,t,n,a){var r=bt,i=Ut.transition;Ut.transition=null;try{bt=4,jt(e,t,n,a)}finally{bt=r,Ut.transition=i}}function jt(e,t,n,a){if(Xt){var r=Kt(e,t,n,a);if(null===r)Xa(e,t,a,qt,n),Ot(e,a);else if(function(e,t,n,a,r){switch(t){case"focusin":return Nt=Pt(Nt,e,t,n,a,r),!0;case"dragenter":return Et=Pt(Et,e,t,n,a,r),!0;case"mouseover":return Rt=Pt(Rt,e,t,n,a,r),!0;case"pointerover":var i=r.pointerId;return Ft.set(i,Pt(Ft.get(i)||null,e,t,n,a,r)),!0;case"gotpointercapture":return i=r.pointerId,Dt.set(i,Pt(Dt.get(i)||null,e,t,n,a,r)),!0}return!1}(r,e,t,n,a))a.stopPropagation();else if(Ot(e,a),4&t&&-1<Mt.indexOf(e)){for(;null!==r;){var i=br(r);if(null!==i&&kt(i),null===(i=Kt(e,t,n,a))&&Xa(e,t,a,qt,n),i===r)break;r=i}null!==r&&a.stopPropagation()}else Xa(e,t,a,null,n)}}var qt=null;function Kt(e,t,n,a){if(qt=null,null!==(e=xr(e=ke(a))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case at:return 536870912;default:return 16}default:return 16}}var $t=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,a=n.length,r="value"in $t?$t.value:$t.textContent,i=r.length;for(e=0;e<a&&n[e]===r[e];e++);var o=a-e;for(t=1;t<=o&&n[a-t]===r[i-t];t++);return Jt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function an(){return!1}function rn(e){function t(t,n,a,r,i){for(var o in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=r,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:an,this.isPropagationStopped=an,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(cn),hn=_({},cn,{view:0,detail:0}),dn=rn(hn),fn=_({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=rn(fn),gn=rn(_({},fn,{dataTransfer:0})),vn=rn(_({},hn,{relatedTarget:0})),mn=rn(_({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=_({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=rn(xn),yn=rn(_({},cn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function In(){return Cn}var An=_({},hn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=rn(An),Nn=rn(_({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=rn(_({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Rn=rn(_({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Fn=_({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=rn(Fn),Ln=[9,13,27,32],Mn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Pn=u&&"TextEvent"in window&&!On,_n=u&&(!Mn||On&&8<On&&11>=On),zn=String.fromCharCode(32),Bn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Gn(e,t,n,a){Ae(a),0<(t=Ya(t,"onChange")).length&&(n=new un("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Yn=null,jn=null;function qn(e){za(e,0)}function Kn(e){if(j(yr(e)))return e}function Zn(e,t){if("change"===e)return t}var $n=!1;if(u){var Qn;if(u){var Jn="oninput"in document;if(!Jn){var ea=document.createElement("div");ea.setAttribute("oninput","return;"),Jn="function"===typeof ea.oninput}Qn=Jn}else Qn=!1;$n=Qn&&(!document.documentMode||9<document.documentMode)}function ta(){Yn&&(Yn.detachEvent("onpropertychange",na),jn=Yn=null)}function na(e){if("value"===e.propertyName&&Kn(jn)){var t=[];Gn(t,jn,e,ke(e)),Fe(qn,t)}}function aa(e,t,n){"focusin"===e?(ta(),jn=n,(Yn=t).attachEvent("onpropertychange",na)):"focusout"===e&&ta()}function ra(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(jn)}function ia(e,t){if("click"===e)return Kn(t)}function oa(e,t){if("input"===e||"change"===e)return Kn(t)}var sa="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function la(e,t){if(sa(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!h.call(t,r)||!sa(e[r],t[r]))return!1}return!0}function ca(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ua(e,t){var n,a=ca(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ca(a)}}function ha(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ha(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function da(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function fa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pa(e){var t=da(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ha(n.ownerDocument.documentElement,n)){if(null!==a&&fa(n))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(a.start,r);a=void 0===a.end?i:Math.min(a.end,r),!e.extend&&i>a&&(r=a,a=i,i=r),r=ua(n,i);var o=ua(n,a);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),i>a?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ga=u&&"documentMode"in document&&11>=document.documentMode,va=null,ma=null,xa=null,ba=!1;function ya(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ba||null==va||va!==q(a)||("selectionStart"in(a=va)&&fa(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},xa&&la(xa,a)||(xa=a,0<(a=Ya(ma,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=va)))}function ka(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wa={animationend:ka("Animation","AnimationEnd"),animationiteration:ka("Animation","AnimationIteration"),animationstart:ka("Animation","AnimationStart"),transitionend:ka("Transition","TransitionEnd")},Sa={},Ca={};function Ia(e){if(Sa[e])return Sa[e];if(!wa[e])return e;var t,n=wa[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ca)return Sa[e]=n[t];return e}u&&(Ca=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);var Aa=Ia("animationend"),Ta=Ia("animationiteration"),Na=Ia("animationstart"),Ea=Ia("transitionend"),Ra=new Map,Fa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Da(e,t){Ra.set(e,t),l(t,[e])}for(var La=0;La<Fa.length;La++){var Ma=Fa[La];Da(Ma.toLowerCase(),"on"+(Ma[0].toUpperCase()+Ma.slice(1)))}Da(Aa,"onAnimationEnd"),Da(Ta,"onAnimationIteration"),Da(Na,"onAnimationStart"),Da("dblclick","onDoubleClick"),Da("focusin","onFocus"),Da("focusout","onBlur"),Da(Ea,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pa=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oa));function _a(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,a,r,o,s,l,c){if(He.apply(this,arguments),Pe){if(!Pe)throw Error(i(198));var u=_e;Pe=!1,_e=null,ze||(ze=!0,Be=u)}}(a,t,void 0,e),e.currentTarget=null}function za(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var a=e[n],r=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var o=a.length-1;0<=o;o--){var s=a[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&r.isPropagationStopped())break e;_a(r,s,c),i=l}else for(o=0;o<a.length;o++){if(l=(s=a[o]).instance,c=s.currentTarget,s=s.listener,l!==i&&r.isPropagationStopped())break e;_a(r,s,c),i=l}}}if(ze)throw e=Be,ze=!1,Be=null,e}function Ba(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var a=e+"__bubble";n.has(a)||(Ua(t,e,2,!1),n.add(a))}function Wa(e,t,n){var a=0;t&&(a|=4),Ua(n,e,a,t)}var Ha="_reactListening"+Math.random().toString(36).slice(2);function Va(e){if(!e[Ha]){e[Ha]=!0,o.forEach((function(t){"selectionchange"!==t&&(Pa.has(t)||Wa(t,!1,e),Wa(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ha]||(t[Ha]=!0,Wa("selectionchange",!1,t))}}function Ua(e,t,n,a){switch(Zt(t)){case 1:var r=Gt;break;case 4:r=Yt;break;default:r=jt}n=r.bind(null,t,n,e),r=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),a?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Xa(e,t,n,a,r){var i=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var o=a.tag;if(3===o||4===o){var s=a.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===o)for(o=a.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==s;){if(null===(o=xr(s)))return;if(5===(l=o.tag)||6===l){a=i=o;continue e}s=s.parentNode}}a=a.return}Fe((function(){var a=i,r=ke(n),o=[];e:{var s=Ra.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=vn;break;case"focusout":c="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Aa:case Ta:case Na:l=mn;break;case Ea:l=Rn;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=a;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=De(p,d))&&u.push(Ga(p,g,f)))),h)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,r),o.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===ye||!(c=n.relatedTarget||n.fromElement)||!xr(c)&&!c[pr])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=a,null!==(c=(c=n.relatedTarget||n.toElement)?xr(c):null)&&(c!==(h=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=a),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?s:yr(l),f=null==c?s:yr(c),(s=new u(g,p+"leave",l,n,r)).target=h,s.relatedTarget=f,g=null,xr(r)===a&&((u=new u(d,p+"enter",c,n,r)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=ja(f))p++;for(f=0,g=d;g;g=ja(g))f++;for(;0<p-f;)u=ja(u),p--;for(;0<f-p;)d=ja(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=ja(u),d=ja(d)}u=null}else u=null;null!==l&&qa(o,s,l,u,!1),null!==c&&null!==h&&qa(o,h,c,u,!0)}if("select"===(l=(s=a?yr(a):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=Zn;else if(Xn(s))if($n)v=oa;else{v=ra;var m=aa}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ia);switch(v&&(v=v(e,a))?Gn(o,v,n,r):(m&&m(e,s,a),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=a?yr(a):window,e){case"focusin":(Xn(m)||"true"===m.contentEditable)&&(va=m,ma=a,xa=null);break;case"focusout":xa=ma=va=null;break;case"mousedown":ba=!0;break;case"contextmenu":case"mouseup":case"dragend":ba=!1,ya(o,n,r);break;case"selectionchange":if(ga)break;case"keydown":case"keyup":ya(o,n,r)}var x;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Wn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(_n&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(x=en()):(Qt="value"in($t=r)?$t.value:$t.textContent,Vn=!0)),0<(m=Ya(a,b)).length&&(b=new yn(b,e,null,n,r),o.push({event:b,listeners:m}),x?b.data=x:null!==(x=Hn(n))&&(b.data=x))),(x=Pn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Bn=!0,zn);case"textInput":return(e=t.data)===zn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Mn&&Wn(e,t)?(e=en(),Jt=Qt=$t=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(a=Ya(a,"onBeforeInput")).length&&(r=new yn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:a}),r.data=x))}za(o,t)}))}function Ga(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ya(e,t){for(var n=t+"Capture",a=[];null!==e;){var r=e,i=r.stateNode;5===r.tag&&null!==i&&(r=i,null!=(i=De(e,n))&&a.unshift(Ga(e,i,r)),null!=(i=De(e,t))&&a.push(Ga(e,i,r))),e=e.return}return a}function ja(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qa(e,t,n,a,r){for(var i=t._reactName,o=[];null!==n&&n!==a;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===a)break;5===s.tag&&null!==c&&(s=c,r?null!=(l=De(n,i))&&o.unshift(Ga(n,l,s)):r||null!=(l=De(n,i))&&o.push(Ga(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Ka=/\r\n?/g,Za=/\u0000|\uFFFD/g;function $a(e){return("string"===typeof e?e:""+e).replace(Ka,"\n").replace(Za,"")}function Qa(e,t,n){if(t=$a(t),$a(e)!==t&&n)throw Error(i(425))}function Ja(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ar="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,ir="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ir?function(e){return ir.resolve(null).then(e).catch(sr)}:ar;function sr(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,a=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===a)return e.removeChild(r),void Vt(t);a--}else"$"!==n&&"$?"!==n&&"$!"!==n||a++;n=r}while(n);Vt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,fr="__reactProps$"+hr,pr="__reactContainer$"+hr,gr="__reactEvents$"+hr,vr="__reactListeners$"+hr,mr="__reactHandles$"+hr;function xr(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[dr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function br(e){return!(e=e[dr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function kr(e){return e[fr]||null}var wr=[],Sr=-1;function Cr(e){return{current:e}}function Ir(e){0>Sr||(e.current=wr[Sr],wr[Sr]=null,Sr--)}function Ar(e,t){Sr++,wr[Sr]=e.current,e.current=t}var Tr={},Nr=Cr(Tr),Er=Cr(!1),Rr=Tr;function Fr(e,t){var n=e.type.contextTypes;if(!n)return Tr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var r,i={};for(r in n)i[r]=t[r];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Dr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Lr(){Ir(Er),Ir(Nr)}function Mr(e,t,n){if(Nr.current!==Tr)throw Error(i(168));Ar(Nr,t),Ar(Er,n)}function Or(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return n;for(var r in a=a.getChildContext())if(!(r in t))throw Error(i(108,U(e)||"Unknown",r));return _({},n,a)}function Pr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,Rr=Nr.current,Ar(Nr,e),Ar(Er,Er.current),!0}function _r(e,t,n){var a=e.stateNode;if(!a)throw Error(i(169));n?(e=Or(e,t,Rr),a.__reactInternalMemoizedMergedChildContext=e,Ir(Er),Ir(Nr),Ar(Nr,e)):Ir(Er),Ar(Er,n)}var zr=null,Br=!1,Wr=!1;function Hr(e){null===zr?zr=[e]:zr.push(e)}function Vr(){if(!Wr&&null!==zr){Wr=!0;var e=0,t=bt;try{var n=zr;for(bt=1;e<n.length;e++){var a=n[e];do{a=a(!0)}while(null!==a)}zr=null,Br=!1}catch(r){throw null!==zr&&(zr=zr.slice(e+1)),je(Je,Vr),r}finally{bt=t,Wr=!1}}return null}var Ur=y.ReactCurrentBatchConfig;function Xr(e,t){if(e&&e.defaultProps){for(var n in t=_({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Gr=Cr(null),Yr=null,jr=null,qr=null;function Kr(){qr=jr=Yr=null}function Zr(e){var t=Gr.current;Ir(Gr),e._currentValue=t}function $r(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Qr(e,t){Yr=e,qr=jr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ks=!0),e.firstContext=null)}function Jr(e){var t=e._currentValue;if(qr!==e)if(e={context:e,memoizedValue:t,next:null},null===jr){if(null===Yr)throw Error(i(308));jr=e,Yr.dependencies={lanes:0,firstContext:e}}else jr=jr.next=e;return t}var ei=null,ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ai(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ri(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ii(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ei?ei=[n]:ei.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,xt(e,n)}}function si(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var r=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?r=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?r=i=t:i=i.next=t}else r=i=t;return n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:a.shared,effects:a.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function li(e,t,n,a){var r=e.updateQueue;ti=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var h=r.baseState;for(o=0,u=c=l=null,s=i;;){var d=s.lane,f=s.eventTime;if((a&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=_({},h,d);break e;case 2:ti=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(d=s).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===i&&(r.shared.lanes=0);Ll|=o,e.lanes=o,e.memoizedState=h}}function ci(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],r=a.callback;if(null!==r){if(a.callback=null,a=n,"function"!==typeof r)throw Error(i(191,r));r.call(a)}}}var ui=(new a.Component).refs;function hi(e,t,n,a){n=null===(n=n(a,t=e.memoizedState))||void 0===n?t:_({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var di={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=$l(),r=Ql(e),i=ri(a,r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ii(e,i),null!==(t=Jl(e,r,a))&&oi(t,e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=$l(),r=Ql(e),i=ri(a,r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ii(e,i),null!==(t=Jl(e,r,a))&&oi(t,e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$l(),a=Ql(e),r=ri(n,a);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),ii(e,r),null!==(t=Jl(e,a,n))&&oi(t,e,a)}};function fi(e,t,n,a,r,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!la(n,a)||!la(r,i))}function pi(e,t,n){var a=!1,r=Tr,i=t.contextType;return"object"===typeof i&&null!==i?i=Jr(i):(r=Dr(t)?Rr:Nr.current,i=(a=null!==(a=t.contextTypes)&&void 0!==a)?Fr(e,r):Tr),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=di,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function gi(e,t,n,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&di.enqueueReplaceState(t,t.state,null)}function vi(e,t,n,a){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=ui,ni(e);var i=t.contextType;"object"===typeof i&&null!==i?r.context=Jr(i):(i=Dr(t)?Rr:Nr.current,r.context=Fr(e,i)),r.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(hi(e,t,i,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&di.enqueueReplaceState(r,r.state,null),li(e,n,r,a),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}var mi=[],xi=0,bi=null,yi=0,ki=[],wi=0,Si=null,Ci=1,Ii="";function Ai(e,t){mi[xi++]=yi,mi[xi++]=bi,bi=e,yi=t}function Ti(e,t,n){ki[wi++]=Ci,ki[wi++]=Ii,ki[wi++]=Si,Si=e;var a=Ci;e=Ii;var r=32-ot(a)-1;a&=~(1<<r),n+=1;var i=32-ot(t)+r;if(30<i){var o=r-r%5;i=(a&(1<<o)-1).toString(32),a>>=o,r-=o,Ci=1<<32-ot(t)+r|n<<r|a,Ii=i+e}else Ci=1<<i|n<<r|a,Ii=e}function Ni(e){null!==e.return&&(Ai(e,1),Ti(e,1,0))}function Ei(e){for(;e===bi;)bi=mi[--xi],mi[xi]=null,yi=mi[--xi],mi[xi]=null;for(;e===Si;)Si=ki[--wi],ki[wi]=null,Ii=ki[--wi],ki[wi]=null,Ci=ki[--wi],ki[wi]=null}var Ri=null,Fi=null,Di=!1,Li=null;function Mi(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ri=e,Fi=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ri=e,Fi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Si?{id:Ci,overflow:Ii}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ri=e,Fi=null,!0);default:return!1}}function Pi(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function _i(e){if(Di){var t=Fi;if(t){var n=t;if(!Oi(e,t)){if(Pi(e))throw Error(i(418));t=cr(n.nextSibling);var a=Ri;t&&Oi(e,t)?Mi(a,n):(e.flags=-4097&e.flags|2,Di=!1,Ri=e)}}else{if(Pi(e))throw Error(i(418));e.flags=-4097&e.flags|2,Di=!1,Ri=e}}}function zi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ri=e}function Bi(e){if(e!==Ri)return!1;if(!Di)return zi(e),Di=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=Fi)){if(Pi(e)){for(e=Fi;e;)e=cr(e.nextSibling);throw Error(i(418))}for(;t;)Mi(e,t),t=cr(t.nextSibling)}if(zi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Fi=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Fi=null}}else Fi=Ri?cr(e.stateNode.nextSibling):null;return!0}function Wi(){Fi=Ri=null,Di=!1}function Hi(e){null===Li?Li=[e]:Li.push(e)}function Vi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var a=n.stateNode}if(!a)throw Error(i(147,e));var r=a,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===ui&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Ui(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xi(e){return(0,e._init)(e._payload)}function Gi(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=2,n):a:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,a){return null===t||6!==t.tag?((t=Pc(n,e.mode,a)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,a){var i=n.type;return i===S?h(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===D&&Xi(i)===t.type)?((a=r(t,n.props)).ref=Vi(e,t,n),a.return=e,a):((a=Lc(n.type,n.key,n.props,null,e.mode,a)).ref=Vi(e,t,n),a.return=e,a)}function u(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=_c(n,e.mode,a)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,a,i){return null===t||7!==t.tag?((t=Mc(n,e.mode,a,i)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Pc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Vi(e,null,t),n.return=e,n;case w:return(t=_c(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ui(e,t)}return null}function f(e,t,n,a){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===r?c(e,t,n,a):null;case w:return n.key===r?u(e,t,n,a):null;case D:return f(e,t,(r=n._init)(n._payload),a)}if(te(n)||O(n))return null!==r?null:h(e,t,n,a,null);Ui(e,n)}return null}function p(e,t,n,a,r){if("string"===typeof a&&""!==a||"number"===typeof a)return l(t,e=e.get(n)||null,""+a,r);if("object"===typeof a&&null!==a){switch(a.$$typeof){case k:return c(t,e=e.get(null===a.key?n:a.key)||null,a,r);case w:return u(t,e=e.get(null===a.key?n:a.key)||null,a,r);case D:return p(e,t,n,(0,a._init)(a._payload),r)}if(te(a)||O(a))return h(t,e=e.get(n)||null,a,r,null);Ui(t,a)}return null}function g(r,i,s,l){for(var c=null,u=null,h=i,g=i=0,v=null;null!==h&&g<s.length;g++){h.index>g?(v=h,h=null):v=h.sibling;var m=f(r,h,s[g],l);if(null===m){null===h&&(h=v);break}e&&h&&null===m.alternate&&t(r,h),i=o(m,i,g),null===u?c=m:u.sibling=m,u=m,h=v}if(g===s.length)return n(r,h),Di&&Ai(r,g),c;if(null===h){for(;g<s.length;g++)null!==(h=d(r,s[g],l))&&(i=o(h,i,g),null===u?c=h:u.sibling=h,u=h);return Di&&Ai(r,g),c}for(h=a(r,h);g<s.length;g++)null!==(v=p(h,r,g,s[g],l))&&(e&&null!==v.alternate&&h.delete(null===v.key?g:v.key),i=o(v,i,g),null===u?c=v:u.sibling=v,u=v);return e&&h.forEach((function(e){return t(r,e)})),Di&&Ai(r,g),c}function v(r,s,l,c){var u=O(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var h=u=null,g=s,v=s=0,m=null,x=l.next();null!==g&&!x.done;v++,x=l.next()){g.index>v?(m=g,g=null):m=g.sibling;var b=f(r,g,x.value,c);if(null===b){null===g&&(g=m);break}e&&g&&null===b.alternate&&t(r,g),s=o(b,s,v),null===h?u=b:h.sibling=b,h=b,g=m}if(x.done)return n(r,g),Di&&Ai(r,v),u;if(null===g){for(;!x.done;v++,x=l.next())null!==(x=d(r,x.value,c))&&(s=o(x,s,v),null===h?u=x:h.sibling=x,h=x);return Di&&Ai(r,v),u}for(g=a(r,g);!x.done;v++,x=l.next())null!==(x=p(g,r,v,x.value,c))&&(e&&null!==x.alternate&&g.delete(null===x.key?v:x.key),s=o(x,s,v),null===h?u=x:h.sibling=x,h=x);return e&&g.forEach((function(e){return t(r,e)})),Di&&Ai(r,v),u}return function e(a,i,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case k:e:{for(var c=o.key,u=i;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(a,u.sibling),(i=r(u,o.props.children)).return=a,a=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Xi(c)===u.type){n(a,u.sibling),(i=r(u,o.props)).ref=Vi(a,u,o),i.return=a,a=i;break e}n(a,u);break}t(a,u),u=u.sibling}o.type===S?((i=Mc(o.props.children,a.mode,l,o.key)).return=a,a=i):((l=Lc(o.type,o.key,o.props,null,a.mode,l)).ref=Vi(a,i,o),l.return=a,a=l)}return s(a);case w:e:{for(u=o.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(a,i.sibling),(i=r(i,o.children||[])).return=a,a=i;break e}n(a,i);break}t(a,i),i=i.sibling}(i=_c(o,a.mode,l)).return=a,a=i}return s(a);case D:return e(a,i,(u=o._init)(o._payload),l)}if(te(o))return g(a,i,o,l);if(O(o))return v(a,i,o,l);Ui(a,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(a,i.sibling),(i=r(i,o)).return=a,a=i):(n(a,i),(i=Pc(o,a.mode,l)).return=a,a=i),s(a)):n(a,i)}}var Yi=Gi(!0),ji=Gi(!1),qi={},Ki=Cr(qi),Zi=Cr(qi),$i=Cr(qi);function Qi(e){if(e===qi)throw Error(i(174));return e}function Ji(e,t){switch(Ar($i,t),Ar(Zi,e),Ar(Ki,qi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ir(Ki),Ar(Ki,t)}function eo(){Ir(Ki),Ir(Zi),Ir($i)}function to(e){Qi($i.current);var t=Qi(Ki.current),n=le(t,e.type);t!==n&&(Ar(Zi,e),Ar(Ki,n))}function no(e){Zi.current===e&&(Ir(Ki),Ir(Zi))}var ao=Cr(0);function ro(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var io=[];function oo(){for(var e=0;e<io.length;e++)io[e]._workInProgressVersionPrimary=null;io.length=0}var so=y.ReactCurrentDispatcher,lo=y.ReactCurrentBatchConfig,co=0,uo=null,ho=null,fo=null,po=!1,go=!1,vo=0,mo=0;function xo(){throw Error(i(321))}function bo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sa(e[n],t[n]))return!1;return!0}function yo(e,t,n,a,r,o){if(co=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?as:rs,e=n(a,r),go){o=0;do{if(go=!1,vo=0,25<=o)throw Error(i(301));o+=1,fo=ho=null,t.updateQueue=null,so.current=is,e=n(a,r)}while(go)}if(so.current=ns,t=null!==ho&&null!==ho.next,co=0,fo=ho=uo=null,po=!1,t)throw Error(i(300));return e}function ko(){var e=0!==vo;return vo=0,e}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===fo?uo.memoizedState=fo=e:fo=fo.next=e,fo}function So(){if(null===ho){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=ho.next;var t=null===fo?uo.memoizedState:fo.next;if(null!==t)fo=t,ho=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ho=e).memoizedState,baseState:ho.baseState,baseQueue:ho.baseQueue,queue:ho.queue,next:null},null===fo?uo.memoizedState=fo=e:fo=fo.next=e}return fo}function Co(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=So(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var a=ho,r=a.baseQueue,o=n.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}a.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,a=a.baseState;var l=s=null,c=null,u=o;do{var h=u.lane;if((co&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),a=u.hasEagerState?u.eagerState:e(a,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=a):c=c.next=d,uo.lanes|=h,Ll|=h}u=u.next}while(null!==u&&u!==o);null===c?s=a:c.next=l,sa(a,t.memoizedState)||(ks=!0),t.memoizedState=a,t.baseState=s,t.baseQueue=c,n.lastRenderedState=a}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,uo.lanes|=o,Ll|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=So(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var a=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{o=e(o,s.action),s=s.next}while(s!==r);sa(o,t.memoizedState)||(ks=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,a]}function To(){}function No(e,t){var n=uo,a=So(),r=t(),o=!sa(a.memoizedState,r);if(o&&(a.memoizedState=r,ks=!0),a=a.queue,Bo(Fo.bind(null,n,a,e),[e]),a.getSnapshot!==t||o||null!==fo&&1&fo.memoizedState.tag){if(n.flags|=2048,Mo(9,Ro.bind(null,n,a,r,t),void 0,null),null===Al)throw Error(i(349));0!==(30&co)||Eo(n,t,r)}return r}function Eo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,a){t.value=n,t.getSnapshot=a,Do(t)&&Jl(e,1,-1)}function Fo(e,t,n){return n((function(){Do(t)&&Jl(e,1,-1)}))}function Do(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sa(e,n)}catch(a){return!0}}function Lo(e){var t=wo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=$o.bind(null,uo,e),[t.memoizedState,e]}function Mo(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Oo(){return So().memoizedState}function Po(e,t,n,a){var r=wo();uo.flags|=e,r.memoizedState=Mo(1|t,n,void 0,void 0===a?null:a)}function _o(e,t,n,a){var r=So();a=void 0===a?null:a;var i=void 0;if(null!==ho){var o=ho.memoizedState;if(i=o.destroy,null!==a&&bo(a,o.deps))return void(r.memoizedState=Mo(t,n,i,a))}uo.flags|=e,r.memoizedState=Mo(1|t,n,i,a)}function zo(e,t){return Po(8390656,8,e,t)}function Bo(e,t){return _o(2048,8,e,t)}function Wo(e,t){return _o(4,2,e,t)}function Ho(e,t){return _o(4,4,e,t)}function Vo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_o(4,4,Vo.bind(null,t,e),n)}function Xo(){}function Go(e,t){var n=So();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&bo(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=So();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&bo(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function jo(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,ks=!0),e.memoizedState=n):(sa(n,t)||(n=gt(),uo.lanes|=n,Ll|=n,e.baseState=!0),t)}function qo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var a=lo.transition;lo.transition={};try{e(!1),t()}finally{bt=n,lo.transition=a}}function Ko(){return So().memoizedState}function Zo(e,t,n){var a=Ql(e);n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?Jo(t,n):(es(e,t,n),null!==(e=Jl(e,a,n=$l()))&&ts(e,t,a))}function $o(e,t,n){var a=Ql(e),r={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Jo(t,r);else{es(e,t,r);var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(r.hasEagerState=!0,r.eagerState=s,sa(s,o))return}catch(l){}null!==(e=Jl(e,a,n=$l()))&&ts(e,t,a)}}function Qo(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function Jo(e,t){go=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function es(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ei?ei=[t]:ei.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function ts(e,t,n){if(0!==(4194240&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,xt(e,n)}}var ns={readContext:Jr,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},as={readContext:Jr,useCallback:function(e,t){return wo().memoizedState=[e,void 0===t?null:t],e},useContext:Jr,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4194308,4,Vo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var n=wo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=wo();return t=void 0!==n?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Zo.bind(null,uo,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},wo().memoizedState=e},useState:Lo,useDebugValue:Xo,useDeferredValue:function(e){return wo().memoizedState=e},useTransition:function(){var e=Lo(!1),t=e[0];return e=qo.bind(null,e[1]),wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=uo,r=wo();if(Di){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Al)throw Error(i(349));0!==(30&co)||Eo(a,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,zo(Fo.bind(null,a,o,e),[e]),a.flags|=2048,Mo(9,Ro.bind(null,a,o,n,t),void 0,null),n},useId:function(){var e=wo(),t=Al.identifierPrefix;if(Di){var n=Ii;t=":"+t+"R"+(n=(Ci&~(1<<32-ot(Ci)-1)).toString(32)+n),0<(n=vo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rs={readContext:Jr,useCallback:Go,useContext:Jr,useEffect:Bo,useImperativeHandle:Uo,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Yo,useReducer:Io,useRef:Oo,useState:function(){return Io(Co)},useDebugValue:Xo,useDeferredValue:function(e){return jo(So(),ho.memoizedState,e)},useTransition:function(){return[Io(Co)[0],So().memoizedState]},useMutableSource:To,useSyncExternalStore:No,useId:Ko,unstable_isNewReconciler:!1},is={readContext:Jr,useCallback:Go,useContext:Jr,useEffect:Bo,useImperativeHandle:Uo,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Yo,useReducer:Ao,useRef:Oo,useState:function(){return Ao(Co)},useDebugValue:Xo,useDeferredValue:function(e){var t=So();return null===ho?t.memoizedState=e:jo(t,ho.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],So().memoizedState]},useMutableSource:To,useSyncExternalStore:No,useId:Ko,unstable_isNewReconciler:!1};function os(e,t){try{var n="",a=t;do{n+=H(a),a=a.return}while(a);var r=n}catch(i){r="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:r}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ls,cs,us,hs="function"===typeof WeakMap?WeakMap:Map;function ds(e,t,n){(n=ri(-1,n)).tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=a),ss(0,t)},n}function fs(e,t,n){(n=ri(-1,n)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var r=t.value;n.payload=function(){return a(r)},n.callback=function(){ss(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ss(0,t),"function"!==typeof a&&(null===Ul?Ul=new Set([this]):Ul.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ps(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new hs;var r=new Set;a.set(t,r)}else void 0===(r=a.get(t))&&(r=new Set,a.set(t,r));r.has(n)||(r.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,a,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ri(-1,1)).tag=2,ii(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}function ms(e,t){if(!Di)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function xs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=14680064&r.subtreeFlags,a|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function bs(e,t,n){var a=t.pendingProps;switch(Ei(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xs(t),null;case 1:case 17:return Dr(t.type)&&Lr(),xs(t),null;case 3:return a=t.stateNode,eo(),Ir(Er),Ir(Nr),oo(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(Bi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Li&&(ic(Li),Li=null))),xs(t),null;case 5:no(t);var r=Qi($i.current);if(n=t.type,null!==e&&null!=t.stateNode)cs(e,t,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(i(166));return xs(t),null}if(e=Qi(Ki.current),Bi(t)){a=t.stateNode,n=t.type;var o=t.memoizedProps;switch(a[dr]=t,a[fr]=o,e=0!==(1&t.mode),n){case"dialog":Ba("cancel",a),Ba("close",a);break;case"iframe":case"object":case"embed":Ba("load",a);break;case"video":case"audio":for(r=0;r<Oa.length;r++)Ba(Oa[r],a);break;case"source":Ba("error",a);break;case"img":case"image":case"link":Ba("error",a),Ba("load",a);break;case"details":Ba("toggle",a);break;case"input":Z(a,o),Ba("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!o.multiple},Ba("invalid",a);break;case"textarea":re(a,o),Ba("invalid",a)}for(var l in xe(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?a.textContent!==c&&(!0!==o.suppressHydrationWarning&&Qa(a.textContent,c,e),r=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Qa(a.textContent,c,e),r=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ba("scroll",a)}switch(n){case"input":Y(a),J(a,o,!0);break;case"textarea":Y(a),oe(a);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(a.onclick=Ja)}a=r,t.updateQueue=a,null!==a&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=l.createElement(n,{is:a.is}):(e=l.createElement(n),"select"===n&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,n),e[dr]=t,e[fr]=a,ls(e,t),t.stateNode=e;e:{switch(l=be(n,a),n){case"dialog":Ba("cancel",e),Ba("close",e),r=a;break;case"iframe":case"object":case"embed":Ba("load",e),r=a;break;case"video":case"audio":for(r=0;r<Oa.length;r++)Ba(Oa[r],e);r=a;break;case"source":Ba("error",e),r=a;break;case"img":case"image":case"link":Ba("error",e),Ba("load",e),r=a;break;case"details":Ba("toggle",e),r=a;break;case"input":Z(e,a),r=K(e,a),Ba("invalid",e);break;case"option":default:r=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},r=_({},a,{value:void 0}),Ba("invalid",e);break;case"textarea":re(e,a),r=ae(e,a),Ba("invalid",e)}for(o in xe(n,r),c=r)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ve(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ba("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":Y(e),J(e,a,!1);break;case"textarea":Y(e),oe(e);break;case"option":null!=a.value&&e.setAttribute("value",""+X(a.value));break;case"select":e.multiple=!!a.multiple,null!=(o=a.value)?ne(e,!!a.multiple,o,!1):null!=a.defaultValue&&ne(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Ja)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return xs(t),null;case 6:if(e&&null!=t.stateNode)us(0,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(i(166));if(n=Qi($i.current),Qi(Ki.current),Bi(t)){if(a=t.stateNode,n=t.memoizedProps,a[dr]=t,(o=a.nodeValue!==n)&&null!==(e=Ri))switch(e.tag){case 3:Qa(a.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qa(a.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(a=(9===n.nodeType?n:n.ownerDocument).createTextNode(a))[dr]=t,t.stateNode=a}return xs(t),null;case 13:if(Ir(ao),a=t.memoizedState,Di&&null!==Fi&&0!==(1&t.mode)&&0===(128&t.flags)){for(a=Fi;a;)a=cr(a.nextSibling);return Wi(),t.flags|=98560,t}if(null!==a&&null!==a.dehydrated){if(a=Bi(t),null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[dr]=t}else Wi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return xs(t),null}return null!==Li&&(ic(Li),Li=null),0!==(128&t.flags)?(t.lanes=n,t):(a=null!==a,n=!1,null===e?Bi(t):n=null!==e.memoizedState,a!==n&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Fl&&(Fl=3):pc())),null!==t.updateQueue&&(t.flags|=4),xs(t),null);case 4:return eo(),null===e&&Va(t.stateNode.containerInfo),xs(t),null;case 10:return Zr(t.type._context),xs(t),null;case 19:if(Ir(ao),null===(o=t.memoizedState))return xs(t),null;if(a=0!==(128&t.flags),null===(l=o.rendering))if(a)ms(o,!1);else{if(0!==Fl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ro(e))){for(t.flags|=128,ms(o,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;null!==n;)e=a,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ar(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Bl&&(t.flags|=128,a=!0,ms(o,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=ro(l))){if(t.flags|=128,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ms(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!Di)return xs(t),null}else 2*$e()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,a=!0,ms(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=ao.current,Ar(ao,a?1&n|2:1&n),t):(xs(t),null);case 22:case 23:return uc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&El)&&(xs(t),6&t.subtreeFlags&&(t.flags|=8192)):xs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}ls=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cs=function(e,t,n,a){var r=e.memoizedProps;if(r!==a){e=t.stateNode,Qi(Ki.current);var i,o=null;switch(n){case"input":r=K(e,r),a=K(e,a),o=[];break;case"select":r=_({},r,{value:void 0}),a=_({},a,{value:void 0}),o=[];break;case"textarea":r=ae(e,r),a=ae(e,a),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof a.onClick&&(e.onclick=Ja)}for(u in xe(n,a),n=null,r)if(!a.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in a){var c=a[u];if(l=null!=r?r[u]:void 0,a.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ba("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},us=function(e,t,n,a){n!==a&&(t.flags|=4)};var ys=y.ReactCurrentOwner,ks=!1;function ws(e,t,n,a){t.child=null===e?ji(t,null,n,a):Yi(t,e.child,n,a)}function Ss(e,t,n,a,r){n=n.render;var i=t.ref;return Qr(t,r),a=yo(e,t,n,a,i,r),n=ko(),null===e||ks?(Di&&n&&Ni(t),t.flags|=1,ws(e,t,a,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Xs(e,t,r))}function Cs(e,t,n,a,r){if(null===e){var i=n.type;return"function"!==typeof i||Fc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,a,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Is(e,t,i,a,r))}if(i=e.child,0===(e.lanes&r)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:la)(o,a)&&e.ref===t.ref)return Xs(e,t,r)}return t.flags|=1,(e=Dc(i,a)).ref=t.ref,e.return=t,t.child=e}function Is(e,t,n,a,r){if(null!==e){var i=e.memoizedProps;if(la(i,a)&&e.ref===t.ref){if(ks=!1,t.pendingProps=a=i,0===(e.lanes&r))return t.lanes=e.lanes,Xs(e,t,r);0!==(131072&e.flags)&&(ks=!0)}}return Ns(e,t,n,a,r)}function As(e,t,n){var a=t.pendingProps,r=a.children,i=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ar(Rl,El),El|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ar(Rl,El),El|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==i?i.baseLanes:n,Ar(Rl,El),El|=a}else null!==i?(a=i.baseLanes|n,t.memoizedState=null):a=n,Ar(Rl,El),El|=a;return ws(e,t,r,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ns(e,t,n,a,r){var i=Dr(n)?Rr:Nr.current;return i=Fr(t,i),Qr(t,r),n=yo(e,t,n,a,i,r),a=ko(),null===e||ks?(Di&&a&&Ni(t),t.flags|=1,ws(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Xs(e,t,r))}function Es(e,t,n,a,r){if(Dr(n)){var i=!0;Pr(t)}else i=!1;if(Qr(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pi(t,n,a),vi(t,n,a,r),a=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Jr(c):c=Fr(t,c=Dr(n)?Rr:Nr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==a||l!==c)&&gi(t,o,a,c),ti=!1;var d=t.memoizedState;o.state=d,li(t,a,o,r),l=t.memoizedState,s!==a||d!==l||Er.current||ti?("function"===typeof u&&(hi(t,n,u,a),l=t.memoizedState),(s=ti||fi(t,n,s,a,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=l),o.props=a,o.state=l,o.context=c,a=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,ai(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Xr(t.type,s),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Jr(l):l=Fr(t,l=Dr(n)?Rr:Nr.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==l)&&gi(t,o,a,l),ti=!1,d=t.memoizedState,o.state=d,li(t,a,o,r);var p=t.memoizedState;s!==h||d!==p||Er.current||ti?("function"===typeof f&&(hi(t,n,f,a),p=t.memoizedState),(c=ti||fi(t,n,c,a,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(a,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(a,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=p),o.props=a,o.state=p,o.context=l,a=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),a=!1)}return Rs(e,t,n,a,i,r)}function Rs(e,t,n,a,r,i){Ts(e,t);var o=0!==(128&t.flags);if(!a&&!o)return r&&_r(t,n,!1),Xs(e,t,i);a=t.stateNode,ys.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&o?(t.child=Yi(t,e.child,null,i),t.child=Yi(t,null,s,i)):ws(e,t,s,i),t.memoizedState=a.state,r&&_r(t,n,!0),t.child}function Fs(e){var t=e.stateNode;t.pendingContext?Mr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mr(0,t.context,!1),Ji(e,t.containerInfo)}function Ds(e,t,n,a,r){return Wi(),Hi(r),t.flags|=256,ws(e,t,n,a),t.child}var Ls={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Os(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Ps(e,t,n){var a,r=t.pendingProps,o=ao.current,s=!1,l=0!==(128&t.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&0!==(2&o)),a?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ar(ao,1&o),null===e)return _i(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=Oc(o,r,0,null),e=Mc(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ls,e):_s(t,o));if(null!==(o=e.memoizedState)){if(null!==(a=o.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,Ws(e,t,n,Error(i(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=Oc({mode:"visible",children:r.children},o,0,null),(s=Mc(s,o,n,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Yi(t,e.child,null,n),t.child.memoizedState=Ms(n),t.memoizedState=Ls,s);if(0===(1&t.mode))t=Ws(e,t,n,null);else if("$!"===a.data)t=Ws(e,t,n,Error(i(419)));else if(r=0!==(n&e.childLanes),ks||r){if(null!==(r=Al)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(r=0!==(s&(r.suspendedLanes|n))?0:s)&&r!==o.retryLane&&(o.retryLane=r,Jl(e,r,-1))}pc(),t=Ws(e,t,n,Error(i(421)))}else"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),a._reactRetry=t,t=null):(n=o.treeContext,Fi=cr(a.nextSibling),Ri=t,Di=!0,Li=null,null!==n&&(ki[wi++]=Ci,ki[wi++]=Ii,ki[wi++]=Si,Ci=n.id,Ii=n.overflow,Si=t),(t=_s(t,t.pendingProps.children)).flags|=4096);return t}return s?(r=Bs(e,t,r.children,r.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Ms(n):Os(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Ls,r):(n=zs(e,t,r.children,n),t.memoizedState=null,n)}return s?(r=Bs(e,t,r.children,r.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Ms(n):Os(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Ls,r):(n=zs(e,t,r.children,n),t.memoizedState=null,n)}function _s(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,a){var r=e.child;return e=r.sibling,n=Dc(r,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=a),n.return=t,n.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n}function Bs(e,t,n,a,r){var i=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&i)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=Dc(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?a=Dc(o,a):(a=Mc(a,i,r,null)).flags|=2,a.return=t,n.return=t,n.sibling=a,t.child=n,a}function Ws(e,t,n,a){return null!==a&&Hi(a),Yi(t,e.child,null,n),(e=_s(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Hs(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),$r(e.return,t,n)}function Vs(e,t,n,a,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=n,i.tailMode=r)}function Us(e,t,n){var a=t.pendingProps,r=a.revealOrder,i=a.tail;if(ws(e,t,a.children,n),0!==(2&(a=ao.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Hs(e,n,t);else if(19===e.tag)Hs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Ar(ao,a),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ro(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Vs(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ro(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Vs(t,!0,n,null,i);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){switch(Ei(t),t.tag){case 1:return Dr(t.type)&&Lr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ir(Er),Ir(Nr),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ir(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));Wi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ir(ao),null;case 4:return eo(),null;case 10:return Zr(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}var Ys=!1,js=!1,qs="function"===typeof WeakSet?WeakSet:Set,Ks=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(a){Sc(e,t,a)}else n.current=null}function $s(e,t,n){try{n()}catch(a){Sc(e,t,a)}}var Qs=!1;function Js(e,t,n){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var r=a=a.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,void 0!==i&&$s(t,n,i)}r=r.next}while(r!==a)}}function el(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function tl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function nl(e){var t=e.alternate;null!==t&&(e.alternate=null,nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[fr],delete t[gr],delete t[vr],delete t[mr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function rl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function il(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ja));else if(4!==a&&null!==(e=e.child))for(il(e,t,n),e=e.sibling;null!==e;)il(e,t,n),e=e.sibling}function ol(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}var sl=null,ll=!1;function cl(e,t,n){for(n=n.child;null!==n;)ul(e,t,n),n=n.sibling}function ul(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(s){}switch(n.tag){case 5:js||Zs(n,t);case 6:var a=sl,r=ll;sl=null,cl(e,t,n),ll=r,null!==(sl=a)&&(ll?(e=sl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):sl.removeChild(n.stateNode));break;case 18:null!==sl&&(ll?(e=sl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Vt(e)):lr(sl,n.stateNode));break;case 4:a=sl,r=ll,sl=n.stateNode.containerInfo,ll=!0,cl(e,t,n),sl=a,ll=r;break;case 0:case 11:case 14:case 15:if(!js&&(null!==(a=n.updateQueue)&&null!==(a=a.lastEffect))){r=a=a.next;do{var i=r,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&$s(n,t,o),r=r.next}while(r!==a)}cl(e,t,n);break;case 1:if(!js&&(Zs(n,t),"function"===typeof(a=n.stateNode).componentWillUnmount))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(s){Sc(n,t,s)}cl(e,t,n);break;case 21:cl(e,t,n);break;case 22:1&n.mode?(js=(a=js)||null!==n.memoizedState,cl(e,t,n),js=a):cl(e,t,n);break;default:cl(e,t,n)}}function hl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new qs),t.forEach((function(t){var a=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(a,a))}))}}function dl(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var r=n[a];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:sl=l.stateNode,ll=!1;break e;case 3:case 4:sl=l.stateNode.containerInfo,ll=!0;break e}l=l.return}if(null===sl)throw Error(i(160));ul(o,s,r),sl=null,ll=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Sc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fl(t,e),t=t.sibling}function fl(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dl(t,e),pl(e),4&a){try{Js(3,e,e.return),el(3,e)}catch(g){Sc(e,e.return,g)}try{Js(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:dl(t,e),pl(e),512&a&&null!==n&&Zs(n,n.return);break;case 5:if(dl(t,e),pl(e),512&a&&null!==n&&Zs(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(g){Sc(e,e.return,g)}}if(4&a&&null!=(r=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(r,o),be(l,s);var u=be(l,o);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?ve(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):b(r,h,d,u)}switch(l){case"input":Q(r,o);break;case"textarea":ie(r,o);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(r,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[fr]=o}catch(g){Sc(e,e.return,g)}}break;case 6:if(dl(t,e),pl(e),4&a){if(null===e.stateNode)throw Error(i(162));u=e.stateNode,h=e.memoizedProps;try{u.nodeValue=h}catch(g){Sc(e,e.return,g)}}break;case 3:if(dl(t,e),pl(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:dl(t,e),pl(e);break;case 13:dl(t,e),pl(e),8192&(u=e.child).flags&&null!==u.memoizedState&&(null===u.alternate||null===u.alternate.memoizedState)&&(zl=$e()),4&a&&hl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(js=(h=js)||u,dl(t,e),js=h):dl(t,e),pl(e),8192&a){h=null!==e.memoizedState;e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{r=f.stateNode,h?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",s))}catch(g){Sc(e,e.return,g)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=h?"":f.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}if(h&&!u&&0!==(1&e.mode))for(Ks=e,e=e.child;null!==e;){for(u=Ks=e;null!==Ks;){switch(d=(h=Ks).child,h.tag){case 0:case 11:case 14:case 15:Js(4,h,h.return);break;case 1:if(Zs(h,h.return),"function"===typeof(o=h.stateNode).componentWillUnmount){f=h,p=h.return;try{r=f,o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(g){Sc(f,p,g)}}break;case 5:Zs(h,h.return);break;case 22:if(null!==h.memoizedState){xl(u);continue}}null!==d?(d.return=h,Ks=d):xl(u)}e=e.sibling}}break;case 19:dl(t,e),pl(e),4&a&&hl(e);case 21:}}function pl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var a=n;break e}n=n.return}throw Error(i(160))}switch(a.tag){case 5:var r=a.stateNode;32&a.flags&&(de(r,""),a.flags&=-33),ol(e,rl(e),r);break;case 3:case 4:var o=a.stateNode.containerInfo;il(e,rl(e),o);break;default:throw Error(i(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gl(e,t,n){Ks=e,vl(e,t,n)}function vl(e,t,n){for(var a=0!==(1&e.mode);null!==Ks;){var r=Ks,i=r.child;if(22===r.tag&&a){var o=null!==r.memoizedState||Ys;if(!o){var s=r.alternate,l=null!==s&&null!==s.memoizedState||js;s=Ys;var c=js;if(Ys=o,(js=l)&&!c)for(Ks=r;null!==Ks;)l=(o=Ks).child,22===o.tag&&null!==o.memoizedState?bl(r):null!==l?(l.return=o,Ks=l):bl(r);for(;null!==i;)Ks=i,vl(i,t,n),i=i.sibling;Ks=r,Ys=s,js=c}ml(e)}else 0!==(8772&r.subtreeFlags)&&null!==i?(i.return=r,Ks=i):ml(e)}}function ml(e){for(;null!==Ks;){var t=Ks;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:js||el(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!js)if(null===n)a.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Xr(t.type,n.memoizedProps);a.componentDidUpdate(r,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ci(t,o,a);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ci(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(i(163))}js||512&t.flags&&tl(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Ks=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ks=n;break}Ks=t.return}}function xl(e){for(;null!==Ks;){var t=Ks;if(t===e){Ks=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ks=n;break}Ks=t.return}}function bl(e){for(;null!==Ks;){var t=Ks;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{el(4,t)}catch(l){Sc(t,n,l)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var r=t.return;try{a.componentDidMount()}catch(l){Sc(t,r,l)}}var i=t.return;try{tl(t)}catch(l){Sc(t,i,l)}break;case 5:var o=t.return;try{tl(t)}catch(l){Sc(t,o,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Ks=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ks=s;break}Ks=t.return}}var yl,kl=Math.ceil,wl=y.ReactCurrentDispatcher,Sl=y.ReactCurrentOwner,Cl=y.ReactCurrentBatchConfig,Il=0,Al=null,Tl=null,Nl=0,El=0,Rl=Cr(0),Fl=0,Dl=null,Ll=0,Ml=0,Ol=0,Pl=null,_l=null,zl=0,Bl=1/0,Wl=null,Hl=!1,Vl=null,Ul=null,Xl=!1,Gl=null,Yl=0,jl=0,ql=null,Kl=-1,Zl=0;function $l(){return 0!==(6&Il)?$e():-1!==Kl?Kl:Kl=$e()}function Ql(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Nl?Nl&-Nl:null!==Ur.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function Jl(e,t,n){if(50<jl)throw jl=0,ql=null,Error(i(185));var a=ec(e,t);return null===a?null:(mt(a,t,n),0!==(2&Il)&&a===Al||(a===Al&&(0===(2&Il)&&(Ml|=t),4===Fl&&oc(a,Nl)),nc(a,n),1===t&&0===Il&&0===(1&e.mode)&&(Bl=$e()+500,Br&&Vr())),a)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Al||null!==ei)&&0!==(1&e.mode)&&0===(2&Il)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,l=r[o];-1===l?0!==(s&n)&&0===(s&a)||(r[o]=ft(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var a=dt(e,e===Al?Nl:0);if(0===a)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Br=!0,Hr(e)}(sc.bind(null,e)):Hr(sc.bind(null,e)),or((function(){0===Il&&Vr()})),n=null;else{switch(yt(a)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=at}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Kl=-1,Zl=0,0!==(6&Il))throw Error(i(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var a=dt(e,e===Al?Nl:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=gc(e,a);else{t=a;var r=Il;Il|=2;var o=fc();for(Al===e&&Nl===t||(Wl=null,Bl=$e()+500,hc(e,t));;)try{mc();break}catch(l){dc(e,l)}Kr(),wl.current=o,Il=r,null!==Tl?t=0:(Al=null,Nl=0,t=Fl)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(a=r,t=rc(e,r))),1===t)throw n=Dl,hc(e,0),oc(e,a),nc(e,$e()),n;if(6===t)oc(e,a);else{if(r=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var a=0;a<n.length;a++){var r=n[a],i=r.getSnapshot;r=r.value;try{if(!sa(i(),r))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,a))&&(0!==(o=pt(e))&&(a=o,t=rc(e,o))),1===t))throw n=Dl,hc(e,0),oc(e,a),nc(e,$e()),n;switch(e.finishedWork=r,e.finishedLanes=a,t){case 0:case 1:throw Error(i(345));case 2:case 5:yc(e,_l,Wl);break;case 3:if(oc(e,a),(130023424&a)===a&&10<(t=zl+500-$e())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&a)!==a){$l(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ar(yc.bind(null,e,_l,Wl),t);break}yc(e,_l,Wl);break;case 4:if(oc(e,a),(4194240&a)===a)break;for(t=e.eventTimes,r=-1;0<a;){var s=31-ot(a);o=1<<s,(s=t[s])>r&&(r=s),a&=~o}if(a=r,10<(a=(120>(a=$e()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*kl(a/1960))-a)){e.timeoutHandle=ar(yc.bind(null,e,_l,Wl),a);break}yc(e,_l,Wl);break;default:throw Error(i(329))}}}return nc(e,$e()),e.callbackNode===n?ac.bind(null,e):null}function rc(e,t){var n=Pl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=_l,_l=n,null!==t&&ic(t)),e}function ic(e){null===_l?_l=e:_l.push.apply(_l,e)}function oc(e,t){for(t&=~Ol,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),a=1<<n;e[n]=-1,t&=~a}}function sc(e){if(0!==(6&Il))throw Error(i(327));kc();var t=dt(e,0);if(0===(1&t))return nc(e,$e()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var a=pt(e);0!==a&&(t=a,n=rc(e,a))}if(1===n)throw n=Dl,hc(e,0),oc(e,t),nc(e,$e()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yc(e,_l,Wl),nc(e,$e()),null}function lc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Bl=$e()+500,Br&&Vr())}}function cc(e){null!==Gl&&0===Gl.tag&&0===(6&Il)&&kc();var t=Il;Il|=1;var n=Cl.transition,a=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=a,Cl.transition=n,0===(6&(Il=t))&&Vr()}}function uc(){El=Rl.current,Ir(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Tl)for(n=Tl.return;null!==n;){var a=n;switch(Ei(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Lr();break;case 3:eo(),Ir(Er),Ir(Nr),oo();break;case 5:no(a);break;case 4:eo();break;case 13:case 19:Ir(ao);break;case 10:Zr(a.type._context);break;case 22:case 23:uc()}n=n.return}if(Al=e,Tl=e=Dc(e.current,null),Nl=El=t,Fl=0,Dl=null,Ol=Ml=Ll=0,_l=Pl=null,null!==ei){for(t=0;t<ei.length;t++)if(null!==(a=(n=ei[t]).interleaved)){n.interleaved=null;var r=a.next,i=n.pending;if(null!==i){var o=i.next;i.next=r,a.next=o}n.pending=a}ei=null}return e}function dc(e,t){for(;;){var n=Tl;try{if(Kr(),so.current=ns,po){for(var a=uo.memoizedState;null!==a;){var r=a.queue;null!==r&&(r.pending=null),a=a.next}po=!1}if(co=0,fo=ho=uo=null,go=!1,vo=0,Sl.current=null,null===n||null===n.return){Fl=1,Dl=t,Tl=null;break}e:{var o=e,s=n.return,l=n,c=t;if(t=Nl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,vs(p,s,l,0,t),1&p.mode&&ps(o,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}if(0===(1&t)){ps(o,u,t),pc();break e}c=Error(i(426))}else if(Di&&1&l.mode){var m=gs(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),vs(m,s,l,0,t),Hi(c);break e}}o=c,4!==Fl&&(Fl=2),null===Pl?Pl=[o]:Pl.push(o),c=os(c,l),l=s;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,si(l,ds(0,c,t));break e;case 1:o=c;var x=l.type,b=l.stateNode;if(0===(128&l.flags)&&("function"===typeof x.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ul||!Ul.has(b)))){l.flags|=65536,t&=-t,l.lanes|=t,si(l,fs(l,o,t));break e}}l=l.return}while(null!==l)}bc(n)}catch(y){t=y,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function fc(){var e=wl.current;return wl.current=ns,null===e?ns:e}function pc(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Al||0===(268435455&Ll)&&0===(268435455&Ml)||oc(Al,Nl)}function gc(e,t){var n=Il;Il|=2;var a=fc();for(Al===e&&Nl===t||(Wl=null,hc(e,t));;)try{vc();break}catch(r){dc(e,r)}if(Kr(),Il=n,wl.current=a,null!==Tl)throw Error(i(261));return Al=null,Nl=0,Fl}function vc(){for(;null!==Tl;)xc(Tl)}function mc(){for(;null!==Tl&&!Ke();)xc(Tl)}function xc(e){var t=yl(e.alternate,e,El);e.memoizedProps=e.pendingProps,null===t?bc(e):Tl=t,Sl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=bs(n,t,El)))return void(Tl=n)}else{if(null!==(n=Gs(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Fl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Fl&&(Fl=5)}function yc(e,t,n){var a=bt,r=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,a){do{kc()}while(null!==Gl);if(0!==(6&Il))throw Error(i(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),i=1<<r;t[r]=0,a[r]=-1,e[r]=-1,n&=~i}}(e,o),e===Al&&(Tl=Al=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Nc(tt,(function(){return kc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var s=bt;bt=1;var l=Il;Il|=4,Sl.current=null,function(e,t){if(er=Xt,fa(e=da())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var r=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=s+r),d!==o||0!==a&&3!==d.nodeType||(c=s+a),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===r&&(l=s),f===o&&++h===a&&(c=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Xt=!1,Ks=t;null!==Ks;)if(e=(t=Ks).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ks=e;else for(;null!==Ks;){t=Ks;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var v=g.memoizedProps,m=g.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?v:Xr(t.type,v),m);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;if(1===y.nodeType)y.textContent="";else if(9===y.nodeType){var k=y.body;null!=k&&(k.textContent="")}break;default:throw Error(i(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ks=e;break}Ks=t.return}g=Qs,Qs=!1}(e,n),fl(n,e),pa(tr),Xt=!!er,tr=er=null,e.current=n,gl(n,e,r),Ze(),Il=l,bt=s,Cl.transition=o}else e.current=n;if(Xl&&(Xl=!1,Gl=e,Yl=r),0===(o=e.pendingLanes)&&(Ul=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,$e()),null!==t)for(a=e.onRecoverableError,n=0;n<t.length;n++)a(t[n]);if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Yl)&&0!==e.tag&&kc(),0!==(1&(o=e.pendingLanes))?e===ql?jl++:(jl=0,ql=e):jl=0,Vr()}(e,t,n,a)}finally{Cl.transition=r,bt=a}return null}function kc(){if(null!==Gl){var e=yt(Yl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Gl)var a=!1;else{if(e=Gl,Gl=null,Yl=0,0!==(6&Il))throw Error(i(331));var r=Il;for(Il|=4,Ks=e.current;null!==Ks;){var o=Ks,s=o.child;if(0!==(16&Ks.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ks=u;null!==Ks;){var h=Ks;switch(h.tag){case 0:case 11:case 15:Js(8,h,o)}var d=h.child;if(null!==d)d.return=h,Ks=d;else for(;null!==Ks;){var f=(h=Ks).sibling,p=h.return;if(nl(h),h===u){Ks=null;break}if(null!==f){f.return=p,Ks=f;break}Ks=p}}}var g=o.alternate;if(null!==g){var v=g.child;if(null!==v){g.child=null;do{var m=v.sibling;v.sibling=null,v=m}while(null!==v)}}Ks=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Ks=s;else e:for(;null!==Ks;){if(0!==(2048&(o=Ks).flags))switch(o.tag){case 0:case 11:case 15:Js(9,o,o.return)}var x=o.sibling;if(null!==x){x.return=o.return,Ks=x;break e}Ks=o.return}}var b=e.current;for(Ks=b;null!==Ks;){var y=(s=Ks).child;if(0!==(2064&s.subtreeFlags)&&null!==y)y.return=s,Ks=y;else e:for(s=b;null!==Ks;){if(0!==(2048&(l=Ks).flags))try{switch(l.tag){case 0:case 11:case 15:el(9,l)}}catch(w){Sc(l,l.return,w)}if(l===s){Ks=null;break e}var k=l.sibling;if(null!==k){k.return=l.return,Ks=k;break e}Ks=l.return}}if(Il=r,Vr(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(w){}a=!0}return a}finally{bt=n,Cl.transition=t}}return!1}function wc(e,t,n){ii(e,t=ds(0,t=os(n,t),1)),t=$l(),null!==(e=ec(e,1))&&(mt(e,1,t),nc(e,t))}function Sc(e,t,n){if(3===e.tag)wc(e,e,n);else for(;null!==t;){if(3===t.tag){wc(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Ul||!Ul.has(a))){ii(t,e=fs(t,e=os(n,e),1)),e=$l(),null!==(t=ec(t,1))&&(mt(t,1,e),nc(t,e));break}}t=t.return}}function Cc(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),t=$l(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Nl&n)===n&&(4===Fl||3===Fl&&(130023424&Nl)===Nl&&500>$e()-zl?hc(e,0):Ol|=n),nc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=$l();null!==(e=ec(e,t))&&(mt(e,t,n),nc(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(i(314))}null!==a&&a.delete(t),Ic(e,n)}function Nc(e,t){return je(e,t)}function Ec(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,a){return new Ec(e,t,n,a)}function Fc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,a,r,o){var s=2;if(a=e,"function"===typeof e)Fc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Mc(n.children,r,o,t);case C:s=8,r|=8;break;case I:return(e=Rc(12,n,t,2|r)).elementType=I,e.lanes=o,e;case E:return(e=Rc(13,n,t,r)).elementType=E,e.lanes=o,e;case R:return(e=Rc(19,n,t,r)).elementType=R,e.lanes=o,e;case L:return Oc(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case T:s=9;break e;case N:s=11;break e;case F:s=14;break e;case D:s=16,a=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,r)).elementType=e,t.type=a,t.lanes=o,t}function Mc(e,t,n,a){return(e=Rc(7,e,a,t)).lanes=n,e}function Oc(e,t,n,a){return(e=Rc(22,e,a,t)).elementType=L,e.lanes=n,e.stateNode={},e}function Pc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function _c(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,a,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=a,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,a,r,i,o,s,l){return e=new zc(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Rc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ni(i),e}function Wc(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}function Hc(e){if(!e)return Tr;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Dr(n))return Or(e,n,t)}return t}function Vc(e,t,n,a,r,i,o,s,l){return(e=Bc(n,a,!0,e,0,i,0,s,l)).context=Hc(null),n=e.current,(i=ri(a=$l(),r=Ql(n))).callback=void 0!==t&&null!==t?t:null,ii(n,i),e.current.lanes=r,mt(e,r,a),nc(e,a),e}function Uc(e,t,n,a){var r=t.current,i=$l(),o=Ql(r);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ri(i,o)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),ii(r,t),null!==(e=Jl(r,o,i))&&oi(e,r,o),o}function Xc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}yl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Er.current)ks=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ks=!1,function(e,t,n){switch(t.tag){case 3:Fs(t),Wi();break;case 5:to(t);break;case 1:Dr(t.type)&&Pr(t);break;case 4:Ji(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,r=t.memoizedProps.value;Ar(Gr,a._currentValue),a._currentValue=r;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(Ar(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ps(e,t,n):(Ar(ao,1&ao.current),null!==(e=Xs(e,t,n))?e.sibling:null);Ar(ao,1&ao.current);break;case 19:if(a=0!==(n&t.childLanes),0!==(128&e.flags)){if(a)return Us(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ar(ao,ao.current),a)break;return null;case 22:case 23:return t.lanes=0,As(e,t,n)}return Xs(e,t,n)}(e,t,n);ks=0!==(131072&e.flags)}else ks=!1,Di&&0!==(1048576&t.flags)&&Ti(t,yi,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var r=Fr(t,Nr.current);Qr(t,n),r=yo(null,t,a,e,r,n);var o=ko();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dr(a)?(o=!0,Pr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,ni(t),r.updater=di,t.stateNode=r,r._reactInternals=t,vi(t,a,e,n),t=Rs(null,t,a,!0,o,n)):(t.tag=0,Di&&o&&Ni(t),ws(null,t,r,n),t=t.child),t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(r=a._init)(a._payload),t.type=a,r=t.tag=function(e){if("function"===typeof e)return Fc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===F)return 14}return 2}(a),e=Xr(a,e),r){case 0:t=Ns(null,t,a,e,n);break e;case 1:t=Es(null,t,a,e,n);break e;case 11:t=Ss(null,t,a,e,n);break e;case 14:t=Cs(null,t,a,Xr(a.type,e),n);break e}throw Error(i(306,a,""))}return t;case 0:return a=t.type,r=t.pendingProps,Ns(e,t,a,r=t.elementType===a?r:Xr(a,r),n);case 1:return a=t.type,r=t.pendingProps,Es(e,t,a,r=t.elementType===a?r:Xr(a,r),n);case 3:e:{if(Fs(t),null===e)throw Error(i(387));a=t.pendingProps,r=(o=t.memoizedState).element,ai(e,t),li(t,a,null,n);var s=t.memoizedState;if(a=s.element,o.isDehydrated){if(o={element:a,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ds(e,t,a,n,r=Error(i(423)));break e}if(a!==r){t=Ds(e,t,a,n,r=Error(i(424)));break e}for(Fi=cr(t.stateNode.containerInfo.firstChild),Ri=t,Di=!0,Li=null,n=ji(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Wi(),a===r){t=Xs(e,t,n);break e}ws(e,t,a,n)}t=t.child}return t;case 5:return to(t),null===e&&_i(t),a=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,s=r.children,nr(a,r)?s=null:null!==o&&nr(a,o)&&(t.flags|=32),Ts(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&_i(t),null;case 13:return Ps(e,t,n);case 4:return Ji(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=Yi(t,null,a,n):ws(e,t,a,n),t.child;case 11:return a=t.type,r=t.pendingProps,Ss(e,t,a,r=t.elementType===a?r:Xr(a,r),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,r=t.pendingProps,o=t.memoizedProps,s=r.value,Ar(Gr,a._currentValue),a._currentValue=s,null!==o)if(sa(o.value,s)){if(o.children===r.children&&!Er.current){t=Xs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===a){if(1===o.tag){(c=ri(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),$r(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),$r(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,a=t.pendingProps.children,Qr(t,n),a=a(r=Jr(r)),t.flags|=1,ws(e,t,a,n),t.child;case 14:return r=Xr(a=t.type,t.pendingProps),Cs(e,t,a,r=Xr(a.type,r),n);case 15:return Is(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,r=t.pendingProps,r=t.elementType===a?r:Xr(a,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Dr(a)?(e=!0,Pr(t)):e=!1,Qr(t,n),pi(t,a,r),vi(t,a,r,n),Rs(null,t,a,!0,e,n);case 19:return Us(e,t,n);case 22:return As(e,t,n)}throw Error(i(156,t.tag))};var jc="function"===typeof reportError?reportError:function(e){console.error(e)};function qc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Jc(e,t,n,a,r){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof r){var s=r;r=function(){var e=Xc(o);s.call(e)}}Uc(t,o,e,r)}else o=function(e,t,n,a,r){if(r){if("function"===typeof a){var i=a;a=function(){var e=Xc(o);i.call(e)}}var o=Vc(t,a,e,0,null,!1,0,"",Qc);return e._reactRootContainer=o,e[pr]=o.current,Va(8===e.nodeType?e.parentNode:e),cc(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof a){var s=a;a=function(){var e=Xc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[pr]=l.current,Va(8===e.nodeType?e.parentNode:e),cc((function(){Uc(t,l,n,a)})),l}(n,t,e,r,a);return Xc(o)}Kc.prototype.render=qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Uc(e,t,null,null)},Kc.prototype.unmount=qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){Uc(null,e,null,null)})),t[pr]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&_t(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(xt(t,1|n),nc(t,$e()),0===(6&Il)&&(Bl=$e()+500,Vr()))}break;case 13:var a=$l();cc((function(){return Jl(e,1,a)})),Yc(e,1)}},wt=function(e){13===e.tag&&(Jl(e,134217728,$l()),Yc(e,134217728))},St=function(e){if(13===e.tag){var t=$l(),n=Ql(e);Jl(e,n,t),Yc(e,n)}},Ct=function(){return bt},It=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var r=kr(a);if(!r)throw Error(i(90));j(a),Q(a,r)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=lc,Ee=cc;var eu={usingClientEntryPoint:!1,Events:[br,yr,kr,Ae,Te,lc]},tu={findFiberByHostInstance:xr,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{rt=au.inject(nu),it=au}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(i(200));return Wc(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(i(299));var n=!1,a="",r=jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,a,r),e[pr]=t.current,Va(8===e.nodeType?e.parentNode:e),new qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(i(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(i(405));var a=null!=n&&n.hydratedSources||null,r=!1,o="",s=jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,r,0,o,s),e[pr]=t.current,Va(e),a)for(e=0;e<a.length;e++)r=(r=(n=a[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Kc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(i(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(i(40));return!!e._reactRootContainer&&(cc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pr]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!$c(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Jc(e,t,n,!1,a)},t.version="18.1.0-next-22edb9f77-20220426"},1250:function(e,t,n){"use strict";var a=n(4164);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n=60103,a=60106,r=60107,i=60108,o=60114,s=60109,l=60110,c=60112,u=60113,h=60120,d=60115,f=60116,p=60121,g=60122,v=60117,m=60129,x=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),a=b("react.portal"),r=b("react.fragment"),i=b("react.strict_mode"),o=b("react.profiler"),s=b("react.provider"),l=b("react.context"),c=b("react.forward_ref"),u=b("react.suspense"),h=b("react.suspense_list"),d=b("react.memo"),f=b("react.lazy"),p=b("react.block"),g=b("react.server.block"),v=b("react.fundamental"),m=b("react.debug_trace_mode"),x=b("react.legacy_hidden")}function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case r:case o:case i:case u:case h:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case d:case s:return e;default:return t}}case a:return t}}}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===r||e===o||e===m||e===i||e===u||e===h||e===x||"object"===typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===d||e.$$typeof===s||e.$$typeof===l||e.$$typeof===c||e.$$typeof===v||e.$$typeof===p||e[0]===g)},t.typeOf=y},7441:function(e,t,n){"use strict";e.exports=n(1372)},6374:function(e,t,n){"use strict";var a=n(2791),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var a,i={},c=null,u=null;for(a in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,a)&&!l.hasOwnProperty(a)&&(i[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===i[a]&&(i[a]=t[a]);return{$$typeof:r,type:e,key:c,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function x(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=m.prototype;var y=b.prototype=new x;y.constructor=b,g(y,m.prototype),y.isPureReactComponent=!0;var k=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,a){var r,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!C.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=a;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:S.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,r,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case a:l=!0}}if(l)return o=o(l=e),e=""===i?"."+N(l,0):i,k(o)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),E(o,t,r,"",(function(e){return e}))):null!=o&&(A(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,i=""===i?".":i+":",k(e))for(var c=0;c<e.length;c++){var u=i+N(s=e[c],c);l+=E(s,t,r,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=E(s=s.value,t,r,u=i+N(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var a=[],r=0;return E(e,a,"","",(function(e){return t.call(n,e,r++)})),a}function F(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},L={transition:null},M={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:L,ReactCurrentOwner:S};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=r,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!C.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=a;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:i,ref:o,props:r,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:F}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.1.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},9727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,a=n.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(F){l=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var r=t&&t.prototype instanceof v?t:v,i=Object.create(r.prototype),o=new N(a||[]);return i._invoke=function(e,t,n){var a=h;return function(r,i){if(a===f)throw new Error("Generator is already running");if(a===p){if("throw"===r)throw i;return R()}for(n.method=r,n.arg=i;;){var o=n.delegate;if(o){var s=I(o,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===h)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=f;var l=u(e,t,n);if("normal"===l.type){if(a=n.done?p:d,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}(e,n,o),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(F){return{type:"throw",arg:F}}}e.wrap=c;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",g={};function v(){}function m(){}function x(){}var b={};l(b,i,(function(){return this}));var y=Object.getPrototypeOf,k=y&&y(y(E([])));k&&k!==n&&a.call(k,i)&&(b=k);var w=x.prototype=v.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(r,i,o,s){var l=u(e[r],e,i);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"===typeof h&&a.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var r;this._invoke=function(e,a){function i(){return new t((function(t,r){n(e,a,t,r)}))}return r=r?r.then(i,i):i()}}function I(e,n){var a=e.iterator[n.method];if(a===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=u(a,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var i=r.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function E(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:R}}function R(){return{value:t,done:!0}}return m.prototype=x,l(w,"constructor",x),l(x,"constructor",m),m.displayName=l(x,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(C.prototype),l(C.prototype,o,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,a,r,i){void 0===i&&(i=Promise);var o=new C(c(t,n,a,r),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(w),l(w,s,"Generator"),l(w,i,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=E,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(a,r){return s.type="throw",s.arg=e,n.next=a,r&&(n.method="next",n.arg=t),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:E(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,r=e[a];if(!(0<i(r,t)))break e;e[a]=t,e[n]=r,n=a}}function a(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,r=e.length,o=r>>>1;a<o;){var s=2*(a+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<r&&0>i(u,l)?(e[a]=u,e[c]=n,a=c):(e[a]=l,e[s]=n,a=s);else{if(!(c<r&&0>i(u,n)))break e;e[a]=u,e[c]=n,a=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,v=!1,m="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=a(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=a(u)}}function k(e){if(v=!1,y(e),!g)if(null!==a(c))g=!0,L(w);else{var t=a(u);null!==t&&M(k,t.startTime-e)}}function w(e,n){g=!1,v&&(v=!1,x(A),A=-1),p=!0;var i=f;try{for(y(n),d=a(c);null!==d&&(!(d.expirationTime>n)||e&&!E());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===a(c)&&r(c),y(n)}else r(c);d=a(c)}if(null!==d)var l=!0;else{var h=a(u);null!==h&&M(k,h.startTime-n),l=!1}return l}finally{d=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,I=null,A=-1,T=5,N=-1;function E(){return!(t.unstable_now()-N<T)}function R(){if(null!==I){var e=t.unstable_now();N=e;var n=!0;try{n=I(!0,e)}finally{n?S():(C=!1,I=null)}}else C=!1}if("function"===typeof b)S=function(){b(R)};else if("undefined"!==typeof MessageChannel){var F=new MessageChannel,D=F.port2;F.port1.onmessage=R,S=function(){D.postMessage(null)}}else S=function(){m(R,0)};function L(e){I=e,C||(C=!0,S())}function M(e,n){A=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,L(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(u,e),null===a(c)&&e===a(u)&&(v?(x(A),A=-1):v=!0,M(k,i-o))):(e.sortIndex=s,n(c,e),g||p||(g=!0,L(w))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6699:function(e,t,n){var a=n(2501),r=n(9112),i=n(2132),o=n(890),s=n(4113),l=n(1725),c=n(3411);c.alea=a,c.xor128=r,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=l,e.exports=c},2501:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var a=.02519603282416938*(e+=t.charCodeAt(n));a-=e=a>>>0,e=(a*=e)>>>0,e+=4294967296*(a-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new o(e),a=t&&t.state,r=n.next;return r.int32=function(){return 4294967296*n.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,a&&("object"==typeof a&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.alea=l}(0,e=n.nmd(e),n.amdD)},1725:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,a=t.d,r=t.a;return e=e<<25^e>>>7^n,n=n-a|0,a=a<<24^a>>>8^r,r=r-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-a|0,t.d=a<<16^n>>>16^r,t.a=r-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var a=0;a<n.length+20;a++)t.b^=0|n.charCodeAt(a),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.tychei=l}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var a=0;a<n.length+64;a++)t.x^=0|n.charCodeAt(a),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xor128=l}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this;t.next=function(){var e,n,a=t.w,r=t.X,i=t.i;return t.w=a=a+1640531527|0,n=r[i+34&127],e=r[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=r[i]=n^e,t.i=i,n+(a^a>>>16)|0},function(e,t){var n,a,r,i,o,s=[],l=128;for(t===(0|t)?(a=t,t=null):(t+="\0",a=0,l=Math.max(l,t.length)),r=0,i=-32;i<l;++i)t&&(a^=t.charCodeAt((i+32)%t.length)),0===i&&(o=a),a^=a<<10,a^=a>>>15,a^=a<<4,a^=a>>>13,i>=0&&(o=o+1640531527|0,r=0==(n=s[127&i]^=a+o)?r+1:0);for(r>=128&&(s[127&(t&&t.length||0)]=-1),r=127,i=512;i>0;--i)a=s[r+34&127],n=s[r=r+1&127],a^=a<<13,n^=n<<17,a^=a>>>15,n^=n>>>12,s[r]=a^n;e.w=o,e.X=s,e.i=r}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&(a.X&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xor4096=l}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this;t.next=function(){var e,n,a=t.x,r=t.i;return e=a[r],n=(e^=e>>>7)^e<<24,n^=(e=a[r+1&7])^e>>>10,n^=(e=a[r+3&7])^e>>>3,n^=(e=a[r+4&7])^e<<7,e=a[r+7&7],n^=(e^=e<<13)^e<<9,a[r]=n,t.i=r+1&7,n},function(e,t){var n,a=[];if(t===(0|t))a[0]=t;else for(t=""+t,n=0;n<t.length;++n)a[7&n]=a[7&n]<<15^t.charCodeAt(n)+a[n+1&7]<<13;for(;a.length<8;)a.push(0);for(n=0;n<8&&0===a[n];++n);for(8==n?a[7]=-1:a[n],e.x=a,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&(a.x&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xorshift7=l}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var a;!function(e,r,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var a=0;a<n.length+64;a++)t.x^=0|n.charCodeAt(a),a==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new o(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&s(a,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xorwow=l}(0,e=n.nmd(e),n.amdD)},3411:function(e,t,n){var a;!function(r,i){var o,s=(0,eval)("this"),l=256,c=i.pow(l,6),u=i.pow(2,52),h=2*u,d=255;function f(e,t,n){var a=[],d=m(v((t=1==t?{entropy:!0}:t||{}).entropy?[e,x(r)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(l):(e=new Uint8Array(l),(s.crypto||s.msCrypto).getRandomValues(e)),x(e)}catch(a){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,x(r)]}}():e,3),a),f=new p(a),b=function(){for(var e=f.g(6),t=c,n=0;e<u;)e=(e+n)*l,t*=l,n=f.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|f.g(4)},b.quick=function(){return f.g(4)/4294967296},b.double=b,m(x(f.S),r),(t.pass||n||function(e,t,n,a){return a&&(a.S&&g(a,f),e.state=function(){return g(f,{})}),n?(i.random=e,t):e})(b,d,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,a=this,r=0,i=a.i=a.j=0,o=a.S=[];for(n||(e=[n++]);r<l;)o[r]=r++;for(r=0;r<l;r++)o[r]=o[i=d&i+e[r%n]+(t=o[r])],o[i]=t;(a.g=function(e){for(var t,n=0,r=a.i,i=a.j,o=a.S;e--;)t=o[r=d&r+1],n=n*l+o[d&(o[r]=o[i=d&i+t])+(o[i]=t)];return a.i=r,a.j=i,n})(l)}function g(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){var n,a=[],r=typeof e;if(t&&"object"==r)for(n in e)try{a.push(v(e[n],t-1))}catch(i){}return a.length?a:"string"==r?e:e+"\0"}function m(e,t){for(var n,a=e+"",r=0;r<a.length;)t[d&r]=d&(n^=19*t[d&r])+a.charCodeAt(r++);return x(t)}function x(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=f,m(i.random(),r),e.exports){e.exports=f;try{o=n(5042)}catch(b){}}else void 0===(a=function(){return f}.call(t,n,t,e))||(e.exports=a)}([],Math)},9613:function(e){e.exports=function(e,t,n,a){var r=n?n.call(a,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<i.length;l++){var c=i[l];if(!s(c))return!1;var u=e[c],h=t[c];if(!1===(r=n?n.call(a,u,h,c):void 0)||void 0===r&&u!==h)return!1}return!0}},914:function(){},5410:function(){},8628:function(){},5778:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,a){return n.f[a](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".806d90b3.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="reporter:";n.l=function(a,r,i,o){if(e[a])e[a].push(r);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==a||h.getAttribute("data-webpack")==t+i){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=a),e[a]=[r];var d=function(t,n){s.onerror=s.onload=null,clearTimeout(f);var r=e[a];if(delete e[a],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/reporterjsReact/",function(){var e={179:0};n.f.j=function(t,a){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var i=new Promise((function(n,a){r=e[t]=[n,a]}));a.push(r[2]=i);var o=n.p+n.u(t),s=new Error;n.l(o,(function(a){if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,r[1](s)}}),"chunk-"+t,t)}};var t=function(t,a){var r,i,o=a[0],s=a[1],l=a[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)l(n)}for(t&&t(a);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},a=self.webpackChunkreporter=self.webpackChunkreporter||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}(),function(){"use strict";var e={};n.r(e),n.d(e,{browserFiles:function(){return Xs},browserHTTPRequest:function(){return nl},concatenateArrayBuffers:function(){return Ho},copyModel:function(){return Es},decodeWeights:function(){return Oo},encodeWeights:function(){return Lo},fromMemory:function(){return ol},fromMemorySync:function(){return sl},getLoadHandlers:function(){return Qo},getModelArtifactsForJSON:function(){return Xo},getModelArtifactsInfoForJSON:function(){return Yo},getSaveHandlers:function(){return $o},http:function(){return tl},isHTTPScheme:function(){return Js},listModels:function(){return Is},loadWeights:function(){return qs},moveModel:function(){return Fs},registerLoadRouter:function(){return Zo},registerSaveRouter:function(){return Ko},removeModel:function(){return Ts},weightsLoaderFactory:function(){return Zs},withSaveHandler:function(){return ll},withSaveHandlerSync:function(){return cl}});var t=n(2791),a=n(1250);function r(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,l,"next",e)}function l(e){r(o,a,i,s,l,"throw",e)}s(void 0)}))}}function o(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(l){s=!0,r=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return i}}(e,t)||l(e,t)||c()}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=n(7757),f=n.n(d),p=n(7441),g=n(9613),v=n.n(g);var m=function(e){function t(e,a,l,c,d){for(var f,p,g,v,y,w=0,S=0,C=0,I=0,A=0,D=0,M=g=f=0,P=0,_=0,z=0,B=0,W=l.length,H=W-1,V="",U="",X="",G="";P<W;){if(p=l.charCodeAt(P),P===H&&0!==S+I+C+w&&(0!==S&&(p=47===S?10:47),I=C=w=0,W++,H++),0===S+I+C+w){if(P===H&&(0<_&&(V=V.replace(h,"")),0<V.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:V+=l.charAt(P)}p=59}switch(p){case 123:for(f=(V=V.trim()).charCodeAt(0),g=1,B=++P;P<W;){switch(p=l.charCodeAt(P)){case 123:g++;break;case 125:g--;break;case 47:switch(p=l.charCodeAt(P+1)){case 42:case 47:e:{for(M=P+1;M<H;++M)switch(l.charCodeAt(M)){case 47:if(42===p&&42===l.charCodeAt(M-1)&&P+2!==M){P=M+1;break e}break;case 10:if(47===p){P=M+1;break e}}P=M}}break;case 91:p++;case 40:p++;case 34:case 39:for(;P++<H&&l.charCodeAt(P)!==p;);}if(0===g)break;P++}if(g=l.substring(B,P),0===f&&(f=(V=V.replace(u,"").trim()).charCodeAt(0)),64===f){switch(0<_&&(V=V.replace(h,"")),p=V.charCodeAt(1)){case 100:case 109:case 115:case 45:_=a;break;default:_=F}if(B=(g=t(a,_,g,p,d+1)).length,0<L&&(y=s(3,g,_=n(F,V,z),a,N,T,B,p,d,c),V=_.join(""),void 0!==y&&0===(B=(g=y.trim()).length)&&(p=0,g="")),0<B)switch(p){case 115:V=V.replace(k,o);case 100:case 109:case 45:g=V+"{"+g+"}";break;case 107:g=(V=V.replace(m,"$1 $2"))+"{"+g+"}",g=1===R||2===R&&i("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=V+g,112===c&&(U+=g,g="")}else g=""}else g=t(a,n(a,V,z),g,c,d+1);X+=g,g=z=_=M=f=0,V="",p=l.charCodeAt(++P);break;case 125:case 59:if(1<(B=(V=(0<_?V.replace(h,""):V).trim()).length))switch(0===M&&(f=V.charCodeAt(0),45===f||96<f&&123>f)&&(B=(V=V.replace(" ",":")).length),0<L&&void 0!==(y=s(1,V,a,e,N,T,U.length,c,d,c))&&0===(B=(V=y.trim()).length)&&(V="\0\0"),f=V.charCodeAt(0),p=V.charCodeAt(1),f){case 0:break;case 64:if(105===p||99===p){G+=V+l.charAt(P);break}default:58!==V.charCodeAt(B-1)&&(U+=r(V,f,p,V.charCodeAt(2)))}z=_=M=f=0,V="",p=l.charCodeAt(++P)}}switch(p){case 13:case 10:47===S?S=0:0===1+f&&107!==c&&0<V.length&&(_=1,V+="\0"),0<L*O&&s(0,V,a,e,N,T,U.length,c,d,c),T=1,N++;break;case 59:case 125:if(0===S+I+C+w){T++;break}default:switch(T++,v=l.charAt(P),p){case 9:case 32:if(0===I+w+S)switch(A){case 44:case 58:case 9:case 32:v="";break;default:32!==p&&(v=" ")}break;case 0:v="\\0";break;case 12:v="\\f";break;case 11:v="\\v";break;case 38:0===I+S+w&&(_=z=1,v="\f"+v);break;case 108:if(0===I+S+w+E&&0<M)switch(P-M){case 2:112===A&&58===l.charCodeAt(P-3)&&(E=A);case 8:111===D&&(E=D)}break;case 58:0===I+S+w&&(M=P);break;case 44:0===S+C+I+w&&(_=1,v+="\r");break;case 34:case 39:0===S&&(I=I===p?0:0===I?p:I);break;case 91:0===I+S+C&&w++;break;case 93:0===I+S+C&&w--;break;case 41:0===I+S+w&&C--;break;case 40:if(0===I+S+w){if(0===f)if(2*A+3*D===533);else f=1;C++}break;case 64:0===S+C+I+w+M+g&&(g=1);break;case 42:case 47:if(!(0<I+w+C))switch(S){case 0:switch(2*p+3*l.charCodeAt(P+1)){case 235:S=47;break;case 220:B=P,S=42}break;case 42:47===p&&42===A&&B+2!==P&&(33===l.charCodeAt(B+2)&&(U+=l.substring(B,P+1)),v="",S=0)}}0===S&&(V+=v)}D=A,A=p,P++}if(0<(B=U.length)){if(_=a,0<L&&(void 0!==(y=s(2,U,_,e,N,T,B,c,d,c))&&0===(U=y).length))return G+U+X;if(U=_.join(",")+"{"+U+"}",0!==R*E){switch(2!==R||i(U,2)||(E=0),E){case 111:U=U.replace(b,":-moz-$1")+U;break;case 112:U=U.replace(x,"::-webkit-input-$1")+U.replace(x,"::-moz-$1")+U.replace(x,":-ms-input-$1")+U}E=0}}return G+U+X}function n(e,t,n){var r=t.trim().split(g);t=r;var i=r.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<i;++s)t[s]=a(e,t[s],n).trim();break;default:var l=s=0;for(t=[];s<i;++s)for(var c=0;c<o;++c)t[l++]=a(e[c]+" ",r[s],n).trim()}return t}function a(e,t,n){var a=t.charCodeAt(0);switch(33>a&&(a=(t=t.trim()).charCodeAt(0)),a){case 38:return t.replace(v,"$1"+e.trim());case 58:return e.trim()+t.replace(v,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(v,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function r(e,t,n,a){var o=e+";",s=2*t+3*n+4*a;if(944===s){e=o.indexOf(":",9)+1;var l=o.substring(e,o.length-1).trim();return l=o.substring(0,e).trim()+l+";",1===R||2===R&&i(l,1)?"-webkit-"+l+l:l}if(0===R||2===R&&!i(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(A,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(l=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+l+o;case 1005:return f.test(o)?o.replace(d,":-webkit-")+o.replace(d,":-moz-")+o:o;case 1e3:switch(t=(l=o.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=o.replace(y,"tb");break;case 232:l=o.replace(y,"tb-rl");break;case 220:l=o.replace(y,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+l+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(l=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:o=o.replace(l,"-webkit-"+l)+";"+o;break;case 207:case 102:o=o.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(l,"-webkit-"+l)+";"+o.replace(l,"-ms-"+l+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return l=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+l+"-ms-flex-"+l+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(S,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(S,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===I.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?r(e.replace("stretch","fill-available"),t,n,a).replace(":fill-available",":stretch"):o.replace(l,"-webkit-"+l)+o.replace(l,"-moz-"+l.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+a&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function i(e,t){var n=e.indexOf(1===t?":":"{"),a=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),M(2!==t?a:a.replace(C,"$1"),n,t)}function o(e,t){var n=r(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,n,a,r,i,o,s,l,u){for(var h,d=0,f=t;d<L;++d)switch(h=D[d].call(c,e,f,n,a,r,i,o,s,l,u)){case void 0:case!1:case!0:case null:break;default:f=h}if(f!==t)return f}function l(e){return void 0!==(e=e.prefix)&&(M=null,e?"function"!==typeof e?R=1:(R=2,M=e):R=0),l}function c(e,n){var a=e;if(33>a.charCodeAt(0)&&(a=a.trim()),a=[a],0<L){var r=s(-1,n,a,a,N,T,0,0,0,0);void 0!==r&&"string"===typeof r&&(n=r)}var i=t(F,a,n,0,0);return 0<L&&(void 0!==(r=s(-2,i,a,a,N,T,i.length,0,0,0))&&(i=r)),"",E=0,T=N=1,i}var u=/^\0+/g,h=/[\0\r\f]/g,d=/: */g,f=/zoo|gra/,p=/([,: ])(transform)/g,g=/,\r+?/g,v=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,x=/::(place)/g,b=/:(read-only)/g,y=/[svh]\w+-[tblr]{2}/,k=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,S=/-self|flex-/g,C=/[^]*?(:[rp][el]a[\w-]+)[^]*/,I=/stretch|:\s*\w+\-(?:conte|avail)/,A=/([^-])(image-set\()/,T=1,N=1,E=0,R=1,F=[],D=[],L=0,M=null,O=0;return c.use=function e(t){switch(t){case void 0:case null:L=D.length=0;break;default:if("function"===typeof t)D[L++]=t;else if("object"===typeof t)for(var n=0,a=t.length;n<a;++n)e(t[n]);else O=0|!!t}return e},c.set=l,void 0!==e&&l(e),c},x={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var b=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},y=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,k=b((function(e){return y.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),w=n(2110),S=n.n(w);function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var I=function(e,t){for(var n=[e[0]],a=0,r=t.length;a<r;a+=1)n.push(t[a],e[a+1]);return n},A=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,p.typeOf)(e)},T=Object.freeze([]),N=Object.freeze({});function E(e){return"function"==typeof e}function R(e){return e.displayName||e.name||"Component"}function F(e){return e&&"string"==typeof e.styledComponentId}var D="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"/reporterjsReact",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/reporterjsReact",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",L="undefined"!=typeof window&&"HTMLElement"in window,M=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/reporterjsReact",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/reporterjsReact",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/reporterjsReact",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/reporterjsReact",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/reporterjsReact",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/reporterjsReact",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/reporterjsReact",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/reporterjsReact",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY));function O(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var P=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,a=n.length,r=a;e>=r;)(r<<=1)<0&&O(16,""+e);this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var i=a;i<r;i++)this.groupSizes[i]=0}for(var o=this.indexOfGroup(e+1),s=0,l=t.length;s<l;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),a=n+t;this.groupSizes[e]=0;for(var r=n;r<a;r++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],a=this.indexOfGroup(e),r=a+n,i=a;i<r;i++)t+=this.tag.getRule(i)+"/*!sc*/\n";return t},e}(),_=new Map,z=new Map,B=1,W=function(e){if(_.has(e))return _.get(e);for(;z.has(B);)B++;var t=B++;return _.set(e,t),z.set(t,e),t},H=function(e){return z.get(e)},V=function(e,t){t>=B&&(B=t+1),_.set(e,t),z.set(t,e)},U="style["+D+'][data-styled-version="5.3.5"]',X=new RegExp("^"+D+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),G=function(e,t,n){for(var a,r=n.split(","),i=0,o=r.length;i<o;i++)(a=r[i])&&e.registerName(t,a)},Y=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),a=[],r=0,i=n.length;r<i;r++){var o=n[r].trim();if(o){var s=o.match(X);if(s){var l=0|parseInt(s[1],10),c=s[2];0!==l&&(V(c,l),G(e,c,s[3]),e.getTag().insertRules(l,a)),a.length=0}else a.push(o)}}},j=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},q=function(e){var t=document.head,n=e||t,a=document.createElement("style"),r=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var a=t[n];if(a&&1===a.nodeType&&a.hasAttribute(D))return a}}(n),i=void 0!==r?r.nextSibling:null;a.setAttribute(D,"active"),a.setAttribute("data-styled-version","5.3.5");var o=j();return o&&a.setAttribute("nonce",o),n.insertBefore(a,i),a},K=function(){function e(e){var t=this.element=q(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,a=t.length;n<a;n++){var r=t[n];if(r.ownerNode===e)return r}O(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),Z=function(){function e(e){var t=this.element=q(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),a=this.nodes[e];return this.element.insertBefore(n,a||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),$=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Q=L,J={isServer:!L,useCSSOMInjection:!M},ee=function(){function e(e,t,n){void 0===e&&(e=N),void 0===t&&(t={}),this.options=C({},J,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&L&&Q&&(Q=!1,function(e){for(var t=document.querySelectorAll(U),n=0,a=t.length;n<a;n++){var r=t[n];r&&"active"!==r.getAttribute(D)&&(Y(e,r),r.parentNode&&r.parentNode.removeChild(r))}}(this))}e.registerId=function(e){return W(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(C({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,a=t.useCSSOMInjection,r=t.target,e=n?new $(r):a?new K(r):new Z(r),new P(e)));var e,t,n,a,r},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(W(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(W(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(W(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,a="",r=0;r<n;r++){var i=H(r);if(void 0!==i){var o=e.names.get(i),s=t.getGroup(r);if(o&&s&&o.size){var l=D+".g"+r+'[id="'+i+'"]',c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+=e+",")})),a+=""+s+l+'{content:"'+c+'"}/*!sc*/\n'}}}return a}(this)},e}(),te=/(a)(d)/gi,ne=function(e){return String.fromCharCode(e+(e>25?39:97))};function ae(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=ne(t%52)+n;return(ne(t%52)+n).replace(te,"$1-$2")}var re=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},ie=function(e){return re(5381,e)};function oe(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(E(n)&&!F(n))return!1}return!0}var se=ie("5.3.5"),le=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&oe(e),this.componentId=t,this.baseHash=re(se,t),this.baseStyle=n,ee.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var a=this.componentId,r=[];if(this.baseStyle&&r.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(a,this.staticRulesId))r.push(this.staticRulesId);else{var i=Ae(this.rules,e,t,n).join(""),o=ae(re(this.baseHash,i)>>>0);if(!t.hasNameForId(a,o)){var s=n(i,"."+o,void 0,a);t.insertRules(a,o,s)}r.push(o),this.staticRulesId=o}else{for(var l=this.rules.length,c=re(this.baseHash,n.hash),u="",h=0;h<l;h++){var d=this.rules[h];if("string"==typeof d)u+=d;else if(d){var f=Ae(d,e,t,n),p=Array.isArray(f)?f.join(""):f;c=re(c,p+h),u+=p}}if(u){var g=ae(c>>>0);if(!t.hasNameForId(a,g)){var v=n(u,"."+g,void 0,a);t.insertRules(a,g,v)}r.push(g)}}return r.join(" ")},e}(),ce=/^\s*\/\/.*$/gm,ue=[":","[",".","#"];function he(e){var t,n,a,r,i=void 0===e?N:e,o=i.options,s=void 0===o?N:o,l=i.plugins,c=void 0===l?T:l,u=new m(s),h=[],d=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,a,r,i,o,s,l,c,u,h){switch(n){case 1:if(0===u&&64===a.charCodeAt(0))return e(a+";"),"";break;case 2:if(0===c)return a+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(r[0]+a),"";default:return a+(0===h?"/*|*/":"")}case-2:a.split("/*|*/}").forEach(t)}}}((function(e){h.push(e)})),f=function(e,a,i){return 0===a&&-1!==ue.indexOf(i[n.length])||i.match(r)?e:"."+t};function p(e,i,o,s){void 0===s&&(s="&");var l=e.replace(ce,""),c=i&&o?o+" "+i+" { "+l+" }":l;return t=s,n=i,a=new RegExp("\\"+n+"\\b","g"),r=new RegExp("(\\"+n+"\\b){2,}"),u(o||!i?"":i,c)}return u.use([].concat(c,[function(e,t,r){2===e&&r.length&&r[0].lastIndexOf(n)>0&&(r[0]=r[0].replace(a,f))},d,function(e){if(-2===e){var t=h;return h=[],t}}])),p.hash=c.length?c.reduce((function(e,t){return t.name||O(15),re(e,t.name)}),5381).toString():"",p}var de=t.createContext(),fe=(de.Consumer,t.createContext()),pe=(fe.Consumer,new ee),ge=he();function ve(){return(0,t.useContext)(de)||pe}function me(){return(0,t.useContext)(fe)||ge}function xe(e){var n=(0,t.useState)(e.stylisPlugins),a=n[0],r=n[1],i=ve(),o=(0,t.useMemo)((function(){var t=i;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),s=(0,t.useMemo)((function(){return he({options:{prefix:!e.disableVendorPrefixes},plugins:a})}),[e.disableVendorPrefixes,a]);return(0,t.useEffect)((function(){v()(a,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),t.createElement(de.Provider,{value:o},t.createElement(fe.Provider,{value:s},e.children))}var be=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=ge);var a=n.name+t.hash;e.hasNameForId(n.id,a)||e.insertRules(n.id,a,t(n.rules,a,"@keyframes"))},this.toString=function(){return O(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=ge),this.name+e.hash},e}(),ye=/([A-Z])/,ke=/([A-Z])/g,we=/^ms-/,Se=function(e){return"-"+e.toLowerCase()};function Ce(e){return ye.test(e)?e.replace(ke,Se).replace(we,"-ms-"):e}var Ie=function(e){return null==e||!1===e||""===e};function Ae(e,t,n,a){if(Array.isArray(e)){for(var r,i=[],o=0,s=e.length;o<s;o+=1)""!==(r=Ae(e[o],t,n,a))&&(Array.isArray(r)?i.push.apply(i,r):i.push(r));return i}return Ie(e)?"":F(e)?"."+e.styledComponentId:E(e)?"function"!=typeof(l=e)||l.prototype&&l.prototype.isReactComponent||!t?e:Ae(e(t),t,n,a):e instanceof be?n?(e.inject(n,a),e.getName(a)):e:A(e)?function e(t,n){var a,r,i=[];for(var o in t)t.hasOwnProperty(o)&&!Ie(t[o])&&(Array.isArray(t[o])&&t[o].isCss||E(t[o])?i.push(Ce(o)+":",t[o],";"):A(t[o])?i.push.apply(i,e(t[o],o)):i.push(Ce(o)+": "+(a=o,(null==(r=t[o])||"boolean"==typeof r||""===r?"":"number"!=typeof r||0===r||a in x?String(r).trim():r+"px")+";")));return n?[n+" {"].concat(i,["}"]):i}(e):e.toString();var l}var Te=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function Ne(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return E(e)||A(e)?Te(Ae(I(T,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:Te(Ae(I(e,n)))}new Set;var Ee=function(e,t,n){return void 0===n&&(n=N),e.theme!==n.theme&&e.theme||t||n.theme},Re=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Fe=/(^-|-$)/g;function De(e){return e.replace(Re,"-").replace(Fe,"")}var Le=function(e){return ae(ie(e)>>>0)};function Me(e){return"string"==typeof e&&!0}var Oe=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Pe=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function _e(e,t,n){var a=e[n];Oe(t)&&Oe(a)?ze(a,t):e[n]=t}function ze(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];for(var r=0,i=n;r<i.length;r++){var o=i[r];if(Oe(o))for(var s in o)Pe(s)&&_e(e,o[s],s)}return e}var Be=t.createContext();Be.Consumer;var We={};function He(e,n,a){var r=F(e),i=!Me(e),o=n.attrs,s=void 0===o?T:o,l=n.componentId,c=void 0===l?function(e,t){var n="string"!=typeof e?"sc":De(e);We[n]=(We[n]||0)+1;var a=n+"-"+Le("5.3.5"+n+We[n]);return t?t+"-"+a:a}(n.displayName,n.parentComponentId):l,u=n.displayName,h=void 0===u?function(e){return Me(e)?"styled."+e:"Styled("+R(e)+")"}(e):u,d=n.displayName&&n.componentId?De(n.displayName)+"-"+n.componentId:n.componentId||c,f=r&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,p=n.shouldForwardProp;r&&e.shouldForwardProp&&(p=n.shouldForwardProp?function(t,a,r){return e.shouldForwardProp(t,a,r)&&n.shouldForwardProp(t,a,r)}:e.shouldForwardProp);var g,v=new le(a,d,r?e.componentStyle:void 0),m=v.isStatic&&0===s.length,x=function(e,n){return function(e,n,a,r){var i=e.attrs,o=e.componentStyle,s=e.defaultProps,l=e.foldedComponentIds,c=e.shouldForwardProp,u=e.styledComponentId,h=e.target,d=function(e,t,n){void 0===e&&(e=N);var a=C({},t,{theme:e}),r={};return n.forEach((function(e){var t,n,i,o=e;for(t in E(o)&&(o=o(a)),o)a[t]=r[t]="className"===t?(n=r[t],i=o[t],n&&i?n+" "+i:n||i):o[t]})),[a,r]}(Ee(n,(0,t.useContext)(Be),s)||N,n,i),f=d[0],p=d[1],g=function(e,t,n,a){var r=ve(),i=me();return t?e.generateAndInjectStyles(N,r,i):e.generateAndInjectStyles(n,r,i)}(o,r,f),v=a,m=p.$as||n.$as||p.as||n.as||h,x=Me(m),b=p!==n?C({},n,{},p):n,y={};for(var w in b)"$"!==w[0]&&"as"!==w&&("forwardedAs"===w?y.as=b[w]:(c?c(w,k,m):!x||k(w))&&(y[w]=b[w]));return n.style&&p.style!==n.style&&(y.style=C({},n.style,{},p.style)),y.className=Array.prototype.concat(l,u,g!==u?g:null,n.className,p.className).filter(Boolean).join(" "),y.ref=v,(0,t.createElement)(m,y)}(g,e,n,m)};return x.displayName=h,(g=t.forwardRef(x)).attrs=f,g.componentStyle=v,g.displayName=h,g.shouldForwardProp=p,g.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):T,g.styledComponentId=d,g.target=r?e.target:e,g.withComponent=function(e){var t=n.componentId,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(n,["componentId"]),i=t&&t+"-"+(Me(e)?e:De(R(e)));return He(e,C({},r,{attrs:f,componentId:i}),a)},Object.defineProperty(g,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?ze({},e.defaultProps,t):t}}),g.toString=function(){return"."+g.styledComponentId},i&&S()(g,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),g}var Ve=function(e){return function e(t,n,a){if(void 0===a&&(a=N),!(0,p.isValidElementType)(n))return O(1,String(n));var r=function(){return t(n,a,Ne.apply(void 0,arguments))};return r.withConfig=function(r){return e(t,n,C({},a,{},r))},r.attrs=function(r){return e(t,n,C({},a,{attrs:Array.prototype.concat(a.attrs,r).filter(Boolean)}))},r}(He,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Ve[e]=Ve(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=oe(e),ee.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,a){var r=a(Ae(this.rules,t,n,a).join(""),""),i=this.componentId+e;n.insertRules(i,i,r)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,a){e>2&&ee.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,a)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=j();return"<style "+[n&&'nonce="'+n+'"',D+'="true"','data-styled-version="5.3.5"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?O(2):e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)return O(2);var a=((n={})[D]="",n["data-styled-version"]="5.3.5",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),r=j();return r&&(a.nonce=r),[t.createElement("style",C({},a,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new ee({isServer:!0}),this.sealed=!1}var n=e.prototype;n.collectStyles=function(e){return this.sealed?O(2):t.createElement(xe,{sheet:this.instance},e)},n.interleaveWithNodeStream=function(e){return O(3)}}();var Ue=Ve,Xe=n(3496),Ge=n(184),Ye=function(e){var n=e.data,a=u((0,t.useState)([]),2),r=a[0],i=a[1],o=u((0,t.useState)([]),2),s=o[0],l=o[1];(0,t.useEffect)((function(){var e=n.month,t=n.week4;l([e.projectCost,e.conditionOfProduct,e.performance,e.leadTimes,e.response,e.completionDate,e.install,e.accountant]),i([t.projectCost,t.conditionOfProduct,t.performance,t.leadTimes,t.response,t.completionDate,t.install,t.accountant])}),[n]);var c=[{name:"Month",data:s},{name:"Week",data:r}];return(0,Ge.jsx)("div",{className:"app",children:(0,Ge.jsx)("div",{className:"row",children:(0,Ge.jsx)("div",{className:"mixed-chart col-lg-9 mx-auto",children:(0,Ge.jsx)(Xe.Z,{options:{chart:{type:"bar",height:430},plotOptions:{bar:{horizontal:!1,dataLabels:{position:"top"}}},xaxis:{categories:["Project Cost","Condition of Product","Performance","Lead Times","Responsiveness","Completion Date","Shipment/Delivery","Installation","Accountant"]},yaxis:{max:10},colors:[function(e){var t=e.value;e.seriesIndex,e.w;return t>=8?"#439639":"#912F40"}],title:{text:"Warranty Scores Current Week Against Rolling Month",align:"left",margin:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:"bold",color:"#263238"}}},series:c,type:"bar"})})})})};function je(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function qe(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ke(e){return function(e){if(Array.isArray(e))return s(e)}(e)||qe(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Qe(e,t,n){return t&&$e(e.prototype,t),n&&$e(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Je=function(){function e(t,n){Ze(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return Qe(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),et=function(){function e(){Ze(this,e)}return Qe(e,[{key:"refCount",value:function(e){return tt("refCount")}},{key:"incRef",value:function(e){return tt("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return tt("time")}},{key:"read",value:function(e){return tt("read")}},{key:"readSync",value:function(e){return tt("readSync")}},{key:"readToGPU",value:function(e,t){return tt("readToGPU")}},{key:"numDataIds",value:function(){return tt("numDataIds")}},{key:"disposeData",value:function(e,t){return tt("disposeData")}},{key:"write",value:function(e,t,n){return tt("write")}},{key:"move",value:function(e,t,n,a,r){return tt("move")}},{key:"memory",value:function(){return tt("memory")}},{key:"floatPrecision",value:function(){return tt("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return tt("dispose")}}]),e}();function tt(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function nt(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,it(e,--t,n)}function at(e,t,n){return Math.max(e,Math.min(t,n))}function rt(e){return e%2===0?e:e+1}function it(e,t,n){var a=e[t];e[t]=e[n],e[n]=a}function ot(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function st(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function lt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";st(dt(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function ct(e){st(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||St(e)&&!n)for(var a=0;a<e.length;++a)ut(e[a],t,n);else t.push(e);return t}function ht(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function dt(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ft(e){return e%1===0}function pt(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function gt(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function vt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(a,r){var i=0;!function o(){if(e())a();else{i++;var s=t(i);null!=n&&i>=n?r():setTimeout(o,s)}}()}))}function mt(e,t){for(var n=1,a=-1,r=0;r<e.length;++r)if(e[r]>=0)n*=e[r];else if(-1===e[r]){if(-1!==a)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(a," and dim ").concat(r));a=r}else if(e[r]<0)throw Error("Shapes can not be < 0. Found ".concat(e[r]," at dim ").concat(r));if(-1===a){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[a]=t/n,i}function xt(e,t){var n=t.length;return st((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),st(e.every((function(e){return ft(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function bt(e,t){for(var n=[],a=[],r=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||r?null:xt(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),a.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),a.push(s))}return{newShape:n,keptDims:a}}function yt(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function kt(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function wt(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function St(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function Ct(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function It(e){return"string"===typeof e||e instanceof String}function At(e){return"number"===typeof e}function Tt(e){return Array.isArray(e)?Tt(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":At(e)?"float32":It(e)?"string":"boolean"===typeof e?"bool":"float32"}function Nt(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Et(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function Rt(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var a=t-3;a>=0;--a)n[a]=n[a+1]*e[a+1];return n}function Ft(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=new Array;if(1===t.length)for(var i=t[0]*(a?2:1),o=0;o<i;o++)r[o]=n[e+o];else for(var s=t[0],l=t.slice(1),c=l.reduce((function(e,t){return e*t}))*(a?2:1),u=0;u<s;u++)r[u]=Ft(e+u*c,l,n,a);return r}function Dt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var a=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===a)return[];if(a!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return Ft(0,e,t,n)}function Lt(e,t){for(var n=Mt(e,t),a=0;a<n.length;a++)n[a]=1;return n}function Mt(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function Ot(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return Dt(e,new Float32Array(n));if("int32"===t)return Dt(e,new Int32Array(n));if("bool"===t)return Dt(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function Pt(e){e.forEach((function(t){st(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function _t(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var a=e[e.length-1],r=0;r<e.length-1;++r)a+=n[r]*e[r];return a}function zt(e,t,n){if(0===t)return[];if(1===t)return[e];for(var a=new Array(t),r=0;r<a.length-1;++r)a[r]=Math.floor(e/n[r]),e-=a[r]*n[r];return a[a.length-1]=e,a}function Bt(e){return e&&e.then&&"function"===typeof e.then}var Wt="tfjsflags",Ht=function(){function e(t){Ze(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Vt,this.populateURLFlags()}return Qe(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(Xt().getBool("IS_TEST")||Xt().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var a=this.urlFlags[e];Xt().getBool("IS_TEST")||Xt().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(a,".")),this.set(e,a)}}},{key:"getAsync",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(Bt(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(Wt in t)t.tfjsflags.split(",").forEach((function(t){var n=u(t.split(":"),2),a=n[0],r=n[1];e.urlFlags[a]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(a,r)}))}}}]),e}();function Vt(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return Ut(t,a[0],a[1]),a.join("=")})),t}function Ut(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function Xt(){return Yt}var Gt,Yt=null;function jt(){if(null==Gt){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}Gt=e}return Gt}function qt(e,t){var n=function(){var e=jt();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var a=t();return n.set(e,a),n.get(e)}var Kt="Abs",Zt="Acos",$t="Acosh",Qt="Add",Jt="AddN",en="All",tn="Any",nn="ArgMax",an="ArgMin",rn="Asin",on="Asinh",sn="Atan",ln="Atanh",cn="Atan2",un="AvgPool",hn="AvgPoolGrad",dn="AvgPool3D",fn="AvgPool3DGrad",pn="BatchMatMul",gn="BatchToSpaceND",vn="Bincount",mn="BroadcastArgs",xn="Cast",bn="Ceil",yn="ClipByValue",kn="Complex",wn="ComplexAbs",Sn="Concat",Cn="Conv2D",In="Conv2DBackpropFilter",An="Conv2DBackpropInput",Tn="Conv3D",Nn="Conv3DBackpropFilterV2",En="Conv3DBackpropInputV2",Rn="Cos",Fn="Cosh",Dn="Cumprod",Ln="Cumsum",Mn="CropAndResize",On="DenseBincount",Pn="DepthToSpace",_n="DepthwiseConv2dNative",zn="DepthwiseConv2dNativeBackpropFilter",Bn="DepthwiseConv2dNativeBackpropInput",Wn="Diag",Hn="Dilation2D",Vn="Dilation2DBackpropInput",Un="Dilation2DBackpropFilter",Xn="RealDiv",Gn="Einsum",Yn="Elu",jn="EluGrad",qn="Erf",Kn="Equal",Zn="Exp",$n="ExpandDims",Qn="Expm1",Jn="FFT",ea="Fill",ta="FlipLeftRight",na="Floor",aa="FloorDiv",ra="FusedBatchNorm",ia="GatherV2",oa="GatherNd",sa="Greater",la="GreaterEqual",ca="Identity",ua="IFFT",ha="Imag",da="IsFinite",fa="IsInf",pa="IsNan",ga="LeakyRelu",va="Less",ma="LessEqual",xa="LinSpace",ba="Log",ya="Log1p",ka="LogicalAnd",wa="LogicalNot",Sa="LogicalOr",Ca="LRN",Ia="LRNGrad",Aa="Max",Ta="Maximum",Na="MaxPool",Ea="MaxPoolGrad",Ra="MaxPool3D",Fa="MaxPool3DGrad",Da="MaxPoolWithArgmax",La="Mean",Ma="Min",Oa="Minimum",Pa="MirrorPad",_a="Mod",za="Multinomial",Ba="Multiply",Wa="Neg",Ha="NotEqual",Va="NonMaxSuppressionV3",Ua="NonMaxSuppressionV4",Xa="NonMaxSuppressionV5",Ga="OnesLike",Ya="OneHot",ja="Pack",qa="PadV2",Ka="Pow",Za="Prelu",$a="Prod",Qa="Range",Ja="Real",er="Reciprocal",tr="Relu",nr="Reshape",ar="ResizeNearestNeighbor",rr="ResizeNearestNeighborGrad",ir="ResizeBilinear",or="ResizeBilinearGrad",sr="Relu6",lr="Reverse",cr="Round",ur="Rsqrt",hr="ScatterNd",dr="SearchSorted",fr="Select",pr="Selu",gr="Slice",vr="Sin",mr="Sinh",xr="Sign",br="Sigmoid",yr="Softplus",kr="Sqrt",wr="Sum",Sr="SpaceToBatchND",Cr="SplitV",Ir="Softmax",Ar="SparseFillEmptyRows",Tr="SparseReshape",Nr="SparseSegmentMean",Er="SparseSegmentSum",Rr="SparseToDense",Fr="SquaredDifference",Dr="Square",Lr="StridedSlice",Mr="StringNGrams",Or="StringSplit",Pr="StringToHashBucketFast",_r="Sub",zr="Tan",Br="Tanh",Wr="Tile",Hr="TopK",Vr="Transform",Ur="Transpose",Xr="Unique",Gr="Unpack",Yr="UnsortedSegmentSum",jr="ZerosLike",qr="Step",Kr="RotateWithOffset",Zr="_FusedMatMul",$r="FusedConv2D",Qr="FusedDepthwiseConv2D";function Jr(){var e;Xt().getBool("IS_TEST")||Xt().getBool("PROD")||(e=console).warn.apply(e,arguments)}var ei=qt("kernelRegistry",(function(){return new Map})),ti=qt("gradRegistry",(function(){return new Map}));function ni(e,t){var n=si(e,t);return ei.get(n)}function ai(e){return ti.get(e)}function ri(e){for(var t=ei.entries(),n=[];;){var a=t.next(),r=a.done,i=a.value;if(r)break;var o=u(i,2),s=o[0],l=o[1];u(s.split("_"),1)[0]===e&&n.push(l)}return n}function ii(e){var t=e.kernelName,n=e.backendName,a=si(t,n);ei.has(a)&&Jr("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),ei.set(a,e)}function oi(e){var t=e.kernelName;ti.has(t)&&Xt().getBool("DEBUG")&&Jr("Overriding the gradient for '".concat(t,"'")),ti.set(t,e)}function si(e,t){return"".concat(t,"_").concat(e)}var li=n(8987),ci=n.n(li)()||li;function ui(e){return ci.fromString(e,!0,16)}var hi=ui("c3a5c85c97cb3127"),di=ui("b492b66fbe98f273"),fi=ui("9ae16a3b2f90404f");function pi(e){return e.xor(e.shru(47))}function gi(e,t,n){var a=e.slice(t,t+n);return ci.fromBytes(Array.from(a),!0,!0)}function vi(e,t){return gi(e,t,8)}function mi(e,t){return gi(e,t,4)}function xi(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function bi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ui("9ddfea08eb382d69"),a=e.xor(t).mul(n);a=a.xor(a.shru(47));var r=t.xor(a).mul(n);return r=(r=r.xor(r.shru(47))).mul(n)}function yi(e,t,n,a){return function(e,t,n,a,r,i){r=r.add(e),i=xi(i.add(r).add(a),21);var o=r;return r=(r=r.add(t)).add(n),i=i.add(xi(r,44)),[r.add(a),i.add(o)]}(vi(e,t),vi(e,t+8),vi(e,t+16),vi(e,t+24),n,a)}function ki(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=fi.add(2*t),a=vi(e,0).add(fi),r=vi(e,t-8),i=xi(r,37).mul(n).add(a),o=xi(a,25).add(r).mul(n);return bi(i,o,n)}if(t>=4){var s=fi.add(2*t),l=mi(e,0);return bi(l.shl(3).add(t),mi(e,t-4),s)}if(t>0){var c=e[0],u=e[t>>1],h=e[t-1],d=c+(u<<8),f=t+(h<<2);return pi(fi.mul(d).xor(hi.mul(f))).mul(fi)}return fi}function wi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=fi.add(2*t),a=vi(e,0).mul(di),r=vi(e,8),i=vi(e,t-8).mul(n),o=vi(e,t-16).mul(fi);return bi(xi(a.add(r),43).add(xi(i,30)).add(o),a.add(xi(r.add(fi),18)).add(i),n)}function Si(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=fi.add(2*t),a=vi(e,0).mul(fi),r=vi(e,8),i=vi(e,t-8).mul(n),o=vi(e,t-16).mul(fi),s=xi(a.add(r),43).add(xi(i,30)).add(o),l=bi(s,a.add(xi(r.add(fi),18)).add(i),n),c=vi(e,16).mul(n),u=vi(e,24),h=s.add(vi(e,t-32)).mul(n),d=l.add(vi(e,t-24)).mul(n);return bi(xi(c.add(u),43).add(xi(h,30)).add(d),c.add(xi(u.add(a),18)).add(h),n)}function Ci(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=ci.fromNumber(81,!0);if(t<=32)return t<=16?ki(e,t):wi(e,t);if(t<=64)return Si(e,t);var a=n,r=n.mul(di).add(113),i=pi(r.mul(fi).add(113)).mul(fi),o=[ci.UZERO,ci.UZERO],s=[ci.UZERO,ci.UZERO];a=a.mul(fi).add(vi(e,0));var l=0,c=64*(t-1>>6),u=c+(t-1&63)-63;do{a=xi(a.add(r).add(o[0]).add(vi(e,l+8)),37).mul(di),r=xi(r.add(o[1]).add(vi(e,l+48)),42).mul(di),a=a.xor(s[1]),r=r.add(o[0]).add(vi(e,l+40)),i=xi(i.add(s[0]),33).mul(di),o=yi(e,l,o[1].mul(di),a.add(s[0])),s=yi(e,l+32,i.add(s[1]),r.add(vi(e,l+16)));var h=[a,i];i=h[0],a=h[1],l+=64}while(l!==c);var d=di.add(i.and(255).shl(1));l=u,s[0]=s[0].add(t-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),a=xi(a.add(r).add(o[0]).add(vi(e,l+8)),37).mul(d),r=xi(r.add(o[1]).add(vi(e,l+48)),42).mul(d),a=a.xor(s[1].mul(9)),r=r.add(o[0].mul(9).add(vi(e,l+40))),i=xi(i.add(s[0]),33).mul(d),o=yi(e,l,o[1].mul(d),a.add(s[0])),s=yi(e,l+32,i.add(s[1]),r.add(vi(e,l+16)));var f=[a,i];return i=f[0],a=f[1],bi(bi(o[0],s[0],d).add(pi(r).mul(hi)).add(i),bi(o[1],s[1],d).add(a),d)}function Ii(e,t){return"string"===t?Ni(e):Ai([e],t)}function Ai(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=ut(e)),Xt().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(isNaN(a)||!isFinite(a))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(a,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),a=0;a<n.length;++a)0!==Math.round(e[a])&&(n[a]=1);return n}throw new Error("Unknown data type ".concat(t))}function Ti(){return Xt().platform.now()}function Ni(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Xt().platform.encode(e,t)}function Ei(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Xt().platform.decode(e,t)}var Ri=function(){function e(t,n){Ze(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new Fi)}return Qe(e,[{key:"profileKernel",value:function(e,t,n){var a,r,i=function(){a=n()},o=Ti();if(this.backendTimer.timerAvailable())r=this.backendTimer.time(i);else{i();var s,l=je(a);try{for(l.s();!(s=l.n()).done;){s.value.dataSync()}}catch(h){l.e(h)}finally{l.f()}r=Promise.resolve({kernelMs:Ti()-o})}if(Xt().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(t){var n=a[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var a=0;a<e.length;a++){var r=e[a];if(isNaN(r)||!isFinite(r))return console.warn("Found ".concat(r," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},u=0;u<a.length;u++)c(u);return{kernelName:e,outputs:a,inputs:t,timeMs:r.then((function(e){return e.kernelMs})),extraInfo:r.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,a=e.outputs,r=e.timeMs,i=e.inputs,o=e.extraInfo;a.forEach((function(e){Promise.all([e.data(),r,o]).then((function(a){t.logger.logKernelProfile(n,e,a[0],a[1],i,a[2])}))}))}}]),e}();var Fi=function(){function e(){Ze(this,e)}return Qe(e,[{key:"logKernelProfile",value:function(e,t,n,a,r,i){var o="number"===typeof a?gt("".concat(a,"ms"),9):a.error,s=gt(e,25),l=t.rank,c=t.size,u=gt(t.shape.toString(),14),h="";for(var d in r){var f=r[d];if(null!=f){var p=f.shape||t.shape,g=p.length;h+="".concat(d,": ").concat(g,"D ").concat(g>0?p:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(l,"D ").concat(u,"\t%c").concat(c,"\t%c").concat(h,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function Di(e,t,n){for(var a={},r={},i=0;i<t.length;i++)a[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],l=s.inputs;for(var c in l){for(var u=l[c],h=!1,d=0;d<t.length;d++)if(a[u.id]){s.outputs.forEach((function(e){return a[e.id]=!0})),h=!0,r[s.id]=!0;break}if(h)break}}var f={};f[n.id]=!0;for(var p={},g=e.length-1;g>=0;g--)for(var v=e[g],m=v.inputs,x=0;x<v.outputs.length;x++)if(f[v.outputs[x].id]){for(var b in m)f[m[b].id]=!0,p[v.id]=!0;break}for(var y=[],k=0;k<e.length;k++){var w=e[k];if(r[w.id]&&p[w.id]){var S={};for(var C in w.inputs){var I=w.inputs[C];a[I.id]&&(S[C]=I)}var A=Object.assign({},w);A.inputs=S,A.outputs=w.outputs,y.push(A)}}return y}function Li(e,t,n,a){for(var r=function(r){var i=t[r],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var s=i.gradient(o),l=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var r=n((function(){return s[t]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(r.dtype,"'"));var o=i.inputs[t];if(!dt(r.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(r.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=r;else{var l=e[o.id];e[o.id]=a(l,r),l.dispose()}};for(var c in i.inputs)l(c)},i=t.length-1;i>=0;i--)r(i)}function Mi(e,t){return Mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mi(e,t)}function Oi(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mi(e,t)}function Pi(e){return Pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Pi(e)}function _i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function zi(e){return zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zi(e)}function Bi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wi(e,t){if(t&&("object"===zi(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bi(e)}function Hi(e){var t=_i();return function(){var n,a=Pi(e);if(t){var r=Pi(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Wi(this,n)}}function Vi(e,t,n,a){var r=Rt(t),i=function(e,t,n,a){var r=ht(t),i=a[a.length-1],o=new Array(i).fill(0),s=t.length,l="complex64"===n?Yi(e):e;if(s>1)for(var c=0;c<r/i;c++)for(var u=c*i,h=0;h<i;h++)o[h]=Math.max(o[h],Ui(l[u+h],0,n).length);return o}(e,t,n,r),o=t.length,s=Gi(e,t,n,r,i),l=["Tensor"];return a&&(l.push("  dtype: ".concat(n)),l.push("  rank: ".concat(o)),l.push("  shape: [".concat(t,"]")),l.push("  values:")),l.push(s.map((function(e){return"    "+e})).join("\n")),l.join("\n")}function Ui(e,t,n){return gt(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):It(e)?"'".concat(e,"'"):"bool"===n?Xi(e):parseFloat(e.toFixed(7)).toString(),t)}function Xi(e){return 0===e?"false":"true"}function Gi(e,t,n,a,r){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],l=t.length;if(0===l){if("complex64"===n){var c=Yi(e);return[Ui(c[0],0,n)]}return"bool"===n?[Xi(e[0])]:[e[0].toString()]}if(1===l){if(s>20){var u=3*o,h=Array.from(e.slice(0,u)),d=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(h=Yi(h),d=Yi(d)),["["+h.map((function(e,t){return Ui(e,r[t],n)})).join(", ")+", ..., "+d.map((function(e,t){return Ui(e,r[s-3+t],n)})).join(", ")+"]"]}var f="complex64"===n?Yi(e):Array.from(e);return["["+f.map((function(e,t){return Ui(e,r[t],n)})).join(", ")+"]"]}var p=t.slice(1),g=a.slice(1),v=a[0]*o,m=[];if(s>20){for(var x=0;x<3;x++){var b=x*v,y=b+v;m.push.apply(m,Ke(Gi(e.slice(b,y),p,n,g,r,!1)))}m.push("...");for(var k=s-3;k<s;k++){var w=k*v,S=w+v;m.push.apply(m,Ke(Gi(e.slice(w,S),p,n,g,r,k===s-1)))}}else for(var C=0;C<s;C++){var I=C*v,A=I+v;m.push.apply(m,Ke(Gi(e.slice(I,A),p,n,g,r,C===s-1)))}var T=2===l?",":"";m[0]="["+m[0]+T;for(var N=1;N<m.length-1;N++)m[N]=" "+m[N]+T;for(var E=",\n",R=2;R<l;R++)E+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(i?"":E),m}function Yi(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var ji=function(){function e(t,n,a){var r=this;if(Ze(this,e),this.dtype=n,this.shape=t.slice(),this.size=ht(t),null!=a){var i=a.length;st(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(r.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=a||kt(n,this.size),this.strides=Rt(t)}return Qe(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];0===a.length&&(a=[0]),st(a.length===this.rank,(function(){return"The number of provided coordinates (".concat(a.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(a);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var a=0,r=0,i=t;r<i.length;r++){var o=i[r];if(o<0||o>=this.shape[a]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}a++}for(var l=t[t.length-1],c=0;c<t.length-1;++c)l+=this.strides[c]*t[c];return this.values[l]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return qi().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),qi=null,Ki=null;var Zi=function(){function e(t,n,a,r){Ze(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=ht(t),this.strides=Rt(t),this.dataId=a,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return Qe(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=i(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Ki.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return Ki.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=i(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Dt(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return Dt(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=i(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=qi().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return Ei(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),qi().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=qi().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return Ei(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=i(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,qi().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(qi().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ki.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),Ki.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return Vi(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),Ki.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),qi().makeVariable(this,e,t,n)}}]),e}();function $i(){return qt("Tensor",(function(){return Zi}))}Object.defineProperty(Zi,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),$i();var Qi,Ji,eo,to,no,ao=function(e){Oi(n,e);var t=Hi(n);function n(e,a,r,i){var o;return Ze(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=a,o.name=r,o}return Qe(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!dt(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));qi().disposeTensor(this),this.dataId=e.dataId,qi().incRef(this,null)}},{key:"dispose",value:function(){qi().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(Zi);Object.defineProperty(ao,Symbol.hasInstance,{value:function(e){return e instanceof Zi&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Qi||(Qi={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Ji||(Ji={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(eo||(eo={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(to||(to={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(no||(no={}));var ro={float32:to,int32:Ji,bool:eo,complex64:no};function io(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return ro[e][t]}function oo(e){return io(e,"int32")}function so(e,t){if(e.dtype===t.dtype)return[e,t];var n=io(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function lo(e,t){return t.some((function(t){return t.id===e.id}))}function co(e){var t=[];return uo(e,t,new Set),t}function uo(e,t,n){if(null!=e)if(e instanceof Zi)t.push(e);else if(a=e,Array.isArray(a)||"object"===typeof a){var a,r=e;for(var i in r){var o=r[i];n.has(o)||(n.add(o),uo(o,t,n))}}}function ho(e){return null!=e.kernelName}var fo=function(){function e(){Ze(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return Qe(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),po=function(){function e(t){Ze(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new fo}return Qe(e,[{key:"ready",value:function(){var e=i(f().mark((function e(){var t,n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return a=t[n],e.next=10,this.initializeBackend(a).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(a);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(Jr("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=i(f().mark((function e(t){var n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),a=n.success,!n.asyncInit){e.next=12;break}return e.next=9,a;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=a;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Ri(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;ri(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;ri(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var a=n.factory();if(!a||a instanceof et||"function"!==typeof a.then)return this.registry[e]=a,{success:!0,asyncInit:!1};var r=++this.pendingBackendInitId,i=a.then((function(n){return!(r<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return r<t.pendingBackendInitId||(t.pendingBackendInit=null,Jr("Initialization of backend ".concat(e," failed")),Jr(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return Jr("Initialization of backend ".concat(e," failed")),Jr(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],a=this.initializeBackend(n),r=a.success,i=a.asyncInit;if(i||r)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),a=n.backend,r=this.readSync(t),i=a.refCount(t);a.disposeData(t,!0),n.backend=e,e.move(t,r,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,a=this,r=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((function(){return a.startScope(r)}),(function(){return a.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var a=n();return t(),a}catch(r){throw t(),r}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=xo.runKernel(ca,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return xo.runKernel(xn,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=ni(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var a=this.backend.numDataIds(),r=0;n.forEach((function(e){r+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=a-t-r-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,a,r=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,l=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=ho(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(ho(e)){var u=e.kernelName,h=e.inputs,d=e.attrs;null==this.backendName&&this.backend;var f=ni(u,this.backendName);st(null!=f,(function(){return"Cannot find registered kernel '".concat(u,"' for backend '").concat(r.backendName,"'")})),n=function(){var e=r.backend.numDataIds();a=f.kernelFunc({inputs:h,attrs:d,backend:r.backend});var t=Array.isArray(a)?a:[a];r.shouldCheckForMemLeaks()&&r.checkKernelForMemLeak(u,e,t);var n=t.map((function(e){return null!=e.rank?e:r.makeTensorFromTensorInfo(e)}));if(o){var s=r.getTensorsForGradient(u,h,n);i=r.saveTensorsForBackwardMode(s)}return n}}else{var p=e.forwardFunc,g=function(e){o&&(i=e.map((function(e){return r.keep(r.clone(e))})))};n=function(){var e=r.backend.numDataIds();a=r.tidy((function(){return p(r.backend,g)}));var t=Array.isArray(a)?a:[a];return r.shouldCheckForMemLeaks()&&r.checkKernelForMemLeak(c,e,t),t}}var v,m=e.inputs,x=e.attrs,b=ho(e)?null:e.backwardsFunc;return this.scopedRun((function(){return r.state.kernelDepth++}),(function(){return r.state.kernelDepth--}),(function(){r.ENV.getBool("DEBUG")||r.state.profiling?(v=r.profiler.profileKernel(c,m,(function(){return n()})),r.ENV.getBool("DEBUG")&&r.profiler.logKernelProfile(v),t=v.outputs):t=n()})),o&&this.addTapeNode(c,m,t,b,i,x),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-l,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(m).map((function(e){return null!=m[e]?m[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:v.timeMs,extraInfo:v.extraInfo}),Array.isArray(a)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var a=ai(e);if(null!=a){var r,i=a.inputsToSave||[],o=a.outputsToSave||[];a.saveAllInputs?(st(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),r=Object.keys(t).map((function(e){return t[e]}))):r=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return r.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,a){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",a=a||this.backend;var r=e;"string"===n&&It(e[0])&&(r=e.map((function(e){return Ni(e)})));var i=a.write(r,t,n),o=new Zi(t,n,i,this.nextTensorId());if(this.trackTensor(o,a),"string"===n){var s=this.state.tensorInfo.get(i),l=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(r);this.state.numBytes+=l-s.bytes,s.bytes=l}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,a){var r={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(r,a)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,a=e.shape,r=e.dtype,i=new Zi(a,r,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=a&&a!==e.dtype&&(e=e.cast(a));var r=new ao(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[r.name])throw new Error("Variable with name ".concat(r.name," was already registered"));return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Ct(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof ao||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*Ct(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=i(f().mark((function e(t){var n,a,r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,a=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,Ke(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-a,r=je(this.state.activeProfile.kernels),e.prev=12,r.s();case 14:if((i=r.n()).done){e.next=24;break}return o=i.value,e.next=18,o.kernelTimeMs;case 18:return o.kernelTimeMs=e.sent,e.next=21,o.extraInfo;case 21:o.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),r.e(e.t0);case 29:return e.prev=29,r.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,a,r,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:r},l=ai(e);null!=l&&(a=l.gradFunc),null!=a&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var a=n[t],r=Mt(a.size,a.dtype);return o.makeTensor(r,a.shape,a.dtype)}return e})),a(e.length>1?e:e[0],r,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=co(e),a=new Set(n.map((function(e){return e.id}))),r=0;r<this.state.activeScope.track.length;r++){var i=this.state.activeScope.track[r];i.kept||a.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var a=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(st(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));st(i instanceof Zi,(function(){return"The result y returned by f() must be a tensor."}));var o=Di(this.state.activeTape,t,i);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?go(i.shape):n,Li(e,o,(function(e){return a.tidy(e)}),bo);var r=t.map((function(t){return e[t.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){var t,n=je(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(a){n.e(a)}finally{n.f()}})),a.state.activeTape=null),{value:i,grads:r}}))}},{key:"customGrad",value:function(e){var t=this;return st(Nt(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];var i;st(a.every((function(e){return e instanceof Zi})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};a.forEach((function(e,t){o[t]=e}));var s=function(t,n){return st((i=e.apply(void 0,[].concat(a,[n]))).value instanceof Zi,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),st(Nt(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},l=function(e,t){var n=i.gradFunc(e,t),r=Array.isArray(n)?n:[n];st(r.length===a.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),st(r.every((function(e){return e instanceof Zi})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return r.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:l,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=i(f().mark((function e(t){var n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ti(),e.next=3,this.backend.time(t);case 3:return(a=e.sent).wallMs=Ti()-n,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new fo,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function go(e){var t=Lt(ht(e),"float32");return xo.makeTensor(t,e,"float32")}function vo(){var e=jt();if(null==e._tfengine){var t=new Ht(e);e._tfengine=new po(t)}return function(e){Yt=e}(e._tfengine.ENV),qi=function(){return e._tfengine},e._tfengine}po.nextTensorId=0,po.nextVariableId=0;var mo,xo=vo();function bo(e,t){var n={a:e,b:t};return xo.runKernel(Qt,n)}function yo(e){if(void 0!==mo)return mo;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function ko(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var wo=Xt();function So(e,t){var n=e;if(St(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var a=[];Array.isArray(n)||St(n)&&"string"!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&Xt().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Co(e,a,[]),a}function Co(e,t,n){if(n=n||[],Array.isArray(e)||St(e)){st(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),st(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var a=t.slice(1),r=0;r<e.length;++r)Co(e[r],a,n.concat(r))}else st(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function Io(e,t,n,a){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(a,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function Ao(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Zi)return Io(a,e.dtype,t,n),e;var r=Tt(e);if("string"!==r&&["bool","int32","float32"].indexOf(a)>=0&&(r=a),Io(a,r,t,n),null==e||!St(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=So(e,r);St(e)||Array.isArray(e)||(e=[e]);var s=!0,l="string"!==r?Ai(e,r):ut(e,[],s);return xo.makeTensor(l,o,r)}function To(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var r=e;return r.map((function(e,r){return Ao(e,"".concat(t,"[").concat(r,"]"),n,a)}))}wo.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),wo.registerFlag("IS_BROWSER",(function(){return ko()})),wo.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),wo.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),wo.registerFlag("PROD",(function(){return!1})),wo.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return wo.getBool("DEBUG")})),wo.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),wo.registerFlag("IS_TEST",(function(){return!1})),wo.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),wo.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),wo.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));function No(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],a=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";var r=function(){xo.startScope(n);try{var e=a.apply(void 0,arguments);return Bt(e)&&console.error("Cannot return a Promise inside of tidy."),xo.endScope(e),e}catch(t){throw xo.endScope(null),t}};return Object.defineProperty(r,"name",{value:n,configurable:!0}),r}var Eo=No({complex_:function(e,t){var n=Ao(e,"real","complex"),a=Ao(t,"imag","complex");lt(n.shape,a.shape,"real and imag shapes, ".concat(n.shape," and ").concat(a.shape,", ")+"must match in call to tf.complex().");var r={real:n,imag:a};return xo.runKernel(kn,r)}});function Ro(e,t,n,a){if(null==a&&(a=Tt(e)),"complex64"===a)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!St(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Pt(t);var r=ht(t),i=ht(n);st(r===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(r," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],l=o!==n.length-1||s!==ht(t.slice(o));st(n[o]===t[o]||!l,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return St(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==a?Ai(e,a):ut(e,[],!0),xo.makeTensor(e,t,a)}function Fo(e,t,n){return Ro(e,t,So(e,n),n)}var Do={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function Lo(e,t){return Mo.apply(this,arguments)}function Mo(){return Mo=i(f().mark((function e(t,n){var a,r,o,s,l,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=[],r=[],o=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),s=function(e){var s=o[e],l=Array.isArray(t)?t[e].tensor:t[s];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype&&"complex64"!==l.dtype)throw new Error("Unsupported dtype in weight '".concat(s,"': ").concat(l.dtype));var c={name:s,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){var u=new Promise(function(){var e=i(f().mark((function e(t){var n,a,r,i,o,s,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.bytes();case 2:for(n=e.sent,a=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,r=new Uint8Array(a),i=0,o=0;o<n.length;o++)s=n[o],c=new Uint8Array(new Uint32Array([s.length]).buffer),r.set(c,i),i+=4,r.set(s,i),i+=s.length;t(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());r.push(u)}else r.push(l.data());null!=n&&(c.group=n),a.push(c)},l=0;l<o.length;++l)s(l);return e.next=7,Promise.all(r);case 7:return c=e.sent,e.abrupt("return",{data:Po(c),specs:a});case 9:case"end":return e.stop()}}),e)}))),Mo.apply(this,arguments)}function Oo(e,t){var n,a,r={},i=0,o=je(t);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=s.name,c=s.dtype,u=s.shape,h=ht(u),d=void 0;if("quantization"in s){var f=s.quantization;if("uint8"===f.dtype||"uint16"===f.dtype){if(!("min"in f)||!("scale"in f))throw new Error("Weight ".concat(s.name," with quantization ").concat(f.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==f.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(f.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(f.dtype," ")+"which only supports weights of type float32 not ".concat(c,"."))}var p=Do[f.dtype],g=e.slice(i,i+h*p),v="uint8"===f.dtype?new Uint8Array(g):new Uint16Array(g);if("float32"===c)if("uint8"===f.dtype||"uint16"===f.dtype){d=new Float32Array(v.length);for(var m=0;m<v.length;m++){var x=v[m];d[m]=x*f.scale+f.min}}else{if("float16"!==f.dtype)throw new Error("Unsupported quantization type ".concat(f.dtype," ")+"for weight type float32.");void 0===n&&(n=jo()),d=n(v)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(l,"': ").concat(c));if("uint8"!==f.dtype&&"uint16"!==f.dtype)throw new Error("Unsupported quantization type ".concat(f.dtype," ")+"for weight type int32.");d=new Int32Array(v.length);for(var b=0;b<v.length;b++){var y=v[b];d[b]=Math.round(y*f.scale+f.min)}}i+=h*p}else if("string"===c){var k=ht(s.shape);d=[];for(var w=0;w<k;w++){var S=new Uint32Array(e.slice(i,i+4))[0];i+=4;var C=new Uint8Array(e.slice(i,i+S));d.push(C),i+=S}}else{var I=Do[c],A=e.slice(i,i+h*I);if("float32"===c)d=new Float32Array(A);else if("int32"===c)d=new Int32Array(A);else if("bool"===c)d=new Uint8Array(A);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(l,"': ").concat(c));d=new Float32Array(A);for(var T=new Float32Array(d.length/2),N=new Float32Array(d.length/2),E=0;E<T.length;E++)T[E]=d[2*E],N[E]=d[2*E+1];var R=Fo(T,u,"float32"),F=Fo(N,u,"float32");r[l]=Eo(R,F),R.dispose(),F.dispose()}i+=h*I}"complex64"!==c&&(r[l]=Fo(d,u,c))}}catch(D){o.e(D)}finally{o.f()}return r}function Po(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var a=new Uint8Array(t),r=0;return n.forEach((function(e){a.set(new Uint8Array(e.buffer),r),r+=e.byteLength})),a.buffer}var _o="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function zo(e){return _o?Buffer.byteLength(e):new Blob([e]).size}function Bo(e){if(_o)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",a=0,r=t.length;a<r;a++)n+=String.fromCharCode(t[a]);return btoa(n)}function Wo(e){if(_o){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),a=new Uint8Array(n.length),r=0;r<n.length;++r)a.set([n.charCodeAt(r)],r);return a.buffer}function Ho(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),a=0;return e.forEach((function(e){n.set(new Uint8Array(e),a),a+=e.byteLength})),n.buffer}function Vo(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Uo(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function Xo(e,t){return Go.apply(this,arguments)}function Go(){return Go=i(f().mark((function e(t,n){var a,r,i,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(a.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=11;break}return e.next=5,n(t.weightsManifest);case 5:r=e.sent,i=u(r,2),o=i[0],s=i[1],a.weightSpecs=o,a.weightData=s;case 11:return null!=t.signature&&(a.signature=t.signature),null!=t.userDefinedMetadata&&(a.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(a.modelInitializer=t.modelInitializer),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)}))),Go.apply(this,arguments)}function Yo(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:zo(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:zo(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function jo(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var a=1024;a<2048;a++)t[a]=939524096+(a-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(a){for(var r=new ArrayBuffer(4*a.length),i=new Uint32Array(r),o=0;o<a.length;o++){var s=a[o],l=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=l}return new Float32Array(r)}}var qo=function(){function e(){Ze(this,e),this.saveRouters=[],this.loadRouters=[]}return Qe(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,a){var r=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,a);null!==n&&r.push(n)})),r}}]),e}(),Ko=function(e){return qo.registerSaveRouter(e)},Zo=function(e){return qo.registerLoadRouter(e)},$o=function(e){return qo.getSaveHandlers(e)},Qo=function(e,t){return qo.getLoadHandlers(e,t)},Jo="tensorflowjs",es="models_store",ts="model_info_store";function ns(){if(!Xt().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function as(e){var t=e.result;t.createObjectStore(es,{keyPath:"modelPath"}),t.createObjectStore(ts,{keyPath:"modelPath"})}var rs=function(){function e(t){if(Ze(this,e),this.indexedDB=ns(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return Qe(e,[{key:"save",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,a){var r=n.indexedDB.open(Jo,1);r.onupgradeneeded=function(){return as(r)},r.onsuccess=function(){var i=r.result;if(null==t){var o=i.transaction(es,"readonly"),s=o.objectStore(es).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),a(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),a(s.error)},o.oncomplete=function(){return i.close()}}else{var l,c=Yo(t),u=i.transaction(ts,"readwrite"),h=u.objectStore(ts),d=h.put({modelPath:n.modelPath,modelArtifactsInfo:c});d.onsuccess=function(){var r=(l=i.transaction(es,"readwrite")).objectStore(es).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});r.onsuccess=function(){return e({modelArtifactsInfo:c})},r.onerror=function(e){var t=(h=u.objectStore(ts)).delete(n.modelPath);t.onsuccess=function(){return i.close(),a(r.error)},t.onerror=function(e){return i.close(),a(r.error)}}},d.onerror=function(e){return i.close(),a(d.error)},u.oncomplete=function(){null==l?i.close():l.oncomplete=function(){return i.close()}}}},r.onerror=function(e){return a(r.error)}}))}}]),e}();rs.URL_SCHEME="indexeddb://";var is=function(e){return Xt().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(rs.URL_SCHEME)?(t=e.slice(rs.URL_SCHEME.length),new rs(t)):null;var t};qo.registerSaveRouter(is),qo.registerLoadRouter(is);var os=function(){function e(){Ze(this,e),this.indexedDB=ns()}return Qe(e,[{key:"listModels",value:function(){var e=i(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=t.indexedDB.open(Jo,1);a.onupgradeneeded=function(){return as(a)},a.onsuccess=function(){var t=a.result,r=t.transaction(ts,"readonly"),i=r.objectStore(ts).getAll();i.onsuccess=function(){var t,n={},a=je(i.result);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r.modelPath]=r.modelArtifactsInfo}}catch(o){a.e(o)}finally{a.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},r.oncomplete=function(){return t.close()}},a.onerror=function(e){return n(a.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=i(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(a=t).startsWith(rs.URL_SCHEME)?a.slice(rs.URL_SCHEME.length):a,e.abrupt("return",new Promise((function(e,a){var r=n.indexedDB.open(Jo,1);r.onupgradeneeded=function(){return as(r)},r.onsuccess=function(){var n,i=r.result,o=i.transaction(ts,"readwrite"),s=o.objectStore(ts),l=s.get(t);l.onsuccess=function(){if(null==l.result)return i.close(),a(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var r=s.delete(t),o=function(){var r=(n=i.transaction(es,"readwrite")).objectStore(es).delete(t);r.onsuccess=function(){return e(l.result.modelArtifactsInfo)},r.onerror=function(e){return a(l.error)}};r.onsuccess=o,r.onerror=function(e){return o(),i.close(),a(l.error)}},l.onerror=function(e){return i.close(),a(l.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},r.onerror=function(e){return a(r.error)}})));case 2:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ss="/",ls="tensorflowjs_models",cs="info",us="model_topology",hs="weight_specs",ds="weight_data",fs="model_metadata";function ps(e){return{info:[ls,e,cs].join(ss),topology:[ls,e,us].join(ss),weightSpecs:[ls,e,hs].join(ss),weightData:[ls,e,ds].join(ss),modelMetadata:[ls,e,fs].join(ss)}}function gs(e){for(var t=0,n=Object.values(e);t<n.length;t++){var a=n[t];window.localStorage.removeItem(a)}}function vs(e){var t=e.split(ss);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(ss)}var ms=function(){function e(t){if(Ze(this,e),!Xt().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=ps(this.modelPath)}return Qe(e,[{key:"save",value:function(){var e=i(f().mark((function e(t){var n,a,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),a=JSON.stringify(t.weightSpecs),r=Yo(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,a),this.LS.setItem(this.keys.weightData,Bo(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:r});case 17:throw e.prev=17,e.t0=e.catch(7),gs(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(r.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(r.weightSpecsBytes,", ")+"weightDataBytes=".concat(r.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=i(f().mark((function e(){var t,n,a,r,i,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(a=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=a,null!=(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=r,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=Wo(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();ms.URL_SCHEME="localstorage://";var xs=function(e){return Xt().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ms.URL_SCHEME)?(t=e.slice(ms.URL_SCHEME.length),new ms(t)):null;var t};qo.registerSaveRouter(xs),qo.registerLoadRouter(xs);var bs=function(){function e(){Ze(this,e),st(Xt().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),st("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return Qe(e,[{key:"listModels",value:function(){var e=i(f().mark((function e(){var t,n,a,r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=ls+ss,a=ss+cs,r=0;r<this.LS.length;++r)(i=this.LS.key(r)).startsWith(n)&&i.endsWith(a)&&(o=vs(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=i(f().mark((function e(t){var n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(r=t).startsWith(ms.URL_SCHEME)?r.slice(ms.URL_SCHEME.length):r,n=ps(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return a=JSON.parse(this.LS.getItem(n.info)),gs(n),e.abrupt("return",a);case 7:case"end":return e.stop()}var r}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ys="://",ks=function(){function e(){Ze(this,e),this.managers={}}return Qe(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){st(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(ys)&&(t=t.slice(0,t.indexOf(ys))),st(t.length>0,(function(){return"scheme must not be an empty string."}));var a=e.getInstance();st(null==a.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),a.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function ws(e){if(-1===e.indexOf(ys))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(ks.getSchemes().join(",")));return{scheme:e.split(ys)[0],path:e.split(ys)[1]}}function Ss(e,t){return Cs.apply(this,arguments)}function Cs(){return Cs=i(f().mark((function e(t,n){var a,r,i,o,s,l,c,u,h,d,p=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>2&&void 0!==p[2]&&p[2],st(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),st((r=qo.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),st(r.length<2,(function(){return"Copying failed because more than one (".concat(r.length,") ")+"load handlers for source URL ".concat(t,".")})),i=r[0],st((o=qo.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),st(o.length<2,(function(){return"Copying failed because more than one (".concat(r.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],l=ws(t).scheme,c=ws(t).path,u=l===ws(t).scheme,e.next=15,i.load();case 15:if(h=e.sent,!a||!u){e.next=19;break}return e.next=19,ks.getManager(l).removeModel(c);case 19:return e.next=21,s.save(h);case 21:if(d=e.sent,!a||u){e.next=25;break}return e.next=25,ks.getManager(l).removeModel(c);case 25:return e.abrupt("return",d.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),Cs.apply(this,arguments)}function Is(){return As.apply(this,arguments)}function As(){return(As=i(f().mark((function e(){var t,n,a,r,i,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ks.getSchemes(),n={},a=je(t),e.prev=3,a.s();case 5:if((r=a.n()).done){e.next=13;break}return i=r.value,e.next=9,ks.getManager(i).listModels();case 9:for(s in o=e.sent)n[i+ys+s]=o[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),a.e(e.t0);case 18:return e.prev=18,a.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function Ts(e){return Ns.apply(this,arguments)}function Ns(){return(Ns=i(f().mark((function e(t){var n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ws(t),a=ks.getManager(n.scheme),e.abrupt("return",a.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Es(e,t){return Rs.apply(this,arguments)}function Rs(){return(Rs=i(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",Ss(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fs(e,t){return Ds.apply(this,arguments)}function Ds(){return(Ds=i(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",Ss(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ls=function(){function e(){Ze(this,e)}return Qe(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(Xt().get("IS_BROWSER")){Xt().setPlatform("browser",new Ls);try{ks.registerManager(ms.URL_SCHEME,new bs)}catch(jz){}try{ks.registerManager(rs.URL_SCHEME,new os)}catch(jz){}}var Ms,Os=function(){return n(5410)};var Ps=function(){function e(){Ze(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return Qe(e,[{key:"fetch",value:function(e,t){return null!=Xt().global.fetch?Xt().global.fetch(e,t):(null==Ms&&(Ms=Os()),Ms(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function _s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",Pt(e),new ji(e,t,n)}Xt().get("IS_NODE")&&!Xt().get("IS_BROWSER")&&Xt().setPlatform("node",new Ps);var zs=No({cast_:function(e,t){var n=Ao(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var a={x:n},r={dtype:t};return xo.runKernel(xn,a,r)}});var Bs=No({clone_:function(e){var t={x:Ao(e,"x","clone","string_or_numeric")};return xo.runKernel(ca,t)}});vo();var Ws={buffer:_s,cast:zs,clone:Bs,print:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};Ki=Ws;function Hs(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var Vs=function(){function e(t){if(Ze(this,e),!Xt().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return Qe(e,[{key:"save",value:function(){var e=i(f().mark((function e(t){var n,a,r,i,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return a=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],r=Uo(t,a),i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,Hs((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,Hs((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:Yo(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Vs.URL_SCHEME="downloads://";var Us=function(){function e(t){if(Ze(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return Qe(e,[{key:"load",value:function(){var e=i(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=new FileReader;a.onload=function(a){var r=JSON.parse(a.target.result),i=r.modelTopology;if(null!=i)if(null!=r.weightsManifest)if(0!==t.weightsFiles.length){var o=Xo(r,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},a.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},a.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,a=[],r=[],i=je(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;a.push.apply(a,Ke(o.weights)),r.push.apply(r,Ke(o.paths))}}catch(jz){i.e(jz)}finally{i.f()}var s=this.checkManifestAndWeightFiles(e),l=r.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(l).then((function(e){return[a,Ho(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,a){var r=new FileReader;r.onload=function(e){var t=e.target.result;n(t)},r.onerror=function(t){return a("Failed to weights data from file of path '".concat(e,"'."))},r.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,a=[],r=this.weightsFiles.map((function(e){return Vo(e.name)})),i={},o=je(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=Vo(e);if(-1!==a.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(a.push(t),-1===r.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[r.indexOf(t)]}))}}catch(jz){o.e(jz)}finally{o.f()}if(a.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(a.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return i}}]),e}();function Xs(e){return new Us(e)}function Gs(e,t,n,a){!function(e){st(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){st(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),st(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),st(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,a=null==a?1:a);var r=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++r/e.length*(a-n);return t(o),i})),i})))}function Ys(e,t){return js.apply(this,arguments)}function js(){return(js=i(f().mark((function e(t,n){var a,r,i,o,s,l,c,u,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),a=null==n.fetchFunc?Xt().platform.fetch:n.fetchFunc,r=t.map((function(e){return a(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(r);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,Gs(r,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,l=s.map((function(e){return e.arrayBuffer()})),c=.5,u=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(l);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,Gs(l,n.onProgress,c,u);case 26:e.t1=e.sent;case 27:return h=e.t1,e.abrupt("return",h);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qs(e){return Ks.apply(this,arguments)}function Ks(){return Ks=i(f().mark((function e(t){var n,a,r,i,o=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",a=o.length>2?o[2]:void 0,r=o.length>3?o[3]:void 0,i=Zs((function(e){return Ys(e,{requestInit:r})})),e.abrupt("return",i(t,n,a));case 6:case"end":return e.stop()}}),e)}))),Ks.apply(this,arguments)}function Zs(e){return function(){var t=i(f().mark((function t(n){var a,r,i,o,s,l,c,u,h,d,p,g,v=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=v.length>1&&void 0!==v[1]?v[1]:"",r=v.length>2?v[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=r?r.map((function(){return!1})):[],l=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var a="quantization"in e?e.quantization.dtype:e.dtype,c=Do[a]*ht(e.shape),u=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=r?r.forEach((function(t,n){t===e.name&&(u(),s[n]=!0)})):u(),l.push(e.name),n+=c}))})),s.every((function(e){return e}))){t.next=10;break}throw c=r.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(l.join(", "),"."));case 10:return u=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),h=[],u.forEach((function(e){n[e].paths.forEach((function(e){var t=a+(a.endsWith("/")?"":"/")+e;h.push(t)}))})),t.next=15,e(h);case 15:return d=t.sent,p={},g=0,u.forEach((function(e){for(var t=n[e].paths.length,a=0,r=0;r<t;r++)a+=d[g+r].byteLength;for(var i=new ArrayBuffer(a),s=new Uint8Array(i),l=0,c=0;c<t;c++){var u=new Uint8Array(d[g+c]);s.set(u,l),l+=u.byteLength}o[e].forEach((function(e){var t=Oo(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)p[n]=t[n]})),g+=t})),t.abrupt("return",p);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}qo.registerSaveRouter((function(e){return Xt().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Vs.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new Vs(e)}(e.slice(Vs.URL_SCHEME.length)):null}));var $s=function(){function e(t,n){if(Ze(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(st("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=Xt().platform.fetch,st(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&st(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return Qe(e,[{key:"save",value:function(){var e=i(f().mark((function e(t){var n,a,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,a=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],r=Uo(t,a),n.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:Yo(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=i(f().mark((function e(){var t,n,a,r,i,o=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),a="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a);case 16:if(r=n.modelTopology,i=n.weightsManifest,null!=r||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",Xo(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=i(f().mark((function e(t){var n,a,r,i,o,s,l,c,h,d,p,g,v,m,x,b,y,k,w;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,a=Qs(n),r=u(a,2),i=r[0],o=r[1],s=this.weightPathPrefix||i,l=[],c=je(t);try{for(c.s();!(h=c.n()).done;)d=h.value,l.push.apply(l,Ke(d.weights))}catch(jz){c.e(jz)}finally{c.f()}p=[],g=[],v=je(t);try{for(v.s();!(m=v.n()).done;){x=m.value,b=je(x.paths);try{for(b.s();!(y=b.n()).done;)k=y.value,null!=this.weightUrlConverter?g.push(this.weightUrlConverter(k)):p.push(s+k+o)}catch(jz){b.e(jz)}finally{b.f()}}}catch(jz){v.e(jz)}finally{v.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=p.push,e.t1=p,e.t2=Ke,e.next=16,Promise.all(g);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,Ys(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return w=e.sent,e.abrupt("return",[l,Ho(w)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Qs(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function Js(e){return null!=e.match($s.URL_SCHEME_REGEX)}$s.URL_SCHEME_REGEX=/^https?:\/\//;var el=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return Js(e)})):Js(e))?tl(e,t):null};function tl(e,t){return new $s(e,t)}function nl(e,t){return tl(e,t)}qo.registerSaveRouter(el),qo.registerLoadRouter(el);var al=function(){function e(t){Ze(this,e),this.modelArtifacts=t}return Qe(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),rl=function(){function e(t){Ze(this,e),this.saveHandler=t}return Qe(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),il=Qe((function e(t){Ze(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function ol(e,t,n,a){var r=arguments;return new il(sl.apply(void 0,Ke(r)))}function sl(e,t,n,a){if(1===arguments.length){var r=null!=e.modelTopology||null!=e.weightSpecs;return r?new al(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new al({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new al({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:a})}function ll(e){return new rl(e)}function cl(e){return new rl(e)}function ul(e,t){for(var n=e.length,a=[],r=0;r<n;r++){var i=n-1-r,o=e[i]||1;(t[t.length-1-r]||1)>1&&1===o&&a.unshift(i)}return a}function hl(e,t){for(var n=[],a=0;a<t.length;a++){var r=e[e.length-a-1],i=t.length-a-1,o=t[i];(null==r||1===r&&o>1)&&n.unshift(i)}return n}function dl(e,t){for(var n=[],a=Math.max(e.length,t.length),r=0;r<a;r++){var i=e[e.length-r-1];null==i&&(i=1);var o=t[t.length-r-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}function fl(e,t,n){var a=e.shape.length;st(a===t.length,(function(){return"Error in slice".concat(a,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(a,").")})),st(a===n.length,(function(){return"Error in slice".concat(a,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(a,").")}));for(var r=function(r){st(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice".concat(a,"D: begin[").concat(r,"] + size[").concat(r,"] ")+"(".concat(t[r]+n[r],") would overflow input.shape[").concat(r,"] (").concat(e.shape[r],")")}))},i=0;i<a;++i)r(i)}function pl(e,t,n){for(var a=[],r=0;r<e.length;r++)a[r]=Math.ceil((t[r]-e[r])/n[r]);return a}function gl(e,t,n){for(var a=n.length,r=0;r<n.length;r++)if(n[r]>1){a=r;break}for(var i=a+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function vl(e,t){for(var n=e.length>0?e[e.length-1]:1,a=0;a<e.length-1;a++)n+=e[a]*t[a];return n}function ml(e,t,n){var a,r,i=e.shape.length;return(a="number"===typeof t?[t].concat(Ke(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){st(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),r=(r=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat(Ke(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(st(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-a[n])})),[a,r]}function xl(e,t,n,a,r,i,o,s,l){var c;if(null==a?(c=new Array(t.length)).fill(1):c=a,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var u=!1,h={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:r,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l},d=0;d<h.dims;d++)u&&0!==(1<<d&s)&&h.numAddAxisAfterEllipsis++,1<<d&o&&(u=!0);u||(h.ellipsisMask|=1<<h.dims,h.dims++);var f={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var a=0;a<e.dims;a++)if(1<<a&e.ellipsisMask)for(var r=Math.min(t.dims-(e.dims-a)+1+e.numAddAxisAfterEllipsis,t.dims);n<r;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=a;else if(1<<a&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[a]),null!=e.end&&(t.end[n]=e.end[a]),t.strides[n]=e.strides[a],e.beginMask&1<<a&&(t.beginMask|=1<<n),e.endMask&1<<a&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<a?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(a)),t.inputShapeGatherIndicesSparse[n]=a,n++}}(h,f);for(var p=!0,g=!0,v=!0,m=[],x=[],b=0;b<e.length;++b){if(0===f.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var y=!!(f.shrinkAxisMask&1<<b),k=e[b];if(-1!==k){var w=[f.beginMask&1<<b,f.endMask&1<<b],S=[f.strides[b]>0?0:-1,f.strides[b]>0?k:k-1];if(y&&f.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&1===f.strides[b];var C=!!(f.beginMask&1<<b&&f.endMask&1<<b);if(f.beginValid&&f.endValid){if(y){var I=f.begin[b]<0?k+f.begin[b]:f.begin[b];if(f.begin[b]=I,f.end[b]=f.begin[b]+1,I<0||I>=k)throw Error("slice index ".concat(f.begin[b]," of dimension ").concat(b," out of bounds."))}else f.begin[b]=bl(f.begin[b],0,f.strides[b],k,w,S),f.end[b]=bl(f.end[b],1,f.strides[b],k,w,S);var A=1===f.strides[b]&&0===f.begin[b]&&f.end[b]===k;p=p&&A,g=g&&(0===b&&1===f.strides[b]||A)}else p=p&&1===f.strides[b]&&C,g=g&&(0===b&&1===f.strides[b]||C);var T=void 0,N=!1;if(f.beginValid&&f.endValid?(T=f.end[b]-f.begin[b],N=!0):y?(T=1,N=!0):C&&k>=0&&(T=f.strides[b]<0?-k:k,N=!0),N){var E=void 0;E=0===T||T<0!==f.strides[b]<0?0:Math.trunc(T/f.strides[b])+(T%f.strides[b]!==0?1:0),m.push(E)}else m.push(-1)}else m.push(y?1:-1)}for(var R=0;R<f.finalShapeGatherIndices.length;++R){var F=f.finalShapeGatherIndices[R];F>=0?x.push(m[F]):-2===F&&x.push(1)}var D=x.filter((function(e,t){return-2!==f.finalShapeGatherIndices[t]}));return{finalShapeSparse:D,finalShape:x,isIdentity:p,sliceDim0:g,isSimpleSlice:v,begin:f.begin,end:f.end,strides:f.strides}}function bl(e,t,n,a,r,i){if(r[t])return n>0?i[t]:i[t+1&1];var o=e<0?a+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var yl=function(){function e(){Ze(this,e)}return Qe(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),kl=function(){function e(){Ze(this,e),this.classNameMap={}}return Qe(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function wl(e){st(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),st("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),st(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),kl.register(e)}function Sl(){return xo}function Cl(){return xo.memory()}function Il(e,t){return xo.tidy(e,t)}function Al(e){co(e).forEach((function(e){return e.dispose()}))}function Tl(e){return xo.keep(e)}function Nl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return xo.registerBackend(e,t,n)}function El(e){return xo.customGrad(e)}function Rl(e,t){if((St(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&St(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ro(e,[],[],t)}var Fl=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,a=this.computeGradients(e,n),r=a.value,i=a.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return Al(i),t?r:(r.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return function(e,t){st(Nt(e),(function(){return"The f passed in variableGrads(f) must be a function"})),st(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof ao})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var a in t=[],xo.registeredVariables)t.push(xo.registeredVariables[a]);var r=n?t.filter((function(e){return!e.trainable})):null,i=t.length;t=t.filter((function(e){return e.trainable})),st(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable."}));var o=xo.gradients(e,t,null,!0),s=o.value,l=o.grads;st(l.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),st(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor")}));var c={};return t.forEach((function(e,t){null!=l[t]&&(c[e.name]=l[t])})),null!=r&&r.forEach((function(e){return c[e.name]=null})),{value:s,grads:c}}(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&Al(this.iterations_)}},{key:"saveIterations",value:function(){var e=i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:Rl(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(yl);Object.defineProperty(Fl,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var Dl=No({abs_:function(e){var t=Ao(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return xo.runKernel(wn,n)}var a={x:t};return xo.runKernel(Kt,a)}});var Ll=No({add_:function(e,t){var n=Ao(e,"a","add"),a=Ao(t,"b","add"),r=u(so(n,a),2),i={a:n=r[0],b:a=r[1]};return xo.runKernel(Qt,i)}});var Ml=No({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Ao(e,"x","all","bool"),r={x:a},i={axis:t,keepDims:n};return xo.runKernel(en,r,i)}});var Ol=No({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Ao(e,"x","any","bool"),r={x:a},i={axis:t,keepDims:n};return xo.runKernel(tn,r,i)}});var Pl=No({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ao(e,"x","argMax"),a={x:n},r={axis:t};return xo.runKernel(nn,a,r)}});function _l(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3],s=[].concat(Ke(t),[o]),l=$l(r);return Wl(e,s,n,i,a,null,null,l)}function zl(e,t,n,a,r,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",l=Ul(t),c=u(l,2),h=c[0],d=c[1];if("channelsLast"===s)o=[h,d,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[h,d,e[1],e[1]]}return Wl(e,o,n,a,r,i,!1,s)}function Bl(e,t,n,a,r,i){var o,s,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=Xl(t),h=u(c,3),d=h[0],f=h[1],p=h[2];if("NDHWC"===l)s="channelsLast",o=[d,f,p,e[4],e[4]];else{if("NCDHW"!==l)throw new Error("Unknown dataFormat ".concat(l));s="channelsFirst",o=[d,f,p,e[1],e[1]]}return Hl(e,o,n,a,r,!1,s,i)}function Wl(e,t,n,a,r,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",l=-1,c=-1,h=-1,d=-1;if("channelsLast"===s){var f=u(e,4);l=f[0],c=f[1],h=f[2],d=f[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var p=u(e,4);l=p[0],d=p[1],c=p[2],h=p[3]}var g,v=u(t,4),m=v[0],x=v[1],b=v[3],y=Ul(n),k=u(y,2),w=k[0],S=k[1],C=Ul(a),I=u(C,2),A=I[0],T=I[1],N=Gl(m,A),E=Gl(x,T),R=Yl(r,c,h,w,S,N,E,i,s),F=R.padInfo,D=R.outHeight,L=R.outWidth,M=o?b*d:b;return"channelsFirst"===s?g=[l,M,D,L]:"channelsLast"===s&&(g=[l,D,L,M]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:h,inChannels:d,outHeight:D,outWidth:L,outChannels:M,padInfo:F,strideHeight:w,strideWidth:S,filterHeight:m,filterWidth:x,effectiveFilterHeight:N,effectiveFilterWidth:E,dilationHeight:A,dilationWidth:T,inShape:e,outShape:g,filterShape:t}}function Hl(e,t,n,a,r){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,l=-1,c=-1,h=-1,d=-1,f=-1;if("channelsLast"===o){var p=u(e,5);l=p[0],c=p[1],h=p[2],d=p[3],f=p[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var g=u(e,5);l=g[0],f=g[1],c=g[2],h=g[3],d=g[4]}var v,m=u(t,5),x=m[0],b=m[1],y=m[2],k=m[4],w=Xl(n),S=u(w,3),C=S[0],I=S[1],A=S[2],T=Xl(a),N=u(T,3),E=N[0],R=N[1],F=N[2],D=Gl(x,E),L=Gl(b,R),M=Gl(y,F),O=jl(r,c,h,d,C,I,A,D,L,M,s),P=O.padInfo,_=O.outDepth,z=O.outHeight,B=O.outWidth,W=i?k*f:k;return"channelsFirst"===o?v=[l,W,_,z,B]:"channelsLast"===o&&(v=[l,_,z,B,W]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:h,inWidth:d,inChannels:f,outDepth:_,outHeight:z,outWidth:B,outChannels:W,padInfo:P,strideDepth:C,strideHeight:I,strideWidth:A,filterDepth:x,filterHeight:b,filterWidth:y,effectiveFilterDepth:D,effectiveFilterHeight:L,effectiveFilterWidth:M,dilationDepth:E,dilationHeight:R,dilationWidth:F,inShape:e,outShape:v,filterShape:t}}function Vl(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=Gl(t,a);return Math.floor((e[0]*(n-1)-n+r)/2)}function Ul(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Xl(e){return"number"===typeof e?[e,e,e]:e}function Gl(e,t){return t<=1?e:e+(e-1)*(t-1)}function Yl(e,t,n,a,r,i,o,s,l){var c,u,h;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,a,r){null==a&&(a=Vl(e,t,n));var i=e[0],o=e[1];return[ql((i-t+2*a)/n+1,r),ql((o-t+2*a)/n+1,r)]}([t,n],i,a,e,s);u=d[0],h=d[1]}else if("same"===e){u=Math.ceil(t/a),h=Math.ceil(n/r);var f=Math.max(0,(u-1)*a+i-t),p=Math.max(0,(h-1)*r+o-n),g=Math.floor(f/2),v=f-g,m=Math.floor(p/2);c={top:g,bottom:v,left:m,right:p-m,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-i+1)/a),h=Math.ceil((n-o+1)/r);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var x="channelsLast"===l?e[1][0]:e[2][0],b="channelsLast"===l?e[1][1]:e[2][1],y="channelsLast"===l?e[2][0]:e[3][0],k="channelsLast"===l?e[2][1]:e[3][1];c={top:x,bottom:b,left:y,right:k,type:0===x&&0===b&&0===y&&0===k?"VALID":"EXPLICIT"},u=ql((t-i+x+b)/a+1,s),h=ql((n-o+y+k)/r+1,s)}return{padInfo:c,outHeight:u,outWidth:h}}function jl(e,t,n,a,r,i,o,s,l,c,u){var h,d,f,p;if("number"===typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var g=function(e,t,n,a,r,i){null==r&&(r=Vl(e,t,a));var o=e[0],s=e[1],l=e[2];return[ql((o-t+2*r)/a+1,i),ql((s-t+2*r)/a+1,i),ql((l-t+2*r)/a+1,i),n]}([t,n,a,1],s,1,r,e,u);d=g[0],f=g[1],p=g[2]}else if("same"===e){var v=((d=Math.ceil(t/r))-1)*r+s-t,m=((f=Math.ceil(n/i))-1)*i+l-n,x=((p=Math.ceil(a/o))-1)*o+c-a,b=Math.floor(v/2),y=v-b,k=Math.floor(m/2),w=m-k,S=Math.floor(x/2);h={top:k,bottom:w,left:S,right:x-S,front:b,back:y,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-s+1)/r),f=Math.ceil((n-l+1)/i),p=Math.ceil((a-c+1)/o)}return{padInfo:h,outDepth:d,outHeight:f,outWidth:p}}function ql(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function Kl(e){var t=u(Ul(e),3),n=t[0],a=t[1],r=t[2];return 1===n&&1===a&&1===r}function Zl(e,t){return Kl(e)||Kl(t)}function $l(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function Ql(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)st(ft(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){st(ft(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var Jl=No({reshape_:function(e,t){var n={x:Ao(e,"x","reshape","string_or_numeric")},a={shape:t};return xo.runKernel(nr,n,a)}});var ec=No({avgPool_:function(e,t,n,a,r){var i=Ao(e,"x","avgPool","float32");st(Zl(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=Jl(i,[1,i.shape[0],i.shape[1],i.shape[2]])),st(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),Ql("avgPool",a,r);var l={x:o},c={filterSize:t,strides:n,pad:a,dimRoundingMode:r},u=xo.runKernel(un,l,c);return u=zs(u,i.dtype),s?Jl(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});var tc=No({avgPool3d_:function(e,t,n,a,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Ao(e,"x","avgPool3d","float32"),s=o,l=!1;4===o.rank&&(l=!0,s=Jl(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),st(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),st("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),Ql("avgPool3d",a,r);var c={x:s},u={filterSize:t,strides:n,pad:a,dimRoundingMode:r,dataFormat:i},h=xo.runKernel(dn,c,u);return h=zs(h,s.dtype),l?Jl(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var nc=No({batchNorm_:function(e,t,n,a,r,i){null==i&&(i=.001);var o,s,l=Ao(e,"x","batchNorm"),c=Ao(t,"mean","batchNorm"),u=Ao(n,"variance","batchNorm");null!=r&&(o=Ao(r,"scale","batchNorm")),null!=a&&(s=Ao(a,"offset","batchNorm")),st(c.rank===u.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),st(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),st(null==o||c.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var h=function(e){return 0===e.rank||1===e.rank?Jl(e,[1,1,1,e.size]):2===e.rank?Jl(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Jl(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(l),d={x:h,scale:o,offset:s,mean:c,variance:u},f={varianceEpsilon:i},p=xo.runKernel(ra,d,f);return Jl(p,l.shape)}});var ac=No({batchNorm2d_:function(e,t,n,a,r,i){var o,s,l=Ao(e,"x","batchNorm"),c=Ao(t,"mean","batchNorm"),u=Ao(n,"variance","batchNorm");return null!=r&&(o=Ao(r,"scale","batchNorm")),null!=a&&(s=Ao(a,"offset","batchNorm")),st(2===l.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(l.rank,".")})),st(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),st(2===u.rank||1===u.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,".")})),null!=o&&st(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&st(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),nc(l,c,u,s,o,i)}});var rc=No({batchNorm3d_:function(e,t,n,a,r,i){var o,s,l=Ao(e,"x","batchNorm"),c=Ao(t,"mean","batchNorm"),u=Ao(n,"variance","batchNorm");return null!=r&&(o=Ao(r,"scale","batchNorm")),null!=a&&(s=Ao(a,"offset","batchNorm")),st(3===l.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(l.rank,".")})),st(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),st(3===u.rank||1===u.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,".")})),null!=o&&st(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&st(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),nc(l,c,u,s,o,i)}});var ic=No({batchNorm4d_:function(e,t,n,a,r,i){var o,s,l=Ao(e,"x","batchNorm"),c=Ao(t,"mean","batchNorm"),u=Ao(n,"variance","batchNorm");return null!=r&&(o=Ao(r,"scale","batchNorm")),null!=a&&(s=Ao(a,"offset","batchNorm")),st(4===l.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(l.rank,".")})),st(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),st(4===u.rank||1===u.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,".")})),null!=o&&st(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&st(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),nc(l,c,u,s,o,i)}});var oc=No({clipByValue_:function(e,t,n){var a=Ao(e,"x","clipByValue");st(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var r={x:a},i={clipValueMin:t,clipValueMax:n};return xo.runKernel(yn,r,i)}});var sc=No({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;st(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=To(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return Bs(n[0]);var a=n,r={axis:t};return xo.runKernel(Sn,a,r)}});var lc=No({concat1d_:function(e){return sc(e,0)}});var cc=No({concat2d_:function(e,t){return sc(e,t)}});var uc=No({concat3d_:function(e,t){return sc(e,t)}});var hc=No({concat4d_:function(e,t){return sc(e,t)}});var dc=No({conv2d_:function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Ao(e,"x","conv2d","float32"),l=Ao(t,"filter","conv2d","float32"),c=s,u=!1;3===s.rank&&(u=!0,c=Jl(s,[1,s.shape[0],s.shape[1],s.shape[2]])),st(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),st(4===l.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(l.rank,".")})),Ql("conv2d",a,o);var h="NHWC"===r?c.shape[3]:c.shape[1];st(h===l.shape[2],(function(){return"Error in conv2d: depth of input (".concat(h,") must match ")+"input depth for filter ".concat(l.shape[2],".")})),st(Zl(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}));var d={x:c,filter:l},f={strides:n,pad:a,dataFormat:r,dilations:i,dimRoundingMode:o},p=xo.runKernel(Cn,d,f);return u?Jl(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var fc=No({conv1d_:function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=Ao(e,"x","conv1d"),l=Ao(t,"filter","conv1d"),c=s,u=!1;2===s.rank&&(u=!0,c=Jl(s,[1,s.shape[0],s.shape[1]])),st(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")})),st(3===l.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(l.rank,".")})),Ql("conv1d",a,o),st(c.shape[2]===l.shape[1],(function(){return"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(l.shape[1],".")})),st(Zl(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),st("NWC"===r,(function(){return"Error in conv1d: got dataFormat of ".concat(r," but only NWC is currently supported.")}));var h=Jl(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=Jl(c,[c.shape[0],1,c.shape[1],c.shape[2]]),f=[1,n],p=[1,i],g="NHWC",v=dc(d,h,f,a,g,p,o);return Jl(v,u?[v.shape[2],v.shape[3]]:[v.shape[0],v.shape[2],v.shape[3]])}});var pc=No({conv2DBackpropInput_:function(e,t,n,a,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;st(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,l=t,c=!1;3===t.rank&&(c=!0,l=Jl(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),st(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),st(4===l.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(l.rank)})),st(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var u="NHWC"===i?s[3]:s[1],h="NHWC"===i?l.shape[3]:l.shape[1];st(u===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),st(h===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(h,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),Ql("conv2dDerInput",r,o);var d={dy:l,filter:n},f={strides:a,pad:r,dataFormat:i,dimRoundingMode:o,inputShape:s},p=xo.runKernel(An,d,f);return c?Jl(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var gc=No({conv2dTranspose_:function(e,t,n,a,r,i){var o=Ao(e,"x","conv2dTranspose"),s=Ao(t,"filter","conv2dTranspose");return pc(n,o,s,a,r,"NHWC",i)}});var vc=No({conv3d_:function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=Ao(e,"x","conv3d"),s=Ao(t,"filter","conv3d"),l=o,c=!1;4===o.rank&&(c=!0,l=Jl(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),st(5===l.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(l.rank,".")})),st(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),st(l.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(l.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),st(Zl(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),st("NDHWC"===r,(function(){return"Error in conv3d: got dataFormat of ".concat(r," but only NDHWC is currently supported.")}));var u={x:l,filter:s},h={strides:n,pad:a,dataFormat:r,dilations:i},d=xo.runKernel(Tn,u,h);return c?Jl(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var mc=No({conv3DBackpropInput_:function(e,t,n,a,r){st(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=Jl(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var l=i[4],c=o.shape[4];st(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")})),st(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)})),st(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),st(l===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),st(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var u={dy:o,filter:n},h={pad:r,strides:a,inputShape:i},d=xo.runKernel(En,u,h);return s?Jl(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var xc=No({conv3dTranspose_:function(e,t,n,a,r){var i=Ao(e,"x","conv3dTranspose"),o=Ao(t,"filter","conv3dTranspose");return mc(n,i,o,a,r)}});var bc=No({depthwiseConv2d_:function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Ao(e,"x","depthwiseConv2d","float32"),l=Ao(t,"filter","depthwiseConv2d","float32"),c=s,u=!1;3===s.rank&&(u=!0,c=Jl(s,[1,s.shape[0],s.shape[1],s.shape[2]])),st(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),st(4===l.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(l.rank,".")})),st(c.shape[3]===l.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(c.shape[3],") must match the inChannels dimension in ")+"filter ".concat(l.shape[2],".")})),Ql("depthwiseConv2d",a,o);var h={x:c,filter:l},d={strides:n,pad:a,dataFormat:r,dilations:i,dimRoundingMode:o},f=xo.runKernel(_n,h,d);return u?Jl(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var yc=No({floorDiv_:function(e,t){var n=Ao(e,"a","floorDiv"),a=Ao(t,"b","floorDiv"),r=u(so(n,a),2),i={a:n=r[0],b:a=r[1]};return xo.runKernel(aa,i)}});var kc=No({div_:function(e,t){var n=Ao(e,"a","div"),a=Ao(t,"b","div"),r=u(so(n,a),2);if(n=r[0],a=r[1],"int32"===n.dtype&&"int32"===a.dtype)return yc(n,a);var i={a:n,b:a};return xo.runKernel(Xn,i,{})}});var wc=No({elu_:function(e){var t={x:Ao(e,"x","elu","float32")};return xo.runKernel(Yn,t)}});var Sc=No({equal_:function(e,t){var n=Ao(e,"a","equal","string_or_numeric"),a=Ao(t,"b","equal","string_or_numeric"),r=u(so(n,a),2);n=r[0],a=r[1],dl(n.shape,a.shape);var i={a:n,b:a};return xo.runKernel(Kn,i)}});var Cc=No({exp_:function(e){var t={x:Ao(e,"x","exp")};return xo.runKernel(Zn,t)}});var Ic=No({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ao(e,"x","expandDims","string_or_numeric");st(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var a={input:n},r={dim:t};return xo.runKernel($n,a,r)}});var Ac=No({tile_:function(e,t){var n=Ao(e,"x","tile","string_or_numeric");st(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var a={x:n},r={reps:t};return xo.runKernel(Wr,a,r)}});var Tc=No({eye_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var r=_s([e,t],a),i=e<=t?e:t,o=0;o<i;++o)r.set(1,o,o);var s=Jl(r.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return Ac(Ic(s,0),[n[0],1,1]);if(2===n.length)return Ac(Ic(Ic(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Ac(Ic(Ic(Ic(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});function Nc(e,t,n){var a={shape:e,value:t,dtype:n};return xo.runKernel(ea,{},a)}var Ec=No({floor_:function(e){var t={x:Ao(e,"x","floor","float32")};return xo.runKernel(na,t)}});var Rc=No({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=Ao(e,"x","gather"),i=Ao(t,"indices","gather","int32"),o={x:r,indices:i},s={axis:n,batchDims:a};return xo.runKernel(ia,o,s)}});var Fc=No({greater_:function(e,t){var n=Ao(e,"a","greater","string_or_numeric"),a=Ao(t,"b","greater","string_or_numeric"),r=u(so(n,a),2);n=r[0],a=r[1],dl(n.shape,a.shape);var i={a:n,b:a};return xo.runKernel(sa,i)}});var Dc=No({greaterEqual_:function(e,t){var n=Ao(e,"a","greaterEqual","string_or_numeric"),a=Ao(t,"b","greaterEqual","string_or_numeric"),r=u(so(n,a),2);n=r[0],a=r[1],dl(n.shape,a.shape);var i={a:n,b:a};return xo.runKernel(la,i)}});var Lc=No({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=Ao(e,"x","leakyRelu"),a={x:n},r={alpha:t};return xo.runKernel(ga,a,r)}});var Mc=No({log_:function(e){var t={x:Ao(e,"x","log","float32")};return xo.runKernel(ba,t)}});var Oc=No({log1p_:function(e){var t={x:Ao(e,"x","log1p")};return xo.runKernel(ya,t)}});var Pc=No({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Ao(e,"x","max"),r={x:a},i={reductionIndices:t,keepDims:n};return xo.runKernel(Aa,r,i)}});var _c=No({mul_:function(e,t){var n=Ao(e,"a","mul"),a=Ao(t,"b","mul"),r=u(so(n,a),2),i={a:n=r[0],b:a=r[1]};return xo.runKernel(Ba,i)}});var zc=No({sub_:function(e,t){var n=Ao(e,"a","sub"),a=Ao(t,"b","sub"),r=u(so(n,a),2),i={a:n=r[0],b:a=r[1]};return xo.runKernel(_r,i)}});var Bc=No({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Ao(e,"x","sum");"bool"===a.dtype&&(a=zs(a,"int32"));var r={x:a},i={axis:t,keepDims:n};return xo.runKernel(wr,r,i)}});var Wc=No({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Ao(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var a=El((function(e,n){var a=Pc(e,t,!0),r=zc(e,a),i=zc(zs(r,"float32"),Mc(Bc(Cc(r),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var a=u(n,1)[0],r=Cc(a);return zc(e,_c(Bc(e,t,!0),r))}}}));return a(n)}});var Hc=No({logicalAnd_:function(e,t){var n=Ao(e,"a","logicalAnd","bool"),a=Ao(t,"b","logicalAnd","bool");dl(n.shape,a.shape);var r={a:n,b:a};return xo.runKernel(ka,r)}});var Vc=No({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Ao(e,"a","matMul"),i=Ao(t,"b","matMul"),o=so(r,i),s=u(o,2),l={a:r=s[0],b:i=s[1]},c={transposeA:n,transposeB:a};return xo.runKernel(pn,l,c)}});var Uc=No({maxPool_:function(e,t,n,a,r){var i=Ao(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=Jl(i,[1,i.shape[0],i.shape[1],i.shape[2]])),st(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),st(Zl(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),Ql("maxPool",a,r);var l={x:o},c={filterSize:t,strides:n,pad:a,dimRoundingMode:r},u=xo.runKernel(Na,l,c);return s?Jl(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});var Xc=No({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Ao(e,"x","maxPool3d"),s=o,l=!1;4===o.rank&&(l=!0,s=Jl(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),st(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),st("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),Ql("maxPool3d",a,r);var c={x:s},u={filterSize:t,strides:n,pad:a,dimRoundingMode:r,dataFormat:i},h=xo.runKernel(Ra,c,u);return l?Jl(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var Gc=No({maximum_:function(e,t){var n=Ao(e,"a","maximum"),a=Ao(t,"b","maximum"),r=u(so(n,a),2);n=r[0],a=r[1],"bool"===n.dtype&&(n=zs(n,"int32"),a=zs(a,"int32")),dl(n.shape,a.shape);var i={a:n,b:a};return xo.runKernel(Ta,i)}});var Yc=No({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Ao(e,"x","mean"),r={x:a},i={axis:t,keepDims:n};return xo.runKernel(La,r,i)}});var jc=No({minimum_:function(e,t){var n=Ao(e,"a","minimum"),a=Ao(t,"b","minimum"),r=u(so(n,a),2);n=r[0],a=r[1],"bool"===n.dtype&&(n=zs(n,"int32"),a=zs(a,"int32")),dl(n.shape,a.shape);var i={a:n,b:a};return xo.runKernel(Oa,i)}});function qc(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Kc(e,t){for(var n=[],a=e.length,r=0;r<a;r++)-1===t.indexOf(r)&&n.push(e[r]);var i=t.map((function(t){return e[t]}));return[n,i]}function Zc(e,t){return function(e,t,n){for(var a=e.length+t.length,r=[],i=0,o=0,s=0;s<a;s++)-1===n.indexOf(s)?r.push(e[i++]):r.push(t[o++]);return r}(e,t.map((function(e){return 1})),t)}function $c(e,t,n){st(qc(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function Qc(e,t){if(qc(e,t))return null;for(var n=[],a=0;a<t;++a)-1===e.indexOf(a)&&n.push(a);return e.forEach((function(e){return n.push(e)})),n}function Jc(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function eu(e,t){for(var n=[],a=t-e;a<t;++a)n.push(a);return n}var tu=No({square_:function(e){var t=Ao(e,"x","square");return xo.runKernel("Square",{x:t},{})}});var nu=No({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=xt(t,(e=Ao(e,"x","moments")).shape),r=Yc(e,a,n),i=r.shape;n||(i=Zc(r.shape,a));var o=tu(zc(zs(e,"float32"),Jl(r,i))),s=Yc(o,a,n);return{mean:r,variance:s}}});var au=No({neg_:function(e){var t={x:Ao(e,"x","neg")};return xo.runKernel(Wa,t)}});var ru=No({notEqual_:function(e,t){var n=Ao(e,"a","notEqual","string_or_numeric"),a=Ao(t,"b","notEqual","string_or_numeric"),r=u(so(n,a),2);n=r[0],a=r[1],dl(n.shape,a.shape);var i={a:n,b:a};return xo.runKernel(Ha,i)}});var iu=No({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var r=Ao(e,"indices","oneHot","int32"),i={indices:r},o={depth:t,onValue:n,offValue:a};return xo.runKernel(Ya,i,o)}});function ou(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=ou(e,"float32"),a=ou(e,"float32");return Eo(n,a)}var r=Mt(ht(e),t);return xo.makeTensor(r,e,t)}function su(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=su(e,"float32"),a=ou(e,"float32");return Eo(n,a)}var r=Lt(ht(e),t);return xo.makeTensor(r,e,t)}var lu=No({onesLike_:function(e){var t={x:Ao(e,"x","onesLike")};return xo.runKernel(Ga,t)}});var cu=No({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=Ao(e,"x","pad");if(0===a.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var r={paddings:t,constantValue:n},i={x:a};return xo.runKernel(qa,i,r)}});var uu=No({prelu_:function(e,t){var n={x:Ao(e,"x","prelu"),alpha:Ao(t,"alpha","prelu")};return xo.runKernel(Za,n)}}),hu=n(282),du=function(){function e(t,n,a,r,i){Ze(this,e),this.mean=t,this.stdDev=n,this.dtype=a,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=hu.alea(o.toString())}return Qe(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,a=!1;!a;){var r=void 0,i=void 0,o=void 0;do{o=(r=2*this.random()-1)*r+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*r*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(a=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),fu=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(Ze(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=a-n,this.dtype=r,null==i&&(i=Math.random()),"number"===typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(a," <= 1 and dtype is not float"));this.random=hu.alea(i)}return Qe(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var pu=No({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(null!=a&&"bool"===a)throw new Error("Unsupported data type ".concat(a));for(var i=new du(t,n,a,!1,r),o=_s(e,a),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var gu=No({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",r=arguments.length>4?arguments[4]:void 0,i=_s(e,a),o=new fu(t,n,null,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var vu=No({relu_:function(e){var t={x:Ao(e,"x","relu")};return xo.runKernel(tr,t)}});var mu=No({reverse_:function(e,t){var n={x:Ao(e,"x","reverse")},a={dims:t};return xo.runKernel(lr,n,a)}});var xu=No({selu_:function(e){var t={x:Ao(e,"x","selu")};return xo.runKernel(pr,t)}});var bu=No({separableConv2d_:function(e,t,n,a,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=Ao(e,"x","separableConv2d"),l=Ao(t,"depthwiseFilter","separableConv2d"),c=Ao(n,"pointwiseFilter","separableConv2d"),u=s,h=!1;if(3===s.rank&&(h=!0,u=Jl(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");st(4===u.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(u.rank,".")})),st(4===l.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(l.rank,".")})),st(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(l.rank,".")})),st(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")})),st(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],".")}));var d=l.shape[2],f=l.shape[3];st(c.shape[2]===d*f,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(d*f,", ")+"but got ".concat(c.shape[2],".")}));var p=bc(u,l,a,r,o,i),g=1,v=dc(p,c,g,"valid",o);return h?Jl(v,[v.shape[1],v.shape[2],v.shape[3]]):v}});var yu=No({sigmoid_:function(e){var t={x:Ao(e,"x","sigmoid","float32")};return xo.runKernel(br,t)}});var ku=No({slice_:function(e,t,n){var a=Ao(e,"x","slice","string_or_numeric");if(0===a.rank)throw new Error("Slicing scalar is not possible");var r={x:a},i={begin:t,size:n};return xo.runKernel(gr,r,i)}});var wu=No({slice1d_:function(e,t,n){var a=Ao(e,"x","slice1d");return st(1===a.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(a.rank," tensor")})),ku(a,[t],[n])}});var Su=No({slice2d_:function(e,t,n){var a=Ao(e,"x","slice2d");return st(2===a.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(a.rank," tensor")})),ku(a,t,n)}});var Cu=No({slice3d_:function(e,t,n){var a=Ao(e,"x","slice3d");return st(3===a.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(a.rank," tensor")})),ku(a,t,n)}});var Iu=No({slice4d_:function(e,t,n){var a=Ao(e,"x","slice4d");return st(4===a.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(a.rank," tensor")})),ku(a,t,n)}});var Au=No({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Ao(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var a={logits:n},r={dim:t};return xo.runKernel(Ir,a,r)}});var Tu=No({softplus_:function(e){var t={x:Ao(e,"x","softplus")};return xo.runKernel(yr,t)}});var Nu=No({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=Ao(e,"x","split"),r={x:a},i={numOrSizeSplits:t,axis:n};return xo.runKernel(Cr,r,i)}});var Eu=No({sqrt_:function(e){var t={x:Ao(e,"x","sqrt","float32")};return xo.runKernel(kr,t)}});var Ru=No({squeeze_:function(e,t){var n=Ao(e,"x","squeeze");return Jl(n,bt(n.shape,t).newShape)}});var Fu=No({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=To(e,"tensors","stack","string_or_numeric");st(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&st(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var a=n,r={axis:t};return xo.runKernel(ja,a,r)}});var Du=No({tanh_:function(e){var t={x:Ao(e,"x","tanh","float32")};return xo.runKernel(Br,t)}});function Lu(e,t){ct(e);var n=So(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ro(e,null,n,t)}function Mu(e,t,n){if(ct(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var a=So(e,n);if(2!==a.length&&1!==a.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ro(e,t,a,n)}var Ou=No({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(null!=a&&"bool"===a)throw new Error("Unsupported data type $ { dtype }");for(var i=new du(t,n,a,!0,r),o=_s(e,a),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var Pu=No({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ao(e,"x","unstack","string_or_numeric");st(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var a={value:n},r={axis:t};return xo.runKernel(Gr,a,r)}});function _u(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return xo.makeVariable(e,t,n,a)}var zu=No({broadcastTo_:function(e,t){var n=Ao(e,"broadcastTo","x"),a=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var r=n.shape.slice();r.length<t.length;)r.unshift(1);n=Jl(n,r)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(t,"]."));var l=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===l.length)return Bs(n);var c={x:n},u={reps:o};return xo.runKernel(Wr,c,u)}});var Bu=No({where_:function(e,t,n){var a=Ao(t,"a","where"),r=Ao(n,"b","where"),i=Ao(e,"condition","where","bool"),o=dl(dl(i.shape,a.shape),r.shape),s={condition:zu(i,o),t:zu(a,o),e:zu(r,o)};return xo.runKernel(fr,s)}});var Wu=No({zerosLike_:function(e){var t={x:Ao(e,"x","zerosLike")};return xo.runKernel(jr,t)}});var Hu=No({imag_:function(e){var t={input:Ao(e,"input","imag")};return xo.runKernel(ha,t)}});var Vu=No({real_:function(e){var t={input:Ao(e,"input","real")};return xo.runKernel(Ja,t)}});var Uu=No({transpose_:function(e,t,n){var a=Ao(e,"x","transpose");if(null==t&&(t=a.shape.map((function(e,t){return t})).reverse()),st(a.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(a.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){st(e>=0&&e<a.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(a.rank-1)+" but got ".concat(t)}))})),a.rank<=1)return a.clone();var r={x:a},i={perm:t};return"complex64"===a.dtype?Il((function(){var e=Vu(a),t=Hu(a);return e=xo.runKernel(Ur,{x:e},i),t=xo.runKernel(Ur,{x:t},i),n&&(t=au(t)),Eo(e,t)})):xo.runKernel(Ur,r,i)}});var Xu=No({dropout_:function(e,t,n,a){var r=Ao(e,"x","dropout");if(st("float32"===r.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(r.dtype," tensor instead.")})),st(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof Zi?r.clone():r;var i=function(e,t){if(null==t)return e.shape.slice();if(dt(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],a=0;a<e.shape.length;a++)null==t[a]&&null!=e.shape[a]?n.push(e.shape[a]):n.push(t[a]);return n}return t}(r,n),o=1-t,s=kc(Ec(Ll(gu(i,0,1,"float32",a),o)),o);return _c(r,s)}});var Gu=No({fft_:function(e){st("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return xo.runKernel(Jn,t)}});var Yu=No({rfft_:function(e,t){st("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,a=e.shape[e.shape.length-1],r=e.size/a;if(null!=t&&t<a){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=ku(e,i,o),a=t}else if(null!=t&&t>a){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-a,n=sc([e,ou(s)],e.shape.length-1),a=t}else n=e;var l=Wu(n),c=Jl(Eo(n,l),[r,a]),u=Gu(c),h=Math.floor(a/2)+1,d=Vu(u),f=Hu(u),p=Nu(d,[h,a-h],d.shape.length-1),g=Nu(f,[h,a-h],f.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=h,Jl(Eo(p[0],g[0]),v)}});var ju=No({ifft_:function(e){st("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return xo.runKernel(ua,t)}});var qu=No({irfft_:function(e){var t,n=e.shape[e.shape.length-1],a=e.size/n;if(n<=2){var r=Jl(e,[a,n]);t=ju(r)}else{var i=[a,2*(n-1)],o=Jl(Vu(e),[a,n]),s=Jl(Hu(e),[a,n]),l=mu(ku(o,[0,1],[a,n-2]),1),c=_c(mu(ku(s,[0,1],[a,n-2]),1),Rl(-1)),u=sc([o,l],1),h=sc([s,c],1),d=Jl(Eo(u,h),[i[0],i[1]]);t=ju(d)}if(t=Vu(t),3===e.rank&&0!==e.shape[0]){var f=t,p=e.shape[0];t=Jl(t,[p,t.shape[0]/p,t.shape[1]]),f.dispose()}return t}});var Ku=No({conv2DBackpropFilter_:function(e,t,n,a,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Jl(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var l=t;3===l.rank&&(l=Jl(t,[1,t.shape[0],t.shape[1],t.shape[2]])),st(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),st(4===l.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(l.shape,".")})),st(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var c="NHWC"===i?s.shape[3]:s.shape[1],u="NHWC"===i?l.shape[3]:l.shape[1];st(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")})),st(u===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(u,") must ")+"match output depth for filter (".concat(n[3],").")})),Ql("conv2dDerFilter",r,o);var h={x:s,dy:l},d={strides:a,pad:r,dataFormat:i,dimRoundingMode:o,filterShape:n};return xo.runKernel(In,h,d)}});var Zu=No({relu6_:function(e){var t={x:Ao(e,"x","relu6")};return xo.runKernel(sr,t)}});var $u=No({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ao(e,"x","step"),a={x:n},r={alpha:t};return xo.runKernel(qr,a,r)}});function Qu(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return _c(e,$u(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function Ju(e,t){var n=t,a=hl(e.shape,t.shape);return a.length>0&&(n=Bc(n,a)),Jl(n,e.shape)}function eh(e,t,n,a){if("linear"===t)return e;if("relu"===t)return vu(e);if("elu"===t)return wc(e);if("relu6"===t)return Zu(e);if("prelu"===t)return uu(e,n);if("leakyrelu"===t)return Lc(e,a);if("sigmoid"===t)return yu(e);throw new Error("Unknown fused activation ".concat(t,"."))}var th=function(e,t){return!(e>0)||"linear"===t};var nh=No({fusedConv2d_:function(e){var t=e.x,n=e.filter,a=e.strides,r=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,l=void 0===s?[1,1]:s,c=e.dimRoundingMode,h=e.bias,d=e.activation,f=void 0===d?"linear":d,p=e.preluActivationWeights,g=e.leakyreluAlpha;if(f=f||"linear",!1===th(xo.state.gradientDepth,f)){st("NHWC"===o,(function(){return"Error in fused conv2d: got dataFormat of ".concat(o," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."}));var v=dc(t,n,a,r,o,l,c);return null!=h&&(v=Ll(v,h)),eh(v,f,p,g)}var m=Ao(t,"x","conv2d","float32"),x=Ao(n,"filter","conv2d","float32"),b=m,y=!1;3===m.rank&&(y=!0,b=Jl(m,[1,m.shape[0],m.shape[1],m.shape[2]])),st(4===b.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(b.rank,".")})),st(4===x.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(x.rank,".")})),Ql("fused conv2d",r,c);var k="NHWC"===o?b.shape[3]:b.shape[1];st(x.shape[2]===k,(function(){return"Error in conv2d: depth of input (".concat(k,") must match ")+"input depth for filter ".concat(x.shape[2],".")})),st(Zl(a,l),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(l,"'")}));var w,S,C=Wl(b.shape,x.shape,a,l,r,c);if(null!=h){var I=u(so(w=Ao(h,"bias","fused conv2d"),m),1);w=I[0],"NHWC"===o?dl(C.outShape,w.shape):(st(w.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(w.shape.length,".")})),st(0===w.shape.length||w.shape[0]===C.outChannels||1===w.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(w.shape,") is not ")+"compatible with the number of output channels "+"(".concat(C.outChannels,")")})))}if(null!=p){var A=p.shape;if(st(A.length<=1||3===A.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(A.length,".")})),1===A.length)st(1===A[0]||A[0]===C.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(A,") is not compatible with the number of output ")+"channels (".concat(C.outChannels,").")}));else if(3===A.length)try{dl(A,C.outShape)}catch(L){var T="Error in fused conv2d: PReLU activation weights (".concat(A,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(C.outShape,").");throw Error(T)}S=Ao(p,"prelu weights","fused conv2d")}var N=function(e,t){st("NHWC"===o,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var n=u(t,4),i=n[0],s=n[1],c=n[2],h=n[3],d=Qu(e,c,f);st(Kl(l),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(l,"'")}));var p=[pc(s.shape,d,i,a,r),Ku(s,d,i.shape,a,r)];if(null!=h){var g=Ju(h,d);p.push(g)}return p},E={x:b,filter:x,bias:w,preluActivationWeights:S},R={strides:a,pad:r,dataFormat:o,dilations:l,dimRoundingMode:c,activation:f,leakyreluAlpha:g};if(null==h){var F=El((function(e,t,n){var a=xo.runKernel($r,E,R);return n([t,e,a]),y&&(a=Jl(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:N}}));return F(b,x)}var D=El((function(e,t,n,a){var r=xo.runKernel($r,E,R);return a([t,e,r,n]),y&&(r=Jl(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:N}}));return D(b,x,w)}});var ah=No({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,a,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Jl(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var l=t;3===l.rank&&(l=Jl(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={x:s,dy:l},u={strides:a,pad:r,dimRoundingMode:o,dilations:i,filterShape:n};return xo.runKernel(zn,c,u)}});var rh=No({depthwiseConv2dNativeBackpropInput_:function(e,t,n,a,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,l=!1;3===t.rank&&(l=!0,s=Jl(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={dy:s,filter:n},u={strides:a,pad:r,dimRoundingMode:o,dilations:i,inputShape:e},h=xo.runKernel(Bn,c,u);return l?Jl(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});No({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,a=e.strides,r=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,l=void 0===s?[1,1]:s,c=e.dimRoundingMode,h=e.bias,d=e.activation,f=void 0===d?"linear":d,p=e.preluActivationWeights,g=e.leakyreluAlpha;if(!1===th(xo.state.gradientDepth,f)){var v=bc(t,n,a,r,o,l,c);return null!=h&&(v=Ll(v,h)),eh(v,f,p,g)}var m=Ao(t,"x","depthwiseConv2d","float32"),x=Ao(n,"filter","depthwiseConv2d","float32"),b=m,y=!1;3===m.rank&&(y=!0,b=Jl(m,[1,m.shape[0],m.shape[1],m.shape[2]])),st(4===b.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(b.rank,".")})),st(4===x.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(x.rank,".")})),st(b.shape[3]===x.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(b.shape[3],") must match the inChannels dimension in ")+"filter ".concat(x.shape[2],".")})),null==l&&(l=[1,1]),st(Zl(a,l),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(a," and dilations '").concat(l,"'")})),Ql("fused depthwiseConv2d",r,c);var k,w,S=Wl(b.shape,x.shape,a,l,r,c,!0);if(null!=h){var C=u(so(k=Ao(h,"bias","fused conv2d"),m),1);k=C[0],dl(S.outShape,k.shape)}null!=p&&(w=Ao(p,"prelu weights","fused depthwiseConv2d"));var I=function(e,t){st(Kl(l),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(l,"'")}));var n=u(t,4),i=n[0],o=n[1],s=n[2],h=n[3],d=Qu(e,s,f),p=rh(o.shape,d,i,a,r,l,c),g=ah(o,d,i.shape,a,r,l,c);return null!=h?[p,g,Ju(k,d)]:[p,g]},A={x:b,filter:x,bias:k,preluActivationWeights:w},T={strides:a,pad:r,dataFormat:o,dilations:l,dimRoundingMode:c,activation:f,leakyreluAlpha:g};if(null==h){var N=El((function(e,t,n){var a=xo.runKernel(Qr,A,T);return n([t,e,a]),y&&(a=Jl(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:I}}));return N(b,x)}var E=El((function(e,t,n,a){var r=xo.runKernel(Qr,A,T);return a([t,e,r,n]),y&&(r=Jl(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:I}}));return E(b,x,k)}});var ih=No({fusedMatMul_:function(e){var t=e.a,n=e.b,a=e.transposeA,r=void 0!==a&&a,i=e.transposeB,o=void 0!==i&&i,s=e.bias,l=e.activation,c=void 0===l?"linear":l,h=e.preluActivationWeights,d=e.leakyreluAlpha;if(!1===th(xo.state.gradientDepth,c)){var f=Vc(t,n,r,o);return null!=s&&(f=Ll(f,s)),eh(f,c,h,d)}var p=Ao(t,"a","fused matMul"),g=Ao(n,"b","fused matMul"),v=u(so(p,g),2);p=v[0],g=v[1];var m=r?p.shape[p.rank-2]:p.shape[p.rank-1],x=o?g.shape[g.rank-1]:g.shape[g.rank-2],b=r?p.shape[p.rank-1]:p.shape[p.rank-2],y=o?g.shape[g.rank-2]:g.shape[g.rank-1],k=p.shape.slice(0,-2),w=g.shape.slice(0,-2),S=ht(k),C=ht(w);st(m===x,(function(){return"Error in fused matMul: inner shapes (".concat(m,") and (")+"".concat(x,") of Tensors with shapes ").concat(p.shape," and ")+"".concat(g.shape," and transposeA=").concat(r)+" and transposeB=".concat(o," must match.")}));var I,A,T=dl(p.shape.slice(0,-2),g.shape.slice(0,-2)).concat([b,y]),N=Jl(p,r?[S,m,b]:[S,b,m]),E=Jl(g,o?[C,y,x]:[C,x,y]);null!=s&&(I=u(so(I=Ao(s,"bias","fused matMul"),p),1)[0],dl(T,I.shape)),null!=h&&(A=Ao(h,"prelu weights","fused matMul"));var R=function(e,t){var n,a,i=u(t,4),l=i[0],h=i[1],d=i[2],f=i[3],p=Qu(Jl(e,d.shape),d,c);return r||o?!r&&o?(n=Vc(p,h,!1,!1),a=Vc(p,l,!0,!1)):r&&!o?(n=Vc(h,p,!1,!0),a=Vc(l,p,!1,!1)):(n=Vc(h,p,!0,!0),a=Vc(p,l,!0,!0)):(n=Vc(p,h,!1,!0),a=Vc(l,p,!0,!1)),null!=s?[n,a,Ju(f,p)]:[n,a]},F={a:N,b:E,bias:I,preluActivationWeights:A},D={transposeA:r,transposeB:o,activation:c,leakyreluAlpha:d};if(null==s){var L=El((function(e,t,n){var a=xo.runKernel(Zr,F,D);return n([e,t,a]),{value:Jl(a,T),gradFunc:R}}));return L(N,E)}var M=El((function(e,t,n,a){var r=xo.runKernel(Zr,F,D);return a([e,t,r,n]),{value:Jl(r,T),gradFunc:R}}));return M(N,E,I)}});function oh(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function sh(e,t,n){for(var a=1-e%2,r=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+a-1);r[i]=t-n*Math.cos(o)}return Lu(r,"float32")}No({hammingWindow_:function(e){return sh(e,.54,.46)}});var lh=No({hannWindow_:function(e){return sh(e,.5,.5)}});var ch=No({frame_:function(e,t,n){for(var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(ku(e,i,t)),i+=n;if(a)for(;i<e.size;){var s=i+t-e.size,l=sc([ku(e,i,t-s),Nc([s],r)]);o.push(l),i+=n}return 0===o.length?Mu([],[0,t]):Jl(sc(o),[o.length,t])}});No({stft_:function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:lh;null==a&&(a=oh(t));var i=ch(e,t,n),o=_c(i,r(t));return Yu(o,a)}});var uh=No({cropAndResize_:function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Ao(e,"image","cropAndResize"),s=Ao(t,"boxes","cropAndResize","float32"),l=Ao(n,"boxInd","cropAndResize","int32"),c=s.shape[0];st(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),st(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")})),st(1===l.rank&&l.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")})),st(2===a.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(a.length,".")})),st(a[0]>=1&&a[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(a)})),st("bilinear"===r||"nearest"===r,(function(){return"method must be bilinear or nearest, but was ".concat(r)}));var u={image:o,boxes:s,boxInd:l},h={method:r,extrapolationValue:i,cropSize:a},d=xo.runKernel(Mn,u,h);return d}});var hh=No({flipLeftRight_:function(e){var t=Ao(e,"image","flipLeftRight","float32");st(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return xo.runKernel(ta,n,{})}});var dh=No({grayscaleToRGB_:function(e){var t=Ao(e,"image","grayscaleToRGB"),n=t.rank-1,a=t.shape[n];st(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),st(1===a,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(a,".")}));var r=new Array(t.rank);return r.fill(1,0,n),r[n]=3,Ac(t,r)}});var fh=No({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=Ao(e,"image","rotateWithOffset","float32");st(4===r.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(r.rank,".")}));var i={image:r},o={radians:t,fillValue:n,center:a},s=xo.runKernel(Kr,i,o);return s}});function ph(e,t,n,a,r,i){null==a&&(a=.5),null==r&&(r=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),st(0<=a&&a<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(a,"'")})),st(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),st(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),st(1===t.rank,(function(){return"scores must be a 1D tensor"})),st(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),st(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:a,scoreThreshold:r,softNmsSigma:i}}var gh=No({nonMaxSuppression_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=Ao(e,"boxes","nonMaxSuppression","float32"),o=Ao(t,"scores","nonMaxSuppression","float32"),s=ph(i,o,n,a,r),l={maxOutputSize:n=s.maxOutputSize,iouThreshold:a=s.iouThreshold,scoreThreshold:r=s.scoreThreshold};return xo.runKernel(Va,{boxes:i,scores:o},l)}});function vh(e,t,n){var a=function(e,t,n){return function(e,t,n){var a=0,r=e.length,i=0,o=!1;for(;a<r;){var s=n(t,e[i=a+(r-a>>>1)]);s>0?a=i+1:(r=i,o=!s)}return o?a:-a-1}(e,t,n||mh)}(e,t,n),r=a<0?-(a+1):a;e.splice(r,0,t)}function mh(e,t){return e>t?1:e<t?-1:0}function xh(e,t,n,a,r){return kh(e,t,n,a,r,0)}function bh(e,t,n,a,r,i){return kh(e,t,n,a,r,0,!1,i,!0)}function yh(e,t,n,a,r,i){return kh(e,t,n,a,r,i,!0)}function kh(e,t,n,a,r,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],u=0;u<t.length;u++)t[u]>r&&c.push({score:t[u],boxIndex:u,suppressBeginIndex:0});c.sort(Ch);for(var h=i>0?-.5/i:0,d=[],f=[];d.length<n&&c.length>0;){var p=c.pop(),g=p.score,v=p.boxIndex,m=p.suppressBeginIndex;if(g<r)break;for(var x=!1,b=d.length-1;b>=m;--b){var y=wh(e,v,d[b]);if(y>=a){x=!0;break}if(p.score=p.score*Sh(a,h,y),p.score<=r)break}p.suppressBeginIndex=d.length,x||(p.score===g?(d.push(v),f.push(p.score)):p.score>r&&vh(c,p,Ch))}var k=d.length,w=n-k;s&&w>0&&(d.push.apply(d,Ke(new Array(w).fill(0))),f.push.apply(f,Ke(new Array(w).fill(0))));var S={selectedIndices:d};return o&&(S.selectedScores=f),l&&(S.validOutputs=k),S}function wh(e,t,n){var a=e.subarray(4*t,4*t+4),r=e.subarray(4*n,4*n+4),i=Math.min(a[0],a[2]),o=Math.min(a[1],a[3]),s=Math.max(a[0],a[2]),l=Math.max(a[1],a[3]),c=Math.min(r[0],r[2]),u=Math.min(r[1],r[3]),h=Math.max(r[0],r[2]),d=Math.max(r[1],r[3]),f=(s-i)*(l-o),p=(h-c)*(d-u);if(f<=0||p<=0)return 0;var g=Math.max(i,c),v=Math.max(o,u),m=Math.min(s,h),x=Math.min(l,d),b=Math.max(m-g,0)*Math.max(x-v,0);return b/(f+p-b)}function Sh(e,t,n){var a=Math.exp(t*n*n);return n<=e?a:0}function Ch(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Ih(){return Ih=i(f().mark((function e(t,n,a){var r,i,o,s,l,c,u,h,d,p,g=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>3&&void 0!==g[3]?g[3]:.5,i=g.length>4&&void 0!==g[4]?g[4]:Number.NEGATIVE_INFINITY,o=Ao(t,"boxes","nonMaxSuppressionAsync"),s=Ao(n,"scores","nonMaxSuppressionAsync"),l=ph(o,s,a,r,i),a=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,e.next=10,Promise.all([o.data(),s.data()]);case 10:return c=e.sent,u=c[0],h=c[1],d=xh(u,h,a,r,i),p=d.selectedIndices,o!==t&&o.dispose(),s!==n&&s.dispose(),e.abrupt("return",Lu(p,"int32"));case 17:case"end":return e.stop()}}),e)}))),Ih.apply(this,arguments)}var Ah=function(e,t,n){return Ih.apply(this,arguments)};var Th=No({nonMaxSuppressionWithScore_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Ao(e,"boxes","nonMaxSuppression"),s=Ao(t,"scores","nonMaxSuppression"),l=ph(o,s,n,a,r,i),c={boxes:o,scores:s},u={maxOutputSize:n=l.maxOutputSize,iouThreshold:a=l.iouThreshold,scoreThreshold:r=l.scoreThreshold,softNmsSigma:i=l.softNmsSigma},h=xo.runKernel(Xa,c,u);return{selectedIndices:h[0],selectedScores:h[1]}}});function Nh(){return Nh=i(f().mark((function e(t,n,a){var r,i,o,s,l,c,u,h,d,p,g,v,m=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>3&&void 0!==m[3]?m[3]:.5,i=m.length>4&&void 0!==m[4]?m[4]:Number.NEGATIVE_INFINITY,o=m.length>5&&void 0!==m[5]?m[5]:0,s=Ao(t,"boxes","nonMaxSuppressionAsync"),l=Ao(n,"scores","nonMaxSuppressionAsync"),c=ph(s,l,a,r,i,o),a=c.maxOutputSize,r=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,e.next=12,Promise.all([s.data(),l.data()]);case 12:return u=e.sent,h=u[0],d=u[1],p=yh(h,d,a,r,i,o),g=p.selectedIndices,v=p.selectedScores,s!==t&&s.dispose(),l!==n&&l.dispose(),e.abrupt("return",{selectedIndices:Lu(g,"int32"),selectedScores:Lu(v)});case 19:case"end":return e.stop()}}),e)}))),Nh.apply(this,arguments)}var Eh=function(e,t,n){return Nh.apply(this,arguments)};var Rh=No({nonMaxSuppressionPadded_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Ao(e,"boxes","nonMaxSuppression"),s=Ao(t,"scores","nonMaxSuppression"),l=ph(o,s,n,a,r,null),c=l.maxOutputSize,u=l.iouThreshold,h=l.scoreThreshold,d={boxes:o,scores:s},f={maxOutputSize:c,iouThreshold:u,scoreThreshold:h,padToMaxOutputSize:i},p=xo.runKernel(Ua,d,f);return{selectedIndices:p[0],validOutputs:p[1]}}});function Fh(){return Fh=i(f().mark((function e(t,n,a){var r,i,o,s,l,c,h,d,p,g,v,m,x,b,y,k,w=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w.length>3&&void 0!==w[3]?w[3]:.5,i=w.length>4&&void 0!==w[4]?w[4]:Number.NEGATIVE_INFINITY,o=w.length>5&&void 0!==w[5]&&w[5],s=Ao(t,"boxes","nonMaxSuppressionAsync"),l=Ao(n,"scores","nonMaxSuppressionAsync"),c=ph(s,l,a,r,i,null),h=c.maxOutputSize,d=c.iouThreshold,p=c.scoreThreshold,e.next=11,Promise.all([s.data(),l.data()]);case 11:return g=e.sent,v=u(g,2),m=v[0],x=v[1],b=bh(m,x,h,d,p,o),y=b.selectedIndices,k=b.validOutputs,s!==t&&s.dispose(),l!==n&&l.dispose(),e.abrupt("return",{selectedIndices:Lu(y,"int32"),validOutputs:Rl(k,"int32")});case 19:case"end":return e.stop()}}),e)}))),Fh.apply(this,arguments)}var Dh=function(e,t,n){return Fh.apply(this,arguments)};function Lh(e){return o(e)||qe(e)||l(e)||c()}var Mh=No({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Ao(e,"images","resizeBilinear");st(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(r.rank,".")})),st(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),st(!1===a||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=r,o=!1;3===r.rank&&(o=!0,i=Jl(r,[1,r.shape[0],r.shape[1],r.shape[2]])),Lh(t);var s={images:i},l={alignCorners:n,halfPixelCenters:a,size:t},c=xo.runKernel(ir,s,l);return o?Jl(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Oh=No({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Ao(e,"images","resizeNearestNeighbor");st(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(r.rank,".")})),st(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),st("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),st(!1===a||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=r,o=!1;3===r.rank&&(o=!0,i=Jl(r,[1,r.shape[0],r.shape[1],r.shape[2]])),Lh(t);var s={images:i},l={alignCorners:n,halfPixelCenters:a,size:t},c=xo.runKernel(ar,s,l);return o?Jl(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Ph=No({bincount_:function(e,t,n){var a=Ao(e,"x","bincount"),r=Ao(t,"weights","bincount");st("int32"===a.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),st(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),st(r.size===a.size||0===r.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(a.shape,", weights shape: ")+"".concat(r.shape,".")}));var i={x:a,weights:r},o={size:n};return xo.runKernel(vn,i,o)}});var _h=No({lessEqual_:function(e,t){var n=Ao(e,"a","lessEqual","string_or_numeric"),a=Ao(t,"b","lessEqual","string_or_numeric"),r=u(so(n,a),2);n=r[0],a=r[1],dl(n.shape,a.shape);var i={a:n,b:a};return xo.runKernel(ma,i)}});var zh=No({round_:function(e){var t={x:Ao(e,"x","round")};return xo.runKernel(cr,t)}});function Bh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var r={start:e,stop:t,step:n,dtype:a};return xo.runKernel(Qa,{},r)}function Wh(e,t){for(var n,a,r,i,o,s,l=Lu([-1]),c=Lu([0]),u=Lu([0]),h=0;h<e.size-1;h++){n=ku(e,0,h+1),a=ku(e,h+1),o=kc(Bc(n),t),s=kc(Bc(a),t);var d=Bc(_c(n,Bh(0,n.size)));r=kc(d,Bc(n));var f=Nc(a.shape,n.size),p=Ll(Bh(0,a.size),f),g=_c(a,p);i=kc(Bc(g),Bc(a));var v=zc(r,i),m=zc(r,i),x=_c(o,s);u=_c(_c(x,v),m);var b=Fc(u,c);c=Bu(b,u,c),l=Bu(b,Lu([h]),l)}return l}var Hh=No({threshold_:function(e){var t,n,a,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,l=Ao(e,"image","threshold"),c=.2989,h=.587,d=.114,f=l.shape[0]*l.shape[1],p=_c(Lu([s]),255);if(st(3===l.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(l.rank,".")})),st(3===l.shape[2]||1===l.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(l.shape[2],".")})),st("int32"===l.dtype||"float32"===l.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(l.dtype,".")})),st("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===l.shape[2]){var g=Nu(l,[1,1,1],-1),v=u(g,3);t=v[0],n=v[1],a=v[2];var m=_c(t,c),x=_c(n,h),b=_c(a,d);r=Ll(Ll(m,x),b)}else r=e;if("otsu"===i){var y=Ph(zs(zh(r),"int32"),Fo([]),256);p=Wh(y,f)}var k=o?_h(r,p):Fc(r,p),w=zs(_c(k,255),"int32");return w}});var Vh=No({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=Ao(e,"image","transform","float32"),s=Ao(t,"transforms","transform","float32");st(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),st(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),st(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var l={image:o,transforms:s},c={interpolation:n,fillMode:a,fillValue:r,outputShape:i};return xo.runKernel(Vr,l,c)}});var Uh=No({bandPart_:function(e,t,n){st(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),st(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var a=Ao(e,"a","bandPart");st(a.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(a.rank,".")}));var r=a.shape,i=u(a.shape.slice(-2),2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,")."));if(!(n<=s))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,")."));t<0&&(t=o),n<0&&(n=s);var l=Jl(Bh(0,o,1,"int32"),[-1,1]),c=Bh(0,s,1,"int32"),h=zc(l,c),d=Hc(_h(h,Rl(+t,"int32")),Dc(h,Rl(-n,"int32"))),f=ou([o,s],a.dtype);return Jl(Fu(Pu(Jl(a,[-1,o,s])).map((function(e){return Bu(d,e,f)}))),r)}});var Xh=No({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Ao(e,"x","min"),r={x:a},i={axis:t,keepDims:n};return xo.runKernel(Ma,r,i)}});var Gh=No({pow_:function(e,t){var n=Ao(e,"base","pow"),a=Ao(t,"exp","pow"),r=u(so(n,a),2),i={a:n=r[0],b:a=r[1]};return xo.runKernel(Ka,i)}});function Yh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return Dl(e);if(1!==e.rank&&null===n)return Yh(Jl(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Bc(Dl(e),n);if(t===1/0)return Pc(Dl(e),n);if(t===-1/0)return Xh(Dl(e),n);if("euclidean"===t||2===t)return Eu(Bc(Gh(Dl(e),Rl(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Pc(Bc(Dl(e),n[0]),n[1]-1);if(t===1/0)return Pc(Bc(Dl(e),n[1]),n[0]);if(t===-1/0)return Xh(Bc(Dl(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Eu(Bc(tu(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var jh=No({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Yh(e=Ao(e,"x","norm"),t,n),i=r.shape;if(a){var o=xt(n,e.shape);i=Zc(r.shape,o)}return Jl(r,i)}});var qh=No({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,st(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],a=function(t){st(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},r=1;r<e.length;++r)a(r)}():(t=!0,e=Nu(e,e.shape[0],0).map((function(e){return Ru(e,[0])}))),st(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],a=e,r=function(e){n.push(xo.tidy((function(){var t=a[e];if(e>0)for(var r=0;r<e;++r){var i=_c(Bc(_c(n[r],t)),n[r]);t=zc(t,i)}return kc(t,jh(t,"euclidean"))})))},i=0;i<e.length;++i)r(i);return t?Fu(n,0):n}});function Kh(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return xo.tidy((function(){st(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],a=e.shape[1],r=Tc(n),i=Bs(e),o=Mu([[1]],[1,1]),s=Bs(o),l=n>=a?a:n,c=function(e){var t=i,l=s,c=r,h=u(xo.tidy((function(){var t=ku(i,[e,e],[n-e,1]),l=jh(t),c=ku(i,[e,e],[1,1]),u=Bu(Fc(c,0),Mu([[-1]]),Mu([[1]])),h=zc(c,_c(u,l)),d=kc(t,h);s=1===d.shape[0]?Bs(o):sc([o,ku(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);var f=au(kc(Vc(u,h),l)),p=ku(i,[e,0],[n-e,a]),g=_c(f,s),v=Uu(s);if(0===e)i=zc(p,Vc(g,Vc(v,p)));else{var m=zc(p,Vc(g,Vc(v,p)));i=sc([ku(i,[0,0],[e,a]),m],0)}var x=Uu(g),b=ku(r,[0,e],[n,r.shape[1]-e]);if(0===e)r=zc(b,Vc(Vc(b,s),x));else{var y=zc(b,Vc(Vc(b,s),x));r=sc([ku(r,[0,0],[n,e]),y],1)}return[s,i,r]})),3);s=h[0],i=h[1],r=h[2],Al([t,l,c])},h=0;h<l;++h)c(h);return!t&&n>a&&(r=ku(r,[0,0],[n,a]),i=ku(i,[0,0],[a,a])),[r,i]}))}var Zh,$h=No({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(st(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return Kh(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),a=Pu(Jl(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),r=[],i=[];a.forEach((function(e){var n=u(Kh(e,t),2),a=n[0],o=n[1];r.push(a),i.push(o)}));var o=Jl(Fu(r,0),e.shape),s=Jl(Fu(i,0),e.shape);return[o,s]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Zh||(Zh={}));var Qh=No({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zh.SUM_BY_NONZERO_WEIGHTS,a=Ao(e,"losses","computeWeightedLoss"),r=null;null!=t&&(r=Ao(t,"weights","computeWeightedLoss"));var i=null==r?a:_c(a,r);if(n===Zh.NONE)return i;if(n===Zh.SUM)return Bc(i);if(n===Zh.MEAN){if(null==r)return Yc(i);var o=a.size/r.size,s=kc(Bc(i),Bc(r));return o>1?kc(s,Rl(o)):s}if(n===Zh.SUM_BY_NONZERO_WEIGHTS){if(null==r)return kc(Bc(i),Rl(a.size));var l=_c(r,su(a.shape)),c=zs(Bc(ru(l,Rl(0))),"float32");return kc(Bc(i),c)}throw Error("Unknown reduction: ".concat(n))}});No({absoluteDifference_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zh.SUM_BY_NONZERO_WEIGHTS,r=Ao(e,"labels","absoluteDifference"),i=Ao(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=Ao(n,"weights","absoluteDifference")),lt(r.shape,i.shape,"Error in absoluteDifference: ");var s=Dl(zc(r,i));return Qh(s,o,a)}});No({cosineDistance_:function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zh.SUM_BY_NONZERO_WEIGHTS,i=Ao(e,"labels","cosineDistance"),o=Ao(t,"predictions","cosineDistance"),s=null;null!=a&&(s=Ao(a,"weights","cosineDistance")),lt(i.shape,o.shape,"Error in cosineDistance: ");var l=Rl(1),c=zc(l,Bc(_c(i,o),n,!0));return Qh(c,s,r)}});No({hingeLoss_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zh.SUM_BY_NONZERO_WEIGHTS,r=Ao(e,"labels","hingeLoss"),i=Ao(t,"predictions","hingeLoss"),o=null;null!=n&&(o=Ao(n,"weights","hingeLoss")),lt(r.shape,i.shape,"Error in hingeLoss: ");var s=Rl(1);r=zc(_c(Rl(2),r),s);var l=vu(zc(s,_c(r,i)));return Qh(l,o,a)}});No({huberLoss_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zh.SUM_BY_NONZERO_WEIGHTS,i=Ao(e,"labels","huberLoss"),o=Ao(t,"predictions","huberLoss"),s=null;null!=n&&(s=Ao(n,"weights","huberLoss")),lt(i.shape,o.shape,"Error in huberLoss: ");var l=Rl(a),c=Dl(zc(o,i)),u=jc(c,l),h=zc(c,u),d=Ll(_c(Rl(.5),tu(u)),_c(l,h));return Qh(d,s,r)}});No({logLoss_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zh.SUM_BY_NONZERO_WEIGHTS,i=Ao(e,"labels","logLoss"),o=Ao(t,"predictions","logLoss"),s=null;null!=n&&(s=Ao(n,"weights","logLoss")),lt(i.shape,o.shape,"Error in logLoss: ");var l=Rl(1),c=Rl(a),u=au(_c(i,Mc(Ll(o,c)))),h=_c(zc(l,i),Mc(Ll(zc(l,o),c))),d=zc(u,h);return Qh(d,s,r)}});var Jh=No({squaredDifference_:function(e,t){var n=Ao(e,"a","squaredDifference"),a=Ao(t,"b","squaredDifference"),r=u(so(n,a),2);n=r[0],a=r[1],dl(n.shape,a.shape);var i={a:n,b:a};return xo.runKernel(Fr,i,{})}});No({meanSquaredError_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zh.SUM_BY_NONZERO_WEIGHTS,r=Ao(e,"labels","meanSquaredError"),i=Ao(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=Ao(n,"weights","meanSquaredError")),lt(r.shape,i.shape,"Error in meanSquaredError: ");var s=Jh(r,i);return Qh(s,o,a)}});function ed(e,t){var n=Ao(e,"labels","sigmoidCrossEntropyWithLogits"),a=Ao(t,"logits","sigmoidCrossEntropyWithLogits");lt(n.shape,a.shape,"Error in sigmoidCrossEntropyWithLogits: ");var r=vu(a),i=_c(a,n),o=Oc(Cc(au(Dl(a))));return Ll(zc(r,i),o)}No({sigmoidCrossEntropy_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zh.SUM_BY_NONZERO_WEIGHTS,i=Ao(e,"multiClassLabels","sigmoidCrossEntropy"),o=Ao(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Ao(n,"weights","sigmoidCrossEntropy")),lt(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),a>0){var l=Rl(a),c=Rl(1),u=Rl(.5);i=Ll(_c(i,zc(c,l)),_c(u,l))}var h=ed(i,o);return Qh(h,s,r)}});var td=No({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Ao(e,"x","logSumExp"),r=xt(t,a.shape),i=Pc(a,r,!0),o=zc(a,i),s=Cc(o),l=Bc(s,r),c=Mc(l),u=Ll(Jl(i,c.shape),c);if(n){var h=Zc(u.shape,r);return Jl(u,h)}return u}});function nd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var a=El((function(e,t,a){var r=td(t,[n],!0),i=zc(zs(t,"float32"),r);a([e,i]);var o=au(_c(i,e));return{value:Bc(o,[n]),gradFunc:function(e,t){var a=u(t,2),r=a[0],i=a[1],o=Zc(e.shape,[n]);return[_c(Jl(e,o),zc(zs(r,"float32"),Cc(i))),_c(Jl(e,o),zc(Cc(i),zs(r,"float32")))]}}}));return a(e,t)}No({softmaxCrossEntropy_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zh.SUM_BY_NONZERO_WEIGHTS,i=Ao(e,"onehotLabels","softmaxCrossEntropy"),o=Ao(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Ao(n,"weights","softmaxCrossEntropy")),lt(i.shape,o.shape,"Error in softmaxCrossEntropy: "),a>0){var l=Rl(a),c=Rl(1),u=Rl(i.shape[1]);i=Ll(_c(i,zc(c,l)),kc(l,u))}var h=nd(i,o);return Qh(h,s,r)}});No({sparseFillEmptyRows_:function(e,t,n,a){var r=Ao(e,"indices","sparseFillEmptyRows","int32"),i=Ao(t,"values","sparseFillEmptyRows"),o=Ao(n,"denseShape","sparseFillEmptyRows","int32"),s=Ao(a,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==r.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var l={indices:r,values:i,denseShape:o,defaultValue:s},c=xo.runKernel(Ar,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});No({sparseReshape_:function(e,t,n){var a=Ao(e,"inputIndices","sparseReshape","int32"),r=Ao(t,"inputShape","sparseReshape","int32"),i=Ao(n,"newShape","sparseReshape","int32");if(2!==a.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==r.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(r.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:a,inputShape:r,newShape:i},s=xo.runKernel(Tr,o);return{outputIndices:s[0],outputShape:s[1]}}});No({sparseSegmentMean_:function(e,t,n){var a=Ao(e,"data","sparseSegmentMean"),r=Ao(t,"indices","sparseSegmentMean","int32"),i=Ao(n,"segmentIds","sparseSegmentMean","int32");if(a.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(r.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:a,indices:r,segmentIds:i};return xo.runKernel(Nr,o)}});No({sparseSegmentSum_:function(e,t,n){var a=Ao(e,"data","sparseSegmentSum"),r=Ao(t,"indices","sparseSegmentSum","int32"),i=Ao(n,"segmentIds","sparseSegmentSum","int32");if(a.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(r.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:a,indices:r,segmentIds:i};return xo.runKernel(Er,o)}});No({stringNGrams_:function(e,t,n,a,r,i,o,s){var l=Ao(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error("Data must be a vector, saw: ".concat(l.shape));var c=Ao(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var u={separator:n,nGramWidths:a,leftPad:r,rightPad:i,padWidth:o,preserveShortSequences:s},h={data:l,dataSplits:c},d=xo.runKernel(Mr,h,u);return{nGrams:d[0],nGramsSplits:d[1]}}});No({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Ao(e,"input","stringSplit","string"),r=Ao(t,"delimiter","stringSplit","string");if(1!==a.rank)throw new Error("Input should be Tensor1D but received shape ".concat(a.shape));if(0!==r.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(r.shape));var i={skipEmpty:n},o={input:a,delimiter:r},s=xo.runKernel(Or,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});No({stringToHashBucketFast_:function(e,t){var n=Ao(e,"input","stringToHashBucketFast","string"),a={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var r={input:n};return xo.runKernel(Pr,r,a)}});var ad={flipLeftRight:hh,grayscaleToRGB:dh,resizeNearestNeighbor:Oh,resizeBilinear:Mh,rotateWithOffset:fh,cropAndResize:uh,nonMaxSuppression:gh,nonMaxSuppressionAsync:Ah,nonMaxSuppressionWithScore:Th,nonMaxSuppressionWithScoreAsync:Eh,nonMaxSuppressionPadded:Rh,nonMaxSuppressionPaddedAsync:Dh,threshold:Hh,transform:Vh},rd={bandPart:Uh,gramSchmidt:qh,qr:$h},id=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Ze(this,n),(r=t.call(this)).learningRate=e,r.rho=a,r.epsilon=i,r.accumulatedGrads=[],r.accumulatedUpdates=[],null==i&&(r.epsilon=xo.backend.epsilon()),r}return Qe(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,a){var r=xo.registeredVariables[n];null==t.accumulatedGrads[a]&&(t.accumulatedGrads[a]={originalName:"".concat(n,"/accum_grad"),variable:Il((function(){return Wu(r).variable(false)}))}),null==t.accumulatedUpdates[a]&&(t.accumulatedUpdates[a]={originalName:"".concat(n,"/accum_var"),variable:Il((function(){return Wu(r).variable(false)}))});var i=Array.isArray(e)?e[a].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[a].variable,s=t.accumulatedUpdates[a].variable;Il((function(){var e=Ll(_c(o,t.rho),_c(tu(i),1-t.rho)),n=_c(kc(Eu(Ll(s,t.epsilon)),Eu(Ll(o,t.epsilon))),i),a=Ll(_c(s,t.rho),_c(tu(n),1-t.rho));o.assign(e),s.assign(a);var l=Ll(_c(n,-t.learningRate),r);r.assign(l)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(Al(this.accumulatedGrads.map((function(e){return e.variable}))),Al(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=i(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Ke(this.accumulatedGrads),Ke(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=i(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(Fl);id.className="Adadelta",wl(id);var od=function(e){Oi(n,e);var t=Hi(n);function n(e){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return Ze(this,n),(a=t.call(this)).learningRate=e,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return Qe(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,a){var r=xo.registeredVariables[n];if(null==t.accumulatedGrads[a]){t.accumulatedGrads[a]={originalName:"".concat(n,"/accumulator"),variable:Il((function(){return Nc(r.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[a].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[a].variable;Il((function(){var e=Ll(o,tu(i));o.assign(e);var n=Ll(_c(kc(i,Eu(Ll(e,xo.backend.epsilon()))),-t.learningRate),r);r.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&Al(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(Fl);od.className="Adagrad",wl(od);var sd=function(e){Oi(n,e);var t=Hi(n);function n(e,a,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Ze(this,n),(i=t.call(this)).learningRate=e,i.beta1=a,i.beta2=r,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],Il((function(){i.accBeta1=Rl(a).variable(),i.accBeta2=Rl(r).variable()})),null==o&&(i.epsilon=xo.backend.epsilon()),i}return Qe(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Il((function(){var a=zc(1,t.accBeta1),r=zc(1,t.accBeta2);n.forEach((function(n,i){var o=xo.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Il((function(){return Wu(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:Il((function(){return Wu(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var l=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,u=Ll(_c(l,t.beta1),_c(s,1-t.beta1)),h=Ll(_c(c,t.beta2),_c(tu(s),1-t.beta2)),d=kc(u,a),f=kc(h,r);l.assign(u),c.assign(h);var p=Ll(_c(kc(d,Ll(Eu(f),t.epsilon)),-t.learningRate),o);o.assign(p)}})),t.accBeta1.assign(_c(t.accBeta1,t.beta1)),t.accBeta2.assign(_c(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Al(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&Al(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=i(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Ke(this.accumulatedFirstMoment),Ke(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=i(f().mark((function e(t){var n,a=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,Il((function(){a.accBeta1.assign(Gh(a.beta1,a.iterations_+1)),a.accBeta2.assign(Gh(a.beta2,a.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(Fl);sd.className="Adam",wl(sd);var ld=function(e){Oi(n,e);var t=Hi(n);function n(e,a,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return Ze(this,n),(i=t.call(this)).learningRate=e,i.beta1=a,i.beta2=r,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],Il((function(){i.iteration=Rl(0).variable(),i.accBeta1=Rl(a).variable()})),null==o&&(i.epsilon=xo.backend.epsilon()),i}return Qe(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Il((function(){var a=zc(1,t.accBeta1),r=kc(-t.learningRate,Ll(_c(t.iteration,t.decay),1));n.forEach((function(n,i){var o=xo.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Wu(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:Wu(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var l=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,u=Ll(_c(l,t.beta1),_c(s,1-t.beta1)),h=_c(c,t.beta2),d=Dl(s),f=Gc(h,d);l.assign(u),c.assign(f);var p=Ll(_c(kc(r,a),kc(u,Ll(f,t.epsilon))),o);o.assign(p)}})),t.iteration.assign(Ll(t.iteration,1)),t.accBeta1.assign(_c(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Al(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&Al(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(Fl);ld.className="Adamax",wl(ld);var cd=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this)).learningRate=e,a.setLearningRate(e),a}return Qe(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);n.forEach((function(n,a){var r=Array.isArray(e)?e[a].tensor:e[n];if(null!=r){var i=xo.registeredVariables[n];Il((function(){var e=Ll(_c(t.c,r),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Tl(Rl(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(Fl);cd.className="SGD",wl(cd);var ud=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ze(this,n),(r=t.call(this,e)).learningRate=e,r.momentum=a,r.useNesterov=i,r.accumulations=[],r.m=Rl(r.momentum),r}return Qe(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,a){var r=xo.registeredVariables[n];if(null==t.accumulations[a]){t.accumulations[a]={originalName:"".concat(n,"/momentum"),variable:Il((function(){return Wu(r).variable(false)}))}}var i=t.accumulations[a].variable,o=Array.isArray(e)?e[a].tensor:e[n];null!=o&&Il((function(){var e,n=Ll(_c(t.m,i),o);e=t.useNesterov?Ll(_c(t.c,Ll(o,_c(n,t.m))),r):Ll(_c(t.c,n),r),i.assign(n),r.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&Al(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(cd);ud.className="Momentum",wl(ud);var hd=function(e){Oi(n,e);var t=Hi(n);function n(e){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Ze(this,n),(a=t.call(this)).learningRate=e,a.decay=r,a.momentum=i,a.epsilon=o,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=s,null==o&&(a.epsilon=xo.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return a}return Qe(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,a){var r=xo.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[a]&&(t.accumulatedMeanSquares[a]={originalName:"".concat(n,"/rms"),variable:Il((function(){return Wu(r).variable(i)}))}),null==t.accumulatedMoments[a]&&(t.accumulatedMoments[a]={originalName:"".concat(n,"/momentum"),variable:Il((function(){return Wu(r).variable(i)}))}),null==t.accumulatedMeanGrads[a]&&t.centered&&(t.accumulatedMeanGrads[a]={originalName:"".concat(n,"/mg"),variable:Il((function(){return Wu(r).variable(i)}))});var o=Array.isArray(e)?e[a].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[a].variable,l=t.accumulatedMoments[a].variable;Il((function(){var e=Ll(_c(s,t.decay),_c(tu(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[a].variable,i=Ll(_c(n,t.decay),_c(o,1-t.decay)),c=kc(_c(o,t.learningRate),Eu(zc(e,Ll(tu(i),t.epsilon)))),u=Ll(_c(l,t.momentum),c);s.assign(e),n.assign(i),l.assign(u);var h=zc(r,u);r.assign(h)}else{var d=Ll(_c(s,t.decay),_c(tu(o),1-t.decay)),f=Ll(_c(l,t.momentum),kc(_c(o,t.learningRate),Eu(Ll(d,t.epsilon))));s.assign(d),l.assign(f);var p=zc(r,f);r.assign(p)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&Al(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&Al(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&Al(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=i(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Ke(this.accumulatedMeanSquares),Ke(this.accumulatedMoments)),this.centered&&t.push.apply(t,Ke(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=i(f().mark((function e(t){var n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,a=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(a)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(a)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(a)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(Fl);hd.className="RMSProp",wl(hd);var dd=function(){function e(){Ze(this,e)}return Qe(e,null,[{key:"sgd",value:function(e){return new cd(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new ud(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new hd(e,t,n,a,r)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new sd(e,t,n,a)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new id(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new ld(e,t,n,a,r)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new od(e,t)}}]),e}(),fd={sgd:dd.sgd,momentum:dd.momentum,adadelta:dd.adadelta,adagrad:dd.adagrad,rmsprop:dd.rmsprop,adamax:dd.adamax,adam:dd.adam},pd="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function gd(){return new Promise((function(e){return pd((function(){return e()}))}))}function vd(e,t){var n=e[0].length;e.forEach((function(e,t){st(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),st(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var a=e[0];e.forEach((function(e,r){for(var i=0;i<n;i++)st(i===t||e[i]===a[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(r,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(a,") ")+"along the non-concatenated axis ".concat(r,".")}))}))}function md(e,t){for(var n=e[0].slice(),a=1;a<e.length;a++)n[t]+=e[a][t];return n}function xd(e){return e<=30?e:Et(e,Math.floor(Math.sqrt(e)))}function bd(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function yd(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=[];if(a)(r=r.concat(t.slice(0))).push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);for(var i=t.length,o=0;o<i;++o)r=r.concat([e[o+1]/t[o],t[o]]);r=r.concat(e.slice(i+1))}return r}function kd(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=[];if(n){a.push(t);for(var r=t+1;r<e;++r)r<=2*t?(a.push(r),a.push(r-(t+1))):a.push(r)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);a.push.apply(a,i),a.push(0),a.push.apply(a,o)}return a}function wd(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=[];a?r.push(e[0]/n):r.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?a?r.push(t[i-1]*e[i]):r.push(e[i]/t[i-1]):r.push(e[i]);return r}function Sd(e,t){for(var n=[0],a=0;a<t;++a)n.push(e[a][0]);return n}function Cd(e,t,n){for(var a=e.slice(0,1),r=0;r<n;++r)a.push(e[r+1]-t[r][0]-t[r][1]);return a}function Id(e,t){var n=e.shape.length,a=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(a<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(a,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[a-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[a-1]," vs. ").concat(n));if(0===ht(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var r=t.shape,i=r[r.length-1],o=1,s=0;s<r.length-1;++s)o*=r[s];var l=e.shape,c=r.slice();c.pop();for(var u=1,h=i;h<n;++h)u*=l[h],c.push(l[h]);var d=[].concat(Ke(Rt(e.shape).map((function(e){return e/u}))),[1]).slice(0,i);return[c,o,u,d]}function Ad(e,t,n){for(var a=t.shape.length,r=a>1?t.shape[a-1]:1,i=n.length,o=1,s=r;s<i;++s)o*=n[s];var l=r<1?1:r;return{sliceRank:r,numUpdates:ht(t.shape)/l,sliceSize:o,strides:[].concat(Ke(Rt(n.slice(0,r))),[1]),outputSize:ht(n)}}var Td=1.7580993408473768,Nd=1.0507009873554805,Ed=.3275911,Rd=.254829592,Fd=-.284496736,Dd=1.421413741,Ld=-1.453152027,Md=1.061405429;function Od(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),a=0;a<n.length;a+=2)n[a]=e[a/2],n[a+1]=t[a/2];return n}function Pd(e,t){return{real:e[2*t],imag:e[2*t+1]}}function _d(e,t,n,a){e[2*a]=t,e[2*a+1]=n}function zd(e,t,n){var a=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(a),imag:Math.sin(a)}}var Bd="->",Wd=/->/g;function Hd(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(Wd,"").length)/Bd.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(Bd,'").'));var a=u(e.split(Bd),2),r=a[0],i=a[1];st(-1===r.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var o=r.split(","),s=o.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var l=[],c=function(e){var t=i[e];if(!o.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===l.indexOf(t)&&l.push(t)},h=0;h<i.length;++h)c(h);for(var d=0;d<r.length;++d){var f=r[d];-1===l.indexOf(f)&&","!==f&&l.push(f)}for(var p=new Array(o.length),g=0;g<s;++g){if(new Set(o[g].split("")).size!==o[g].length)throw new Error("Found duplicate axes in input component ".concat(o[g],". ")+"Support for duplicate axes in input is not implemented yet.");p[g]=[];for(var v=0;v<o[g].length;++v)p[g].push(l.indexOf(o[g][v]))}for(var m=l.length,x=[],b=i.length;b<m;++b)x.push(b);return{allDims:l,summedDims:x,idDims:p}}function Vd(e,t){var n=new Array(e);n.fill(-1);for(var a=0;a<t.length;++a)n[t[a]]=a;for(var r=[],i=0;i<e;++i)-1===n[i]&&r.push(i);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:r}}function Ud(e,t,n){for(var a=new Array(e),r=function(e){for(var r=n[e].shape,i=function(n){void 0===a[t[e][n]]?a[t[e][n]]=r[n]:st(a[t[e][n]]===r[n],(function(){return"Expected dimension ".concat(a[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(r),", ")+"but got dimension ".concat(r[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)r(i)}function Xd(e,t){var n,a=e,r=[];0===e.length&&a.push(-1),n=e.length+1;for(var i=0;i<n;++i)r.push([]);for(var o=[],s=0;s<a.length;++s){var l,c=je(Yd(t,a[s]));try{for(c.s();!(l=c.n()).done;){var u=l.value;-1===o.indexOf(u)&&(r[s].push(u),o.push(u))}}catch(jz){c.e(jz)}finally{c.f()}}return{path:a,steps:r}}function Gd(e){return e.every((function(e,t){return e===t}))}function Yd(e,t){for(var n=[],a=0;a<e.length;++a)0!==e[a].length&&-1===e[a].indexOf(t)&&-1!==t||n.push(a);return n}function jd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=[];if("number"===typeof t)st(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),a=new Array(t).fill(e.shape[n]/t);else{var r=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);st(r<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}st(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),a=t}return a}function qd(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function Kd(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function Zd(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function $d(e,t,n,a){var r=t.shape.length,i=e.shape.length;if(0!==a&&(a<-r||a>r))throw new Error("Expect batchDims in the range of [-".concat(r,", ").concat(r,"], but got ").concat(a));if(a<0&&(a+=r),a>i)throw new Error("batchDims (".concat(a,") must be less than rank(x) (\n    ").concat(i,")."));if(n<a)throw new Error("batchDims (".concat(a,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<a;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],l=[],c=1,u=1,h=1,d=0;d<a;++d)l.push(e.shape[d]),c*=e.shape[d];for(var f=a;f<n;f++)l.push(e.shape[f]),u*=e.shape[f];for(var p=a;p<r;p++)l.push(t.shape[p]);for(var g=n+1;g<i;g++)l.push(e.shape[g]),h*=e.shape[g];return{batchSize:c,sliceSize:h,outerSize:u,dimSize:s,outputShape:l}}function Qd(e){try{return e.map((function(e){return Ei(e)}))}catch(jz){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(jz))}}function Jd(e,t){for(var n=[],a=0;a<t.length;a++)t[a]&&n.push(a);for(var r=_s(e,"int32"),i=_s([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=r.indexToLoc(n[o]),l=o*e.length;i.values.set(s,l)}return i.toTensor()}var ef={kernelName:Kt,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return _c(e,$u(zs(n,"float32"),-1))}}}},tf={kernelName:Zt,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){var t=tu(zs(n,"float32")),a=Eu(zc(Rl(1),t));return au(kc(e,a))}}}},nf={kernelName:$t,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){var t=Eu(zc(tu(zs(n,"float32")),1));return kc(e,t)}}}},af={kernelName:Qt,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),a=n[0],r=n[1],i=dl(a.shape,r.shape);return{a:function(){var t=e,n=hl(a.shape,i);return n.length>0&&(t=Bc(t,n)),Jl(t,a.shape)},b:function(){var t=e,n=hl(r.shape,i);return n.length>0&&(t=Bc(t,n)),Jl(t,r.shape)}}}},rf={kernelName:Jt,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,a){n[a]=function(){return e.clone()}})),n}},of={kernelName:nn,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return Wu(n)}}}},sf={kernelName:an,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return Wu(n)}}}},lf={kernelName:rn,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return kc(e,Eu(zc(Rl(1),tu(zs(n,"float32")))))}}}},cf={kernelName:on,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){var t=Eu(Ll(Rl(1),tu(zs(n,"float32"))));return kc(e,t)}}}},uf={kernelName:cn,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),a=n[0],r=n[1],i=dl(a.shape,r.shape);return{a:function(){var t=Ll(tu(a),tu(r)),n=_c(e,kc(r,t)),o=hl(a.shape,i);return o.length>0&&(n=Bc(n,o)),Jl(n,a.shape)},b:function(){var t=Ll(tu(a),tu(r)),n=au(_c(e,kc(a,t))),o=hl(r.shape,i);return o.length>0&&(n=Bc(n,o)),Jl(n,r.shape)}}}},hf={kernelName:sn,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return kc(e,Ll(tu(zs(n,"float32")),1))}}}},df={kernelName:ln,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return kc(e,zc(Rl(1),tu(zs(n,"float32"))))}}}};var ff=No({avgPool3dGrad_:function(e,t,n,a,r,i){var o=Ao(e,"dy","avgPool3dGrad"),s=Ao(t,"input","avgPool3dGrad"),l=o,c=s,u=!1;4===s.rank&&(u=!0,l=Jl(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=Jl(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),st(5===l.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")})),st(5===c.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")})),Ql("avgPool3dGrad",r,i);var h={dy:l,input:c},d={filterSize:n,strides:a,pad:r,dimRoundingMode:i},f=xo.runKernel(fn,h,d);return u?Jl(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}}),pf={kernelName:dn,inputsToSave:["x"],gradFunc:function(e,t,n){var a=u(t,1)[0],r=n.filterSize,i=n.strides,o=n.pad,s=n.dimRoundingMode;return{x:function(){return ff(e,a,r,i,o,s)}}}};var gf=No({avgPoolGrad_:function(e,t,n,a,r){var i=Ao(e,"dy","avgPoolGrad"),o=Ao(t,"input","avgPoolGrad");st(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=o,l=i,c=!1;3===o.rank&&(c=!0,s=Jl(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=Jl(i,[1,i.shape[0],i.shape[1],i.shape[2]])),st(4===l.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(l.rank,".")})),st(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var u={dy:l,input:s},h={filterSize:n,strides:a,pad:r},d=xo.runKernel(hn,u,h);return c?Jl(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),vf={kernelName:un,inputsToSave:["x"],gradFunc:function(e,t,n){var a=u(t,1)[0],r=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return gf(e,a,r,i,o)}}}},mf={kernelName:pn,inputsToSave:["a","b"],gradFunc:function(e,t,n){var a=u(t,2),r=a[0],i=a[1],o=n.transposeA,s=n.transposeB;return o||s?!o&&s?{a:function(){return Vc(e,i,!1,!1)},b:function(){return Vc(e,r,!0,!1)}}:o&&!s?{a:function(){return Vc(i,e,!1,!0)},b:function(){return Vc(r,e,!1,!1)}}:{a:function(){return Vc(i,e,!0,!0)},b:function(){return Vc(e,r,!0,!0)}}:{a:function(){return Vc(e,i,!1,!0)},b:function(){return Vc(r,e,!0,!1)}}}};var xf=No({spaceToBatchND_:function(e,t,n){var a=Ao(e,"x","spaceToBatchND");st(a.rank>=1+t.length,(function(){return"input rank ".concat(a.rank," should be > than [blockShape] ").concat(t.length)})),st(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),st(a.shape.reduce((function(e,a,r){return r>0&&r<=t.length?e&&(a+n[r-1][0]+n[r-1][1])%t[r-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(a.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var r={x:a},i={blockShape:t,paddings:n};return xo.runKernel(Sr,r,i)}}),bf={kernelName:gn,gradFunc:function(e,t,n){var a=n.blockShape,r=n.crops;return{x:function(){return xf(e,a,r)}}}},yf={kernelName:"BroadcastTo",gradFunc:function(e,t,n){for(var a=n,r=a.inputShape,i=a.shape,o=Array.from(i),s=r.length-1;s>=0;s--)if(r[s]===i[s])o[s]=1;else if(1!==r[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(i,"]."));for(var l=[],c=0;c<o.length;c++)o[c]>1&&l.push(c);return{x:function(){return Bc(e,l,!0)}}}},kf={kernelName:xn,gradFunc:function(e){return{x:function(){return e.clone()}}}},wf={kernelName:bn,gradFunc:function(e){return{x:function(){return Wu(e)}}}},Sf={kernelName:yn,inputsToSave:["x"],gradFunc:function(e,t,n){var a=u(t,1)[0],r=n.clipValueMin,i=n.clipValueMax;return{x:function(){return Bu(Hc(Dc(a,r),_h(a,i)),e,Wu(e))}}}},Cf={kernelName:wn,inputsToSave:["x"],gradFunc:ef.gradFunc},If={kernelName:Sn,saveAllInputs:!0,gradFunc:function(e,t,n){var a=t.map((function(e){return e.shape})),r=xt(n.axis,t[0].shape)[0],i=a.map((function(e){return e[r]}));return Nu(e,i,r).map((function(e){return function(){return e}}))}},Af={kernelName:Cn,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var a=u(t,2),r=a[0],i=a[1],o=n.dilations,s=n.strides,l=n.pad,c=n.dataFormat;return st(Kl(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return pc(r.shape,e,i,s,l,c)},filter:function(){return Ku(r,e,i.shape,s,l,c)}}}},Tf={kernelName:An,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var a=u(t,2),r=a[0],i=a[1],o=n.strides,s=n.pad,l=n.dataFormat,c=n.dimRoundingMode;return{dy:function(){return dc(e,i,o,s,l,1,c)},filter:function(){return Ku(e,r,i.shape,o,s,l,c)}}}};var Nf=No({conv3DBackpropFilter_:function(e,t,n,a,r){var i=e;4===e.rank&&(i=Jl(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=Jl(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),st(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),st(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")})),st(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),st(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),st(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:i,dy:o},l={strides:a,pad:r,filterShape:n};return xo.runKernel(Nn,s,l)}}),Ef={kernelName:Tn,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var a=n.dilations,r=n.strides,i=n.pad;st(Kl(a),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(a,"'")}));var o=u(t,2),s=o[0],l=o[1];return{x:function(){return mc(s.shape,e,l,r,i)},filter:function(){return Nf(s,e,l.shape,r,i)}}}};var Rf=No({sin_:function(e){var t={x:Ao(e,"x","sin","float32")};return xo.runKernel(vr,t)}}),Ff={kernelName:Rn,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return _c(au(Rf(zs(n,"float32"))),e)}}}};var Df=No({sinh_:function(e){var t={x:Ao(e,"x","sinh")};return xo.runKernel(mr,t)}}),Lf={kernelName:Fn,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return _c(Df(zs(n,"float32")),e)}}}};var Mf=No({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Ao(e,"x","cumsum"),i={x:r},o={axis:t,exclusive:n,reverse:a};return xo.runKernel(Ln,i,o)}}),Of={kernelName:Ln,inputsToSave:["x"],gradFunc:function(e,t,n){var a=u(t,1)[0],r=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=Qc([r],a.rank),n=Mf(e,r,i,!o);return null!=t&&(n=Uu(n,t)),n}}}},Pf={kernelName:_n,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var a=n.dilations,r=n.strides,i=n.pad,o=n.dimRoundingMode,s=null==a?[1,1]:a;st(Kl(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var l=u(t,2),c=l[0],h=l[1];return st(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(c.rank,".")})),st(4===h.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(h.rank,".")})),st(c.shape[3]===h.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(c.shape[3],") must match the inChannels dimension ")+"in filter ".concat(h.shape[2],".")})),st(Zl(r,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(r," and dilations ")+"'".concat(s,"'.")})),Ql("depthwiseConv2d",i,o),{x:function(){return rh(c.shape,e,h,r,i,s,o)},filter:function(){return ah(c,e,h.shape,r,i,s,o)}}}},_f={kernelName:Hn,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var a=u(t,2),r=a[0],i=a[1],o={x:r,filter:i,dy:e},s={x:r,filter:i,dy:e};return{x:function(){return xo.runKernel(Vn,o,n)},filter:function(){return xo.runKernel(Un,s,n)}}}},zf={kernelName:Yn,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:u(t,1)[0]};return{x:function(){return xo.runKernel(jn,n)}}}},Bf={kernelName:qn,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0],a=_c(Cc(au(tu(n))),2/Math.sqrt(Math.PI));return{x:function(){return _c(e,a)}}}},Wf={kernelName:Zn,outputsToSave:[!0],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return _c(e,n)}}}},Hf={kernelName:$n,inputsToSave:["input"],gradFunc:function(e,t){var n=u(t,1)[0];return{input:function(){return Jl(e,n.shape)}}}},Vf={kernelName:Qn,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return _c(e,Cc(n))}}}},Uf={kernelName:na,gradFunc:function(e){return{x:function(){return Wu(e)}}}},Xf={kernelName:aa,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),a=n[0],r=n[1],i=dl(a.shape,r.shape);return{a:function(){var t=kc(e,zs(r,"float32")),n=hl(a.shape,i);return n.length>0?Jl(Bc(t,n),a.shape):t},b:function(){var t=_c(e,zs(a,"float32")),n=hl(r.shape,i);n.length>0&&(t=Jl(Bc(t,n),r.shape));var o=tu(r);return au(kc(t,zs(o,"float32")))}}}};var Gf=No({rsqrt_:function(e){var t={x:Ao(e,"x","rsqrt","float32")};return xo.runKernel(ur,t)}}),Yf={kernelName:ra,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var a=n.varianceEpsilon,r=u(t,4),i=r[0],o=r[1],s=r[2],l=r[3],c=null==l?Rl(1):l,h=hl(o.shape,i.shape),d=[];if(1===o.rank){for(var f=0;f<i.shape.length-1;++f)d.push(i.shape[f]);d.push(1)}var p=zc(i,o),g=_c(e,c),v=Gf(Ll(s,Rl(a))),m=_c(_c(_c(v,v),v),Rl(-.5));return{x:function(){return 1===o.rank?Jl(_c(_c(e,Ac(Jl(v,[1,1,1,o.shape[0]]),d)),c),i.shape):Jl(_c(_c(e,v),c),i.shape)},mean:function(){var e=_c(_c(v,Rl(-1)),g);return 1===o.rank&&(e=Bc(e,h)),Jl(e,o.shape)},variance:function(){var e=_c(_c(m,p),g);return 1===o.rank&&(e=Bc(e,h)),Jl(e,o.shape)},scale:function(){var t=_c(p,v),n=_c(e,t);return 1===o.rank&&(n=Bc(n,h)),Jl(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=Bc(t,h)),Jl(t,o.shape)}}}};var jf=No({unsortedSegmentSum_:function(e,t,n){var a=Ao(e,"x","unsortedSegmentSum"),r=Ao(t,"segmentIds","unsortedSegmentSum","int32");st(ft(n),(function(){return"numSegments must be of dtype int"}));var i={x:a,segmentIds:r},o={numSegments:n};return xo.runKernel(Yr,i,o)}}),qf={kernelName:ia,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var a=u(t,2),r=a[0],i=a[1],o=n.axis,s=xt(o,r.shape)[0];return{x:function(){var t=r.shape,n=i.size,a=t.slice(0,s),l=a.length,c=t.slice(o,t.length).slice(1),u=c.length,h=Kf(0,l),d=Kf(l+1,l+1+u),f=Zf([a,[n],c]),p=Jl(e,f),g=Jl(i,[n]),v=Zf([[l],h,d]),m=Uu(p,v),x=jf(m,g,r.shape[s]),b=Jc(v);return x=Uu(x,b)},indices:function(){return i}}}};function Kf(e,t){for(var n=[],a=e;a<t;++a)n.push(a);return n}function Zf(e){for(var t=[],n=0;n<e.length;++n)for(var a=0;a<e[n].length;++a)t.push(e[n][a]);return t}var $f={kernelName:la,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),a=n[0],r=n[1];return{a:function(){return Wu(a)},b:function(){return Wu(r)}}}},Qf={kernelName:ca,gradFunc:function(e){return{x:function(){return zs(e,"float32")}}}},Jf={kernelName:da,gradFunc:function(e){return{x:function(){return Wu(e)}}}},ep={kernelName:fa,gradFunc:function(e){return{x:function(){return Wu(e)}}}},tp={kernelName:pa,gradFunc:function(e){return{x:function(){return Wu(e)}}}},np={kernelName:ga,inputsToSave:["x"],gradFunc:function(e,t,n){var a=u(t,1)[0],r=n.alpha,i=Fc(a,0);return{x:function(){return Bu(i,e,_c(e,r))}}}},ap={kernelName:ya,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return kc(e,Ll(n,1))}}}},rp={kernelName:ba,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return kc(e,zs(n,"float32"))}}}},ip={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var a=u(t,1)[0],r=n.axis;return{logits:function(){var t=Cc(a);return zc(e,_c(Bc(e,r,!0),t))}}}};var op=No({localResponseNormalizationBackprop_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,s={x:e,y:t,dy:n},l={depthRadius:a,bias:r,alpha:i,beta:o};return xo.runKernel(Ia,s,l)}}),sp={kernelName:Ca,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var a=u(t,2),r=a[0],i=a[1],o=n.depthRadius,s=n.bias,l=n.alpha,c=n.beta;return{x:function(){return op(r,i,e,o,s,l,c)}}}};function lp(e,t,n,a){return t.rank<n.rank&&(t=Jl(t,Zc(t.shape,a))),e.rank<n.rank&&(e=Jl(e,Zc(e.shape,a))),{x:function(){return _c(e,zs(Sc(n,t),e.dtype))}}}var cp={kernelName:Aa,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var a=n.reductionIndices,r=t[0],i=lp(e,t[1],r,xt(a,r.shape));return{x:function(){return i.x()}}}};var up=No({less_:function(e,t){var n=Ao(e,"a","less","string_or_numeric"),a=Ao(t,"b","less","string_or_numeric"),r=u(so(n,a),2);n=r[0],a=r[1],dl(n.shape,a.shape);var i={a:n,b:a};return xo.runKernel(va,i)}}),hp={kernelName:Ta,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),a=n[0],r=n[1];return{a:function(){return _c(e,zs(Dc(a,r),"float32"))},b:function(){return _c(e,zs(up(a,r),"float32"))}}}};var dp=No({maxPool3dGrad_:function(e,t,n,a,r,i,o){var s=Ao(e,"dy","maxPool3dGrad"),l=Ao(t,"input","maxPool3dGrad"),c=Ao(n,"output","maxPool3dGrad"),u=s,h=l,d=c,f=!1;4===l.rank&&(f=!0,u=Jl(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),h=Jl(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=Jl(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),st(5===u.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")})),st(5===h.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(h.rank,".")})),st(5===d.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(d.rank,".")})),Ql("maxPool3dGrad",i,o);var p={dy:u,input:h,output:d},g={filterSize:a,strides:r,pad:i,dimRoundingMode:o},v=xo.runKernel(Fa,p,g);return f?Jl(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}}),fp={kernelName:Ra,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var a=u(t,2),r=a[0],i=a[1],o=n.filterSize,s=n.strides,l=n.pad,c=n.dimRoundingMode;return{x:function(){return dp(e,r,i,o,s,l,c)}}}};var pp=No({maxPoolGrad_:function(e,t,n,a,r,i,o){var s=Ao(e,"dy","maxPoolGrad"),l=Ao(t,"input","maxPoolGrad"),c=Ao(n,"output","maxPoolGrad");st(l.rank===s.rank,(function(){return"Rank of input (".concat(l.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),st(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),st(4===l.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(l.rank,".")})),Ql("maxPoolGrad",i,o);var u={dy:s,input:l,output:c},h={filterSize:a,strides:r,pad:i,dimRoundingMode:o};return xo.runKernel(Ea,u,h)}}),gp={kernelName:Na,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var a=u(t,2),r=a[0],i=a[1],o=n.filterSize,s=n.strides,l=n.pad;return{x:function(){return pp(e,r,i,o,s,l)}}}},vp={kernelName:La,inputsToSave:["x"],gradFunc:function(e,t,n){var a=u(t,1)[0],r=xt(n.axis,a.shape),i=ht(Kc(a.shape,r)[1]);return{x:function(){var t=a.shape.slice();r.forEach((function(e){t[e]=1}));var n=Jl(e,t);return kc(_c(n,su(a.shape,"float32")),i)}}}},mp={kernelName:Ma,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var a=n.axis,r=u(t,2),i=r[0],o=lp(e,r[1],i,xt(a,i.shape));return{x:function(){return o.x()}}}},xp={kernelName:Oa,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),a=n[0],r=n[1];return{a:function(){return _c(e,zs(_h(a,r),"float32"))},b:function(){return _c(e,zs(Fc(a,r),"float32"))}}}},bp={kernelName:Pa,inputsToSave:["x"],gradFunc:function(e,t,n){var a=t[0],r=n.paddings.map((function(e){return e[0]}));return{x:function(){return ku(e,r,a.shape)}}}},yp={kernelName:_a,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),a=n[0],r=n[1],i=dl(a.shape,r.shape);return{a:function(){var t=hl(a.shape,i);return t.length>0?Jl(Bc(e,t),a.shape):e},b:function(){var t=_c(e,au(Ec(kc(a,r)))),n=hl(r.shape,i);return n.length>0?Jl(Bc(t,n),r.shape):t}}}},kp={kernelName:Ba,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),a=n[0],r=n[1],i=dl(a.shape,r.shape);return{a:function(){var t=_c(e,zs(r,"float32")),n=hl(a.shape,i);return n.length>0?Jl(Bc(t,n),a.shape):t},b:function(){var t=_c(e,zs(a,"float32")),n=hl(r.shape,i);return n.length>0?Jl(Bc(t,n),r.shape):t}}}},wp={kernelName:Wa,gradFunc:function(e){return{x:function(){return au(e)}}}},Sp={kernelName:Ya,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return ou(n.shape,"float32")}}}},Cp={kernelName:Ga,gradFunc:function(e){return{x:function(){return Wu(e)}}}},Ip={kernelName:ja,saveAllInputs:!0,gradFunc:function(e,t,n){var a=n.axis;return Pu(e,a).map((function(e){return function(){return e}}))}},Ap={kernelName:qa,inputsToSave:["x"],gradFunc:function(e,t,n){var a=t[0],r=n.paddings.map((function(e){return e[0]}));return{x:function(){return ku(e,r,a.shape)}}}},Tp={kernelName:Ka,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=u(t,3),a=n[0],r=n[1],i=n[2],o=a,s=r,l=dl(o.shape,s.shape);return{a:function(){var t=zs(s,"float32"),n=_c(e,_c(t,Gh(o,zc(t,Rl(1))))),a=hl(o.shape,l);return a.length>0&&(n=Bc(n,a)),Jl(n,o.shape)},b:function(){var t=Fc(o,0),n=Bu(t,Mc(o),Wu(o)),a=_c(e,_c(i,n)),r=hl(s.shape,l);return r.length>0&&(a=Bc(a,r)),Jl(a,s.shape)}}}},Np={kernelName:Za,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=u(t,2),a=n[0],r=n[1],i=Fc(a,0);return{x:function(){return Bu(i,e,_c(e,r))},alpha:function(){var t=Bu(i,Wu(e),_c(e,a)),n=hl(r.shape,e.shape);return n.length>0&&(t=Bc(t,n)),Jl(t,r.shape)}}}};var Ep=No({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Ao(e,"x","cumprod"),i={x:r},o={axis:t,exclusive:n,reverse:a};return xo.runKernel(Dn,i,o)}});function Rp(e,t,n){var a=e.shape.length,r=a-n.length,i=Qc(n,a),o=e;null!=i&&(o=Uu(e,i));var s=o.shape.slice(),l=s.splice(a-n.length,n.length).reduce((function(e,t){return e*t}),1);s.push(l);var c=function(e,t,n){var a=e.shape.slice();a[n]=1;var r=Jl(t,a),i=Ep(e,n,!0,!1),o=Ep(e,n,!0,!0),s=_c(i,o);return _c(r,s)}(o.reshape(s),t,r);if(c=c.reshape(o.shape),null!=i){var u=Jc(i);c=Uu(c,u)}return c}var Fp={kernelName:$a,inputsToSave:["x"],gradFunc:function(e,t,n){var a=u(t,1)[0],r=n.axis,i=[];return i=void 0===r||null===r?a.shape.map((function(e,t){return t})):"number"===typeof r?[r]:r,{x:function(){return Rp(a,e,i)}}}},Dp={kernelName:Xn,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),a=n[0],r=n[1],i=dl(a.shape,r.shape);return{a:function(){var t=kc(e,zs(r,"float32")),n=hl(a.shape,i);return n.length>0?Jl(Bc(t,n),a.shape):t},b:function(){var t=_c(e,zs(a,"float32")),n=hl(r.shape,i);n.length>0&&(t=Jl(Bc(t,n),r.shape));var o=tu(r);return au(kc(t,zs(o,"float32")))}}}},Lp={kernelName:er,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return kc(e,au(tu(n)))}}}},Mp={kernelName:sr,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0],a=_c(_h(n,6),$u(n));return{x:function(){return _c(e,zs(a,"float32"))}}}},Op={kernelName:tr,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return _c(e,zs($u(n),"float32"))}}}},Pp={kernelName:nr,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return Jl(e,n.shape)}}}},_p={kernelName:ir,inputsToSave:["images"],gradFunc:function(e,t,n){var a={dy:e,images:u(t,1)[0]};return{images:function(){return xo.runKernel(or,a,n)}}}},zp={kernelName:ar,inputsToSave:["images"],gradFunc:function(e,t,n){var a={dy:e,images:u(t,1)[0]};return{images:function(){return xo.runKernel(rr,a,n)}}}},Bp={kernelName:lr,gradFunc:function(e,t,n){var a=xt(n.dims,e.shape);return{x:function(){return mu(e,a)}}}},Wp={kernelName:cr,gradFunc:function(e){return{x:function(){return Wu(e)}}}},Hp={kernelName:ur,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return au(kc(e,_c(Gh(n,1.5),2)))}}}};var Vp=No({logicalNot_:function(e){var t={x:Ao(e,"x","logicalNot","bool")};return xo.runKernel(wa,t)}}),Up={kernelName:fr,inputsToSave:["condition"],gradFunc:function(e,t){var n=u(t,1)[0];return{condition:function(){return zs(Wu(n),"float32")},t:function(){return _c(e,zs(n,e.dtype))},e:function(){return _c(e,zs(Vp(n),e.dtype))}}}},Xp={kernelName:pr,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){var t=Fc(n,Rl(0)),a=Rl(Td),r=Rl(Nd),i=_c(e,r),o=_c(_c(e,a),Cc(zs(n,"float32")));return Bu(t,i,o)}}}},Gp={kernelName:br,outputsToSave:[!0],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return _c(e,_c(n,zc(Rl(1),n)))}}}},Yp={kernelName:xr,gradFunc:function(e){return{x:function(){return Wu(e)}}}};var jp=No({cos_:function(e){var t={x:Ao(e,"x","cos","float32")};return xo.runKernel(Rn,t)}}),qp={kernelName:vr,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return _c(jp(zs(n,"float32")),e)}}}};var Kp=No({cosh_:function(e){var t={x:Ao(e,"x","cosh","float32")};return xo.runKernel(Fn,t)}}),Zp={kernelName:mr,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return _c(Kp(zs(n,"float32")),e)}}}},$p={kernelName:gr,inputsToSave:["x"],gradFunc:function(e,t,n){for(var a=u(t,1)[0],r=n.begin,i=n.size,o=a.shape,s=u(ml(a,r,i),2),l=s[0],c=s[1],h=[],d=0;d<e.rank;d++)h.push([l[d],o[d]-l[d]-c[d]]);return{x:function(){return cu(e,h)}}}},Qp={kernelName:Ir,outputsToSave:[!0],gradFunc:function(e,t,n){var a=u(t,1)[0],r=n.dim,i=_c(e,a);return{logits:function(){return zc(i,_c(Bc(i,[r],true),a))}}}},Jp={kernelName:yr,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return _c(e,yu(n))}}}};var eg=No({batchToSpaceND_:function(e,t,n){var a=Ao(e,"x","batchToSpaceND"),r=t.reduce((function(e,t){return e*t}));st(a.rank>=1+t.length,(function(){return"input rank is ".concat(a.rank," but should be > than blockShape.length ").concat(t.length)})),st(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),st(a.shape[0]%r===0,(function(){return"input tensor batch is ".concat(a.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(r)}));var i={x:a},o={blockShape:t,crops:n};return xo.runKernel(gn,i,o)}}),tg={kernelName:Sr,gradFunc:function(e,t,n){var a=n.blockShape,r=n.paddings;return{x:function(){return eg(e,a,r)}}}},ng={kernelName:Cr,gradFunc:function(e,t,n){var a=n.axis;return{x:function(){return sc(e,a)}}}},ag={kernelName:Fr,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),a=n[0],r=n[1],i=Rl(2);return{a:function(){return _c(e,_c(i,zc(a,r)))},b:function(){return _c(e,_c(i,zc(r,a)))}}}},rg={kernelName:_r,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),a=n[0],r=n[1],i=dl(a.shape,r.shape);return{a:function(){var t=e,n=hl(a.shape,i);return n.length>0&&(t=Bc(t,n)),Jl(t,a.shape)},b:function(){var t=e,n=hl(r.shape,i);return n.length>0&&(t=Bc(t,n)),Jl(au(t),r.shape)}}}},ig={kernelName:wr,inputsToSave:["x"],gradFunc:function(e,t,n){var a=u(t,1)[0],r=a.shape.slice();xt(n.axis,a.shape).forEach((function(e){r[e]=1}));var i=Jl(e,r),o=_c(i,su(a.shape,"float32"));return{x:function(){return o}}}},og={kernelName:Wr,inputsToSave:["x"],gradFunc:function(e,t,n){var a=u(t,1)[0],r=n.reps;return{x:function(){var t=Wu(a);if(1===a.rank)for(var n=0;n<r[0];++n)t=Ll(t,ku(e,[n*a.shape[0]],[a.shape[0]]));else if(2===a.rank)for(var i=0;i<r[0];++i)for(var o=0;o<r[1];++o)t=Ll(t,ku(e,[i*a.shape[0],o*a.shape[1]],[a.shape[0],a.shape[1]]));else if(3===a.rank)for(var s=0;s<r[0];++s)for(var l=0;l<r[1];++l)for(var c=0;c<r[2];++c)t=Ll(t,ku(e,[s*a.shape[0],l*a.shape[1],c*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(4!==a.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(a.rank," tensors yet."));for(var u=0;u<r[0];++u)for(var h=0;h<r[1];++h)for(var d=0;d<r[2];++d)for(var f=0;f<r[3];++f)t=Ll(t,ku(e,[u*a.shape[0],h*a.shape[1],d*a.shape[2],f*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return t}}}},sg={kernelName:Yr,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return function(e,t){for(var n=Gc(t,Wu(t)),a=Rc(e,n),r=Dc(t,Rl(0,"int32")),i=a.rank-r.rank,o=0;o<i;++o)r=Ic(r,o+1);r=Hc(r,su(a.shape,"bool"));var s=Wu(a);return Bu(r,a,s)}(e,n)}}}};for(var lg=0,cg=[ef,tf,nf,af,rf,of,sf,lf,cf,uf,hf,df,pf,vf,mf,bf,yf,kf,wf,Sf,Cf,If,Tf,Af,Ef,Ff,Lf,Of,Pf,_f,Dp,zf,Bf,Wf,Hf,Vf,Xf,Uf,Yf,qf,$f,Qf,Jf,ep,tp,np,ap,rp,ip,sp,cp,cp,hp,fp,gp,vp,mp,xp,bp,yp,kp,wp,Sp,Cp,Ip,Ap,Ap,Tp,Np,Fp,Lp,Mp,Op,Pp,_p,zp,Bp,Wp,Hp,Up,Xp,Gp,Yp,qp,Zp,$p,Qp,Jp,tg,tg,ng,ng,{kernelName:kr,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return kc(e,_c(Eu(zs(n,"float32")),2))}}}},ag,{kernelName:Dr,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return _c(e,_c(zs(n,"float32"),2))}}}},{kernelName:qr,gradFunc:function(e){return{x:function(){return Wu(e)}}}},rg,ig,{kernelName:zr,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return kc(e,tu(jp(n)))}}}},{kernelName:Br,outputsToSave:[!0],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return _c(zc(Rl(1),tu(n)),e)}}}},og,{kernelName:Ur,gradFunc:function(e,t,n){var a=Jc(n.perm);return{x:function(){return Uu(e,a)}}}},{kernelName:Gr,gradFunc:function(e,t,n){var a=n.axis;return{value:function(){return Fu(e,a)}}}},sg,{kernelName:jr,gradFunc:function(e){return{x:function(){return Wu(e)}}}}];lg<cg.length;lg++){oi(cg[lg])}$i().prototype.abs=function(){return this.throwIfDisposed(),Dl(this)};var ug=No({acos_:function(e){var t={x:Ao(e,"x","acos")};return xo.runKernel(Zt,t)}});$i().prototype.acos=function(){return this.throwIfDisposed(),ug(this)};var hg=No({acosh_:function(e){var t={x:Ao(e,"x","acosh")};return xo.runKernel($t,t)}});$i().prototype.acosh=function(){return this.throwIfDisposed(),hg(this)},$i().prototype.add=function(e){return this.throwIfDisposed(),Ll(this,e)},$i().prototype.all=function(e,t){return this.throwIfDisposed(),Ml(this,e,t)},$i().prototype.any=function(e,t){return this.throwIfDisposed(),Ol(this,e,t)},$i().prototype.argMax=function(e){return this.throwIfDisposed(),Pl(this,e)};var dg=No({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ao(e,"x","argMin"),a={x:n},r={axis:t};return xo.runKernel(an,a,r)}});$i().prototype.argMin=function(e){return this.throwIfDisposed(),dg(this,e)},$i().prototype.asScalar=function(){return this.throwIfDisposed(),st(1===this.size,(function(){return"The array must have only 1 element."})),Jl(this,[])},$i().prototype.asType=function(e){return this.throwIfDisposed(),zs(this,e)},$i().prototype.as1D=function(){return this.throwIfDisposed(),Jl(this,[this.size])},$i().prototype.as2D=function(e,t){return this.throwIfDisposed(),Jl(this,[e,t])},$i().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Jl(this,[e,t,n])},$i().prototype.as4D=function(e,t,n,a){return this.throwIfDisposed(),Jl(this,[e,t,n,a])},$i().prototype.as5D=function(e,t,n,a,r){return this.throwIfDisposed(),Jl(this,[e,t,n,a,r])};var fg=No({asin_:function(e){var t={x:Ao(e,"x","asin")};return xo.runKernel(rn,t)}});$i().prototype.asin=function(){return this.throwIfDisposed(),fg(this)};var pg=No({asinh_:function(e){var t={x:Ao(e,"x","asinh")};return xo.runKernel(on,t)}});$i().prototype.asinh=function(){return this.throwIfDisposed(),pg(this)};var gg=No({atan_:function(e){var t={x:Ao(e,"x","atan")};return xo.runKernel(sn,t)}});$i().prototype.atan=function(){return this.throwIfDisposed(),gg(this)};var vg=No({atan2_:function(e,t){var n=Ao(e,"a","atan2"),a=Ao(t,"b","atan2"),r=u(so(n,a),2),i={a:n=r[0],b:a=r[1]};return xo.runKernel(cn,i)}});$i().prototype.atan2=function(e){return this.throwIfDisposed(),vg(this,e)};var mg=No({atanh_:function(e){var t={x:Ao(e,"x","atanh")};return xo.runKernel(ln,t)}});$i().prototype.atanh=function(){return this.throwIfDisposed(),mg(this)},$i().prototype.avgPool=function(e,t,n,a){return this.throwIfDisposed(),ec(this,e,t,n,a)},$i().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),eg(this,e,t)},$i().prototype.batchNorm=function(e,t,n,a,r){return this.throwIfDisposed(),nc(this,e,t,n,a,r)},$i().prototype.broadcastTo=function(e){return this.throwIfDisposed(),zu(this,e)},$i().prototype.cast=function(e){return this.throwIfDisposed(),zs(this,e)};var xg=No({ceil_:function(e){var t={x:Ao(e,"x","ceil","float32")};return xo.runKernel(bn,t)}});$i().prototype.ceil=function(){return this.throwIfDisposed(),xg(this)},$i().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),oc(this,e,t)},$i().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Zi&&(e=[e]),sc([this].concat(Ke(e)),t)},$i().prototype.conv1d=function(e,t,n,a,r,i){return this.throwIfDisposed(),fc(this,e,t,n,a,r,i)},$i().prototype.conv2dTranspose=function(e,t,n,a,r){return this.throwIfDisposed(),gc(this,e,t,n,a,r)},$i().prototype.conv2d=function(e,t,n,a,r,i){return this.throwIfDisposed(),dc(this,e,t,n,a,r,i)},$i().prototype.cos=function(){return this.throwIfDisposed(),jp(this)},$i().prototype.cosh=function(){return this.throwIfDisposed(),Kp(this)},$i().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),Ep(this,e,t,n)},$i().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),Mf(this,e,t,n)};var bg=No({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",a=Ao(e,"x","depthToSpace","float32"),r="NHWC"===n?a.shape[1]:a.shape[2],i="NHWC"===n?a.shape[2]:a.shape[3],o="NHWC"===n?a.shape[3]:a.shape[1];st(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),st(r*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(r," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(a.shape)})),st(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(a.shape)})),st(o%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(a.shape)}));var s={x:a},l={blockSize:t,dataFormat:n};return xo.runKernel(Pn,s,l)}});$i().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),bg(this,e,t)},$i().prototype.depthwiseConv2d=function(e,t,n,a,r,i){return this.throwIfDisposed(),bc(this,e,t,n,a,r,i)};var yg=No({dilation2d_:function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=Ao(e,"x","dilation2d"),s=Ao(t,"filter","dilation2d");st(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")})),st(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),st("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)}));var l=o,c=!1;3===o.rank&&(l=Jl(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0);var u={x:l,filter:s},h={strides:n,pad:a,dilations:r},d=xo.runKernel(Hn,u,h);return c?Jl(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});$i().prototype.dilation2d=function(e,t,n,a,r){return this.throwIfDisposed(),yg(this,e,t,n,a,r)};var kg=No({divNoNan_:function(e,t){var n=Ao(e,"a","div"),a=Ao(t,"b","div"),r=u(so(n,a),2);n=r[0],a=r[1];var i=kc(n,a),o=Wu(i),s=Sc(a,o);return Bu(s,o,i)}});$i().prototype.divNoNan=function(e){return this.throwIfDisposed(),kg(this,e)},$i().prototype.div=function(e){return this.throwIfDisposed(),kc(this,e)};var wg=No({dot_:function(e,t){var n=Ao(e,"t1","dot"),a=Ao(t,"t2","dot");st((1===n.rank||2===n.rank)&&(1===a.rank||2===a.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(a.rank,".")}));var r=1===n.rank?n.size:n.shape[1],i=1===a.rank?a.size:a.shape[0];if(st(r===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(r," and ").concat(i,".")})),1===n.rank&&1===a.rank){var o=Jl(n,[1,-1]),s=Jl(a,[-1,1]),l=Vc(o,s);return Jl(l,[])}if(1===n.rank&&2===a.rank){var c=Jl(n,[1,-1]),u=Jl(a,[a.shape[0],a.shape[1]]),h=Vc(c,u);return Jl(h,[h.size])}if(2===n.rank&&1===a.rank){var d=Jl(a,[-1,1]),f=Vc(n,d);return Jl(f,[f.size])}var p=Jl(a,[a.shape[0],a.shape[1]]);return Vc(n,p)}});$i().prototype.dot=function(e){return this.throwIfDisposed(),wg(this,e)},$i().prototype.elu=function(){return this.throwIfDisposed(),wc(this)},$i().prototype.equal=function(e){return this.throwIfDisposed(),Sc(this,e)};var Sg=No({erf_:function(e){var t=Ao(e,"x","erf");st("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=zs(t,"float32"));var n={x:t};return xo.runKernel(qn,n)}});$i().prototype.erf=function(){return this.throwIfDisposed(),Sg(this)};var Cg=No({euclideanNorm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return jh(e,"euclidean",t,n)}});$i().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),Cg(this,e,t)},$i().prototype.exp=function(){return this.throwIfDisposed(),Cc(this)},$i().prototype.expandDims=function(e){return this.throwIfDisposed(),Ic(this,e)};var Ig=No({expm1_:function(e){var t={x:Ao(e,"x","expm1")};return xo.runKernel(Qn,t)}});$i().prototype.expm1=function(){return this.throwIfDisposed(),Ig(this)},$i().prototype.fft=function(){return this.throwIfDisposed(),Gu(this)},$i().prototype.flatten=function(){return this.throwIfDisposed(),Jl(this,[this.size])},$i().prototype.floor=function(){return this.throwIfDisposed(),Ec(this)},$i().prototype.floorDiv=function(e){return this.throwIfDisposed(),yc(this,e)},$i().prototype.gather=function(e,t){return this.throwIfDisposed(),Rc(this,e,t)},$i().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Dc(this,e)},$i().prototype.greater=function(e){return this.throwIfDisposed(),Fc(this,e)},$i().prototype.ifft=function(){return this.throwIfDisposed(),ju(this)},$i().prototype.irfft=function(){return this.throwIfDisposed(),qu(this)};var Ag=No({isFinite_:function(e){var t={x:Ao(e,"x","isFinite")};return xo.runKernel(da,t)}});$i().prototype.isFinite=function(){return this.throwIfDisposed(),Ag(this)};var Tg=No({isInf_:function(e){var t={x:Ao(e,"x","isInf")};return xo.runKernel(fa,t)}});$i().prototype.isInf=function(){return this.throwIfDisposed(),Tg(this)};var Ng=No({isNaN_:function(e){var t={x:Ao(e,"x","isNaN")};return xo.runKernel(pa,t)}});$i().prototype.isNaN=function(){return this.throwIfDisposed(),Ng(this)},$i().prototype.leakyRelu=function(e){return this.throwIfDisposed(),Lc(this,e)},$i().prototype.lessEqual=function(e){return this.throwIfDisposed(),_h(this,e)},$i().prototype.less=function(e){return this.throwIfDisposed(),up(this,e)};var Eg=No({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=Ao(e,"x","localResponseNormalization");st(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),st(ft(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=Jl(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var l={x:o},c={depthRadius:t,bias:n,alpha:a,beta:r},u=xo.runKernel(Ca,l,c);return s?Jl(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});$i().prototype.localResponseNormalization=function(e,t,n,a){return this.throwIfDisposed(),Eg(this,e,t,n,a)};var Rg=No({logSigmoid_:function(e){var t=Ao(e,"x","logSigmoid"),n=El((function(e){return{value:au(Tu(au(e))),gradFunc:function(t){return _c(t,yu(au(e)))}}}));return n(t)}});$i().prototype.logSigmoid=function(){return this.throwIfDisposed(),Rg(this)},$i().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Wc(this,e)},$i().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),td(this,e,t)},$i().prototype.log=function(){return this.throwIfDisposed(),Mc(this)},$i().prototype.log1p=function(){return this.throwIfDisposed(),Oc(this)},$i().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Hc(this,e)},$i().prototype.logicalNot=function(){return this.throwIfDisposed(),Vp(this)};var Fg=No({logicalOr_:function(e,t){var n=Ao(e,"a","logicalOr","bool"),a=Ao(t,"b","logicalOr","bool");dl(n.shape,a.shape);var r={a:n,b:a};return xo.runKernel(Sa,r)}});$i().prototype.logicalOr=function(e){return this.throwIfDisposed(),Fg(this,e)};var Dg=No({logicalXor_:function(e,t){var n=Ao(e,"a","logicalXor","bool"),a=Ao(t,"b","logicalXor","bool");return dl(n.shape,a.shape),Hc(Fg(e,t),Vp(Hc(e,t)))}});$i().prototype.logicalXor=function(e){return this.throwIfDisposed(),Dg(this,e)},$i().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Vc(this,e,t,n)},$i().prototype.maxPool=function(e,t,n,a){return this.throwIfDisposed(),Uc(this,e,t,n,a)},$i().prototype.max=function(e,t){return this.throwIfDisposed(),Pc(this,e,t)},$i().prototype.maximum=function(e){return this.throwIfDisposed(),Gc(this,e)},$i().prototype.mean=function(e,t){return this.throwIfDisposed(),Yc(this,e,t)},$i().prototype.min=function(e,t){return this.throwIfDisposed(),Xh(this,e,t)},$i().prototype.minimum=function(e){return this.throwIfDisposed(),jc(this,e)};var Lg=No({mirrorPad_:function(e,t,n){st("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var a=Ao(e,"x","mirrorPad");if(0===a.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");st(t.length===a.rank,(function(){return"Padding doesn't match input. Must be ".concat(a.rank,". ")+"Got ".concat(t.length,".")}));for(var r="reflect"===n?1:0,i=function(e){st(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),st(t[e][0]>=0&&t[e][0]<=a.shape[e]-r&&t[e][1]>=0&&t[e][1]<=a.shape[e]-r,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(a.shape[e]-r," or less than 0 for input of ")+"shape ".concat(a.shape)}))},o=0;o<a.rank;o++)i(o);var s={paddings:t,mode:n},l={x:a};return xo.runKernel(Pa,l,s)}});$i().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Lg(this,e,t)};var Mg=No({mod_:function(e,t){var n=Ao(e,"a","mod"),a=Ao(t,"b","mod"),r=u(so(n,a),2),i={a:n=r[0],b:a=r[1]};return xo.runKernel(_a,i)}});$i().prototype.mod=function(e){return this.throwIfDisposed(),Mg(this,e)},$i().prototype.mul=function(e){return this.throwIfDisposed(),_c(this,e)},$i().prototype.neg=function(){return this.throwIfDisposed(),au(this)},$i().prototype.norm=function(e,t,n){return this.throwIfDisposed(),jh(this,e,t,n)},$i().prototype.notEqual=function(e){return this.throwIfDisposed(),ru(this,e)},$i().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),iu(this,e,t,n)},$i().prototype.onesLike=function(){return this.throwIfDisposed(),lu(this)},$i().prototype.pad=function(e,t){return this.throwIfDisposed(),cu(this,e,t)};var Og=No({pool_:function(e,t,n,a,r,i,o){null==r&&(r=[1,1]),null==i&&(i=1),0===a&&(a="valid");var s=Ao(e,"x","maxPool"),l=s,c=!1;3===s.rank&&(c=!0,l=Jl(s,[1,s.shape[0],s.shape[1],s.shape[2]])),st(Zl(i,r),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(r,"'")}));var h,d=zl(l.shape,t,i,r,a),f=[d.dilationHeight,d.dilationWidth];h="same"===a?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),a=n.map((function(e){return Math.floor(e/2)})),r=n.map((function(e,t){return e-a[t]}));return n.map((function(e,t){return[a[t],r[t]]}))}([d.filterHeight,d.filterWidth],f):[[0,0],[0,0]];var p=1===f[0]&&1===f[1],g=function(e,t,n){var a=n.map((function(e){return e[0]})),r=n.map((function(e){return e[1]})),i=e.concat(a,r),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=r.map((function(e,t){return e+o[t]})),l=t.map((function(e,t){return[a[t],s[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[l,c]}([d.inHeight,d.inWidth],f,h),v=u(g,2),m=v[0],x=v[1],b=p?a:"valid",y=p?l:xf(l,f,m),k=("avg"===n?function(){return ec(y,t,i,b,o)}:function(){return Uc(y,t,i,b,o)})(),w=p?k:eg(k,f,x);return c?Jl(w,[w.shape[1],w.shape[2],w.shape[3]]):w}});$i().prototype.pool=function(e,t,n,a,r,i){return this.throwIfDisposed(),Og(this,e,t,n,a,r,i)},$i().prototype.pow=function(e){return this.throwIfDisposed(),Gh(this,e)},$i().prototype.prelu=function(e){return this.throwIfDisposed(),uu(this,e)};var Pg=No({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Ao(e,"x","prod");"bool"===a.dtype&&(a=zs(a,"int32"));var r={x:a},i={axis:t,keepDims:n};return xo.runKernel($a,r,i)}});$i().prototype.prod=function(e,t){return this.throwIfDisposed(),Pg(this,e,t)};var _g=No({reciprocal_:function(e){var t={x:Ao(e,"x","reciprocal")};return xo.runKernel(er,t)}});$i().prototype.reciprocal=function(){return this.throwIfDisposed(),_g(this)},$i().prototype.relu=function(){return this.throwIfDisposed(),vu(this)},$i().prototype.relu6=function(){return this.throwIfDisposed(),Zu(this)},$i().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Jl(this,e.shape)},$i().prototype.reshape=function(e){return this.throwIfDisposed(),Jl(this,e)},$i().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),Mh(this,e,t,n)},$i().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),Oh(this,e,t,n)},$i().prototype.reverse=function(e){return this.throwIfDisposed(),mu(this,e)},$i().prototype.rfft=function(){return this.throwIfDisposed(),Yu(this)},$i().prototype.round=function(){return this.throwIfDisposed(),zh(this)},$i().prototype.rsqrt=function(){return this.throwIfDisposed(),Gf(this)},$i().prototype.selu=function(){return this.throwIfDisposed(),xu(this)},$i().prototype.separableConv2d=function(e,t,n,a,r,i){return this.throwIfDisposed(),bu(this,e,t,n,a,r,i)},$i().prototype.sigmoid=function(){return this.throwIfDisposed(),yu(this)};var zg=No({sign_:function(e){var t={x:Ao(e,"x","sign")};return xo.runKernel(xr,t)}});$i().prototype.sign=function(){return this.throwIfDisposed(),zg(this)},$i().prototype.sin=function(){return this.throwIfDisposed(),Rf(this)},$i().prototype.sinh=function(){return this.throwIfDisposed(),Df(this)},$i().prototype.slice=function(e,t){return this.throwIfDisposed(),ku(this,e,t)},$i().prototype.softmax=function(e){return this.throwIfDisposed(),Au(this,e)},$i().prototype.softplus=function(){return this.throwIfDisposed(),Tu(this)},$i().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),xf(this,e,t)},$i().prototype.split=function(e,t){return this.throwIfDisposed(),Nu(this,e,t)},$i().prototype.sqrt=function(){return this.throwIfDisposed(),Eu(this)},$i().prototype.square=function(){return this.throwIfDisposed(),tu(this)},$i().prototype.squaredDifference=function(e){return this.throwIfDisposed(),Jh(this,e)},$i().prototype.squeeze=function(e){return this.throwIfDisposed(),Ru(this,e)},$i().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof Zi?[this,e]:[this].concat(Ke(e));return Fu(n,t)},$i().prototype.step=function(e){return this.throwIfDisposed(),$u(this,e)};var Bg=No({stridedSlice_:function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=Ao(e,"x","stridedSlice","string_or_numeric"),u={x:c},h={begin:t,end:n,strides:a,beginMask:r,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};return xo.runKernel(Lr,u,h)}});$i().prototype.stridedSlice=function(e,t,n,a,r,i,o,s){return this.throwIfDisposed(),Bg(this,e,t,n,a,r,i,o,s)},$i().prototype.sub=function(e){return this.throwIfDisposed(),zc(this,e)},$i().prototype.sum=function(e,t){return this.throwIfDisposed(),Bc(this,e,t)};var Wg=No({tan_:function(e){var t={x:Ao(e,"x","tan","float32")};return xo.runKernel(zr,t)}});$i().prototype.tan=function(){return this.throwIfDisposed(),Wg(this)},$i().prototype.tanh=function(){return this.throwIfDisposed(),Du(this)},$i().prototype.tile=function(e){return this.throwIfDisposed(),Ac(this,e)},$i().prototype.toBool=function(){return this.throwIfDisposed(),zs(this,"bool")},$i().prototype.toFloat=function(){return this.throwIfDisposed(),zs(this,"float32")},$i().prototype.toInt=function(){return this.throwIfDisposed(),zs(this,"int32")};var Hg=No({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Ao(e,"x","topk");if(0===a.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var r=a.shape[a.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>r)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(r,") ")+"but got ".concat(t));var i={x:a},o={k:t,sorted:n},s=xo.runKernel(Hr,i,o),l=u(s,2),c=l[0],h=l[1];return{values:c,indices:h}}});$i().prototype.topk=function(e,t){return this.throwIfDisposed(),Hg(this,e,t)},$i().prototype.transpose=function(e){return this.throwIfDisposed(),Uu(this,e)};var Vg=No({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ao(e,"x","unique","string_or_numeric");st(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var a={x:n},r={axis:t},i=xo.runKernel(Xr,a,r),o=u(i,2),s=o[0],l=o[1];return{values:s,indices:l}}});function Ug(e,t,n){return Ug=_i()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var r=new(Function.bind.apply(e,a));return n&&Mi(r,n.prototype),r},Ug.apply(null,arguments)}function Xg(e){var t="function"===typeof Map?new Map:void 0;return Xg=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ug(e,arguments,Pi(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Mi(n,e)},Xg(e)}$i().prototype.unique=function(e){return this.throwIfDisposed(),Vg(this,e)},$i().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),jf(this,e,t)},$i().prototype.unstack=function(e){return this.throwIfDisposed(),Pu(this,e)},$i().prototype.where=function(e,t){return this.throwIfDisposed(),Bu(e,this,t)},$i().prototype.zerosLike=function(){return this.throwIfDisposed(),Wu(this)};var Gg=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),a=t.call(this,e),Object.setPrototypeOf(Bi(a),n.prototype),a}return Qe(n)}(Xg(Error)),Yg=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),a=t.call(this,e),Object.setPrototypeOf(Bi(a),n.prototype),a}return Qe(n)}(Xg(Error)),jg=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),a=t.call(this,e),Object.setPrototypeOf(Bi(a),n.prototype),a}return Qe(n)}(Xg(Error)),qg=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),a=t.call(this,e),Object.setPrototypeOf(Bi(a),n.prototype),a}return Qe(n)}(Xg(Error)),Kg=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),a=t.call(this,e),Object.setPrototypeOf(Bi(a),n.prototype),a}return Qe(n)}(Xg(Error)),Zg=(Error,function(){function e(t){Ze(this,e),this.maxEntries=t||100,this.cache=new Map}return Qe(e,[{key:"get",value:function(e){var t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}},{key:"put",value:function(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}},{key:"getMaxEntries",value:function(){return this.maxEntries}},{key:"setMaxEntries",value:function(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(var t=0;t<this.maxEntries-e;t++){var n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}}]),e}());function $g(e,t){if(Array.isArray(e)){for(var n=[],a=0;a<t;a++)n=n.concat(e);return n}var r=new Array(t);return r.fill(e),r}function Qg(e,t){if(!e)throw new Kg(t)}function Jg(e,t){var n,a=0,r=je(e);try{for(r.s();!(n=r.n()).done;){n.value===t&&a++}}catch(jz){r.e(jz)}finally{r.f()}return a}function ev(e){return 1===e.length?e[0]:e}function tv(e){return Array.isArray(e)?e:[e]}function nv(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function av(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var rv={};function iv(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function ov(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return ov(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var a=n[t],r=e[a];null!=r&&"object"===typeof r&&(Array.isArray(r)||"ndarray"!==r.type||"number"!==typeof r.value?ov(r):e[a]=r.value)}}function sv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var i,o=e;if(o in n)i=n[o];else if(o in rv)i=rv[o];else if(null==(i=t[o]))throw new jg("Unknown ".concat(a,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(a," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(a," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var s=e;if(null==s.className||null==s.config)throw new jg("".concat(a,": Improper config format: ")+"".concat(JSON.stringify(s),".\n")+"'className' and 'config' must set.");var l,c,h=s.className;if(h in n){var d=u(n[h],2);l=d[0],c=d[1]}else if(h in rv){var f=u(rv.className,2);l=f[0],c=f[1]}else if(h in t){var p=u(t[h],2);l=p[0],c=p[1]}if(null==l)throw new jg("Unknown ".concat(a,": ").concat(h,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(a," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(a," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=c){for(var g={},v=0,m=Object.keys(rv);v<m.length;v++){var x=m[v];g[x]=rv[x]}for(var b=0,y=Object.keys(n);b<y.length;b++){var k=y[b];g[k]=n[k]}var w=s.config;w.customObjects=g;for(var S=Object.assign({},rv),C=0,I=Object.keys(n);C<I.length;C++){var A=I[C];rv[A]=n[A]}ov(s.config);var T=c(l,s.config,n,r);return rv=Object.assign({},S),T}for(var N=Object.assign({},rv),E=0,R=Object.keys(n);E<R.length;E++){var F=R[E];rv[F]=n[F]}var D=new l(s.config);return rv=Object.assign({},N),D}function lv(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function cv(e){if(null==e)return e;var t,n=[],a=je(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;-1===n.indexOf(r)&&n.push(r)}}catch(jz){a.e(jz)}finally{a.f()}return n}function uv(e){if(null==e)throw new jg("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function hv(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new jg("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function dv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return Qg(n>=0),Qg(a>=n),Array.isArray(e)&&e.length>=n&&e.length<=a&&e.every((function(e){return typeof e===t}))}function fv(e,t){Array.isArray(e)?(st(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return fv(e,"element ".concat(n+1," of ").concat(t))}))):st(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(pv(e),".")}))}function pv(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return pv(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function gv(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var vv=0;function mv(){return vv++}var xv={};function bv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in xv||(xv[e]=0),xv[e]+=1,e+xv[e].toString()}var yv=["channelsFirst","channelsLast"],kv=["nearest","bilinear"],wv=["valid","same","causal"],Sv=["max","avg"],Cv=["sum","mul","concat","ave"],Iv=new Map;function Av(e){hv(yv,"DataFormat",e)}function Tv(e){hv(wv,"PaddingMode",e)}function Nv(e){hv(Sv,"PoolMode",e)}var Ev=[];function Rv(e,t){Ev.push(e);try{var n=t();return Ev.pop(),n}catch(a){throw Ev.pop(),a}}function Fv(e){if(!Ov(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Ev.length?"":Ev.join("/")+"/")+e}function Dv(e){if(!Ov(e))throw new Error("Not a valid tensor name: '"+e+"'");Iv.has(e)||Iv.set(e,0);var t=Iv.get(e);if(Iv.set(e,Iv.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return Iv.set(n,1),n}return e}var Lv,Mv=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Ov(e){return!!e.match(Mv)}function Pv(e){return e===parseInt(e.toString(),10)}function _v(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var a=1,r=t;r<n;++r)a*=e[r];return a}function zv(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var a=e[n];a<t&&(t=a)}return t}function Bv(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var a=e[n];a>t&&(t=a)}return t}function Wv(e,t){if(t<e)throw new jg("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],a=e;a<t;++a)n.push(a);return n}function Hv(){return null==Lv&&(Lv=xo.backend.epsilon()),Lv}function Vv(e,t){return zs(e,t)}function Uv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Jl(e,n)}function Xv(e){var t=[_v(e.shape)];return Jl(e,t)}function Gv(e,t,n){return Il((function(){switch(e.rank){case 1:return wu(e,t,n);case 2:return Su(e,[t,0],[n,e.shape[1]]);case 3:return Cu(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Iu(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return ku(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return ku(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new jg("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Yv(e,t,n){return Il((function(){switch(e.rank){case 1:return wu(e,t,n);case 2:return Su(e,[0,t],[e.shape[0],n]);case 3:return Cu(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Iu(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new jg("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function jv(e,t,n,a){return Il((function(){switch(e.rank){case 1:return wu(e,t,n);case 2:switch(a){case 1:return Gv(e,t,n);case 2:return Yv(e,t,n);default:throw new jg("The axis is not within the rank of the tensor "+"".concat(a))}case 3:switch(a){case 1:return Gv(e,t,n);case 2:return Cu(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Yv(e,t,n);default:throw new jg("The axis is not within the rank of the tensor "+"".concat(a))}case 4:switch(a){case 1:return Gv(e,t,n);case 2:return Iu(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Iu(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Yv(e,t,n);default:throw new jg("The axis is not within the rank of the tensor "+"".concat(a))}default:throw new jg("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function qv(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),sc(e,n)}function Kv(e,t){switch(e.rank){case 1:return lc([e,t]);case 2:return cc([e,t],0);case 3:return uc([e,t],0);case 4:return hc([e,t],0);default:throw new jg("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function Zv(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new jg("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return Ac(e,t)}function $v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return pu(e,t,n,a,r)}function Qv(e,t,n,a){if(e.rank<2||t.rank<2)throw new qg("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new qg("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return ih({a:e,b:t,transposeA:!1,transposeB:!1,bias:a?tm(e.rank,a,"channelsLast"):null,activation:n})}var r=e.shape.slice(),i=r.pop();e=Jl(e,[-1,i]);var o=t.shape.slice(),s=o.pop(),l=o.pop(),c=[].concat(Ke(o),[s]),u=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=Jl(Uu(t,u),[l,-1]);var h=[].concat(Ke(r),Ke(c));return Jl(ih({a:e,b:t,transposeA:!1,transposeB:!1,bias:a?tm(e.rank,a,"channelsLast"):null,activation:n}),h)}function Jv(e,t,n){return Il((function(){return t=Array.isArray(t)?Lu(t,"int32"):zs(t,"int32"),Rc(e,t,n)}))}function em(e){return _c(e,e)}function tm(e,t,n){var a=t.shape;if(1!==t.rank&&t.rank!==e)throw new jg("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===a.length?Jl(t,[1,a[0],1,1,1]):Jl(t,[1,a[3],a[0],a[1],a[2]]);if("channelsLast"===n)return 1===a.length?Jl(t,[1,1,1,1,a[0]]):Jl(t,[1].concat(a))}else if(4===e){if("channelsFirst"===n)return 1===a.length?Jl(t,[1,a[0],1,1]):Jl(t,[1,a[2],a[0],a[1]]);if("channelsLast"===n)return 1===a.length?Jl(t,[1,1,1,a[0]]):Jl(t,[1].concat(a))}else if(3===e){if("channelsFirst"===n)return 1===a.length?Jl(t,[1,a[0],1]):Jl(t,[1,a[1],a[0]]);if("channelsLast"===n)return 1===a.length?Jl(t,[1,1,a[0]]):Jl(t,[1].concat(a))}else if(e<3)return t;throw new jg("Unsupported input rank by biasAdd: ".concat(t.rank))}function nm(e,t,n){return Il((function(){return null==n&&(n="channelsLast"),Av(n),Ll(e,tm(e.rank,t,n))}))}function am(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new qg("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return wc(e)}function rm(e,t,n,a){return Il((function(){return Xu(e,t,n,a)}))}function im(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var om=["fanIn","fanOut","fanAvg"],sm=["normal","uniform","truncatedNormal"];var lm=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(yl),cm=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e,t){return ou(e,t)}}]),n}(lm);cm.className="Zeros",wl(cm);var um=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e,t){return su(e,t)}}]),n}(lm);um.className="Ones",wl(um);var hm=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),a=t.call(this),"object"!==typeof e)throw new jg("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new jg("config must have value set but got ".concat(e));return a.value=e.value,a}return Qe(n,[{key:"apply",value:function(e,t){var n=this;return Il((function(){return _c(Rl(n.value),su(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(lm);hm.className="Constant",wl(hm);var dm=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this)).DEFAULT_MINVAL=-.05,a.DEFAULT_MAXVAL=.05,a.minval=e.minval||a.DEFAULT_MINVAL,a.maxval=e.maxval||a.DEFAULT_MAXVAL,a.seed=e.seed,a}return Qe(n,[{key:"apply",value:function(e,t){return gu(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(lm);dm.className="RandomUniform",wl(dm);var fm=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this)).DEFAULT_MEAN=0,a.DEFAULT_STDDEV=.05,a.mean=e.mean||a.DEFAULT_MEAN,a.stddev=e.stddev||a.DEFAULT_STDDEV,a.seed=e.seed,a}return Qe(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new qg("randomNormal does not support dType ".concat(t,"."));return $v(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(lm);fm.className="RandomNormal",wl(fm);var pm=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this)).DEFAULT_MEAN=0,a.DEFAULT_STDDEV=.05,a.mean=e.mean||a.DEFAULT_MEAN,a.stddev=e.stddev||a.DEFAULT_STDDEV,a.seed=e.seed,a}return Qe(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new qg("truncatedNormal does not support dType ".concat(t,"."));return Ou(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(lm);pm.className="TruncatedNormal",wl(pm);var gm=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this)).gain=null!=e.gain?e.gain:1,a}return Qe(n,[{key:"apply",value:function(e,t){var n=this;return Il((function(){if(2!==e.length||e[0]!==e[1])throw new jg("Identity matrix initializer can only be used for 2D square matrices.");return _c(n.gain,Tc(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(lm);gm.className="Identity",wl(gm);var vm=function(e){Oi(n,e);var t=Hi(n);function n(e){var a,r;if(Ze(this,n),a=t.call(this),e.scale<0)throw new jg("scale must be a positive float. Got: ".concat(e.scale));return a.scale=null==e.scale?1:e.scale,a.mode=null==e.mode?"fanIn":e.mode,r=a.mode,hv(om,"FanMode",r),a.distribution=null==e.distribution?"normal":e.distribution,function(e){hv(sm,"Distribution",e)}(a.distribution),a.seed=e.seed,a}return Qe(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(Av(a),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===a){var r=_v(e,2);t=e[1]*r,n=e[0]*r}else if("channelsLast"===a){var i=_v(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=_v(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),a=n[0],r=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,a):"fanOut"===this.mode?i/=Math.max(1,r):i/=Math.max(1,(a+r)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new qg("".concat(this.getClassName()," does not support dType ").concat(t,"."));return Ou(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return gu(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(lm);vm.className="VarianceScaling",wl(vm);var mm=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return Qe(n,[{key:"getClassName",value:function(){return vm.className}}]),n}(vm);mm.className="GlorotUniform",wl(mm);var xm=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return Qe(n,[{key:"getClassName",value:function(){return vm.className}}]),n}(vm);xm.className="GlorotNormal",wl(xm);var bm=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return Qe(n,[{key:"getClassName",value:function(){return vm.className}}]),n}(vm);bm.className="HeNormal",wl(bm);var ym=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return Qe(n,[{key:"getClassName",value:function(){return vm.className}}]),n}(vm);ym.className="HeUniform",wl(ym);var km=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return Qe(n,[{key:"getClassName",value:function(){return vm.className}}]),n}(vm);km.className="LeCunNormal",wl(km);var wm=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return Qe(n,[{key:"getClassName",value:function(){return vm.className}}]),n}(vm);wm.className="LeCunNormal",wl(wm);var Sm=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),(a=t.call(this)).DEFAULT_GAIN=1,a.gain=null==e.gain?a.DEFAULT_GAIN:e.gain,a.seed=e.seed,null!=a.seed)throw new qg("Random seed is not implemented for Orthogonal Initializer yet.");return a}return Qe(n,[{key:"apply",value:function(e,t){var n=this;return Il((function(){if(e.length<2)throw new qg("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=$v(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),a=rd.gramSchmidt(t);return e[0]>e[1]&&(a=Uu(a)),_c(n.gain,a)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(lm);Sm.className="Orthogonal",wl(Sm);var Cm={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Im(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return sv(e,kl.getMap().classNameMap,t,"initializer")}function Am(e){return iv(e)}function Tm(e){if("string"===typeof e){var t=e in Cm?Cm[e]:e;if("GlorotNormal"===t)return new xm;if("GlorotUniform"===t)return new mm;if("HeNormal"===t)return new bm;if("HeUniform"===t)return new ym;if("LeCunNormal"===t)return new km;if("LeCunUniform"===t)return new wm;var n={};return n.className=t,n.config={},Im(n)}return e instanceof lm?e:Im(e)}function Nm(e){return Array.isArray(e)&&Array.isArray(e[0])}function Em(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function Rm(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new jg("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function Fm(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new jg("Expected exactly 1 Shape; got ".concat(e.length))}return e}function Dm(e){var t,n=0,a=je(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;0===r.shape.length?n+=1:n+=r.shape.reduce((function(e,t){return e*t}))}}catch(jz){a.e(jz)}finally{a.f()}return n}var Lm="Variable",Mm=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lm,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Ze(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=mv(),a=null==a?Lm:a,this.originalName=Fv(a),this.name=Dv(this.originalName),this.trainable_=r,this.constraint=i,this.val=_u(t,this.trainable_,this.name,this.dtype)}return Qe(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function Om(e){return e.map((function(e){return e.read()}))}function Pm(e){e.forEach((function(e){e[0].write(e[1])}))}var _m=Qe((function e(t){Ze(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),zm=Qe((function e(t,n,a,r,i,o,s){Ze(this,e),this.dtype=t,this.shape=n,this.sourceLayer=a,this.inputs=r,this.callArgs=i,this.outputTensorIndex=s,this.id=mv(),null!=o&&(this.originalName=Fv(o),this.name=Dv(this.originalName)),this.rank=n.length})),Bm=0,Wm=function(){function e(t,n){Ze(this,e),this.callArgs=n,this.id=Bm++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var a,r=je(t.inboundLayers);try{for(r.s();!(a=r.n()).done;){var i=a.value;null!=i&&i.outboundNodes.push(this)}}catch(jz){r.e(jz)}finally{r.f()}t.outboundLayer.inboundNodes.push(this)}return Qe(e,[{key:"getConfig",value:function(){var e,t=[],n=je(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var a=e.value;null!=a?t.push(a.name):t.push(null)}}catch(jz){n.e(jz)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),Hm=0,Vm=function(e){Oi(n,e);var t=Hi(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ze(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=Hm++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var r=a.name;if(!r){var i=e.getClassName();r=nv(i)+"_"+bv(i)}if(e.name=r,e.trainable_=null==a.trainable||a.trainable,null!=a.inputShape||null!=a.batchInputShape){var o;if(null!=a.batchInputShape)o=a.batchInputShape;else if(null!=a.inputShape){var s=null;null!=a.batchSize&&(s=a.batchSize),o=[s].concat(a.inputShape)}e.batchInputShape=o;var l=a.dtype;null==l&&(l=a.inputDType),null==l&&(l="float32"),e.dtype=l}return null!=a.weights?e.initialWeights=a.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return Qe(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new Yg("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new jg("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return ev(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return ev(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new Gg("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new Gg("Layer ".concat(this.name)+" is not connected, no input to return.");return ev(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new Gg("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new Gg("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return ev(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=tv(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=tv(this.inputSpec);if(e.length!==t.length)throw new jg("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var a=e[n],r=t[n];if(null!=r){var i=a.rank;if(null!=r.ndim&&i!==r.ndim)throw new jg("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(r.ndim,", found ndim=").concat(i));if(null!=r.maxNDim&&i>r.maxNDim)throw new jg("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(r.maxNDim,", found ndim=").concat(i));if(null!=r.minNDim&&i<r.minNDim)throw new jg("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(r.minNDim,", found ndim=").concat(i,"."));if(null!=r.dtype&&a.dtype!==r.dtype)throw new jg("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(r.dtype,", found dtype=").concat(a.dtype,"."));if(r.axes){var o=a.shape;for(var s in r.axes){var l=Number(s),c=r.axes[s],u=l>=0?o[l]:o[o.length+l];if(null!=c&&-1===[c,null].indexOf(u))throw new jg("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(l," of input shape to ")+"have value ".concat(c," but got shape ").concat(o,"."))}}if(null!=r.shape)for(var h=0;h<r.shape.length;++h){var d=r.shape[h],f=a.shape[h];if(null!=d&&null!=f&&d!==f)throw new jg("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(r.shape,", ")+"found shape=".concat(a.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var a,r=tv(e),i=!0,o=je(r);try{for(o.s();!(a=o.n()).done;){if(!(a.value instanceof zm)){i=!1;break}}}catch(jz){o.e(jz)}finally{o.f()}var s,l=!0,c=je(r);try{for(c.s();!(s=c.n()).done;){if(s.value instanceof zm){l=!1;break}}}catch(jz){c.e(jz)}finally{c.f()}if(i===l)throw new jg("Arguments to apply() must be all SymbolicTensors or all Tensors");return Rv(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var a,i=[],o=je(tv(e));try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push(s.shape)}}catch(jz){o.e(jz)}finally{o.f()}n.build(ev(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&l&&(n._refCount=1)}if(n.assertInputCompatibility(e),l){var c,u=n.call(e,t),h=[],d=je(tv(u));try{for(d.s();!(c=d.n()).done;){var f=c.value;-1!==r.indexOf(f)&&(f=f.clone()),h.push(f)}}catch(jz){d.e(jz)}finally{d.f()}if(u=ev(h),null!=n.activityRegularizer)throw new qg("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return u}var p,g=function(e){e=tv(e);var t,n=[],a=je(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push(r.shape)}}catch(jz){a.e(jz)}finally{a.f()}return ev(n)}(e),v=n.computeOutputShape(g),m="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?g[0]:g),p=null!=v&&v.length>0&&Array.isArray(v[0])?v.map((function(a,r){return new zm(m,a,n,tv(e),t,n.name,r)})):new zm(m,v,n,tv(e),t,n.name),n.addInboundNode(e,p,null,null,g,v,t),n._refCount++,null!=n.activityRegularizer)throw new qg("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return p}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,a){null!=n&&null!=e[a]&&e[a]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Gg("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=je(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var a=e.value,r=JSON.stringify(a.outputShapes);-1===t.indexOf(r)&&t.push(r)}}catch(jz){n.e(jz)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new Gg("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new Yg("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return Dm(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Om(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;Il((function(){var n=t.weights;if(n.length!==e.length)throw new jg('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var a=[],r=Om(n),i=0;i<r.length;++i){var o=r[i],s=n[i],l=e[i];if(!dt(o.shape,l.shape))throw new jg("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(l.shape));a.push([s,l])}Pm(a)}}))}},{key:"addWeight",value:function(e,t,n,a,r,i,o,s){if(-1!==this._addedWeightNames.indexOf(e))throw new jg("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(a=null!=s?s():Tm("zeros"));var l=a.apply(t,n),c=new Mm(l,n,e,i,o);return l.dispose(),null!=r&&this.addLoss((function(){return r.apply(c.read())})),null==i&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=tv(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,Ke(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,a,r,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=tv(e);t=tv(t),n=tv(n),a=tv(a),r=Em(r),i=Em(i);var l,c=[],u=[],h=[],d=je(s);try{for(d.s();!(l=d.n()).done;){var f=l.value;c.push(f.sourceLayer),u.push(f.nodeIndex),h.push(f.tensorIndex)}}catch(jz){d.e(jz)}finally{d.f()}new Wm({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:h,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:a,inputShapes:r,outputShapes:i},o);for(var p=0;p<t.length;p++)t[p].sourceLayer=this,t[p].nodeIndex=this.inboundNodes.length-1,t[p].tensorIndex=p}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(yl);function Um(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var a=t.inboundNodes[n];if(0===a.inboundLayers.length)return a.inputTensors;for(var r=[],i=0;i<a.inboundLayers.length;i++){var o,s=je(Um(a.inputTensors[i],a.inboundLayers[i],a.nodeIndices[i]));try{for(s.s();!(o=s.n()).done;){var l=o.value;-1===r.indexOf(l)&&r.push(l)}}catch(jz){s.e(jz)}finally{s.f()}}return r}var Xm=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),a=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:bv("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),a.trainable=!1,a.built=!0,a.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new jg("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var r=e.batchInputShape;if(null==r){if(null==e.inputShape)throw new jg("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new jg("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";a.batchInputShape=r,a.dtype=i,a.inputSpec=[{shape:r}];var o=new zm(a.dtype,a.batchInputShape,Bi(a),[],{},a.name);return o.nodeIndex=0,o.tensorIndex=0,new Wm({outboundLayer:Bi(a),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]}),a}return Qe(n,[{key:"apply",value:function(e,t){throw new jg("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(Vm);Xm.className="InputLayer",wl(Xm);var Gm=function(){function e(t){if(Ze(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var a,r=je(t);try{for(r.s();!(a=r.n()).done;){var i=a.value;this.add(i.key,i.value)}}catch(jz){r.e(jz)}finally{r.f()}}}return Qe(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new jg("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return zs(t,e.dtype)}catch(jz){throw new jg("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof zm){if(null==this.id2Value[e.id])throw new jg("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new jg("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof zm){if(null==this.id2Value[e.id])throw new jg("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new jg("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&Al(this.id2Mask)}}]),e}(),Ym=new Zg,jm=new Zg;function qm(e,t,n,a){var r,i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],l=s.map((function(e){return e.name})),c=[],u=t.names(),h=je(l);try{for(h.s();!(r=h.n()).done;){var d=r.value;-1!==u.indexOf(d)?c.push(t.getValue(d)):c.push(null)}}catch(jz){h.e(jz)}finally{h.f()}null!=a&&(a.maxNumTensors=-1/0,a.minNumTensors=1/0);var f,p=l.join(",")+"|"+t.names().sort().join(","),g=Ym.get(p);if(null==g){var v=function(e,t){st(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],a={};if(1===e.length){var r=Zm(e[0],t);n=r.sorted,a=r.recipientMap}else{var i,o=new Set,s=je(e);try{for(s.s();!(i=s.n()).done;){var l,c=Zm(i.value,t),u=c.sorted,h=c.recipientMap,d=je(u);try{for(d.s();!(l=d.n()).done;){var f=l.value;o.has(f.name)||(n.push(f),o.add(f.name))}}catch(jz){d.e(jz)}finally{d.f()}var p=function(e){null==a[e]&&(a[e]=new Set),h[e].forEach((function(t){return a[e].add(t)}))};for(var g in h)p(g)}}catch(jz){s.e(jz)}finally{s.f()}}return{sorted:n,recipientCounts:Km(a)}}(s,t);g=v.sorted,f=v.recipientCounts,Ym.put(p,g),jm.put(p,f)}f={},i||Object.assign(f,jm.get(p));for(var m=new Gm(t),x=0;x<g.length;++x){if(null!=a){var b=Cl().numTensors;b>a.maxNumTensors&&(a.maxNumTensors=b),b<a.minNumTensors&&(a.minNumTensors=b)}var y=g[x],k=y.sourceLayer;if(!(k instanceof Xm)){var w,S=[],C=[],I=[],A=!1,T=je(y.inputs);try{for(T.s();!(w=T.n()).done;){var N=w.value,E=m.getValue(N),R=m.getMask(N);S.push(E),C.push(R),null!=R&&(A=!0),i||(f[N.name]--,0!==f[N.name]||t.hasKey(N)||-1!==l.indexOf(N.name)||E.isDisposed||!0===N.sourceLayer.stateful||I.push(E))}}catch(jz){T.e(jz)}finally{T.f()}A&&((n=n||{}).mask=C[0]);var F=tv(k.apply(S,n)),D=null;k.supportsMasking&&(D=k.computeMask(S,C));for(var L=$m(y),M=Array.isArray(L)?L:[L],O=0;O<M.length;++O){m.hasKey(M[O])||m.add(M[O],F[O],Array.isArray(D)?D[0]:D);var P=l.indexOf(M[O].name);-1!==P&&(c[P]=F[O])}i||Al(I)}}return m.disposeMasks(),o?c:c[0]}function Km(e){var t={};for(var n in e)t[n]=e[n].size;return t}function Zm(e,t){var n,a=new Set,r=[],i={},o=je(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;a.add(s)}}catch(jz){o.e(jz)}finally{o.f()}var l=[],c=[];for(l.push(e);l.length>0;){var u=l[l.length-1];if(a.has(u.name))l.pop();else{var h=c[c.length-1]===l.length-1;if(0===u.inputs.length||h)l.pop(),r.push(u),a.add(u.name),h&&c.pop();else{c.push(l.length-1);var d,f=je(u.inputs);try{for(f.s();!(d=f.n()).done;){var p=d.value;null==i[p.name]&&(i[p.name]=new Set),i[p.name].add(u.name),a.has(p.name)||l.push(p)}}catch(jz){f.e(jz)}finally{f.f()}}}}return{sorted:r,recipientMap:i}}function $m(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,a=0;a<e.sourceLayer.inboundNodes.length;++a){var r,i=je(e.sourceLayer.inboundNodes[a].outputTensors);try{for(i.s();!(r=i.n()).done;){if(r.value.id===e.id){n=a;break}}}catch(jz){i.e(jz)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}function Qm(e,t){return Il((function(){return Eu(Bc(_c(e,e),t,!0))}))}Xt().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(function(){return 100}),(function(e){null!=Ym&&Ym.setMaxEntries(e),null!=jm&&jm.setMaxEntries(e)}));var Jm=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"getConfig",value:function(){return{}}}]),n}(yl),ex=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this)).defaultMaxValue=2,a.defaultAxis=0,a.maxValue=null!=e.maxValue?e.maxValue:a.defaultMaxValue,a.axis=null!=e.axis?e.axis:a.defaultAxis,a}return Qe(n,[{key:"apply",value:function(e){var t=this;return Il((function(){var n=Qm(e,t.axis),a=oc(n,0,t.maxValue);return _c(e,kc(a,Ll(Hv(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(Jm);ex.className="MaxNorm",wl(ex);var tx=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this)).defaultAxis=0,a.axis=null!=e.axis?e.axis:a.defaultAxis,a}return Qe(n,[{key:"apply",value:function(e){var t=this;return Il((function(){return kc(e,Ll(Hv(),Qm(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(Jm);tx.className="UnitNorm",wl(tx);var nx=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return vu(e)}}]),n}(Jm);nx.className="NonNeg",wl(nx);var ax=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this)).defaultMinValue=0,a.defaultMaxValue=1,a.defaultRate=1,a.defaultAxis=0,a.minValue=null!=e.minValue?e.minValue:a.defaultMinValue,a.maxValue=null!=e.maxValue?e.maxValue:a.defaultMaxValue,a.rate=null!=e.rate?e.rate:a.defaultRate,a.axis=null!=e.axis?e.axis:a.defaultAxis,a}return Qe(n,[{key:"apply",value:function(e){var t=this;return Il((function(){var n=Qm(e,t.axis),a=Ll(_c(t.rate,oc(n,t.minValue,t.maxValue)),_c(1-t.rate,n));return _c(e,kc(a,Ll(Hv(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(Jm);ax.className="MinMaxNorm",wl(ax);var rx,ix={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ox(e){return iv(e)}function sx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return sv(e,kl.getMap().classNameMap,t,"constraint")}function lx(e){return null==e?null:"string"===typeof e?sx({className:e in ix?ix[e]:e,config:{}}):e instanceof Jm?e:sx(e)}function cx(e){return ux.apply(this,arguments)}function ux(){return(ux=i(f().mark((function e(t){var n,a,r,i,o,s,l,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],a=[],r=[],t)"number"!==typeof(o=t[i])&&(s=o,n.push(s.data()),a.push(i),r.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(l=e.sent,c=0;c<l.length;++c)t[a[c]]=l[c][0];Al(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hx(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(rx||(rx={}));var dx=function(){function e(){Ze(this,e),this.validationData=null}return Qe(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=i(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=i(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=i(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=i(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),fx=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;Ze(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return Qe(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=je(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(jz){n.e(jz)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=je(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(jz){n.e(jz)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=i(f().mark((function e(t,n){var a,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),a=je(this.callbacks),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=10;break}return i=r.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=i(f().mark((function e(t,n){var a,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),a=je(this.callbacks),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=10;break}return i=r.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=i(f().mark((function e(t,n){var a,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),a=je(this.callbacks),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=10;break}return i=r.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=i(f().mark((function e(t,n){var a,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),a=je(this.callbacks),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=10;break}return i=r.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=i(f().mark((function e(t){var n,a,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=je(this.callbacks),e.prev=2,n.s();case 4:if((a=n.n()).done){e.next=10;break}return r=a.value,e.next=8,r.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=i(f().mark((function e(t){var n,a,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=je(this.callbacks),e.prev=2,n.s();case 4:if((a=n.n()).done){e.next=10;break}return r=a.value,e.next=8,r.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),px=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.call(this)}return Qe(n,[{key:"onEpochBegin",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=i(f().mark((function e(t,n){var a,r,i,o=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in null==n&&(n={}),a=null==n.size?0:n.size,this.seen+=a,r=function(e){var t=n[e];if("number"===typeof t)o.totals.hasOwnProperty(e)||(o.totals[e]=0),o.totals[e]=o.totals[e]+t*a;else{var r;e in o.totals?r=o.totals[e]:o.totals[e]=0;var i=Il((function(){return Ll(o.totals[e],_c(t,a))}));o.totals[e]=i,null!=r&&r.dispose()}},n)r(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=i(f().mark((function e(t,n){var a,r,i,o=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=19;break}a=je(this.params.metrics),e.prev=2,i=function(){var e=r.value;if(null==o.totals[e])return"continue";"number"===typeof o.totals[e]?n[e]=o.totals[e]/o.seen:Il((function(){var t=_c(kc(1,o.seen),o.totals[e]);n[e]=t,o.totals[e].dispose(),Tl(n[e])}))},a.s();case 5:if((r=a.n()).done){e.next=11;break}if("continue"!==i()){e.next=9;break}return e.abrupt("continue",9);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a.e(e.t0);case 16:return e.prev=16,a.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(dx),gx=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"onTrainBegin",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=i(f().mark((function e(t,n){var a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in null==n&&(n={}),this.epoch.push(t),n)null==this.history[a]&&(this.history[a]=[]),this.history[a].push(n[a]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=i(f().mark((function e(){var t,n,a,r,i,o,s,l,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t=[],n=[],a=[],this.history)for(i=this.history[r],o=0;o<i.length;++o)"number"!==typeof i[o]&&(s=i[o],t.push(s.data()),n.push(r),a.push(o));return e.next=6,Promise.all(t);case 6:for(l=e.sent,c=0;c<l.length;++c)this.history[n[c]][a[c]].dispose(),this.history[n[c]][a[c]]=l[c][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(dx),vx=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r;if(Ze(this,n),(r=t.call(this)).currentEpoch=0,r.nowFunc=e.nowFunc,r.nextFrameFunc=e.nextFrameFunc||gd,r.yieldEvery=a||"auto","auto"===r.yieldEvery&&(r.yieldEvery=125),"never"===r.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return At(r.yieldEvery)&&(r.maybeWait=function(e,t,n){var a,r=null!=n?n():Ti();return function(){var i=null!=n?n():Ti();return i-r<t?a:(r=i,a=e.apply(void 0,arguments))}}(r.maybeWait.bind(Bi(r)),r.yieldEvery,r.nowFunc)),r.trainBegin=e.onTrainBegin,r.trainEnd=e.onTrainEnd,r.epochBegin=e.onEpochBegin,r.epochEnd=e.onEpochEnd,r.batchBegin=e.onBatchBegin,r.batchEnd=e.onBatchEnd,r.yield=e.onYield,r}return Qe(n,[{key:"maybeWait",value:function(){var e=i(f().mark((function e(t,n,a){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.yield){e.next=5;break}return e.next=4,cx(a);case 4:r.push(this.yield(t,n,a));case 5:return r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=i(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,cx(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=i(f().mark((function e(t,n){var a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.epochEnd){e.next=5;break}return e.next=4,cx(n);case 4:a.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=i(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,cx(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=i(f().mark((function e(t,n){var a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.batchEnd){e.next=5;break}return e.next=4,cx(n);case 4:a.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?a.push(this.nextFrameFunc()):At(this.yieldEvery)&&a.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,cx(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,cx(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(dx);function mx(e,t){return null==e&&(e={}),e instanceof dx?[e]:Array.isArray(e)&&e[0]instanceof dx?e:tv(e).map((function(e){return new vx(e,t)}))}var xx=function(){function e(){Ze(this,e)}return Qe(e,null,[{key:"registerCallbackConstructor",value:function(t,n){st(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new jg("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var a in e.constructors){var r=+a;t>=r&&n.push.apply(n,Ke(e.constructors[r]))}return n.map((function(e){return new e}))}}]),e}();function bx(e,t,n,a,r,i,o,s,l){var c=new gx,u=[new px].concat(Ke(xx.createCallbacks(t)));null!=e&&u.push.apply(u,Ke(e)),u.push(c);var h=new fx(u);return h.setParams({epochs:n,initialEpoch:a,samples:r,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:l}),{callbackList:h,history:c}}function yx(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pi(e)););return e}function kx(){return kx="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=yx(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},kx.apply(this,arguments)}function wx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return sv(e,kl.getMap().classNameMap,t,"layer",n)}function Sx(e,t){return Il((function(){"float32"!==e.dtype&&(e=zs(e,"float32"));var n=Bc(em(e),t,!0),a=Nc(n.shape,Hv()),r=Eu(Gc(n,a));return kc(e,r)}))}function Cx(e,t){return Il((function(){return Yc(em(zc(t,e)),-1)}))}function Ix(e,t){return Il((function(){return Yc(Dl(zc(t,e)),-1)}))}function Ax(e,t){return Il((function(){var n=zc(e,t),a=oc(Dl(e),Hv(),Number.MAX_VALUE),r=Dl(kc(n,a));return _c(100,Yc(r,-1))}))}function Tx(e,t){return Il((function(){var n=oc(t,Hv(),Number.MAX_VALUE),a=Mc(Ll(1,n)),r=oc(e,Hv(),Number.MAX_VALUE),i=Mc(Ll(1,r));return Yc(em(zc(a,i)),-1)}))}function Nx(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Il((function(){if(n)t=Au(t);else{var a=Bc(t,t.shape.length-1,!0);t=kc(t,a)}return t=oc(t,Hv(),1-Hv()),au(Bc(_c(zs(e,"float32"),Mc(t)),t.shape.length-1))}))}function Ex(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Il((function(){var a=zs(Ec(Xv(e)),"int32"),r=(t=oc(t,Hv(),1-Hv())).shape;return Nx(Jl(iu(a,r[r.length-1]),r),t,n)}))}function Rx(e,t){return Il((function(){var n;return n=oc(t,Hv(),1-Hv()),n=Mc(kc(n,zc(1,n))),Yc(function(e,t){if(!dt(e.shape,t.shape))throw new jg("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return Il((function(){var n=vu(t),a=au(Dl(t));return Ll(zc(n,_c(t,e)),Oc(Cc(a)))}))}(e,n),-1)}))}function Fx(e,t){return Il((function(){var n=oc(e,Hv(),1),a=oc(t,Hv(),1);return Bc(_c(e,Mc(kc(n,a))),-1)}))}function Dx(e,t){return Il((function(){var n=Sx(e,-1),a=Sx(t,-1),r=_c(n,a);return au(Bc(r,-1))}))}xx.constructors={};var Lx={meanSquaredError:Cx,meanAbsoluteError:Ix,meanAbsolutePercentageError:Ax,meanSquaredLogarithmicError:Tx,squaredHinge:function(e,t){return Il((function(){var n=Gc(0,zc(1,_c(e,t)));return Yc(em(n),-1)}))},hinge:function(e,t){return Il((function(){var n=Gc(0,zc(1,_c(e,t)));return Yc(n,-1)}))},categoricalHinge:function(e,t){return Il((function(){var n=Bc(_c(e,t),-1),a=Pc(_c(zc(1,e),t),-1);return Gc(0,Ll(1,zc(a,n)))}))},logcosh:function(e,t){return Il((function(){var n=Math.log(2),a=zc(t,e),r=zc(Ll(a,Tu(_c(-2,a))),n);return Yc(r,-1)}))},categoricalCrossentropy:Nx,sparseCategoricalCrossentropy:Ex,binaryCrossentropy:Rx,kullbackLeiblerDivergence:Fx,poisson:function(e,t){return Il((function(){var n=Mc(Ll(Hv(),t));return Yc(zc(t,_c(e,n)),-1)}))},cosineProximity:Dx};function Mx(e){if("string"===typeof e){if(e in Lx)return Lx[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new jg(t)}return e}function Ox(e,t){return Il((function(){var n=_c(.5,lu(t)),a=Vv(Fc(t,n),e.dtype);return Yc(Sc(e,a),-1)}))}function Px(e,t){return Il((function(){return Vv(Sc(Pl(e,-1),Pl(t,-1)),"float32")}))}function _x(e,t){return Il((function(){return zs(Bc(Hc(Sc(e,1),Sc(t,1))),"float32")}))}function zx(e,t){return Rx(e,t)}function Bx(e,t){return e.rank===t.rank&&(e=Ru(e,[e.rank-1])),(t=Pl(t,-1)).dtype!==e.dtype&&(t=zs(t,e.dtype)),zs(Sc(e,t),"float32")}var Wx=Nx,Hx=Ex,Vx={binaryAccuracy:Ox,categoricalAccuracy:Px,precision:function(e,t){return Il((function(){var n=_x(e,t),a=function(e,t){return Il((function(){return zs(Bc(Hc(Sc(e,0),Sc(t,1))),"float32")}))}(e,t),r=Ll(n,a);return zs(Bu(Fc(r,0),kc(n,r),0),"float32")}))},categoricalCrossentropy:Wx,sparseCategoricalCrossentropy:Hx,mse:Cx,MSE:Cx,mae:Ix,MAE:Ix,mape:Ax,MAPE:Ax,cosine:Dx};function Ux(e){if("string"===typeof e&&e in Vx)return Vx[e];if("string"!==typeof e&&null!=e)return e;throw new jg("Unknown metric ".concat(e))}function Xx(e){if(Qg(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,a=Object.keys(Lx);n<a.length;n++){var r=a[n];if(Lx[r]===e){t=r;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(Vx);i<o.length;i++){var s=o[i];if(Vx[s]===e){t=s;break}}return void 0!==t?t:e.name}var Gx=1048576;function Yx(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!jx(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var a=JSON.stringify(e);a.length>Gx&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(a.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(Gx,"."))}}function jx(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var a=n[t];if("string"!==typeof a)return!1;if(!jx(e[a]))return!1}return!0}if(Array.isArray(e)){var r,i=je(e);try{for(i.s();!(r=i.n()).done;){if(!jx(r.value))return!1}}catch(jz){i.e(jz)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function qx(e,t,n){var a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=Zx(e),o=["Layer (type)","Input Shape","Output shape","Param #"];if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),a=[],e.nodesByDepth){var l;(l=a).push.apply(l,Ke(e.nodesByDepth[s]))}r("_".repeat(t)),$x(o,n,r),r("=".repeat(t));for(var c=e.layers,u=0;u<c.length;++u)i?Qx(c[u],n,r):Jx(c[u],n,a,r),r((u===c.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var h=Kx(e),d=Dm(e.nonTrainableWeights);r("Total params: ".concat(h+d)),r("Trainable params: ".concat(h)),r("Non-trainable params: ".concat(d)),r("_".repeat(t))}function Kx(e){return null!=e.collectedTrainableWeights?Dm(e.collectedTrainableWeights):Dm(e.trainableWeights)}function Zx(e){var t=!0,n=[],a=[];for(var r in e.nodesByDepth)n.push(e.nodesByDepth[r]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}a.push.apply(a,Ke(s))}if(t){var l,c=je(e.layers);try{for(c.s();!(l=c.n()).done;){var u,h=l.value,d=!1,f=je(h.inboundNodes);try{for(f.s();!(u=f.n()).done;){var p=u.value;if(-1!==a.indexOf(p)){if(d){t=!1;break}d=!0}}}catch(jz){f.e(jz)}finally{f.f()}if(!t)break}}catch(jz){c.e(jz)}finally{c.f()}}return t}function $x(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,a="",r=0;r<e.length;++r)r>0&&(a=a.slice(0,a.length-1)+" "),a=(a+=e[r]).slice(0,t[r]),a+=" ".repeat(t[r]-a.length);n(a)}function Qx(e,t,n){var a,r;try{r=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(jz){r="multiple"}try{a=JSON.stringify(e.outputShape)}catch(jz){a="multiple"}var i=e.name,o=e.getClassName();$x(["".concat(i," (").concat(o,")"),r,a,e.countParams().toString()],t,n)}function Jx(e,t,n,a){var r,i;try{i=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(jz){i="multiple"}try{r=JSON.stringify(e.outputShape)}catch(jz){r="multiple"}var o,s=[],l=je(e.inboundNodes);try{for(l.s();!(o=l.n()).done;){var c=o.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(c)))for(var u=0;u<c.inboundLayers.length;++u){var h=c.inboundLayers[u].name,d=c.nodeIndices[u],f=c.tensorIndices[u];s.push("".concat(h,"[").concat(d,"][").concat(f,"]"))}}}catch(jz){l.e(jz)}finally{l.f()}var p=e.name,g=e.getClassName(),v=0===s.length?"":s[0];$x(["".concat(p," (").concat(g,")"),i,r,e.countParams().toString(),v],t,a);for(var m=1;m<s.length;++m)$x(["","","","",s[m]],t,a)}function eb(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function tb(e,t){if(null===e)return null;if("string"===typeof e)return av(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],a=e.length,r=0;r<a;++r){var i=e[r];eb(t,r,i)?n.push(i):n.push(tb(i,t))}return n}for(var o={},s=0,l=Object.keys(e);s<l.length;s++){var c=l[s],u=e[c];if("name"===c&&"string"===typeof u)o[c]=u;else{var h=av(c);o[h]=tb(u,h)}}return o}function nb(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return nv(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],a=e.length,r=0;r<a;++r){var i=e[r];eb(t,r,i)?n.push(i):n.push(nb(i,t))}return n}for(var o={},s=0,l=Object.keys(e);s<l.length;s++){var c=l[s],u=e[c],h=nv(c);o[h]="name"!==c&&"className"!==c||"string"!==typeof u?nb(u,c):u}return o}var ab="3.18.0",rb=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),(a=t.call(this,{})).containerNodes=new Set,a.name=e.name,null==a.name){var r=a.getClassName().toLowerCase();a.name=bv(r)}if(a.supportsMasking=!1,a.trainable_=!0,Array.isArray(e.inputs)?a.inputs=e.inputs.slice():a.inputs=[e.inputs],Array.isArray(e.outputs)?a.outputs=e.outputs.slice():a.outputs=[e.outputs],cv(a.inputs).length!==a.inputs.length)throw new jg("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(a.inputs.map((function(e){return e.name}))));cv(a.outputs).length!==a.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(a.outputs.map((function(e){return e.name})))),a.inputLayers=[],a.inputLayersNodeIndices=[],a.inputLayersTensorIndices=[],a.outputLayers=[],a.outputLayersNodeIndices=[],a.outputLayersTensorIndices=[],a.layers=[],a.internalContainerRefs=[];var i,o=je(a.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=s.sourceLayer,c=s.nodeIndex,u=s.tensorIndex;a.outputLayers.push(l),a.outputLayersNodeIndices.push(c),a.outputLayersTensorIndices.push(u)}}catch(jz){o.e(jz)}finally{o.f()}var h,d=je(a.inputs);try{for(d.s();!(h=d.n()).done;){var f=h.value,p=f.sourceLayer,g=f.nodeIndex,v=f.tensorIndex;Qg(0===g,"input layer has >1 nodes"),Qg(0===v,"input layer has >1 tensors"),a.inputLayers.push(p),a.inputLayersNodeIndices.push(g),a.inputLayersTensorIndices.push(v)}}catch(jz){d.e(jz)}finally{d.f()}a.inputNames=[],a.outputNames=[],a.feedInputShapes=[],a.feedInputNames=[],a.feedOutputNames=[];for(var m=0;m<a.inputLayers.length;m++){var x=a.inputLayers[m];if(!(x instanceof Xm))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(m," (0-based) originates ")+"from layer type ".concat(x.getClassName(),"."));a.inputNames.push(x.name),a.feedInputShapes.push(x.batchInputShape),a.feedInputNames.push(x.name)}var b,y=je(a.outputLayers);try{for(y.s();!(b=y.n()).done;){var k=b.value;a.outputNames.push(k.name)}}catch(jz){y.e(jz)}finally{y.f()}a.internalInputShapes=a.inputs.map((function(e){return e.shape})),a.internalOutputShapes=a.outputs.map((function(e){return e.shape}));var w,S={},C={},I={},A={},T={},N=[],E=function e(t,r,i,o,s,l){null!=o&&null!=s&&null!=l||(o=t.sourceLayer,s=t.nodeIndex,l=t.tensorIndex);var c=o.inboundNodes[s];if(-1!==i.indexOf(c))throw new Yg("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===r.indexOf(c)){a.containerNodes.add(n.nodeKey(o,s)),o.id in T||(T[o.id]=Object.keys(T).length),-1===i.indexOf(c)&&i.push(c);for(var u=c.inboundLayers.length,h=0;h<u;h++){e(c.inputTensors[h],r,i,c.inboundLayers[h],c.nodeIndices[h],c.tensorIndices[h])}for(r.push(c);i.indexOf(c)>=0;)i.splice(i.indexOf(c),1);N.push(c)}},R=[],F=[],D=je(a.outputs);try{for(D.s();!(w=D.n()).done;){E(w.value,R,F)}}catch(jz){D.e(jz)}finally{D.f()}var L,M=je(N.slice().reverse());try{for(M.s();!(L=M.n()).done;){var O=L.value;C[O.id]=O,O.id in S||(S[O.id]=0);var P=S[O.id],_=null==I[O.outboundLayer.id]?0:I[O.outboundLayer.id];P=Math.max(P,_),I[O.outboundLayer.id]=P,A[O.outboundLayer.id]=O.outboundLayer,S[O.id]=P;for(var z=0;z<O.inboundLayers.length;z++){var B=O.inboundLayers[z],W=O.nodeIndices[z],H=B.inboundNodes[W],V=null==S[H.id]?0:S[H.id];S[H.id]=Math.max(P+1,V),C[H.id]=H}}}catch(jz){M.e(jz)}finally{M.f()}var U={};for(var X in S){var G=S[X];G in U||(U[G]=[]),U[G].push(C[X])}var Y={};for(var j in I){var q=I[j];q in Y||(Y[q]=[]),Y[q].push(A[j])}var K=Object.keys(Y).map((function(e){return parseInt(e,10)})).sort(lv);a.layers=[];var Z,$=je(K);try{for($.s();!(Z=$.n()).done;){var Q=Y[Z.value];Q.sort((function(e,t){var n=T[e.id],a=T[t.id];return n<a?-1:n>a?1:0}));var J,ee=je(Q);try{for(ee.s();!(J=ee.n()).done;){var te=J.value;te instanceof n&&a.internalContainerRefs.push(te),a.layers.push(te)}}catch(jz){ee.e(jz)}finally{ee.f()}}}catch(jz){$.e(jz)}finally{$.f()}a.layersByDepth=Y,K=Object.keys(U).map((function(e){return parseInt(e,10)})).sort(lv);var ne,ae=a.inputs.slice(),re=[],ie=je(K);try{for(ie.s();!(ne=ie.n()).done;){var oe,se=je(U[ne.value]);try{for(se.s();!(oe=se.n()).done;){var le=oe.value,ce=le.outboundLayer;if(null!=ce){var ue,he=je(le.inputTensors);try{for(he.s();!(ue=he.n()).done;){var de=ue.value;if(-1===ae.indexOf(de))throw new Yg("Graph disconnected: cannot obtain value for tensor ".concat(de)+' at layer "'.concat(ce.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(re))}}catch(jz){he.e(jz)}finally{he.f()}var fe,pe=je(le.outputTensors);try{for(pe.s();!(fe=pe.n()).done;){var ge=fe.value;ae.push(ge)}}catch(jz){pe.e(jz)}finally{pe.f()}re.push(ce.name)}}}catch(jz){se.e(jz)}finally{se.f()}}}catch(jz){ie.e(jz)}finally{ie.f()}a.nodesByDepth=U;var ve,me=a.layers.map((function(e){return e.name})),xe=je(me);try{var be=function(){var e=ve.value,t=me.filter((function(t){return t===e})).length;if(1!==t)throw new Yg('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(me))};for(xe.s();!(ve=xe.n()).done;)be()}catch(jz){xe.e(jz)}finally{xe.f()}return a.outboundNodes=[],a.inboundNodes=[],new Wm({outboundLayer:Bi(a),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:a.inputs,outputTensors:a.outputs,inputMasks:a.inputs.map((function(e){return null})),outputMasks:a.outputs.map((function(e){return null})),inputShapes:a.inputs.map((function(e){return e.shape})),outputShapes:a.outputs.map((function(e){return e.shape}))}),a.built=!0,a._refCount=1,a}return Qe(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=je(this.layers);try{for(n.s();!(t=n.n()).done;){var a=t.value;e.numDisposedVariables+=a.dispose().numDisposedVariables}}catch(jz){n.e(jz)}finally{n.f()}var r,i=je(this.internalContainerRefs);try{for(i.s();!(r=i.n()).done;){var o=r.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(jz){i.e(jz)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new jg("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=je(this.layers);try{for(n.s();!(e=n.n()).done;){var a=e.value;t=t.concat(a.trainableWeights)}}catch(jz){n.e(jz)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=je(this.layers);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push.apply(t,Ke(a.nonTrainableWeights))}}catch(jz){n.e(jz)}finally{n.f()}if(!this.trainable){var r,i=[],o=je(this.layers);try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push.apply(i,Ke(s.trainableWeights))}}catch(jz){o.e(jz)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a={},r=0,i=je(this.layers);try{for(i.s();!(t=i.n()).done;){var o,s=t.value,l=je(s.weights);try{for(l.s();!(o=l.n()).done;){var c=o.value;if(null!=a[c.originalName])throw new jg("Duplicate weight name: ".concat(c.originalName));a[c.originalName]=c,r++}}catch(jz){l.e(jz)}finally{l.f()}}}catch(jz){i.e(jz)}finally{i.f()}var u=[];for(var h in e){var d=h;if(null==a[h]){var f=h.split("/"),p=f.slice(0,-2).concat([f[f.length-1]]);d=p.join("/")}if(null!=a[d])u.push([a[d],e[h]]);else if(n)throw new jg("Provided weight data has no target variable: ".concat(h));delete a[d]}if(n){var g=[];for(var v in a)g.push(v);if(g.length>0)throw new jg("".concat(g.length," of ").concat(r," weights are not set: ")+"".concat(g))}Pm(u)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(ab),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=nb(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return Il((function(){e=tv(e);for(var a=new Gm,r=0;r<n.inputs.length;++r)a.add(n.inputs[r],e[r]);return qm(n.outputs,a,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return Il((function(){var a;return e=tv(e),a=null==t?$g(null,e.length):tv(t),n.runInternalGraph(e,a)[1]}))}},{key:"computeOutputShape",value:function(e){var t=Em(e);if(t.length!==this.inputLayers.length)throw new jg("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},a=0;a<t.length;a++){var r=this.inputLayers[a],i=t[a];n[r.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(lv);if(o.length>1){var s,l=je(o);try{for(l.s();!(s=l.n()).done;){var c,u=s.value,h=je(this.nodesByDepth[u]);try{for(h.s();!(c=h.n()).done;){var d=c.value,f=d.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(f.id)){for(var p=[],g=0;g<d.inboundLayers.length;g++){var v=d.inboundLayers[g],m=d.nodeIndices[g],x=d.tensorIndices[g],b=n["".concat(v.name,"_").concat(m,"_").concat(x)];p.push(b)}for(var y=Em(f.computeOutputShape(ev(p))),k=f.inboundNodes.indexOf(d),w=0;w<y.length;w++){n["".concat(f.name,"_").concat(k,"_").concat(w)]=y[w]}}}}catch(jz){h.e(jz)}finally{h.f()}}}catch(jz){l.e(jz)}finally{l.f()}}for(var S=[],C=[],I=0;I<this.outputLayers.length;I++){var A=this.outputLayers[I],T=this.outputLayersNodeIndices[I],N=this.outputLayersTensorIndices[I],E="".concat(A.name,"_").concat(T,"_").concat(N);C.push(E)}for(var R=0;R<C.length;R++){var F=C[R];Qg(F in n),S.push(n[F])}return ev(S)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=$g(null,e.length));for(var n={},a=0;a<this.inputs.length;++a){var r=this.inputs[a],i=e[a],o=t[a];n[r.id]=[i,o]}var s,l=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(lv),c=je(l);try{for(c.s();!(s=c.n()).done;){var h,d=s.value,f=je(this.nodesByDepth[d]);try{for(f.s();!(h=f.n()).done;){var p,g=h.value,v=g.outboundLayer,m=g.inputTensors,x=g.outputTensors,b=new Array,y=je(m);try{for(y.s();!(p=y.n()).done;){var k=p.value;k.id in n&&b.push(n[k.id])}}catch(jz){y.e(jz)}finally{y.f()}if(b.length===m.length){var w={},S=void 0,C=void 0,I=void 0,A=void 0;if(null!=g.callArgs&&(w=g.callArgs),1===b.length){var T=u(b[0],2),N=T[0],E=T[1];null==w.mask&&(w.mask=E),I=tv(v.call(N,w)),A=tv(v.computeMask(N,E)),S=[N],C=[E]}else S=b.map((function(e){return e[0]})),C=b.map((function(e){return e[1]})),null==w.mask&&(w.mask=C),I=tv(v.call(S,w)),A=tv(v.computeMask(S,C));if(v.activityRegularizer)throw new qg("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var R=0;R<x.length;++R){var F=x[R],D=I[R],L=A[R];n[F.id]=[D,L]}}}}catch(jz){f.e(jz)}finally{f.f()}}}catch(jz){c.e(jz)}finally{c.f()}var M,O=[],P=[],_=[],z=je(this.outputs);try{for(z.s();!(M=z.n()).done;){var B=M.value;Qg(B.id in n,"Could not compute output ".concat(B.name," : ").concat(B.id));var W=u(n[B.id],2),H=W[0],V=W[1];_.push(H.shape),O.push(H),P.push(V)}}catch(jz){z.e(jz)}finally{z.f()}return[O,P,_]}},{key:"buildNodeConversionMap",value:function(e){var t,a,r={},i=je(this.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var l=n.nodeKey(o,s);this.containerNodes.has(l)&&(r[l]=t,t+=1)}}}catch(jz){i.e(jz)}finally{i.f()}return r}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new jg("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new jg("Provide either a layer name or layer index");var n,a=je(this.layers);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r.name===e)return r}}catch(jz){a.e(jz)}finally{a.f()}throw new jg("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return Il((function(){var t,a=[],r=je(e.layers);try{for(r.s();!(t=r.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&a.push.apply(a,Ke(i.calculateLosses()))}}catch(jz){r.e(jz)}finally{r.f()}return a}))}},{key:"getConfig",value:function(){var e,t={name:this.name},a=this.buildNodeConversionMap(this.layers),r=[],i=je(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),l=o.getConfig(),c=[],u=0;u<o.inboundNodes.length;u++){var h=o.inboundNodes[u],d=n.nodeKey(o,u),f={};if(this.containerNodes.has(d)){if(h.callArgs)try{JSON.stringify(h.callArgs),f=h.callArgs}catch(jz){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(h.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),f={}}if(h.inboundLayers.length>0){for(var p=[],g=0;g<h.inboundLayers.length;g++){var v=h.inboundLayers[g],m=h.nodeIndices[g],x=h.tensorIndices[g],b=a[n.nodeKey(v,m)];null==b&&(b=0),p.push([v.name,b,x,f])}c.push(p)}}}var y={};y.name=o.name,y.className=s,y.config=l,y.inboundNodes=c,r.push(y)}}catch(jz){i.e(jz)}finally{i.f()}t.layers=r;for(var k=[],w=0;w<this.inputLayers.length;w++){var S=this.inputLayers[w],C=this.inputLayersNodeIndices[w],I=n.nodeKey(S,C);if(this.containerNodes.has(I)){var A=a[I];null!==A&&void 0!==A||(A=0);var T=this.inputLayersTensorIndices[w];k.push([S.name,A,T])}}t.inputLayers=k;for(var N=[],E=0;E<this.outputLayers.length;E++){var R=this.outputLayers[E],F=this.outputLayersNodeIndices[E],D=n.nodeKey(R,F);if(this.containerNodes.has(D)){var L=a[D];null!==L&&void 0!==L||(L=0);var M=this.outputLayersTensorIndices[E];N.push([R.name,L,M])}}return t.outputLayers=N,t}},{key:"stateful",get:function(){if(this._stateful)throw new jg("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=je(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(jz){t.e(jz)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;Il((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={},r={};function i(e,t){e.name in r?r[e.name].push(t):r[e.name]=[t]}function o(e,t){var n,r,o=[],s=je(t);try{for(s.s();!(r=s.n()).done;){var l=r.value,c=l[0],u=l[1],h=l[2];if(n=null==l[3]?{}:l[3],!(c in a))return void i(e,t);var d=a[c];if(d.inboundNodes.length<=u)return void i(e,t);var f=d.inboundNodes[u];o.push(f.outputTensors[h])}}catch(jz){s.e(jz)}finally{s.f()}o.length>0&&e.apply(ev(o),n)}function s(e){var r=e.name,o=wx(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),a[r]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new jg("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var l,c=t.name,u=t.layers,h=je(u);try{for(h.s();!(l=h.n()).done;){var d=l.value;s(d)}}catch(jz){h.e(jz)}finally{h.f()}for(;!uv(r);){var f,p=je(u);try{for(p.s();!(f=p.n()).done;){var g=f.value,v=a[g.name];if(v.name in r){var m=r[v.name];delete r[v.name];var x,b=je(m);try{for(b.s();!(x=b.n()).done;){var y=x.value;o(v,y)}}catch(jz){b.e(jz)}finally{b.f()}}}}catch(jz){p.e(jz)}finally{p.f()}}var k,w=[],S=[],C=t.inputLayers,I=je(C);try{for(I.s();!(k=I.n()).done;){var A=k.value,T=A[0],N=A[1],E=A[2];Qg(T in a);var R=a[T],F=R.inboundNodes[N].outputTensors;w.push(F[E])}}catch(jz){I.e(jz)}finally{I.f()}var D,L=t.outputLayers,M=je(L);try{for(M.s();!(D=M.n()).done;){var O=D.value,P=O[0],_=O[1],z=O[2];Qg(P in a);var B=a[P],W=B.inboundNodes[_].outputTensors;S.push(W[z])}}catch(jz){M.e(jz)}finally{M.f()}return new e({inputs:w,outputs:S,name:c})}}]),n}(Vm);function ib(e,t,n){var a=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===a)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==a)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(a," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var r=[];return t.forEach((function(t){t in e?r.push(e[t]):r.push(null)})),r}throw new Error("The model has multiple (".concat(a,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(a," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function ob(e,t){return ib(e,t,"classWeight")}function sb(e,t,n,a){return lb.apply(this,arguments)}function lb(){return(lb=i(f().mark((function e(t,n,a,r){var i,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==r){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==a){e.next=15;break}return i=Il((function(){if(1===t.shape.length)return Bs(t);if(2===t.shape.length){if(t.shape[1]>1){return Pl(t,1)}if(1===t.shape[1])return Jl(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),Al(i),s=[],o.forEach((function(e){if(null==a[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(a[e])})),e.abrupt("return",Lu(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cb(e,t){return _c(e,t)}function ub(e,t){var n,a,r=t;n=r.xs,a=r.ys,st(null!=n&&null!=a,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var i=hb("input",e.inputNames,n),o=hb("output",e.outputNames,a),s=i[0].shape[0];st(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),st(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var l=function(t){st(i[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},c=0;c<i.length;c++)l(c);for(var u=function(t){st(o[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},h=0;h<o.length;h++)u(h);return{xs:i,ys:o}}function hb(e,t,n){if(n instanceof Zi)return[n];if(Array.isArray(n))return st(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var a,r=[],i=je(t);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(null==n[o])throw new jg("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(o,"'."));r.push(n[o])}}catch(jz){i.e(jz)}finally{i.f()}return r}function db(e){if(3===e.length)throw new qg("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function fb(e,t,n){return pb.apply(this,arguments)}function pb(){return pb=i(f().mark((function e(t,n,a){var r,i,o,s,l,c,u,h,d,p,g,v,m,x,b,y,k,w,S,C,I,A,T,N,E,R,F,D,L,M,O,P,_;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null!=a.batchesPerEpoch,st(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),st(null!=a,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),st(null!=a.epochs&&a.epochs>0&&Number.isInteger(a.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(a.epochs)})),st(!r||a.batchesPerEpoch>0&&Number.isInteger(a.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(a.batchesPerEpoch)})),st(null==a.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(i=null!=a.validationData)&&(vb(a.validationData)?st(null==a.validationBatches||a.validationBatches>0&&Number.isInteger(a.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(a.validationBatches)})):(l=db(a.validationData),o=l.xs,s=l.ys)),c=t.makeTrainFunction(),u=t.getDedupedMetricsNames(),h=i?u.slice().concat(u.map((function(e){return"val_"+e}))):u.slice(),d=mx(a.callbacks,a.yieldEvery),p=null==a.verbose?1:a.verbose,g=bx(d,p,a.epochs,null,null,gb(n,a),null,i,h),v=g.callbackList,m=g.history,v.setModel(t),t.history=m,e.next=22,v.onTrainBegin();case 22:return t.stopTraining_=!1,x=null==a.initialEpoch?0:a.initialEpoch,e.next=26,n.iterator();case 26:b=e.sent;case 27:if(!(x<a.epochs)){e.next=98;break}return y={},e.next=31,v.onEpochBegin(x);case 31:if(k=0,w=0,r){e.next=37;break}return e.next=36,n.iterator();case 36:b=e.sent;case 37:if(r&&!(k<a.batchesPerEpoch)){e.next=91;break}return e.next=40,b.next();case 40:if(S=e.sent,!r||!S.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(a.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(k," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(a.batchesPerEpoch*a.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==S.value){e.next=73;break}return C=ub(t,S.value),I=C.xs,A=C.ys,(T={}).batch=w,T.size=I[0].shape[0],e.next=51,v.onBatchBegin(w,T);case 51:if(N=[],null==a.classWeight){e.next=64;break}E=ob(a.classWeight,t.outputNames),R=0;case 55:if(!(R<E.length)){e.next=64;break}return e.t0=N,e.next=59,sb(A[R],null,E[R]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++R,e.next=55;break;case 64:for(F=I.concat(A).concat(N),D=c(F),Al(F),L=0;L<u.length;++L)M=u[L],O=D[L],T[M]=O,Tl(O);return e.next=70,v.onBatchEnd(w,T);case 70:hx(T),w++,k++;case 73:if(!(r?k>=a.batchesPerEpoch:S.done)){e.next=87;break}if(!i){e.next=86;break}if(P=void 0,!vb(a.validationData)){e.next=84;break}return e.t2=tv,e.next=80,t.evaluateDataset(a.validationData,{batches:a.validationBatches});case 80:e.t3=e.sent,P=(0,e.t2)(e.t3),e.next=85;break;case 84:P=tv(t.evaluate(o,s,{batchSize:null==a.validationBatchSize?32:a.validationBatchSize,verbose:0}));case 85:for(_=0;_<t.metricsNames.length;++_)y["val_".concat(t.metricsNames[_])]=P[_];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,v.onEpochEnd(x,y);case 93:if(x++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,v.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),pb.apply(this,arguments)}function gb(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function vb(e){return"function"===typeof e.iterator}function mb(e){return"function"===typeof e.next}function xb(e,t,n){return bb.apply(this,arguments)}function bb(){return bb=i(f().mark((function e(t,n,a){var r,i,o,s,l,c,u,h,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null!=(a=a||{}).batches,i=t.testFunction,o=[],!(a.verbose>0)){e.next=6;break}throw new qg("Verbose mode is not implemented yet.");case 6:if(st(!r||a.batches>0&&Number.isInteger(a.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(a.batches))})),!mb(n)){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,l=0,c=0,u=f().mark((function e(){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,o=Il((function(){return n.value&&function(){var e=ub(t,n.value),a=e.xs,r=e.ys,s=a.concat(r),u=Il((function(){return i(s)}));if(Al(s),0===c)for(var h=0;h<u.length;++h)o.push(Rl(0));for(var d=s[0].shape[0],f=function(e){var t=u[e],n=o[e];o[e]=Il((function(){return Ll(o[e],_c(d,t))})),c>0&&Al(n)},p=0;p<u.length;++p)f(p);Al(u),l+=d,++c}(),o})),!n.done){e.next=7;break}return r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(a.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(r&&!(c<a.batches)){e.next=25;break}return e.delegateYield(u(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(h=0;h<o.length;++h)d=o[h],o[h]=kc(o[h],l),Al(d);return e.abrupt("return",ev(o));case 27:case"end":return e.stop()}}),e)}))),bb.apply(this,arguments)}function yb(e){st(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function kb(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return Gv(e,t,n-t)})):Gv(e,t,n-t)}function wb(e,t){return Il((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return wb(e,t)})):Jv(e,"int32"===t.dtype?t:zs(t,"int32"))}))}function Sb(e,t){for(var n=[],a=0,r=null;a<e;)(r=a+t)>=e&&(r=e),n.push([a,r]),a=r;return n}function Cb(e,t,n,a,r,i,o,s,l,c,u,h,d,f,p){return Ib.apply(this,arguments)}function Ib(){return Ib=i(f().mark((function e(t,n,a,r,i,o,s,l,c,u,h,d,p,g,v){var m,x,b,y,k,w,S,C;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==i&&(i=32),null==o&&(o=1),null==h&&(h=!0),null==p&&(p=0),m=!1,null!=c&&null!=u&&(m=!0),null==v){e.next=10;break}if(m=!0,null!=g){e.next=10;break}throw new jg("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(x=t.checkNumSamples(a,i,g,"steps_per_epoch"))&&(b=Wv(0,x)),null==s&&(s=1),y=bx(l,s,o,p,x,g,i,m,d),k=y.callbackList,w=y.history,k.setModel(t),t.history=w,e.next=18,k.onTrainBegin();case 18:t.stopTraining_=!1,S=f().mark((function e(o){var s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.onEpochBegin(o);case 2:if(s={},null==g){e.next=7;break}throw new qg("stepsPerEpoch mode is not implemented yet.");case 7:return e.delegateYield(f().mark((function e(){var o,l,d,p;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==h){e.next=4;break}throw new qg("batch shuffling is not implemneted yet");case 4:h&&nt(b);case 5:o=Lu(b),l=Sb(x,i),d=f().mark((function e(h){var d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d={},e.next=3,k.onBatchBegin(h,d);case 3:return Il((function(){var e=l[h][0],f=l[h][1],p=Gv(o,e,f-e);d.batch=h,d.size=f-e;for(var g=wb(a,p),v=n(g),x=0;x<r.length;++x){var b=r[x],y=v[x];d[b]=y,Tl(y)}if(h===l.length-1&&m)for(var k=t.testLoop(c,u,i),w=0;w<r.length;++w){var S=r[w],C=k[w];Tl(C),s["val_"+S]=C}})),e.next=6,k.onBatchEnd(h,d);case 6:if(hx(d),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),p=0;case 9:if(!(p<l.length)){e.next=17;break}return e.delegateYield(d(p),"t0",11);case 11:if("break"!==e.t0){e.next=14;break}return e.abrupt("break",17);case 14:++p,e.next=9;break;case 17:o.dispose();case 18:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:return e.next=10,k.onEpochEnd(o,s);case 10:if(!t.stopTraining_){e.next=12;break}return e.abrupt("return","break");case 12:case"end":return e.stop()}}),e)})),C=p;case 21:if(!(C<o)){e.next=29;break}return e.delegateYield(S(C),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++C,e.next=21;break;case 29:return e.next=31,k.onTrainEnd();case 31:return e.next=33,t.history.syncData();case 33:return e.abrupt("return",t.history);case 34:case"end":return e.stop()}}),e)}))),Ib.apply(this,arguments)}function Ab(e,t,n){return Tb.apply(this,arguments)}function Tb(){return Tb=i(f().mark((function e(t,n,a){var r,i,o,s,l,c,u,h,d,p,g,v,m,x,b,y,k,w,S,C,I,A,T,N,E,R,F=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=F.length>3&&void 0!==F[3]?F[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,yb(g=null==r.batchSize?32:r.batchSize),v=!1,e.next=10,t.standardizeUserData(n,a,r.sampleWeight,r.classWeight,v,g);case 10:if(m=e.sent,i=m[0],o=m[1],p=m[2],x=!1,!(null!=r.validationData&&r.validationData.length>0)){e.next=36;break}if(x=!0,2!==r.validationData.length){e.next=22;break}c=r.validationData[0],u=r.validationData[1],e.next=27;break;case 22:if(3!==r.validationData.length){e.next=26;break}throw new qg("validationData including sample weights is not supported yet.");case 26:throw new jg("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(r.validationData," is invalid."));case 27:return y=!0,e.next=30,t.standardizeUserData(c,u,null,null,y,g);case 30:k=e.sent,h=k[0],d=k[1],b=h.concat(d),e.next=37;break;case 36:null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1?(x=!0,w=Math.floor(i[0].shape[0]*(1-r.validationSplit)),S=i[0].shape[0],h=kb(i,w,S),s=i,i=kb(i,0,w),d=kb(o,w,S),l=o,o=kb(o,0,w),b=h.concat(d)):null!=r.validationSteps&&(x=!0);case 37:return C=i.concat(o).concat(p),t.checkTrainableWeightsConsistency(),I=t.makeTrainFunction(),A=t.getDedupedMetricsNames(),x?(t.makeTestFunction(),T=t.testFunction,N=A.slice().concat(A.map((function(e){return"val_"+e})))):(T=null,b=[],N=A.slice()),E=mx(r.callbacks,r.yieldEvery),e.next=45,Cb(t,I,C,A,g,r.epochs,r.verbose,E,T,b,r.shuffle,N,r.initialEpoch,null,null);case 45:return R=e.sent,e.abrupt("return",R);case 47:return e.prev=47,t.isTraining=!1,Eb(i,n),Eb(o,a),Eb(s,n),Eb(l,a),Eb(h,c),Eb(d,u),null!=p&&Al(p),e.finish(47);case 57:case"end":return e.stop()}}),e,null,[[4,,47,57]])}))),Tb.apply(this,arguments)}function Nb(e){var t=[];e instanceof Zi&&(e=[e]);for(var n=0;n<e.length;++n){var a=e[n];if(1===a.rank)t.push(Uv(a,1));else{if(0===a.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(a)}}return t}function Eb(e,t){if(null!=e){var n=[];if(t instanceof Zi)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var a in t){var r=t[a];n.push(r.id)}var i=[];if(e instanceof Zi)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var s=e[o];-1===n.indexOf(s.id)&&i.push(s)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function Rb(e){return Array.isArray(e)}function Fb(e){return!function(e){return e instanceof Zi}(e)&&!Rb(e)}function Db(e,t,n){var a,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(Rb(e)&&e.length>0)o=!0;else if(Fb(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new jg("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(Fb(e)){a=[];var l,c=je(t);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(null==e[u])throw new jg('No data provided for "'.concat(u,'". Need data for each key in: ')+"".concat(t));a.push(e[u])}}catch(jz){c.e(jz)}finally{c.f()}}else if(Rb(e)){if(e.length!==t.length)throw new jg("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));a=e}else{if(t.length>1)throw new jg("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));a=[e]}if(a=Nb(a),null!=n)for(var h=0;h<t.length;++h)if(null!=n[h]){var d=a[h];if(d.shape.length!==n[h].length)throw new jg("Error when checking ".concat(i,": expected ").concat(t[h]," ")+"to have ".concat(n[h].length," dimension(s). but got array with ")+"shape ".concat(d.shape));for(var f=0;f<n[h].length;++f)if(0!==f||r){var p=d.shape[f],g=n[h][f];if(null!=g&&g>=0&&p!==g)throw new jg("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[h].slice(1,n[h].length),"] ")+"(i.e.,tensor shape [*,".concat(n[h].slice(1,n[h].length),"])")+" but the ".concat(i," received an input with ").concat(d.shape[0])+" examples, each with shape [".concat(d.shape.slice(1,d.shape.length),"]")+" (tensor shape [".concat(d.shape,"])"))}}return a}function Lb(e,t,n){var a=cv(e.map((function(e){return e.shape[0]})));a.sort();var r=cv(t.map((function(e){return e.shape[0]})));if(r.sort(),a.length>1)throw new jg("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(r.length>1)throw new jg("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(a.length>0&&r.length>0&&!dt(a,r))throw new jg("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(a[0]," input sample(s) and ").concat(r[0]," target ")+"sample(s).")}function Mb(e,t,n){for(var a=[Cx,Rx,Nx],r=0;r<e.length;++r){var i=e[r],o=t[r],s=n[r];if(null!=o){if(o===Nx&&1===i.shape[i.shape.length-1])throw new jg("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==a.indexOf(o))for(var l=i.shape.slice(1),c=s.slice(1),u=0;u<l.length;++u){var h=l[u],d=c[u];if(null!=d&&h!==d)throw new jg("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function Ob(e,t,n){var a,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new jg("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));a=e}else{if(t.length>1)throw new jg("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));a=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=a[o];if(s.shape.length!==n[o].length)throw new jg("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var l=0;l<n[o].length;++l)if(0!==l||r){var c=s.shape[l],u=n[o][l];if(null!=u&&u!==c)throw new jg("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var Pb=function(t){Oi(a,t);var n=Hi(a);function a(e){var t;return Ze(this,a),(t=n.call(this,e)).isTraining=!1,t}return Qe(a,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new jg("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");qx(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return fd.adagrad(.01)},Adadelta:function(){return fd.adadelta(1,.95,Hv())},Adam:function(){return fd.adam(.001,.9,.999,Hv())},Adamax:function(){return fd.adamax(.002,.9,.999,Hv(),0)},RMSProp:function(){return fd.rmsprop(.001,.9,0,Hv())},SGD:function(){return fd.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new jg("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Fl))throw new jg("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new jg("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var a=e.loss;n=a.map((function(e){return Mx(e)}))}else{var r=Mx(e.loss);this.outputs.forEach((function(e){n.push(r)}))}else{for(var i in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(i))throw new jg('Unknown entry in loss dictionary: "'.concat(i,'". ')+"Only expected the following keys: ".concat(this.outputNames));var o,s=je(this.outputNames);try{for(s.s();!(o=s.n()).done;){var l=o.value;null==e.loss[l]&&console.warn('Output "'.concat(l,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(l," during training")),n.push(Mx(e.loss[l]))}}catch(jz){s.e(jz)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var c=0;c<this.outputs.length;++c){var u=this.internalOutputShapes[c],h=this.outputNames[c];this.feedOutputNames.push(h),this.feedOutputShapes.push(u),this.feedLossFns.push(this.lossFunctions[c])}var d=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Rv("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===d.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var f=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var a,r=[],i=je(t);try{for(i.s();!(a=i.n()).done;){var o=a.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),r.push(s)}}catch(jz){i.e(jz)}finally{i.f()}return r}(e.metrics,this.outputNames),p=function(e,n,a){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([a,e])};Rv("metric",(function(){for(var e=function(e){if(-1!==d.indexOf(e))return"continue";!function(n){var a,r,i,o,s=je(n);try{for(s.s();!(o=s.n()).done;){var l=o.value;if("string"===typeof l&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(l)){var c=t.internalOutputShapes[e];1===c[c.length-1]||t.lossFunctions[e]===Rx?-1!==["accuracy","acc"].indexOf(l)?r=Ox:-1!==["crossentropy","ce"].indexOf(l)&&(r=zx):t.lossFunctions[e]===Ex?-1!==["accuracy","acc"].indexOf(l)?r=Bx:-1!==["crossentropy","ce"].indexOf(l)&&(r=Hx):-1!==["accuracy","acc"].indexOf(l)?r=Px:-1!==["crossentropy","ce"].indexOf(l)&&(r=Wx);var u=void 0;-1!==["accuracy","acc"].indexOf(l)?u="acc":-1!==["crossentropy","ce"].indexOf(l)&&(u="ce"),i=r,a=""+u}else{var h=Ux(l);i=h,a=""+Xx(l)}var d=void 0;Rv(a,(function(){d=i})),p(e,a,d)}}catch(jz){s.e(jz)}finally{s.f()}}(f[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null==n.batchSize?32:n.batchSize;yb(a);var r=!0,i=this.standardizeUserDataXY(e,t,r,a);try{var o=i[0].concat(i[1]);this.makeTestFunction();var s=this.testFunction,l=this.testLoop(s,o,a,n.verbose,n.steps);return ev(l)}finally{Eb(i[0],e),Eb(i[1],t)}}},{key:"evaluateDataset",value:function(){var e=i(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",xb(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(a=null,null!=t)throw new jg("If ".concat(r," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new jg("Either the input data should have a defined shape, or "+"".concat(r," shoud be specified."));a=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return a}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new jg("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),a=n?t:[t],r=this.retrieveSymbolicTensors(a),i=new Gm;if(e instanceof Zi&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new jg("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else{var s,l=je(this.inputs);try{for(l.s();!(s=l.n()).done;){var c=s.value,u=e[c.name];if(null==u)throw new jg("No value is provided for the model's input ".concat(c.name));i.add(c,u)}}catch(jz){l.e(jz)}finally{l.f()}}var h=qm(r,i);return n?h:h[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=$g(null,e.length),a=e.length,r=je(this.layers);try{for(r.s();!(t=r.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),l=0;l<e.length;++l){var c=s.indexOf(e[l]);if(-1!==c&&(n[l]=o[c],a--),0===a)break}if(0===a)break}}catch(jz){r.e(jz)}finally{r.f()}if(a>0){var u=[];throw n.forEach((function(t,n){null==t&&u.push(e[n])})),new jg("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(u)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Il((function(){var r=t.checkNumSamples(e);if(a)throw new qg("Verbose predictLoop() is not implemented yet.");for(var i=Sb(r,n),o=t.outputs.map((function(e){return[]})),s=function(n){Il((function(){var a=i[n][0],r=i[n][1],o=kb(e,a,r),s=[];if(Array.isArray(o))for(var l=0;l<o.length;++l)s.push({key:t.inputs[l],value:o[l]});else s.push({key:t.inputs[0],value:o});var c=new Gm(s);return qm(t.outputs,c)})).forEach((function(e,t){return o[t].push(e)}))},l=0;l<i.length;++l)s(l);return ev(o.map((function(e){return sc(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Nb(e);Ob(n,this.inputNames,this.feedInputShapes,!1);try{var a=null==t.batchSize?32:t.batchSize;return yb(a),this.predictLoop(n,a)}finally{Eb(n,e)}}},{key:"predictOnBatch",value:function(e){Ob(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new Yg("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var a=[],r=0;r<this.feedOutputShapes.length;++r){var i=this.feedOutputShapes[r],o=this.feedLossFns[r];o===Ex?a.push(i.slice(0,i.length-1).concat([1])):a.push(i)}if(Lb(e=Db(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=Db(t,this.feedOutputNames,a,!1,"target")),Mb(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new jg("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=i(f().mark((function e(t,n,a,r){var i,o,s,l,c,h,d,p,g,v=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(v.length>4&&void 0!==v[4])||v[4],o=v.length>5?v[5]:void 0,s=this.standardizeUserDataXY(t,n,i,o),l=u(s,2),c=l[0],h=l[1],null==a){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(d=null,null==r){e.next=19;break}p=ob(r,this.outputNames),d=[],g=0;case 10:if(!(g<p.length)){e.next=19;break}return e.t0=d,e.next=14,sb(h[g],null,p[g]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++g,e.next=10;break;case 19:return e.abrupt("return",[c,h,d]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var a=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return Il((function(){var o=a.checkNumSamples(t,n,i,"steps"),s=[];if(r>0)throw new qg("Verbose mode is not implemented yet.");if(null!=i)throw new qg("steps mode in testLoop() is not implemented yet");for(var l=Sb(o,n),c=Lu(Wv(0,o)),u=0;u<l.length;++u){var h=l[u][0],d=l[u][1],f=Gv(c,h,d-h),p=wb(t,f),g=e(p);if(0===u)for(var v=0;v<g.length;++v)s.push(Rl(0));for(var m=0;m<g.length;++m){var x=g[m];s[m]=Ll(s[m],_c(d-h,x))}}for(var b=0;b<s.length;++b)s[b]=kc(s[b],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var a=e[n],r=a;if(Jg(e,a)>1){var i=Jg(e.slice(0,n),a);r+="_".concat(i)}t.push(r)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],a=t.slice(0,e.inputs.length),r=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:a[s]});for(var l,c=new Gm(t),u=qm(e.outputs,c,{training:!0}),h=0;h<e.lossFunctions.length;++h){var d=(0,e.lossFunctions[h])(r[h],u[h]);null!=i[h]&&(d=cb(d,i[h]));var f=Yc(d);n.push(f),l=0===h?d:Ll(l,d)}for(var p=0;p<e.metricsTensors.length;++p){var g=void 0;if(e.outputs.length>1&&p<e.outputs.length)g=n[p];else{var v=e.metricsTensors[p][0],m=e.metricsTensors[p][1];g=Yc(v(r[m],u[m]))}Tl(g),o.push(g)}return l=Yc(l),e.calculateLosses().forEach((function(e){l=Ll(l,e)})),l}),!0,s)].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return Il((function(){for(var n,a=[],r=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:r[s]});for(var l=new Gm(o),c=qm(e.outputs,l),u=0;u<e.lossFunctions.length;++u){var h=e.lossFunctions[u],d=Yc(h(i[u],c[u]));n=0===u?d:Ll(n,d),a.push(n)}for(var f=0;f<e.metricsTensors.length;++f){var p=e.metricsTensors[f][0],g=e.metricsTensors[f][1],v=Yc(p(i[g],c[g]));a.push(v)}return a}))}}},{key:"fit",value:function(){var e=i(f().mark((function e(t,n){var a,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>2&&void 0!==r[2]?r[2]:{},e.abrupt("return",Ab(this,t,n,a));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=i(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fb(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=i(f().mark((function e(t,n){var a,r,i,o,s,l,c,u,h,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:a=e.sent,r=a[0],i=a[1],o=this.makeTrainFunction(),s=o(r.concat(i)),l=[],c=je(s),e.prev=9,c.s();case 11:if((u=c.n()).done){e.next=19;break}return h=u.value,e.next=15,h.data();case 15:d=e.sent,l.push(d[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:return Al(s),Eb(a[0],t),Eb(a[1],n),e.abrupt("return",ev(l));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,a=n?this.trainableWeights:this.weights,r=this.getWeights(n),i=0;i<a.length;++i)n&&!a[i].trainable||t.push({name:a[i].originalName,tensor:r[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=kx(Pi(a.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=Cl().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-Cl().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=nv(this.loss);else if(Array.isArray(this.loss)){var t,n=je(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(jz){n.e(jz)}finally{n.f()}e=this.loss.map((function(e){return nv(e)}))}else{var a=Object.keys(this.loss);e={};for(var r=this.loss,i=0,o=a;i<o.length;i++){var s=o[i];if("string"!==typeof r[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=nv(r[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[nv(Xx(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return nv(Xx(e))}));var e={};for(var t in this.metrics)e[t]=nv(Xx(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,a=wx(tb(e.optimizer_config));if("string"===typeof e.loss)t=av(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return av(e)}));else if(null!=e.loss)for(var r in t={},e.loss)t[r]=av(e.loss[r]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return av(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=av(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:a})}},{key:"save",value:function(){var t=i(f().mark((function t(n,a){var r,i,o,s,l,c,u,h,d;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof n){t.next=9;break}if(0!==(r=$o(n)).length){t.next=6;break}throw new jg("Cannot find any save handlers for URL '".concat(n,"'"));case 6:if(!(r.length>1)){t.next=8;break}throw new jg("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(n,"'"));case 8:n=r[0];case 9:if(null!=n.save){t.next=11;break}throw new jg("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return t.next=13,Lo(this.getNamedWeights(a));case 13:if(i=t.sent,!1,null,o=this.toJSON(null,false),s={modelTopology:o,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(ab),convertedBy:null},!(null!=a&&a.includeOptimizer)||null==this.optimizer){t.next=34;break}return s.trainingConfig=this.getTrainingConfig(),c="optimizer",t.t0=e,t.next=25,this.optimizer.getWeights();case 25:return t.t1=t.sent,t.t2=c,t.next=29,t.t0.encodeWeights.call(t.t0,t.t1,t.t2);case 29:u=t.sent,h=u.data,d=u.specs,(l=i.specs).push.apply(l,Ke(d)),i.data=Ho([i.data,h]);case 34:return null!=this.userDefinedMetadata&&(!0,Yx(this.userDefinedMetadata,this.name,true),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=i.data,s.weightSpecs=i.specs,t.abrupt("return",n.save(s));case 38:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){Yx(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),a}(rb);Pb.className="Model",wl(Pb);var _b=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n)}(Pb);function zb(){return(zb=i(f().mark((function e(t,n){var a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),"string"!==typeof t){e.next=10;break}if(0!==(a=Qo(t,n)).length){e.next=7;break}a.push(nl(t,n)),e.next=9;break;case 7:if(!(a.length>1)){e.next=9;break}throw new jg("Found more than one (".concat(a.length,") load handlers for ")+"URL '".concat(t,"'"));case 9:t=a[0];case 10:return e.abrupt("return",Bb(t,void 0,n));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bb(e,t,n){return Wb.apply(this,arguments)}function Wb(){return Wb=i(f().mark((function e(t,n,a){var r,i,o,s,l,c,u,h,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==a&&(a={}),null!=t.load){e.next=3;break}throw new jg("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,t.load();case 5:if(r=e.sent,null!=(i=r.modelTopology).model_config&&(i=i.model_config),o=null==a.strict||a.strict,s=null!=r.weightData&&null!=r.weightSpecs&&o,l=wx(tb(i),n,s),null!=(c=r.trainingConfig)&&l.loadTrainingConfig(c),null!=r.userDefinedMetadata&&l.setUserDefinedMetadata(r.userDefinedMetadata),null==r.weightData){e.next=24;break}if(null!=r.weightSpecs){e.next=17;break}throw new jg("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");case 17:if(u=Hb(r.weightData,r.weightSpecs),h=u.modelWeights,d=u.optimizerWeights,l.loadWeights(h,o),!(null!=l.optimizer&&d.length>0)){e.next=22;break}return e.next=22,l.optimizer.setWeights(d);case 22:Al(h),Al(d.map((function(e){return e.tensor})));case 24:return e.abrupt("return",l);case 25:case"end":return e.stop()}}),e)}))),Wb.apply(this,arguments)}function Hb(e,t){var n=Oo(e,t),a={},r=[];return t.forEach((function(e){"optimizer"===e.group?r.push({name:e.name,tensor:n[e.name]}):a[e.name]=n[e.name]})),{modelWeights:a,optimizerWeights:r}}_b.className="Functional",wl(_b);var Vb=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),e=e||{},(a=t.call(this,{inputs:[],outputs:[]})).trainable=!0,a.built=!1,a.name=null!=e.name?e.name:bv("sequential_"),null!=e.layers){var r,i=je(e.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;a.add(o)}}catch(jz){i.e(jz)}finally{i.f()}}return a}return Qe(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new jg("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,a=e instanceof n||e instanceof Pb;if(a){if(1!==(t=e).outputs.length)throw new jg("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new jg("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new jg("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var r=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new jg("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new Xm({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(r)}if(a)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new jg("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new jg("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Um(this.outputs[0])}this.inboundNodes=[],new Wm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:$g(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(Fm(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Pb({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),kx(Pi(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),kx(Pi(n.prototype),"summary",this).call(this,e,t,a)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new Yg("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=i(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Yg("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=i(f().mark((function e(t,n){var a,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.length>2&&void 0!==r[2]?r[2]:{},this.built){e.next=3;break}throw new Yg("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,a));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=i(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Yg("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=i(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new jg("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new jg("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=je(this.layers);try{for(n.s();!(e=n.n()).done;){var a=e.value,r={};r.className=a.getClassName(),r.config=a.getConfig(),t.push(r)}}catch(jz){n.e(jz)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var a,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new jg("Legacy serialization format not supported yet.");a=t}else st(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),a=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof n))throw new qg("Sequential.fromConfig called on non-Sequential input: ".concat(o));var s,l=je(a);try{for(l.s();!(s=l.n()).done;){var c=s.value,u=void 0,h=wx(c,u,r);r&&h.setFastWeightInitDuringBuild(!0),o.add(h)}}catch(jz){l.e(jz)}finally{l.f()}return o}}]),n}(Pb);function Ub(e,t){return null==t&&(t={}),function(e,t){return zb.apply(this,arguments)}(e,t)}Vb.className="Sequential",wl(Vb);var Xb=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"getConfig",value:function(){return{}}}]),n}(yl),Gb=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return am(e,t)}}]),n}(Xb);Gb.className="elu",wl(Gb);var Yb=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return xu(e)}}]),n}(Xb);Yb.className="selu",wl(Yb);var jb=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return vu(e)}}]),n}(Xb);jb.className="relu",wl(jb);var qb=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return Il((function(){return jc(6,vu(e))}))}}]),n}(Xb);qb.className="relu6",wl(qb);var Kb=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return e}}]),n}(Xb);Kb.className="linear",wl(Kb);var Zb=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return yu(e)}}]),n}(Xb);Zb.className="sigmoid",wl(Zb);var $b=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return function(e){return Il((function(){var t=Ll(.5,_c(.2,e));return oc(t,0,1)}))}(e)}}]),n}(Xb);$b.className="hardSigmoid",wl($b);var Qb=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return Tu(e)}}]),n}(Xb);Qb.className="softplus",wl(Qb);var Jb=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return function(e){return Il((function(){return kc(e,Ll(Dl(e),1))}))}(e)}}]),n}(Xb);Jb.className="softsign",wl(Jb);var ey=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return Du(e)}}]),n}(Xb);ey.className="tanh",wl(ey);var ty=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return Au(e,t)}}]),n}(Xb);ty.className="softmax",wl(ty);var ny=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return Wc(e,t)}}]),n}(Xb);ny.className="logSoftmax",wl(ny);var ay=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Il((function(){return _c(yu(_c(e,t)),e)}))}}]),n}(Xb);ay.className="swish",wl(ay);var ry=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return Il((function(){return _c(e,Du(Tu(e)))}))}}]),n}(Xb);function iy(e){return e.getClassName()}function oy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return sv(e,kl.getMap().classNameMap,t,"activation")}function sy(e){if(null==e){var t={className:"linear",config:{}};return oy(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},oy(n)}return e instanceof Xb?e:oy(e)}function ly(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}ry.className="mish",wl(ry);var cy=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n)}(yl),uy=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),a=t.call(this),ly(e),a.l1=null==e||null==e.l1?.01:e.l1,a.l2=null==e||null==e.l2?.01:e.l2,a.hasL1=0!==a.l1,a.hasL2=0!==a.l2,a}return Qe(n,[{key:"apply",value:function(e){var t=this;return Il((function(){var n=ou([1]);return t.hasL1&&(n=Ll(n,Bc(_c(t.l1,Dl(e))))),t.hasL2&&(n=Ll(n,Bc(_c(t.l2,em(e))))),Jl(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(cy);uy.className="L1L2",wl(uy);var hy={l1l2:"L1L2"};function dy(e){return iv(e)}function fy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return sv(e,kl.getMap().classNameMap,t,"regularizer")}function py(e){return null==e?null:"string"===typeof e?fy({className:e in hy?hy[e]:e,config:{}}):e instanceof cy?e:fy(e)}var gy=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(a.maxValue=e.maxValue),a}return Qe(n,[{key:"call",value:function(e,t){e=Rm(e);var n=vu(e);return null!=this.maxValue&&(n=oc(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);gy.className="ReLU",wl(gy);var vy=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),a.alpha=null==e.alpha?a.DEFAULT_ALPHA:e.alpha,a}return Qe(n,[{key:"call",value:function(e,t){var n=Rm(e);return Lc(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);vy.className="LeakyReLU",wl(vy);var my=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),(a=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),a.supportsMasking=!0,a.alphaInitializer=Tm(e.alphaInitializer||a.DEFAULT_ALPHA_INITIALIZER),a.alphaRegularizer=py(e.alphaRegularizer),a.alphaConstraint=lx(e.alphaConstraint),null==e.sharedAxes)a.sharedAxes=null;else if(Array.isArray(e.sharedAxes))a.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new jg("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));a.sharedAxes=[e.sharedAxes]}return a}return Qe(n,[{key:"build",value:function(e){var t=(e=Fm(e)).slice(1);if(null!=this.sharedAxes){var n,a=je(this.sharedAxes);try{for(a.s();!(n=a.n()).done;){t[n.value-1]=1}}catch(jz){a.e(jz)}finally{a.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var r={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new _m({ndim:e.length,axes:r})],this.built=!0}},{key:"call",value:function(e,t){return e=Rm(e),uu(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:Am(this.alphaInitializer),alphaRegularizer:dy(this.alphaRegularizer),alphaConstraint:ox(this.alphaConstraint),sharedAxes:this.sharedAxes},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);my.className="PReLU",wl(my);var xy=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),(a=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==a.DEFAULT_ALPHA)throw new qg("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return a.alpha=null==e.alpha?a.DEFAULT_ALPHA:e.alpha,a}return Qe(n,[{key:"call",value:function(e,t){var n=Rm(e);return wc(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);xy.className="ELU",wl(xy);var by=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),a.theta=null==e.theta?a.DEFAULT_THETA:e.theta,a}return Qe(n,[{key:"call",value:function(e,t){var n=Rm(e);return _c(n,zs(Fc(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);by.className="ThresholdedReLU",wl(by);var yy=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),a.softmax=(new ty).apply,a.axis=null==e.axis?a.DEFAULT_AXIS:e.axis,a}return Qe(n,[{key:"call",value:function(e,t){var n=Rm(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);function ky(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wy(e,t,n){if("number"===typeof e)return $g(e,t);if(e.length!==t)throw new jg("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var a=0;a<t;++a){var r=e[a];if(!Pv(r))throw new jg("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(r))}return e}function Sy(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var i,o=t+(t-1)*(r-1);return i="same"===n?e:e-o+1,Math.floor((i+a-1)/a)}function Cy(e,t,n,a){if(null==e)return null;if("valid"===a)e=e*t+Bv([n-t,0]);else{if("same"!==a)throw new jg("Unsupport padding mode: ".concat(a,"."));e*=t}return e}function Iy(e,t){return Il((function(){return Av(t),"channelsFirst"===t?Uu(e,[0,2,3,1]):e}))}function Ay(e,t){return Il((function(){return Av(t),"channelsFirst"===t?Uu(e,[0,2,3,4,1]):e}))}function Ty(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Il((function(){if(null==i&&(i="channelsLast"),Av(i),3!==e.shape.length)throw new jg("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new jg("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new jg("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=Uu(e,[0,2,1])),"causal"===r)throw new qg("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=fc(e,t,a,"same"===r?"same":"valid","NWC",o);return null!=n&&(s=nm(s,n)),s}))}function Ny(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return Il((function(){if(null==i&&(i="channelsLast"),Av(i),3!==e.rank&&4!==e.rank)throw new jg("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new jg("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var l=Iy(e,i);if("causal"===r)throw new qg("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=nh({x:l,filter:t,strides:a,pad:"same"===r?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(l=Uu(l,[0,3,1,2])),l}))}function Ey(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return Il((function(){if(null==i&&(i="channelsLast"),Av(i),4!==e.rank&&5!==e.rank)throw new jg("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new jg("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=Ay(e,i);if("causal"===r)throw new qg("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=vc(s,t,a,"same"===r?"same":"valid","NDHWC",o),null!=n&&(s=nm(s,n)),"channelsFirst"===i&&(s=Uu(s,[0,4,1,2,3])),s}))}yy.className="Softmax",wl(yy);var Ry=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r;if(Ze(this,n),(r=t.call(this,a)).bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(a),r.rank=e,fv(r.rank,"rank"),1!==r.rank&&2!==r.rank&&3!==r.rank)throw new qg("Convolution layer for rank other than 1, 2, or 3 (".concat(r.rank,") is ")+"not implemented yet.");if(r.kernelSize=wy(a.kernelSize,e,"kernelSize"),r.strides=wy(null==a.strides?1:a.strides,e,"strides"),r.padding=null==a.padding?"valid":a.padding,Tv(r.padding),r.dataFormat=null==a.dataFormat?"channelsLast":a.dataFormat,Av(r.dataFormat),r.activation=sy(a.activation),r.useBias=null==a.useBias||a.useBias,r.biasInitializer=Tm(a.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.biasConstraint=lx(a.biasConstraint),r.biasRegularizer=py(a.biasRegularizer),r.activityRegularizer=py(a.activityRegularizer),r.dilationRate=wy(null==a.dilationRate?1:a.dilationRate,e,"dilationRate"),1===r.rank&&Array.isArray(r.dilationRate)&&1!==r.dilationRate.length)throw new jg("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(r.dilationRate)));if(2===r.rank){if("number"===typeof r.dilationRate)r.dilationRate=[r.dilationRate,r.dilationRate];else if(2!==r.dilationRate.length)throw new jg("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(r.dilationRate)))}else if(3===r.rank)if("number"===typeof r.dilationRate)r.dilationRate=[r.dilationRate,r.dilationRate,r.dilationRate];else if(3!==r.dilationRate.length)throw new jg("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(r.dilationRate)));return r}return Qe(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:iy(this.activation),useBias:this.useBias,biasInitializer:Am(this.biasInitializer),biasRegularizer:dy(this.biasRegularizer),activityRegularizer:dy(this.activityRegularizer),biasConstraint:ox(this.biasConstraint)},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(Qg("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!dv(e.kernelSize,"number",1,3))throw new jg("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Vm),Fy=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r;return Ze(this,n),(r=t.call(this,e,a)).kernel=null,n.verifyArgs(a),r.filters=a.filters,fv(r.filters,"filters"),r.kernelInitializer=Tm(a.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.kernelConstraint=lx(a.kernelConstraint),r.kernelRegularizer=py(a.kernelRegularizer),r}return Qe(n,[{key:"build",value:function(e){e=Fm(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new jg("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],a=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:ky({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Il((function(){var t;e=Rm(e);var a=null==n.bias?null:n.bias.read(),r=gv(n.activation.getClassName());if(null!=r&&2===n.rank)t=Ny(e,n.kernel.read(),a,n.strides,n.padding,n.dataFormat,n.dilationRate,r);else{if(1===n.rank)t=Ty(e,n.kernel.read(),a,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=Ny(e,n.kernel.read(),a,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new qg("convolutions greater than 3D are not implemented yet.");t=Ey(e,n.kernel.read(),a,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=Fm(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),a=0;a<n.length;++a){var r=Sy(n[a],this.kernelSize[a],this.padding,this.strides[a],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[a]);t.push(r)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:Am(this.kernelInitializer),kernelRegularizer:dy(this.kernelRegularizer),kernelConstraint:ox(this.kernelConstraint)},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new jg("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(Ry),Dy=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),a=t.call(this,2,e),n.verifyArgs(e),a}return Qe(n,[{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!dv(e.kernelSize,"number",1,2))throw new jg("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Fy);Dy.className="Conv2D",wl(Dy);var Ly=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),a=t.call(this,3,e),n.verifyArgs(e),a}return Qe(n,[{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new jg("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Fy);Ly.className="Conv3D",wl(Ly);var My=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),(a=t.call(this,e)).inputSpec=[new _m({ndim:4})],"same"!==a.padding&&"valid"!==a.padding)throw new jg("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(a.padding));return a}return Qe(n,[{key:"build",value:function(e){if(4!==(e=Fm(e)).length)throw new jg("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new jg("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],a=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new _m({ndim:4,axes:ky({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Il((function(){var t=Rm(e);if(4!==t.shape.length)throw new jg("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var a,r,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(a=2,r=3):(a=1,r=2);var s=i[a],l=i[r],c=n.kernelSize[0],u=n.kernelSize[1],h=n.strides[0],d=n.strides[1],f=[o,Cy(s,h,c,n.padding),Cy(l,d,u,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=Uu(t,[0,2,3,1]));var p=gc(t,n.kernel.read(),f,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(p=Uu(p,[0,3,1,2])),null!=n.bias&&(p=nm(p,n.bias.read(),n.dataFormat)),null!=n.activation&&(p=n.activation.apply(p)),p}))}},{key:"computeOutputShape",value:function(e){var t,n,a,r=(e=Fm(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,a=3):(t=3,n=1,a=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],l=this.strides[1];return r[t]=this.filters,r[n]=Cy(r[n],s,i,this.padding),r[a]=Cy(r[a],l,o,this.padding),r}},{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(Dy);My.className="Conv2DTranspose",wl(My);var Oy=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),(a=t.call(this,e)).inputSpec=[new _m({ndim:5})],"same"!==a.padding&&"valid"!==a.padding)throw new jg("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(a.padding));return a}return Qe(n,[{key:"build",value:function(e){if(5!==(e=Fm(e)).length)throw new jg("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new jg("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],a=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new _m({ndim:5,axes:ky({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Il((function(){var t=Rm(e);if(5!==t.shape.length)throw new jg("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var a,r,i,o=t.shape,s=o[0];"channelsFirst"===n.dataFormat?(i=2,a=3,r=4):(i=1,a=2,r=3);var l=o[i],c=o[a],u=o[r],h=n.kernelSize[0],d=n.kernelSize[1],f=n.kernelSize[2],p=n.strides[0],g=n.strides[1],v=n.strides[2],m=[s,Cy(l,p,h,n.padding),Cy(c,g,d,n.padding),Cy(u,v,f,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=Uu(t,[0,2,3,4,1]));var x=xc(t,n.kernel.read(),m,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(x=Uu(x,[0,4,1,2,3])),null!==n.bias&&(x=nm(x,n.bias.read(),n.dataFormat)),null!==n.activation&&(x=n.activation.apply(x)),x}))}},{key:"computeOutputShape",value:function(e){var t,n,a,r,i=(e=Fm(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,a=3,r=4):(t=4,n=1,a=2,r=3);var o=this.kernelSize[0],s=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],u=this.strides[1],h=this.strides[2];return i[t]=this.filters,i[n]=Cy(i[n],c,o,this.padding),i[a]=Cy(i[a],u,s,this.padding),i[r]=Cy(i[r],h,l,this.padding),i}},{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(Ly);Oy.className="Conv3DTranspose",wl(Oy);var Py=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r;if(Ze(this,n),(r=t.call(this,e,a)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",r.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",r.depthwiseKernel=null,r.pointwiseKernel=null,null==a.filters)throw new jg("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=a.kernelInitializer||null!=a.kernelRegularizer||null!=a.kernelConstraint)throw new jg("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=a.padding&&"same"!==a.padding&&"valid"!==a.padding)throw new jg("SeparableConv".concat(r.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(a.padding)));return r.depthMultiplier=null==a.depthMultiplier?1:a.depthMultiplier,r.depthwiseInitializer=Tm(a.depthwiseInitializer||r.DEFAULT_DEPTHWISE_INITIALIZER),r.depthwiseRegularizer=py(a.depthwiseRegularizer),r.depthwiseConstraint=lx(a.depthwiseConstraint),r.pointwiseInitializer=Tm(a.depthwiseInitializer||r.DEFAULT_POINTWISE_INITIALIZER),r.pointwiseRegularizer=py(a.pointwiseRegularizer),r.pointwiseConstraint=lx(a.pointwiseConstraint),r}return Qe(n,[{key:"build",value:function(e){if((e=Fm(e)).length<this.rank+2)throw new jg("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new jg("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],a=this.kernelSize.concat([n,this.depthMultiplier]),r=[],i=0;i<this.rank;++i)r.push(1);r.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",r,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new _m({ndim:this.rank+2,axes:ky({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Il((function(){var t;if(e=Rm(e),1===n.rank)throw new qg("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=Uu(e,[0,2,3,1])),t=bu(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=nm(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=Uu(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Am(this.depthwiseInitializer),e.pointwiseInitializer=Am(this.pointwiseInitializer),e.depthwiseRegularizer=dy(this.depthwiseRegularizer),e.pointwiseRegularizer=dy(this.pointwiseRegularizer),e.depthwiseConstraint=ox(this.depthwiseConstraint),e.pointwiseConstraint=ox(this.pointwiseConstraint),e}}]),n}(Fy);Py.className="SeparableConv";var _y=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,2,e)}return Qe(n)}(Py);_y.className="SeparableConv2D",wl(_y);var zy=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),a=t.call(this,1,e),n.verifyArgs(e),a.inputSpec=[{ndim:3}],a}return Qe(n,[{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!dv(e.kernelSize,"number",1,1))throw new jg("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Fy);zy.className="Conv1D",wl(zy);var By=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),a=t.call(this,e),"number"===typeof e.cropping?a.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?a.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:a.cropping=e.cropping,a.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,a.inputSpec=[{ndim:4}],a}return Qe(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return Il((function(){if(e=Rm(e),"channelsLast"===n.dataFormat){var t=jv(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return jv(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var a=jv(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return jv(a,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);By.className="Cropping2D",wl(By);var Wy=function(e){Oi(n,e);var t=Hi(n);function n(e){var a,r;return Ze(this,n),(a=t.call(this,e)).DEFAULT_SIZE=[2,2],a.inputSpec=[{ndim:4}],a.size=null==e.size?a.DEFAULT_SIZE:e.size,a.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Av(a.dataFormat),a.interpolation=null==e.interpolation?"nearest":e.interpolation,r=a.interpolation,hv(kv,"InterpolationFormat",r),a}return Qe(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var a=null==e[1]?null:this.size[0]*e[1],r=null==e[2]?null:this.size[1]*e[2];return[e[0],a,r,e[3]]}},{key:"call",value:function(e,t){var n=this;return Il((function(){var t=Rm(e),a=t.shape;if("channelsFirst"===n.dataFormat){t=Uu(t,[0,2,3,1]);var r=n.size[0]*a[2],i=n.size[1]*a[3],o="nearest"===n.interpolation?ad.resizeNearestNeighbor(t,[r,i]):ad.resizeBilinear(t,[r,i]);return Uu(o,[0,3,1,2])}var s=n.size[0]*a[1],l=n.size[1]*a[2];return"nearest"===n.interpolation?ad.resizeNearestNeighbor(t,[s,l]):ad.resizeBilinear(t,[s,l])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);Wy.className="UpSampling2D",wl(Wy);var Hy=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,2,e)).depthwiseKernel=null,a.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,a.depthwiseInitializer=Tm(e.depthwiseInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.depthwiseConstraint=lx(e.depthwiseConstraint),a.depthwiseRegularizer=py(e.depthwiseRegularizer),a}return Qe(n,[{key:"build",value:function(e){if((e=Fm(e)).length<4)throw new jg("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new jg("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],a=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",a,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Il((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return Il((function(){null==r&&(r="channelsLast"),Av(r);var o=Iy(e,r);if(4!==e.rank)throw new jg("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new jg("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=bc(o,t,n,"same"===a?"same":"valid","NHWC",i),"channelsFirst"===r&&(o=Uu(o,[0,3,1,2])),o}))}(e=Rm(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=nm(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=Fm(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],a="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,r=Sy(t,this.kernelSize[0],this.padding,this.strides[0]),i=Sy(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],a,r,i]:[e[0],r,i,a]}},{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Am(this.depthwiseInitializer),e.depthwiseRegularizer=dy(this.depthwiseRegularizer),e.depthwiseConstraint=ox(this.depthwiseRegularizer),e}}]),n}(Ry);function Vy(e,t,n,a){if(Array.isArray(e)){if(null!=t||null!=n)throw new jg("When inputs is an array, neither initialState or constants should be provided");null!=a&&(n=e.slice(e.length-a,e.length),e=e.slice(0,e.length-a)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function r(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=r(t),constants:n=r(n)}}function Uy(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return Il((function(){var l=t.shape.length;if(l<3)throw new jg("Input should be at least 3D, but is ".concat(l,"D."));var c=[1,0].concat(Wv(2,l));if(t=Uu(t,c),null!=i)throw new qg("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=r&&((r=zs(zs(r,"bool"),"float32")).rank===l-1&&(r=Ic(r,-1)),r=Uu(r,c)),a&&(t=mu(t,0),null!=r&&(r=mu(r,0)));var u,h,d=[],f=n,p=t.shape[0],g=Pu(t);null!=r&&(h=Pu(r));for(var v,m=function(t){var n=g[t],a=Il((function(){return e(n,f)}));if(null==r)u=a[0],f=a[1];else{var i=Il((function(){var e=h[t],n=zc(lu(e),e);return{output:Ll(_c(a[0],e),_c(f[0],n)),newStates:f.map((function(t,r){return Ll(_c(a[1][r],e),_c(t,n))}))}}));u=i.output,f=i.newStates}s&&d.push(u)},x=0;x<p;++x)m(x);if(s){v=Fu(d,1)}return[u,v,f]}))}Hy.className="DepthwiseConv2D",wl(Hy);var Xy=function(e){Oi(n,e);var t=Hi(n);function n(e){var a,r;if(Ze(this,n),a=t.call(this,e),null==e.cell)throw new jg("cell property is missing for the constructor of RNN.");if(null==(r=Array.isArray(e.cell)?new Qy({cells:e.cell}):e.cell).stateSize)throw new jg("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return a.cell=r,a.returnSequences=null!=e.returnSequences&&e.returnSequences,a.returnState=null!=e.returnState&&e.returnState,a.goBackwards=null!=e.goBackwards&&e.goBackwards,a._stateful=null!=e.stateful&&e.stateful,a.unroll=null!=e.unroll&&e.unroll,a.supportsMasking=!0,a.inputSpec=[new _m({ndim:3})],a.stateSpec=null,a.states_=null,a.numConstants=null,a.keptStates=[],a}return Qe(n,[{key:"getStates",value:function(){return null==this.states_?Wv(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){Nm(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,a=t[0];if(n=this.returnSequences?[e[0],e[1],a]:[e[0],a],this.returnState){var r,i=[],o=je(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push([e[0],s])}}catch(jz){o.e(jz)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return Il((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var a=n.states.map((function(e){return null}));return[e].concat(a)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new qg("Constants support is not implemented in RNN yet.");Nm(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new _m({shape:[t,null].concat(Ke(n))});var a,r=[e[0]].concat(e.slice(2));if(this.cell.build(r),a=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!dt(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),a))throw new jg("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=a.map((function(e){return new _m({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Il((function(){if(!t.stateful)throw new Gg("Cannot call resetStates() on an RNN Layer that is not stateful.");var a=t.inputSpec[0].shape[0];if(null==a)throw new jg("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return ou([a,e])})):t.states_=[ou([a,t.cell.stateSize])];else if(null==e)Al(t.states_),null!=t.keptStates&&(Al(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return ou([a,e])})):t.states_[0]=ou([a,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new jg("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):Al(t.states_);for(var r=0;r<t.states_.length;++r){var i=e[r],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[r]:t.cell.stateSize,s=[a,o];if(!dt(i.shape,s))throw new jg("State ".concat(r," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(i.shape));t.states_[r]=i}}t.states_=t.states_.map((function(e){return Tl(e.clone())}))}))}},{key:"apply",value:function(e,t){var a=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});var i=Vy(e,a,r,this.numConstants);e=i.inputs,a=i.initialState,r=i.constants;var o=[],s=[];if(null!=a){t.initialState=a,o=o.concat(a),this.stateSpec=[];var l,c=je(a);try{for(c.s();!(l=c.n()).done;){var u=l.value;this.stateSpec.push(new _m({shape:u.shape}))}}catch(jz){c.e(jz)}finally{c.f()}s=s.concat(this.stateSpec)}if(null!=r&&(t.constants=r,o=o.concat(r),this.numConstants=r.length),o[0]instanceof zm){var h=[e].concat(o),d=this.inputSpec.concat(s),f=this.inputSpec;this.inputSpec=d;var p=kx(Pi(n.prototype),"apply",this).call(this,h,t);return this.inputSpec=f,p}return kx(Pi(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Il((function(){var a=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;e=Rm(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new jg("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:r},l=Uy((function(e,t){var a=n.cell.call([e].concat(t),s);return[a[0],a.slice(1)]}),e,i,n.goBackwards,a,null,n.unroll,n.returnSequences),c=l[0],u=l[1],h=l[2];n.stateful&&n.resetStates(h,r);var d=n.returnSequences?u:c;return n.returnState?[d].concat(h):d}))}},{key:"getInitialState",value:function(e){var t=this;return Il((function(){var n=ou(e.shape);return n=Uv(n=Bc(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?Zv(n,[1,e]):n})):t.cell.stateSize>1?[Zv(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){kx(Pi(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var a=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:a}),Object.assign({},a,e,t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t.cell,r=wx(a,n);return new e(Object.assign(t,{cell:r}))}}]),n}(Vm);Xy.className="RNN",wl(Xy);var Gy=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n)}(Vm),Yy=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).DEFAULT_ACTIVATION="tanh",a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_RECURRENT_INITIALIZER="orthogonal",a.DEFAULT_BIAS_INITIALIZER="zeros",a.units=e.units,fv(a.units,"units"),a.activation=sy(null==e.activation?a.DEFAULT_ACTIVATION:e.activation),a.useBias=null==e.useBias||e.useBias,a.kernelInitializer=Tm(e.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.recurrentInitializer=Tm(e.recurrentInitializer||a.DEFAULT_RECURRENT_INITIALIZER),a.biasInitializer=Tm(e.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.kernelRegularizer=py(e.kernelRegularizer),a.recurrentRegularizer=py(e.recurrentRegularizer),a.biasRegularizer=py(e.biasRegularizer),a.kernelConstraint=lx(e.kernelConstraint),a.recurrentConstraint=lx(e.recurrentConstraint),a.biasConstraint=lx(e.biasConstraint),a.dropout=zv([1,Bv([0,null==e.dropout?0:e.dropout])]),a.recurrentDropout=zv([1,Bv([0,null==e.recurrentDropout?0:e.recurrentDropout])]),a.dropoutFunc=e.dropoutFunc,a.stateSize=a.units,a.dropoutMask=null,a.recurrentDropoutMask=null,a}return Qe(n,[{key:"build",value:function(e){e=Fm(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Il((function(){if(2!==e.length)throw new jg("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var a=e[1];e=e[0];var r,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Jy({ones:function(){return lu(e)},rate:n.dropout,training:i,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Jy({ones:function(){return lu(a)},rate:n.recurrentDropout,training:i,dropoutFunc:n.dropoutFunc}));var o=n.dropoutMask,s=n.recurrentDropoutMask;r=Qv(null!=o?_c(e,o):e,n.kernel.read()),null!=n.bias&&(r=nm(r,n.bias.read())),null!=s&&(a=_c(a,s));var l=Ll(r,Qv(a,n.recurrentKernel.read()));return null!=n.activation&&(l=n.activation.apply(l)),[l,l]}))}},{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:iy(this.activation),useBias:this.useBias,kernelInitializer:Am(this.kernelInitializer),recurrentInitializer:Am(this.recurrentInitializer),biasInitializer:Am(this.biasInitializer),kernelRegularizer:dy(this.kernelRegularizer),recurrentRegularizer:dy(this.recurrentRegularizer),biasRegularizer:dy(this.biasRegularizer),activityRegularizer:dy(this.activityRegularizer),kernelConstraint:ox(this.kernelConstraint),recurrentConstraint:ox(this.recurrentConstraint),biasConstraint:ox(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}]),n}(Gy);Yy.className="SimpleRNNCell",wl(Yy);var jy=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),e.cell=new Yy(e),t.call(this,e)}return Qe(n,[{key:"call",value:function(e,t){var a=this;return Il((function(){null!=a.cell.dropoutMask&&(Al(a.cell.dropoutMask),a.cell.dropoutMask=null),null!=a.cell.recurrentDropoutMask&&(Al(a.cell.recurrentDropoutMask),a.cell.recurrentDropoutMask=null);var r=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return kx(Pi(n.prototype),"call",a).call(a,e,{mask:r,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(Xy);jy.className="SimpleRNN",wl(jy);var qy=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),(a=t.call(this,e)).DEFAULT_ACTIVATION="tanh",a.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_RECURRENT_INITIALIZER="orthogonal",a.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new jg("GRUCell does not support reset_after parameter set to true.");return a.units=e.units,fv(a.units,"units"),a.activation=sy(void 0===e.activation?a.DEFAULT_ACTIVATION:e.activation),a.recurrentActivation=sy(void 0===e.recurrentActivation?a.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),a.useBias=null==e.useBias||e.useBias,a.kernelInitializer=Tm(e.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.recurrentInitializer=Tm(e.recurrentInitializer||a.DEFAULT_RECURRENT_INITIALIZER),a.biasInitializer=Tm(e.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.kernelRegularizer=py(e.kernelRegularizer),a.recurrentRegularizer=py(e.recurrentRegularizer),a.biasRegularizer=py(e.biasRegularizer),a.kernelConstraint=lx(e.kernelConstraint),a.recurrentConstraint=lx(e.recurrentConstraint),a.biasConstraint=lx(e.biasConstraint),a.dropout=zv([1,Bv([0,null==e.dropout?0:e.dropout])]),a.recurrentDropout=zv([1,Bv([0,null==e.recurrentDropout?0:e.recurrentDropout])]),a.dropoutFunc=e.dropoutFunc,a.implementation=e.implementation,a.stateSize=a.units,a.dropoutMask=null,a.recurrentDropoutMask=null,a}return Qe(n,[{key:"build",value:function(e){var t=(e=Fm(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Il((function(){if(2!==e.length)throw new jg("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=null!=t.training&&t.training,r=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Jy({ones:function(){return lu(e)},rate:n.dropout,training:a,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Jy({ones:function(){return lu(r)},rate:n.recurrentDropout,training:a,count:3,dropoutFunc:n.dropoutFunc}));var i,o,s,l=n.dropoutMask,c=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=_c(e,l[0]));var h=Qv(e,n.kernel.read());n.useBias&&(h=nm(h,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(r=_c(r,c[0]));var d=n.recurrentKernel.read(),f=u(Nu(d,[2*n.units,n.units],d.rank-1),2),p=f[0],g=f[1],v=Qv(r,p),m=u(Nu(h,3,h.rank-1),3),x=m[0],b=m[1],y=m[2],k=u(Nu(v,2,v.rank-1),2),w=k[0],S=k[1];i=n.recurrentActivation.apply(Ll(x,w)),o=n.recurrentActivation.apply(Ll(b,S));var C=Qv(_c(o,r),g);s=n.activation.apply(Ll(y,C));var I=Ll(_c(i,r),_c(Ll(1,au(i)),s));return[I,I]}))}},{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:iy(this.activation),recurrentActivation:iy(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Am(this.kernelInitializer),recurrentInitializer:Am(this.recurrentInitializer),biasInitializer:Am(this.biasInitializer),kernelRegularizer:dy(this.kernelRegularizer),recurrentRegularizer:dy(this.recurrentRegularizer),biasRegularizer:dy(this.biasRegularizer),activityRegularizer:dy(this.activityRegularizer),kernelConstraint:ox(this.kernelConstraint),recurrentConstraint:ox(this.recurrentConstraint),biasConstraint:ox(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}]),n}(Gy);qy.className="GRUCell",wl(qy);var Ky=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new qy(e),t.call(this,e)}return Qe(n,[{key:"call",value:function(e,t){var a=this;return Il((function(){null!=a.cell.dropoutMask&&(Al(a.cell.dropoutMask),a.cell.dropoutMask=null),null!=a.cell.recurrentDropoutMask&&(Al(a.cell.recurrentDropoutMask),a.cell.recurrentDropoutMask=null);var r=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return kx(Pi(n.prototype),"call",a).call(a,e,{mask:r,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(Xy);Ky.className="GRU",wl(Ky);var Zy=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).DEFAULT_ACTIVATION="tanh",a.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_RECURRENT_INITIALIZER="orthogonal",a.DEFAULT_BIAS_INITIALIZER="zeros",a.units=e.units,fv(a.units,"units"),a.activation=sy(void 0===e.activation?a.DEFAULT_ACTIVATION:e.activation),a.recurrentActivation=sy(void 0===e.recurrentActivation?a.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),a.useBias=null==e.useBias||e.useBias,a.kernelInitializer=Tm(e.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.recurrentInitializer=Tm(e.recurrentInitializer||a.DEFAULT_RECURRENT_INITIALIZER),a.biasInitializer=Tm(e.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.unitForgetBias=e.unitForgetBias,a.kernelRegularizer=py(e.kernelRegularizer),a.recurrentRegularizer=py(e.recurrentRegularizer),a.biasRegularizer=py(e.biasRegularizer),a.kernelConstraint=lx(e.kernelConstraint),a.recurrentConstraint=lx(e.recurrentConstraint),a.biasConstraint=lx(e.biasConstraint),a.dropout=zv([1,Bv([0,null==e.dropout?0:e.dropout])]),a.recurrentDropout=zv([1,Bv([0,null==e.recurrentDropout?0:e.recurrentDropout])]),a.dropoutFunc=e.dropoutFunc,a.implementation=e.implementation,a.stateSize=[a.units,a.units],a.dropoutMask=null,a.recurrentDropoutMask=null,a}return Qe(n,[{key:"build",value:function(e){var t,n,a=(e=Fm(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[a,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var r=this.biasInitializer,i=this.units;n=new(t=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e,t){var n=r.apply([i]),a=(new um).apply([i]),o=r.apply([2*i]);return Kv(Kv(n,a),o)}}]),n}(lm),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return Il((function(){var a=null!=t.training&&t.training;if(3!==e.length)throw new jg("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Jy({ones:function(){return lu(e)},rate:n.dropout,training:a,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Jy({ones:function(){return lu(r)},rate:n.recurrentDropout,training:a,count:4,dropoutFunc:n.dropoutFunc}));var o,s,l,c,h=n.dropoutMask,d=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=_c(e,h[0]));var f=Qv(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(r=_c(r,d[0])),f=Ll(f,Qv(r,n.recurrentKernel.read())),n.useBias&&(f=nm(f,n.bias.read()));var p=u(Nu(f,4,f.rank-1),4),g=p[0],v=p[1],m=p[2],x=p[3];o=n.recurrentActivation.apply(g),s=n.recurrentActivation.apply(v),l=Ll(_c(s,i),_c(o,n.activation.apply(m))),c=n.recurrentActivation.apply(x);var b=_c(c,n.activation.apply(l));return[b,b,l]}))}},{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:iy(this.activation),recurrentActivation:iy(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Am(this.kernelInitializer),recurrentInitializer:Am(this.recurrentInitializer),biasInitializer:Am(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:dy(this.kernelRegularizer),recurrentRegularizer:dy(this.recurrentRegularizer),biasRegularizer:dy(this.biasRegularizer),activityRegularizer:dy(this.activityRegularizer),kernelConstraint:ox(this.kernelConstraint),recurrentConstraint:ox(this.recurrentConstraint),biasConstraint:ox(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}]),n}(Gy);Zy.className="LSTMCell",wl(Zy);var $y=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Zy(e),t.call(this,e)}return Qe(n,[{key:"call",value:function(e,t){var a=this;return Il((function(){null!=a.cell.dropoutMask&&(Al(a.cell.dropoutMask),a.cell.dropoutMask=null),null!=a.cell.recurrentDropoutMask&&(Al(a.cell.recurrentDropoutMask),a.cell.recurrentDropoutMask=null);var r=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return kx(Pi(n.prototype),"call",a).call(a,e,{mask:r,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(Xy);$y.className="LSTM",wl($y);var Qy=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).cells=e.cells,a}return Qe(n,[{key:"stateSize",get:function(){var e,t=[],n=je(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var a=e.value;Array.isArray(a.stateSize)?t.push.apply(t,Ke(a.stateSize)):t.push(a.stateSize)}}catch(jz){n.e(jz)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return Il((function(){var a,r=e.slice(1),i=[],o=je(n.cells.slice().reverse());try{for(o.s();!(a=o.n()).done;){var s=a.value;Array.isArray(s.stateSize)?i.push(r.splice(0,s.stateSize.length)):i.push(r.splice(0,1))}}catch(jz){o.e(jz)}finally{o.f()}i.reverse();for(var l,c=[],u=0;u<n.cells.length;++u){var h=n.cells[u];r=i[u],l=0===u?[e[0]].concat(r):[l[0]].concat(r),l=h.call(l,t),c.push(l.slice(1))}r=[];var d,f=je(c.slice().reverse());try{for(f.s();!(d=f.n()).done;){var p,g=d.value;(p=r).push.apply(p,Ke(g))}}catch(jz){f.e(jz)}finally{f.f()}return[l[0]].concat(r)}))}},{key:"build",value:function(e){var t;Nm(e)&&(e=e[0]),this.cells.forEach((function(n,a){Rv("RNNCell_".concat(a),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign({},e,t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=je(this.cells);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push.apply(t,Ke(a.trainableWeights))}}catch(jz){n.e(jz)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=je(this.cells);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push.apply(t,Ke(a.nonTrainableWeights))}}catch(jz){n.e(jz)}finally{n.f()}if(!this.trainable){var r,i=[],o=je(this.cells);try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push.apply(i,Ke(s.trainableWeights))}}catch(jz){o.e(jz)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=je(this.cells);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push.apply(t,Ke(a.weights))}}catch(jz){n.e(jz)}finally{n.f()}return Om(t)}},{key:"setWeights",value:function(e){var t,n=[],a=je(this.cells);try{for(a.s();!(t=a.n()).done;)for(var r=t.value,i=r.weights.length,o=e.splice(i),s=0;s<r.weights.length;++s)n.push([r.weights[s],o[s]])}catch(jz){a.e(jz)}finally{a.f()}Pm(n)}}],[{key:"fromConfig",value:function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],i=je(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.push(wx(o,a))}}catch(jz){i.e(jz)}finally{i.f()}return new e({cells:r})}}]),n}(Gy);function Jy(e){var t=e.ones,n=e.rate,a=e.training,r=void 0!==a&&a,i=e.count,o=void 0===i?1:i,s=e.dropoutFunc,l=function(){return null!=s?s(t(),n):rm(t(),n)},c=function(){return im(l,t,r)};return!o||o<=1?Tl(c().clone()):Array(o).fill(void 0).map(c).map((function(e){return Tl(e.clone())}))}Qy.className="StackedRNNCells",wl(Qy);var ek=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},tk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),e.unroll)throw new qg("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new qg("It is not possible at the moment to stack convolutional cells.");return(a=t.call(this,e)).inputSpec=[new _m({ndim:5})],a}return Qe(n,[{key:"call",value:function(e,t){var a=this;return Il((function(){if(null!=a.cell.dropoutMask&&(Al(a.cell.dropoutMask),a.cell.dropoutMask=null),null!=a.cell.recurrentDropoutMask&&(Al(a.cell.recurrentDropoutMask),a.cell.recurrentDropoutMask=null),t&&t.constants)throw new jg("ConvRNN2D cell does not support constants");var r=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return kx(Pi(n.prototype),"call",a).call(a,e,{mask:r,training:i,initialState:o})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat(Ke(t.slice(2)))),this.returnState&&(t=[t].concat(Ke(Array(2).fill([e[0]].concat(Ke(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return Il((function(){var n=t.cell.stateSize,a=e.shape,r=t.computeSingleOutputShape(a),i=ou([r[0]].concat(Ke(r.slice(2))));return Array.isArray(n)?Array(n.length).fill(i):[i]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Il((function(){if(!t.stateful)throw new Gg("Cannot call resetStates() on an RNN Layer that is not stateful.");var a=t.inputSpec[0].shape,r=t.computeSingleOutputShape(a),i=[r[0]].concat(Ke(r.slice(2)));if(null==a[0])throw new jg("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return ou(i)})):t.states_=[ou(i)];else if(null==e)Al(t.states_),null!=t.keptStates&&(Al(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return ou(i)})):t.states_[0]=ou(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new jg("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):Al(t.states_);for(var o=0;o<t.states_.length;++o){var s=e[o],l=i;if(!dt(s.shape,l))throw new jg("State ".concat(o," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(l,", received shape=").concat(s.shape));t.states_[o]=s}}t.states_=t.states_.map((function(e){return Tl(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,a=t.filters,r=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,l="channelsFirst"===n,c=e[l?3:2],u=e[l?4:3],h=Sy(c,r[0],i,o[0],s[0]),d=Sy(u,r[1],i,o[1],s[1]);return[].concat(Ke(e.slice(0,2)),Ke(l?[a,h,d]:[h,d,a]))}}]),n}(Xy);tk.className="ConvRNN2D";var nk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;Ze(this,n);var r=e.filters,i=e.kernelSize,o=e.strides,s=e.padding,l=e.dataFormat,c=e.dilationRate;return(a=t.call(this,Object.assign({},e,{units:r}))).filters=r,fv(a.filters,"filters"),a.kernelSize=wy(i,2,"kernelSize"),a.kernelSize.forEach((function(e){return fv(e,"kernelSize")})),a.strides=wy(o||1,2,"strides"),a.strides.forEach((function(e){return fv(e,"strides")})),a.padding=s||"valid",Tv(a.padding),a.dataFormat=l||"channelsLast",Av(a.dataFormat),a.dilationRate=wy(c||1,2,"dilationRate"),a.dilationRate.forEach((function(e){return fv(e,"dilationRate")})),a}return Qe(n,[{key:"build",value:function(e){var t;e=Fm(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new jg("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var a=e[n],r=this.kernelSize.concat([a,4*this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var s=this.biasInitializer,l=this.filters;o=new(t=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e,t){return qv([s.apply([l]),su([l]),s.apply([2*l])])}}]),n}(lm),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return Il((function(){if(3!==e.length)throw new jg("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=t.training||!1,r=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Jy({ones:function(){return lu(r)},rate:n.dropout,training:a,count:4,dropoutFunc:n.dropoutFunc}));var s=n.dropoutMask,l=function(e,t,n){return t&&t[n]?_c(t[n],e):e},c=l(r,s,0),h=l(r,s,1),d=l(r,s,2),f=l(r,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Jy({ones:function(){return lu(i)},rate:n.recurrentDropout,training:a,count:4,dropoutFunc:n.dropoutFunc}));var p=n.recurrentDropoutMask,g=l(i,p,0),v=l(i,p,1),m=l(i,p,2),x=l(i,p,3),b=u(Nu(n.kernel.read(),4,3),4),y=b[0],k=b[1],w=b[2],S=b[3],C=u(n.useBias?Nu(n.bias.read(),4):[null,null,null,null],4),I=C[0],A=C[1],T=C[2],N=C[3];c=n.inputConv(c,y,I,n.padding),h=n.inputConv(h,k,A,n.padding),d=n.inputConv(d,w,T,n.padding),f=n.inputConv(f,S,N,n.padding);var E=u(Nu(n.recurrentKernel.read(),4,3),4),R=E[0],F=E[1],D=E[2],L=E[3];g=n.recurrentConv(g,R),v=n.recurrentConv(v,F),m=n.recurrentConv(m,D),x=n.recurrentConv(x,L);var M=n.recurrentActivation.apply(Ll(c,g)),O=n.recurrentActivation.apply(Ll(h,v)),P=Ll(_c(O,o),_c(M,n.activation.apply(Ll(d,m)))),_=_c(n.recurrentActivation.apply(Ll(f,x)),n.activation.apply(P));return[_,_,P]}))}},{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this),t=(e.units,ek(e,["units"])),a={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},t,a)}},{key:"inputConv",value:function(e,t,n,a){var r=dc(e,t,this.strides,a||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?nm(r,n,this.dataFormat):r}},{key:"recurrentConv",value:function(e,t){return dc(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(Zy);nk.className="ConvLSTM2DCell",wl(nk);var ak=function(e){Oi(n,e);var t=Hi(n);function n(e){Ze(this,n);var a=new nk(e);return t.call(this,Object.assign({},e,{cell:a}))}return Qe(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(tk);ak.className="ConvLSTM2D",wl(ak);var rk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),a.noiseShape=e.noiseShape,a.seed=e.seed,a.supportsMasking=!0,a}return Qe(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],a=0;a<this.noiseShape.length;++a)n.push(null==this.noiseShape[a]?t[a]:this.noiseShape[a]);return n}},{key:"call",value:function(e,t){var n=this;return Il((function(){n.invokeCallHook(e,t);var a=Rm(e);if(0<n.rate&&n.rate<1){var r=null!=t.training&&t.training,i=n.getNoiseShape(a);return im((function(){return rm(a,n.rate,i,n.seed)}),(function(){return a}),r)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return kx(Pi(n.prototype),"dispose",this).call(this)}}]),n}(Vm);rk.className="Dropout",wl(rk);var ik=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).inputSpec=[{ndim:3}],a}return Qe(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(rk);ik.className="SpatialDropout1D",wl(ik);var ok=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),(a=t.call(this,e)).activation=null,a.useBias=!0,a.kernel=null,a.bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var r=null;null!=e.batchSize&&(r=e.batchSize),a.batchInputShape=[r,e.inputDim]}return a.units=e.units,fv(a.units,"units"),a.activation=sy(e.activation),null!=e.useBias&&(a.useBias=e.useBias),a.kernelInitializer=Tm(e.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.biasInitializer=Tm(e.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.kernelConstraint=lx(e.kernelConstraint),a.biasConstraint=lx(e.biasConstraint),a.kernelRegularizer=py(e.kernelRegularizer),a.biasRegularizer=py(e.biasRegularizer),a.activityRegularizer=py(e.activityRegularizer),a.supportsMasking=!0,a.inputSpec=[{minNDim:2}],a}return Qe(n,[{key:"build",value:function(e){var t=(e=Fm(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:ky({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=Fm(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return Il((function(){n.invokeCallHook(e,t);var a,r=Rm(e),i=gv(n.activation.getClassName());return null!=i?a=Qv(r,n.kernel.read(),i,n.bias?n.bias.read():null):(a=Qv(r,n.kernel.read()),null!=n.bias&&(a=nm(a,n.bias.read())),null!=n.activation&&(a=n.activation.apply(a))),a}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:iy(this.activation),useBias:this.useBias,kernelInitializer:Am(this.kernelInitializer),biasInitializer:Am(this.biasInitializer),kernelRegularizer:dy(this.kernelRegularizer),biasRegularizer:dy(this.biasRegularizer),activityRegularizer:dy(this.activityRegularizer),kernelConstraint:ox(this.kernelConstraint),biasConstraint:ox(this.biasConstraint)},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);ok.className="Dense",wl(ok);var sk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),e=e||{},(a=t.call(this,e)).inputSpec=[{minNDim:3}],a.dataFormat=e.dataFormat,a}return Qe(n,[{key:"computeOutputShape",value:function(e){var t,n=je((e=Fm(e)).slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new jg('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(jz){n.e(jz)}finally{n.f()}return[e[0],_v(e,1)]}},{key:"call",value:function(e,t){var n=this;return Il((function(){n.invokeCallHook(e,t);var a=Rm(e);if("channelsFirst"===n.dataFormat&&a.rank>1){for(var r=[0],i=2;i<a.rank;++i)r.push(i);r.push(1),a=Uu(a,r)}return function(e){if(e.rank<=1)throw new jg("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],_v(e.shape,1)];return Jl(e,t)}(a)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);sk.className="Flatten",wl(sk);var lk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).supportsMasking=!0,a.activation=sy(e.activation),a}return Qe(n,[{key:"call",value:function(e,t){var n=this;return Il((function(){n.invokeCallHook(e,t);var a=Rm(e);return n.activation.apply(a)}))}},{key:"getConfig",value:function(){var e={activation:iy(this.activation)},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);lk.className="Activation",wl(lk);var ck=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).n=e.n,a.inputSpec=[{ndim:2}],a}return Qe(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return Il((function(){return function(e,t){return Il((function(){if(2!==e.shape.length)throw new jg("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(e.shape.length," tensor."));return Zv(Uv(e,1),[1,t,1])}))}(e=Rm(e),n.n)}))}},{key:"getConfig",value:function(){var e={n:this.n},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);ck.className="RepeatVector",wl(ck);var uk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;Ze(this,n),(a=t.call(this,e)).targetShape=e.targetShape;for(var r=0;r<a.targetShape.length;++r)a.isUnknown(a.targetShape[r])&&(a.targetShape[r]=null);return a}return Qe(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",a=t.slice(),r=1,i=null,o=0;o<a.length;++o){var s=a[o];if(this.isUnknown(s)){if(null!==i)throw new jg("Can only specifiy one unknown dimension.");i=o}else r*=s}var l=_v(e);if(null!==i){if(0===r||l%r!==0)throw new jg(n);a[i]=l/r}else if(l!==r)throw new jg(n);return a}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return Il((function(){n.invokeCallHook(e,t);var a=Rm(e),r=a.shape,i=r.slice(0,1).concat(n.fixUnknownDimension(r.slice(1),n.targetShape));return Jl(a,i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);uk.className="Reshape",wl(uk);var hk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),a=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var r=Wv(1,e.dims.length+1);if(!dt(e.dims.slice().sort(),r))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return a.dims=e.dims,a.dimsIncludingBatch=[0].concat(a.dims),a.inputSpec=[new _m({ndim:a.dims.length+1})],a}return Qe(n,[{key:"computeOutputShape",value:function(e){var t=(e=Fm(e)).slice();return this.dims.forEach((function(n,a){t[a+1]=e[n]})),t}},{key:"call",value:function(e,t){return Uu(Rm(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);hk.className="Permute",wl(hk);var dk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,null==e?{}:e)).supportsMasking=!0,a.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,a}return Qe(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=Rm(e);return Ol(ru(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return Il((function(){n.invokeCallHook(e,t);var a=Rm(e),r=Ol(ru(a,n.maskValue),-1,!0);return _c(a,zs(r,a.dtype))}))}}]),n}(Vm);dk.className="Masking",wl(dk);var fk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),(a=t.call(this,e)).embeddings=null,a.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var r=null;null!=e.batchSize&&(r=e.batchSize),null==e.inputLength?a.batchInputShape=[r,null]:a.batchInputShape=[r].concat(tv(e.inputLength))}return a.inputDim=e.inputDim,fv(a.inputDim,"inputDim"),a.outputDim=e.outputDim,fv(a.outputDim,"outputDim"),a.embeddingsInitializer=Tm(e.embeddingsInitializer||a.DEFAULT_EMBEDDINGS_INITIALIZER),a.embeddingsRegularizer=py(e.embeddingsRegularizer),a.activityRegularizer=py(e.activityRegularizer),a.embeddingsConstraint=lx(e.embeddingsConstraint),a.maskZero=e.maskZero,a.supportsMasking=e.maskZero,a.inputLength=e.inputLength,a}return Qe(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return Il((function(){return n.maskZero?(e=Rm(e),ru(e,Wu(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=Fm(e),null==this.inputLength)return[].concat(Ke(e),[this.outputDim]);var t=tv(this.inputLength);if(t.length!==e.length-1)throw new jg('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,a=0;a<t.length;++a){var r=t[a],i=e[a+1];if(null!=r&&null!=i&&r!==i)throw new jg('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==r&&(t[n]=i),n++}return[e[0]].concat(Ke(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return Il((function(){n.invokeCallHook(e,t);var a=Rm(e);"int32"!==a.dtype&&(a=Vv(a,"int32"));var r=Jv(n.embeddings.read(),Jl(a,[a.size]));return Jl(r,Fm(n.computeOutputShape(a.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Am(this.embeddingsInitializer),embeddingsRegularizer:dy(this.embeddingsRegularizer),activityRegularizer:dy(this.activityRegularizer),embeddingsConstraint:ox(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);fk.className="Embedding",wl(fk);var pk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e||{})).supportsMasking=!0,a}return Qe(n,[{key:"mergeFunction",value:function(e){throw new qg}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),a=0;a<t.length;++a){var r=e[e.length-t.length+a],i=t[a];if(null==r||null==i||r<0||i<0)n.push(null);else if(1===r)n.push(i);else if(1===i)n.push(r);else{if(r!==i)throw new jg("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(r)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Fm(e)]),e.length<2)throw new jg("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],a=je(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;null!=r&&null!==r[0]&&n.push(r[0])}}catch(jz){a.e(jz)}finally{a.f()}if((n=cv(n)).length>1)throw new jg("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var l=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===cv(l).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return Il((function(){if(n.reshapeRequired){var t=[],a=e.map((function(e){return e.rank}));if(-1===a.indexOf(null)){var r,i=Bv(a),o=je(e);try{for(o.s();!(r=o.n()).done;){for(var s=r.value,l=s.rank,c=0;c<i-l;++c)s=Uv(s,1);t.push(s)}}catch(jz){o.e(jz)}finally{o.f()}return n.mergeFunction(t)}var u,h=!1,d=je(e);try{for(d.s();!(u=d.n()).done;){var f=u.value,p=f.rank;if(null==p){var g=f.shape,v=g[0],m=g.slice(1).concat([v]),x=Jl(f,[v].concat(_v(g.slice(1))));x=Uu(x,[1,0]),x=Jl(x,m),t.push(x),h=!0}else if(p>1){var b=Wv(1,p).concat([0]);t.push(Uu(f,b)),h=!0}else t.push(f)}}catch(jz){d.e(jz)}finally{d.f()}var y=n.mergeFunction(t),k=y.rank;if(h)if(null==k){var w=y.shape,S=w[w.length-1],C=[S].concat(w.slice(0,w.length-1));y=Jl(Uu(Jl(y,[-1,S]),[1,0]),C)}else if(k>1){var I=[k-1].concat(Wv(0,k-1));y=Uu(y,I)}return y}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var a=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,a)}var r,i=[],o=je(e);try{for(o.s();!(r=o.n()).done;){var s=r.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(jz){o.e(jz)}finally{o.f()}return t=1===(i=cv(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return Il((function(){if(null==t)return null;if(!Array.isArray(t))throw new jg("`mask` should be an Array");if(!Array.isArray(e))throw new jg("`inputs` should be an Array");if(t.length!==e.length)throw new jg("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:Ic(e,0)})))[0],a=1;a<t.length-1;++a)n=Hc(n,t[a]);return n}))}}]),n}(Vm),gk=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,e)}return Qe(n,[{key:"mergeFunction",value:function(e){return Il((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Ll(t,e[n]);return t}))}}]),n}(pk);gk.className="Add",wl(gk);var vk=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,e)}return Qe(n,[{key:"mergeFunction",value:function(e){return Il((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=_c(t,e[n]);return t}))}}]),n}(pk);vk.className="Multiply",wl(vk);var mk=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,e)}return Qe(n,[{key:"mergeFunction",value:function(e){return Il((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Ll(t,e[n]);return _c(1/e.length,t)}))}}]),n}(pk);mk.className="Average",wl(mk);var xk=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,e)}return Qe(n,[{key:"mergeFunction",value:function(e){return Il((function(){for(var t=e[0],n=1;n<e.length;++n)t=Gc(t,e[n]);return t}))}}]),n}(pk);xk.className="Maximum",wl(xk);var bk=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,e)}return Qe(n,[{key:"mergeFunction",value:function(e){return Il((function(){for(var t=e[0],n=1;n<e.length;++n)t=jc(t,e[n]);return t}))}}]),n}(pk);bk.className="Minimum",wl(bk);var yk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),a.axis=null==e.axis?a.DEFAULT_AXIS:e.axis,a.supportsMasking=!0,a.reshapeRequired=!1,a}return Qe(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new jg("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,a=je(e);try{for(a.s();!(t=a.n()).done;){if(null!=t.value){n=!1;break}}}catch(jz){a.e(jz)}finally{a.f()}if(!n){for(var r=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);var s,l=!1,c=je(r);try{for(c.s();!(s=c.n()).done;){if(dt(s.value,o)){l=!0;break}}}catch(jz){c.e(jz)}finally{c.f()}l||r.push(o)}if(r.length>1)throw new jg("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return Il((function(){return qv(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new jg("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,a=n[0].slice(),r=this.axis<0?a.length+this.axis:this.axis,i=je(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==a[r]||null==o[r]){a[r]=null;break}a[r]+=o[r]}}catch(jz){i.e(jz)}finally{i.f()}return a}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new jg("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new jg("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new jg("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return Il((function(){var a=!0;if(t.forEach((function(e){null==e||(a=!1)})),a)return null;for(var r=[],i=0;i<e.length;++i)null==t[i]?r.push(zs(lu(e[i]),"bool")):t[i].rank<e[i].rank?r.push(Ic(t[i],-1)):r.push(t[i]);var o=sc(r,n.axis);return Ml(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pk);function kk(e,t){for(;e<0;)e+=t;return e}yk.className="Concatenate",wl(yk);var wk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).axes=e.axes,a.normalize=null!=e.normalize&&e.normalize,a.supportsMasking=!0,a.reshapeRequired=!1,a}return Qe(n,[{key:"build",value:function(e){st(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new qg("Dot layer does not support tensors of 4D or higher rank yet.");var a=this.interpretAxes(t,n);if(t[a[0]]!==n[a[1]])throw new jg("Dimension incompatibility: "+"".concat(t[a[0]]," !== ").concat(n[a[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new jg("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],a=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return kk(t,e[n].shape.length)})):[kk(this.axes,n.shape.length),kk(this.axes,a.shape.length)],this.normalize&&(n=Sx(n,t[0]),a=Sx(a,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new qg("batchDot is not implemented for tensors of 4D or higher rank yet");if(st(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),st(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new qg("batchDot is not implemented for complex64-type Tensors yet.");var a=e.shape.length,r=t.shape.length;null==n&&(n=[a-1,r-2]);var i=n;return Il((function(){var n,o;if(a>r){n=a-r;for(var s=[],l=0;l<n;++l)s.push(1);t=Jl(t,t.shape.concat(s))}else if(r>a){n=r-a;for(var c=[],u=0;u<n;++u)c.push(1);e=Jl(e,e.shape.concat(c))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?Bc(_c(e,t),i[0]):Bc(_c(Uu(e,[1,0]),t),i[1]);else{var h=i[0]!==e.shape.length-1,d=i[1]===t.shape.length-1;o=Vc(e,t,h,d)}if(n>0){for(var f,p=[],g=f=a>r?a+r-3:a-1;g<f+n;++g)p.push(g);o=Ru(o,p)}return 1===o.shape.length&&(o=Ic(o,1)),o}))}(n,a,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[kk(this.axes,e.length),kk(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){st(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new qg("Dot layer does not support tensors of 4D or higher rank yet.");var a=this.interpretAxes(t,n);t.splice(a[0],1),n.splice(a[1],1),n.splice(0,1);var r=t.concat(n);return 1===r.length&&r.push(1),r}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pk);wk.className="Dot",wl(wk);var Sk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).supportsMasking=!0,a.stddev=e.stddev,a}return Qe(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Il((function(){n.invokeCallHook(e,t);var a=Rm(e);return im((function(){return Ll($v(a.shape,0,n.stddev),a)}),(function(){return a}),t.training||!1)}))}}]),n}(Vm);Sk.className="GaussianNoise",wl(Sk);var Ck=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).supportsMasking=!0,a.rate=e.rate,a}return Qe(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Il((function(){n.invokeCallHook(e,t);var a=Rm(e);if(n.rate>0&&n.rate<1){return im((function(){var e=Math.sqrt(n.rate/(1-n.rate));return _c(a,$v(a.shape,1,e))}),(function(){return a}),t.training||!1)}return a}))}}]),n}(Vm);Ck.className="GaussianDropout",wl(Ck);var Ik=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).supportsMasking=!0,a.rate=e.rate,a.noiseShape=e.noiseShape,a}return Qe(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||Rm(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=kx(Pi(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Il((function(){if(n.rate<1&&n.rate>0){var a=n._getNoiseShape(e);return im((function(){var t=Rm(e),r=-1.7580993408473766,i=Dc(gu(a),n.rate);i=Vv(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(r,2)),-.5),s=-o*r*n.rate,l=Ll(_c(t,i),_c(Ll(i,-1),r));return Ll(_c(l,o),s)}),(function(){return Rm(e)}),t.training||!1)}return e}))}}]),n}(Vm);function Ak(e,t,n,a,r){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=ac(e,t,n,a,r,o);else if(3===e.rank)i=rc(e,t,n,a,r,o);else{if(4!==e.rank)throw new qg("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=ic(e,t,n,a,r,o)}return i}function Tk(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Il((function(){var i=nu(e,a),o=i.mean,s=i.variance;return[Ak(e,o,s,n,t,r),o,s]}))}function Nk(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Il((function(){var i,o=nu(e,a),s=o.mean,l=o.variance,c=[],u=je(Wv(0,e.rank));try{for(u.s();!(i=u.n()).done;){var h=i.value;-1!==a.indexOf(h)?c.push(1):c.push(e.shape[h])}}catch(jz){u.e(jz)}finally{u.f()}var d=Jl(s,c),f=Jl(l,c),p=null==t?null:Jl(t,c),g=null==n?null:Jl(n,c);return[Ak(e,d,f,g,p,r),s,l]}))}Ik.className="AlphaDropout",wl(Ik);var Ek=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),null==e&&(e={}),(a=t.call(this,e)).supportsMasking=!0,a.axis=null==e.axis?-1:e.axis,a.momentum=null==e.momentum?.99:e.momentum,a.epsilon=null==e.epsilon?.001:e.epsilon,a.center=null==e.center||e.center,a.scale=null==e.scale||e.scale,a.betaInitializer=Tm(e.betaInitializer||"zeros"),a.gammaInitializer=Tm(e.gammaInitializer||"ones"),a.movingMeanInitializer=Tm(e.movingMeanInitializer||"zeros"),a.movingVarianceInitializer=Tm(e.movingVarianceInitializer||"ones"),a.betaConstraint=lx(e.betaConstraint),a.gammaConstraint=lx(e.gammaConstraint),a.betaRegularizer=py(e.betaRegularizer),a.gammaRegularizer=py(e.gammaRegularizer),a}return Qe(n,[{key:"build",value:function(e){e=Fm(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new jg("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new _m({ndim:e.length,axes:ky({},t,n)})];var a=[n];this.scale&&(this.gamma=this.addWeight("gamma",a,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",a,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",a,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",a,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return Il((function(){var a=null!=t.training&&t.training,r=Rm(e),i=r.shape,o=i.length,s=Wv(0,o),l=n.axis>=0?n.axis:n.axis+o;s.splice(l,1);var c=$g(1,o);c[l]=i[l];var h=s.slice();h.sort();var d=!dt(h,Wv(0,o).slice(0,o-1));if(!a)return function(){if(d){var e=Jl(n.movingMean.read(),c),t=Jl(n.movingVariance.read(),c),a=n.center?Jl(n.beta.read(),c):null,i=n.scale?Jl(n.gamma.read(),c):null;return Ak(r,e,t,a,i,n.epsilon)}return Ak(r,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var f=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return dt(a.slice().sort(),Wv(0,e.rank-1))?Tk(e,t,n,a,r):Nk(e,t,n,a,r)}(r,n.gamma.read(),n.beta.read(),s,n.epsilon),p=u(f,3),g=p[0],v=p[1],m=p[2],x=function(e,t,n){Il((function(){var a=1-n,r=e.read(),i=_c(zc(r,t),a);e.write(zc(r,i))}))};return x(n.movingMean,v,n.momentum),x(n.movingVariance,m,n.momentum),g}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Am(this.betaInitializer),gammaInitializer:Am(this.gammaInitializer),movingMeanInitializer:Am(this.movingMeanInitializer),movingVarianceInitializer:Am(this.movingVarianceInitializer),betaRegularizer:dy(this.betaRegularizer),gammaRegularizer:dy(this.gammaRegularizer),betaConstraint:ox(this.betaConstraint),gammaConstraint:ox(this.gammaConstraint)},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);Ek.className="BatchNormalization",wl(Ek);var Rk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),null==e&&(e={}),(a=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof a.axis){if(!Number.isInteger(a.axis))throw new Error("Expected axis to be an integer, but received ".concat(a.axis))}else{if(!Array.isArray(a.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(a.axis)));var r,i=je(a.axis);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(a.axis)))}}catch(jz){i.e(jz)}finally{i.f()}}return a.epsilon=null==e.epsilon?.001:e.epsilon,a.center=null==e.center||e.center,a.scale=null==e.scale||e.scale,a.betaInitializer=Tm(e.betaInitializer||"zeros"),a.gammaInitializer=Tm(e.gammaInitializer||"ones"),a.betaRegularizer=py(e.betaRegularizer),a.gammaRegularizer=py(e.gammaRegularizer),a.supportsMasking=!0,a}return Qe(n,[{key:"build",value:function(e){var t=(e=Fm(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var a,r=je(this.axis);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(jz){r.e(jz)}finally{r.f()}if(this.axis.length!==cv(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,a=Rm(e),r=a.shape,i=r.length;return Il((function(){var e,t=nu(a,n.axis,!0),o=t.mean,s=t.variance,l=$g(1,i),c=je(n.axis);try{for(c.s();!(e=c.n()).done;){var u=e.value;l[u]=r[u]}}catch(jz){c.e(jz)}finally{c.f()}for(var h=function(e){return null!=e&&e.shape.length!==i?Jl(e,l):e},d=n.scale?h(n.gamma.read()):null,f=n.center?h(n.beta.read()):null,p=[],g=[],v=0;v<i;++v)-1!==n.axis.indexOf(v)?(p.push(r[v]),g.push(1)):(p.push(1),g.push(r[v]));return o=Ac(o,p),s=Ac(s,p),null!=d&&(d=Ac(d,g)),null!=f&&(f=Ac(f,g)),Ak(a,o,s,f,d,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Am(this.betaInitializer),gammaInitializer:Am(this.gammaInitializer),betaRegularizer:dy(this.betaRegularizer),gammaRegularizer:dy(this.gammaRegularizer)},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);Rk.className="LayerNormalization",wl(Rk);var Fk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),null==e&&(e={}),(a=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)a.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)a.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new jg("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var r,i;if("number"===typeof e.padding[0])r=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new jg("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(r=e.padding[0],2!==e.padding[1].length)throw new jg("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}a.padding=[r,i]}return a.inputSpec=[new _m({ndim:4})],a}return Qe(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=Fm(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return Il((function(){return function(e,t,n){return Il((function(){if(4!==e.rank)throw new jg("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new jg("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new jg("Unknown data format: ".concat(n,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var a;return a="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],cu(e,a)}))}(Rm(e),n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm);function Dk(e,t,n,a,r,i){return Il((function(){var o;Av(r),Nv(i),Tv(a),null==n&&(n=[1,1]),null==a&&(a="valid"),null==r&&(r="channelsLast"),null==i&&(i="max"),e=Iy(e,r);var s="same"===a?"same":"valid";return o="max"===i?Uc(e,t,n,s):ec(e,t,n,s),"channelsFirst"===r&&(o=Uu(o,[0,3,1,2])),o}))}function Lk(e,t,n,a,r,i){return Il((function(){var o;Av(r),Nv(i),Tv(a),null==n&&(n=[1,1,1]),null==a&&(a="valid"),null==r&&(r="channelsLast"),null==i&&(i="max"),e=Ay(e,r);var s="same"===a?"same":"valid";return o="max"===i?Xc(e,t,n,s):tc(e,t,n,s),"channelsFirst"===r&&(o=Uu(o,[0,4,1,2,3])),o}))}Fk.className="ZeroPadding2D",wl(Fk);var Mk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),null==e.poolSize&&(e.poolSize=2),a=t.call(this,e),"number"===typeof e.poolSize)a.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new jg("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));a.poolSize=e.poolSize}if(fv(a.poolSize,"poolSize"),null==e.strides)a.strides=a.poolSize;else if("number"===typeof e.strides)a.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new jg("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));a.strides=e.strides}return fv(a.strides,"strides"),a.padding=null==e.padding?"valid":e.padding,Tv(a.padding),a.inputSpec=[new _m({ndim:3})],a}return Qe(n,[{key:"computeOutputShape",value:function(e){var t=Sy((e=Fm(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return Il((function(){n.invokeCallHook(e,t),e=Uv(Rm(e),2);var a=n.poolingFunction(Rm(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return Ru(a,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm),Ok=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,e)}return Qe(n,[{key:"poolingFunction",value:function(e,t,n,a,r){return Av(r),Tv(a),Dk(e,t,n,a,r,"max")}}]),n}(Mk);Ok.className="MaxPooling1D",wl(Ok);var Pk=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,e)}return Qe(n,[{key:"poolingFunction",value:function(e,t,n,a,r){return Av(r),Tv(a),Dk(e,t,n,a,r,"avg")}}]),n}(Mk);Pk.className="AveragePooling1D",wl(Pk);var _k=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(a=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)a.strides=a.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new jg("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));a.strides=e.strides}else a.strides=[e.strides,e.strides];return fv(a.poolSize,"poolSize"),fv(a.strides,"strides"),a.padding=null==e.padding?"valid":e.padding,a.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Av(a.dataFormat),Tv(a.padding),a.inputSpec=[new _m({ndim:4})],a}return Qe(n,[{key:"computeOutputShape",value:function(e){e=Fm(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=Sy(t,this.poolSize[0],this.padding,this.strides[0]),n=Sy(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return Il((function(){return n.invokeCallHook(e,t),n.poolingFunction(Rm(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm),zk=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,e)}return Qe(n,[{key:"poolingFunction",value:function(e,t,n,a,r){return Av(r),Tv(a),Dk(e,t,n,a,r,"max")}}]),n}(_k);zk.className="MaxPooling2D",wl(zk);var Bk=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,e)}return Qe(n,[{key:"poolingFunction",value:function(e,t,n,a,r){return Av(r),Tv(a),Dk(e,t,n,a,r,"avg")}}]),n}(_k);Bk.className="AveragePooling2D",wl(Bk);var Wk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;if(Ze(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(a=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)a.strides=a.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new jg("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));a.strides=e.strides}else a.strides=[e.strides,e.strides,e.strides];return fv(a.poolSize,"poolSize"),fv(a.strides,"strides"),a.padding=null==e.padding?"valid":e.padding,a.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Av(a.dataFormat),Tv(a.padding),a.inputSpec=[new _m({ndim:5})],a}return Qe(n,[{key:"computeOutputShape",value:function(e){e=Fm(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],a="channelsFirst"===this.dataFormat?e[4]:e[3];return t=Sy(t,this.poolSize[0],this.padding,this.strides[0]),n=Sy(n,this.poolSize[1],this.padding,this.strides[1]),a=Sy(a,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,a]:[e[0],t,n,a,e[4]]}},{key:"call",value:function(e,t){var n=this;return Il((function(){return n.invokeCallHook(e,t),n.poolingFunction(Rm(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm),Hk=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,e)}return Qe(n,[{key:"poolingFunction",value:function(e,t,n,a,r){return Av(r),Tv(a),Lk(e,t,n,a,r,"max")}}]),n}(Wk);Hk.className="MaxPooling3D",wl(Hk);var Vk=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,e)}return Qe(n,[{key:"poolingFunction",value:function(e,t,n,a,r){return Av(r),Tv(a),Lk(e,t,n,a,r,"avg")}}]),n}(Wk);Vk.className="AveragePooling3D",wl(Vk);var Uk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).inputSpec=[new _m({ndim:3})],a}return Qe(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new qg}}]),n}(Vm),Xk=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,e||{})}return Qe(n,[{key:"call",value:function(e,t){return Il((function(){var t=Rm(e);return Yc(t,1)}))}}]),n}(Uk);Xk.className="GlobalAveragePooling1D",wl(Xk);var Gk=function(e){Oi(n,e);var t=Hi(n);function n(e){return Ze(this,n),t.call(this,e||{})}return Qe(n,[{key:"call",value:function(e,t){return Il((function(){var t=Rm(e);return Pc(t,1)}))}}]),n}(Uk);Gk.className="GlobalMaxPooling1D",wl(Gk);var Yk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Av(a.dataFormat),a.inputSpec=[new _m({ndim:4})],a}return Qe(n,[{key:"computeOutputShape",value:function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new qg}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Vm),jk=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"call",value:function(e,t){var n=this;return Il((function(){var t=Rm(e);return"channelsLast"===n.dataFormat?Yc(t,[1,2]):Yc(t,[2,3])}))}}]),n}(Yk);jk.className="GlobalAveragePooling2D",wl(jk);var qk=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Qe(n,[{key:"call",value:function(e,t){var n=this;return Il((function(){var t=Rm(e);return"channelsLast"===n.dataFormat?Pc(t,[1,2]):Pc(t,[2,3])}))}}]),n}(Yk);qk.className="GlobalMaxPooling2D",wl(qk);var Kk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).layer=e.layer,a}return Qe(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){kx(Pi(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t.layer,r=wx(a,n);delete t.layer;var i={layer:r};return Object.assign(i,t),new e(i)}}]),n}(Vm),Zk=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this,e)).supportsMasking=!0,a}return Qe(n,[{key:"build",value:function(e){if((e=Fm(e)).length<3)throw new jg("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),kx(Pi(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=Fm(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),a=e[1];return[n[0],a].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return Il((function(){return Uy((function(e,a){return[Rm(n.layer.call(e,t)),[]]}),e=Rm(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(Kk);Zk.className="TimeDistributed",wl(Zk);var $k=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;Ze(this,n),a=t.call(this,e);var r=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=r,a.forwardLayer=wx(i),r.goBackwards=!0!==r.goBackwards;var o,s={};if(s.className=e.layer.getClassName(),s.config=r,a.backwardLayer=wx(s),a.forwardLayer.name="forward_"+a.forwardLayer.name,a.backwardLayer.name="backward_"+a.backwardLayer.name,a.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,o=a.mergeMode,hv(Cv,"BidirectionalMergeMode",o),e.weights)throw new qg("weights support is not implemented for Bidirectional layer yet.");return a._stateful=e.layer.stateful,a.returnSequences=e.layer.returnSequences,a.returnState=e.layer.returnState,a.supportsMasking=!0,a._trainable=!0,a.inputSpec=e.layer.inputSpec,a.numConstants=null,a}return Qe(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,a,r=this.forwardLayer.computeOutputShape(e);return Array.isArray(r)&&Array.isArray(r[0])||(r=[r]),this.returnState?(a=r.slice(1),t=r[0]):t=r[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(a).concat(a.slice()):[t].concat(a).concat(a.slice()):ev(n)}},{key:"apply",value:function(e,t){var a=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});var i=Vy(e,a,r,this.numConstants);if(e=i.inputs,a=i.initialState,r=i.constants,Array.isArray(e)&&(a=e.slice(1),e=e[0]),(null==a||0===a.length)&&null==r)return kx(Pi(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=a){var l=a.length;if(l%2>0)throw new jg("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=a,o.push.apply(o,Ke(a));var c=a.map((function(e){return new _m({shape:e.shape})}));this.forwardLayer.stateSpec=c.slice(0,l/2),this.backwardLayer.stateSpec=c.slice(l/2),s.push.apply(s,Ke(c))}if(null!=r)throw new qg("Support for constants in Bidirectional layers is not implemented yet.");for(var u=o[0]instanceof zm,h=0,d=o;h<d.length;h++){if(d[h]instanceof zm!==u)throw new jg("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(u){var f=[e].concat(o),p=this.inputSpec.concat(s),g=this.inputSpec;this.inputSpec=p;var v=kx(Pi(n.prototype),"apply",this).call(this,f,t);return this.inputSpec=g,v}return kx(Pi(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Il((function(){var a,r,i,o,s=t.initialState;if(null==s)a=n.forwardLayer.call(e,t),r=n.backwardLayer.call(e,t);else{var l=s.slice(0,s.length/2),c=s.slice(s.length/2);a=n.forwardLayer.call(e,Object.assign(t,{initialState:l})),r=n.backwardLayer.call(e,Object.assign(t,{initialState:c}))}return n.returnState&&(Array.isArray(a)&&(i=a.slice(1).concat(r.slice(1))),a=a[0],r=r[0]),n.returnSequences&&(r=mu(r,1)),"concat"===n.mergeMode?o=qv([a,r]):"sum"===n.mergeMode?o=Ll(a,r):"ave"===n.mergeMode?o=_c(.5,Ll(a,r)):"mul"===n.mergeMode?o=_c(a,r):null==n.mergeMode&&(o=[a,r]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;Rv(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),Rv(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var a=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(a).concat(a):[n].concat(a).concat(a)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){kx(Pi(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=kx(Pi(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=wx(t.layer);if(delete t.layer,null!=t.numConstants)throw new qg("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var a=t;return a.layer=n,new e(a)}}]),n}(Kk);$k.className="Bidirectional",wl($k);var Qk,Jk;Xt().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(Qk||(Qk={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(Jk||(Jk={}));var ew=n(6699);function tw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(a.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var r=t(e);if(r.recurse&&null!==r.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(r.recurse){if(iw(e)){var i=Array.isArray(e)?[]:{};for(var o in a.add(e),e){var s=e[o],l=tw(s,t,n,a);i[o]=l}return a.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,r.value),r.value}function nw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rw;return aw(e,t)}function aw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,a=e[0];if(n.has(a))throw new Error("Circular references are not supported.");var r=t(e);if(r.recurse&&null!==r.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(r.recurse){if(iw(a)){var i=Array.isArray(a)?[]:{};n.add(a);var o=function(a){var r=e.map((function(e){return e[a]})),o=aw(r,t,n);i[a]=o};for(var s in a)o(s);return n.delete(a),i}throw new Error("Can't recurse into non-iterable type: ".concat(a))}return r.value}function rw(e){return null===e?null:iw(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function iw(e){var t=!1;Xt().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof n(4977).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof Zi)&&!(e instanceof Promise)&&!t)}function ow(e){return function(e,t){return tw(e,t)}(e,sw)}function sw(e){return e instanceof Zi?{value:e.clone(),recurse:!1}:iw(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var lw=function(){function e(t){if(Ze(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return Qe(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=je(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.push(a)}}catch(jz){n.e(jz)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),cw=function(e){Oi(n,e);var t=Hi(n);function n(){return Ze(this,n),t.call(this,n.INITIAL_CAPACITY)}return Qe(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){kx(Pi(n.prototype),"isFull",this).call(this)&&this.expand(),kx(Pi(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){kx(Pi(n.prototype),"isFull",this).call(this)&&this.expand(),kx(Pi(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),a=0;a<n;a++)t[a]=this.get(this.wrap(this.begin+a));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(lw);function uw(e){return new gw(e)}function hw(e,t){return new Aw(e,t)}cw.INITIAL_CAPACITY=32;var dw,fw=function(){function e(){Ze(this,e)}return Qe(e,[{key:"toArray",value:function(){var e=i(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=i(f().mark((function e(){var t,n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:a=e.sent;case 5:if(a.done){e.next=12;break}return n.push(a.value),e.next=9,t.next();case 9:a=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=i(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=i(f().mark((function e(t){var n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,a=t(n.value);case 4:if(n.done||!a){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,a=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new ww(this,e)}},{key:"filter",value:function(e){return new yw(this,e)}},{key:"map",value:function(e){return new kw(this,e)}},{key:"mapAsync",value:function(e){return new Sw(this,e)}},{key:"serialMapAsync",value:function(e){return new Sw(this,e).serial()}},{key:"flatmap",value:function(e){return new Iw(this,e)}},{key:"forEachAsync",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new bw(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rw,a=this.rowMajorBatch(e,t);return a.map((function(e){return nw(e,n)}))}},{key:"concatenate",value:function(e,t){return new Aw(new pw([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new xw(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new mw(this,e)}},{key:"prefetch",value:function(e){return new Tw(this,e)}},{key:"shuffle",value:function(e,t){return new Nw(this,e,t)}},{key:"serial",value:function(){return new vw(this)}}]),e}(),pw=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this)).items=e,a.trav=0,a}return Qe(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=i(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:ow(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(fw),gw=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this)).nextFn=e,a}return Qe(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(fw),vw=function(e){Oi(n,e);var t=Hi(n);function n(e){var a;return Ze(this,n),(a=t.call(this)).upstream=e,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=i(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(fw),mw=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r;return Ze(this,n),(r=t.call(this)).upstream=e,r.maxCount=a,r.count=0,r.lastRead=Promise.resolve({value:null,done:!1}),r}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=i(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=i(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:Al(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(fw),xw=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r;return Ze(this,n),(r=t.call(this)).upstream=e,r.maxCount=a,r.count=0,r}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(fw),bw=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Ze(this,n),(r=t.call(this)).upstream=e,r.batchSize=a,r.enableSmallLastBatch=i,r.lastRead=Promise.resolve({value:null,done:!1}),r}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=i(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=i(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(fw),yw=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r;return Ze(this,n),(r=t.call(this)).upstream=e,r.predicate=a,r.lastRead=Promise.resolve({value:null,done:!1}),r}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=i(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=i(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:Al(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(fw),kw=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r;return Ze(this,n),(r=t.call(this)).upstream=e,r.transform=a,r}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=i(f().mark((function e(){var t,n,a,r,i,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=co(t.value),a=this.transform(t.value),r=co(a),i=je(n);try{for(i.s();!(o=i.n()).done;)lo(s=o.value,r)||s.dispose()}catch(jz){i.e(jz)}finally{i.f()}return e.abrupt("return",{value:a,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(fw),ww=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r;return Ze(this,n),(r=t.call(this)).upstream=e,r.handler=a,r.count=0,r.lastRead=Promise.resolve({value:null,done:!1}),r}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=i(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(fw),Sw=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r;return Ze(this,n),(r=t.call(this)).upstream=e,r.transform=a,r}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=i(f().mark((function e(){var t,n,a,r,i,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=co(t.value),e.next=8,this.transform(t.value);case 8:a=e.sent,r=co(a),i=je(n);try{for(i.s();!(o=i.n()).done;)lo(s=o.value,r)||s.dispose()}catch(jz){i.e(jz)}finally{i.f()}return e.abrupt("return",{value:a,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(fw),Cw=function(e){Oi(n,e);var t=Hi(n);function n(){var e;return Ze(this,n),(e=t.call(this)).outputQueue=new cw,e.lastRead=Promise.resolve({value:null,done:!1}),e}return Qe(n,[{key:"next",value:function(){var e=i(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(fw),Iw=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r;return Ze(this,n),(r=t.call(this)).upstream=e,r.transform=a,r}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=i(f().mark((function e(){var t,n,a,r,i,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=co(t.value),a=this.transform(t.value),r=co(a),this.outputQueue.pushAll(a),i=je(n);try{for(i.s();!(o=i.n()).done;)lo(s=o.value,r)||s.dispose()}catch(jz){i.e(jz)}finally{i.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Cw),Aw=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r;return Ze(this,n),(r=t.call(this)).baseErrorHandler=a,r.lastRead=null,r.iterator=null,r.moreIterators=e,r}return Qe(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=i(f().mark((function e(t){var n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(a=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(fw);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(dw||(dw={}));var Tw=function(e){Oi(n,e);var t=Hi(n);function n(e,a){var r;return Ze(this,n),(r=t.call(this)).upstream=e,r.bufferSize=a,r.buffer=new lw(a),r}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(fw),Nw=function(e){Oi(n,e);var t=Hi(n);function n(e,a,r){var i;return Ze(this,n),(i=t.call(this,e,a)).upstream=e,i.windowSize=a,i.upstreamExhausted=!1,i.random=ew.alea(r||Ti().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return Qe(n,[{key:"next",value:function(){var e=i(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=i(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Tw),Ew=function(){function e(){Ze(this,e),this.size=null}return Qe(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this;return st(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),Rw(i(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,Fw));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,Rw(i(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,Rw(i(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return Il((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return Rw(i(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return Il((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return Rw(i(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return Rw(i(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,Rw(i(f().mark((function t(){var a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=uw(i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",hw(a.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,Rw(i(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var a=this,r=ew.alea(t||Ti().toString());return Rw(i(f().mark((function t(){var i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.int32(),n&&(i+=r.int32()),t.next=4,a.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,Rw(i(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=i(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Rw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){Oi(r,n);var a=Hi(r);function r(){var e;return Ze(this,r),(e=a.apply(this,arguments)).size=t,e}return Qe(r,[{key:"iterator",value:function(){var t=i(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),r}(Ew))}function Fw(e){return null===e?null:function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof Zi||St(e);var t}(e[0])?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Zi?Fu(e):Fo(e)}(e),recurse:!1}:{value:null,recurse:!0}}Ew.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function Dw(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&st("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var Lw=Jd,Mw=function(e){Oi(n,e);var t=Hi(n);function n(){var e;return Ze(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new Je(Bi(e),Sl()),e}return Qe(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,Xt().get("IS_NODE")&&Jr("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:n,refCount:1}),a}},{key:"makeTensorInfo",value:function(e,t,n){var a;if("string"===t&&null!=n&&n.length>0&&It(n[0])){var r=n.map((function(e){return Ni(e)}));a=this.write(r,e,t)}else a=this.write(n,e,t);return{dataId:a,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,a,r){this.data.set(e,{values:t,dtype:a,refCount:r})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,a=t.complexTensorInfos;return"complex64"===n?Od(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return Ei(e)}));return _s(e.shape,e.dtype,n)}catch(a){throw new Error("Failed to decode encoded string bytes into utf-8")}return _s(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return Sl().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),a=n.complexTensorInfos;null!=a&&(this.disposeData(a.real.dataId,!0),this.disposeData(a.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=i(f().mark((function e(t){var n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ti(),t(),a=Ti()-n,e.abrupt("return",{kernelMs:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){Dw([e],"where");var t=this.readSync(e.dataId);return Lw(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return kx(Pi(n.prototype),"epsilon",this).call(this)}}]),n}(et);Mw.nextDataId=0;function Ow(e,t,n){return function(a){var r=a.inputs,i=a.attrs,o=a.backend,s=r.x;if(Dw(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var l=o,c=l.data.get(s.dataId).values,u=ht(s.shape),h=n||s.dtype,d=kt(h,u),f=0;f<u;++f)d[f]=t(c[f],i);return l.makeTensorInfo(s.shape,h,d)}}function Pw(e,t,n){return function(a){var r=a.inputs,i=a.attrs,o=a.backend,s=r.x;if(Dw(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var l=o,c=l.data.get(s.dataId).values,u=n||s.dtype,h=t(c,u,i);return l.makeTensorInfo(s.shape,u,h)}}Nl("cpu",(function(){return new Mw}),1);var _w=Ow(Yn,(function(e){return e>=0?e:Math.exp(e)-1})),zw={kernelName:Yn,backendName:"cpu",kernelFunc:_w};function Bw(e){var t=e.inputs,n=e.backend,a=t.x;return n.incRef(a.dataId),{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}var Ww={kernelName:ca,backendName:"cpu",kernelFunc:Bw};function Hw(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.alpha;Dw([r],"leakyRelu");for(var o=ht(r.shape),s=n.data.get(r.dataId).values,l=yt("float32",o),c=0;c<s.length;c++)l[c]=s[c]<0?i*s[c]:s[c];return n.makeTensorInfo(r.shape,"float32",l)}var Vw={kernelName:ga,backendName:"cpu",kernelFunc:Hw};function Uw(e){return function(t,n,a,r,i){var o=dl(t,n),s=o.length,l=Rt(o),c=yt(i,ht(o)),u=t.length,h=n.length,d=Rt(t),f=Rt(n),p=ul(t,o),g=ul(n,o);if(p.length+g.length===0)for(var v=0;v<c.length;++v)c[v]=e(a[v%a.length],r[v%r.length]);else for(var m=function(t){var n=zt(t,s,l),i=n.slice(-u);p.forEach((function(e){return i[e]=0}));var o=_t(i,u,d),v=n.slice(-h);g.forEach((function(e){return v[e]=0}));var m=_t(v,h,f);c[t]=e(a[o],r[m])},x=0;x<c.length;++x)m(x);return[c,o]}}var Xw=Uw((function(e,t){return e<0?t*e:e}));function Gw(e){var t=e.inputs,n=e.backend,a=t.x,r=t.alpha;Dw([a,r],"prelu");var i=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values,s=u(Xw(a.shape,r.shape,i,o,"float32"),2),l=s[0],c=s[1];return n.makeTensorInfo(c,"float32",l)}var Yw={kernelName:Za,backendName:"cpu",kernelFunc:Gw},jw=Ow(tr,(function(e){return Math.max(0,e)})),qw={kernelName:tr,backendName:"cpu",kernelFunc:jw},Kw=Ow(sr,(function(e){return Math.min(Math.max(0,e),6)})),Zw={kernelName:sr,backendName:"cpu",kernelFunc:Kw};function $w(e){return function(t,n,a){for(var r=yt(n,t.length),i=0;i<t.length;++i)r[i]=e(t[i],a);return r}}var Qw=$w((function(e){return 1/(1+Math.exp(-e))})),Jw=Ow(br,(function(e){return 1/(1+Math.exp(-e))})),eS={kernelName:br,backendName:"cpu",kernelFunc:Jw};function tS(e,t,n,a,r){if("linear"===n)return Bw({inputs:{x:t},backend:e});if("relu"===n)return jw({inputs:{x:t},backend:e});if("elu"===n)return _w({inputs:{x:t},backend:e});if("relu6"===n)return Kw({inputs:{x:t},backend:e});if("prelu"===n)return Gw({inputs:{x:t,alpha:a},backend:e});if("leakyrelu"===n)return Hw({inputs:{x:t},backend:e,attrs:{alpha:r}});if("sigmoid"===n)return Jw({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function nS(e){var t=e.inputs,n=e.backend,a=t.real,r=t.imag,i=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values,s=n.makeTensorInfo(a.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(a.shape,"float32",i),imag:n.makeTensorInfo(r.shape,"float32",o)},s}var aS={kernelName:kn,backendName:"cpu",kernelFunc:nS};function rS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var a=rS(e,t,"float32"),r=rS(e,t,"float32");return nS({inputs:{real:a,imag:r},backend:e})}var i=Mt(ht(t),n);return e.makeTensorInfo(t,n,i)}function iS(e){var t=e.inputs,n=e.backend,a=t.input,r=n.data.get(a.dataId).complexTensorInfos.real,i=n.data.get(r.dataId).values;return n.makeTensorInfo(r.shape,r.dtype,i)}var oS={kernelName:Ja,backendName:"cpu",kernelFunc:iS};function sS(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.dtype;if("complex64"===i){if("complex64"===r.dtype)return Bw({inputs:{x:r},backend:n});var o=rS(n,r.shape,r.dtype),s=sS({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),l=nS({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}if("complex64"===r.dtype){var c=iS({inputs:{input:r},backend:n}),h=sS({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),h}if(!wt(r.dtype,i)){var d=Bw({inputs:{x:r},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:i}}if("int32"===i){var f=n.data.get(r.dataId).values,p=Int32Array.from(f);return n.makeTensorInfo(r.shape,"int32",p)}if("bool"===i){var g=n.data.get(r.dataId).values,v=Ai([0],r.dtype),m=Uw((function(e,t){return e!==t?1:0}))(r.shape,[],g,v,"bool"),x=u(m,2),b=x[0],y=x[1];return n.makeTensorInfo(y,"bool",b)}throw new Error("Error in Cast: failed to cast ".concat(r.dtype," to ").concat(i))}var lS={kernelName:xn,backendName:"cpu",kernelFunc:sS};function cS(e,t,n,a){return null==n?function(n){var r=n.inputs,i=n.backend,o=r.a,s=r.b,l=i;Dw([o,s],e);var c=l.data.get(o.dataId).values,h=l.data.get(s.dataId).values,d="string"===o.dtype?Qd(c):c,f="string"===o.dtype?Qd(h):h,p=a||o.dtype,g=u(t(o.shape,s.shape,d,f,p),2),v=g[0],m=g[1];return l.makeTensorInfo(m,p,v)}:function(e){var r=e.inputs,i=e.backend,o=r.a,s=r.b,l=i;if("complex64"===o.dtype||"complex64"===s.dtype){var c=sS({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),h=l.data.get(c.dataId),d=h.complexTensorInfos.real,f=h.complexTensorInfos.imag,p=l.data.get(d.dataId).values,g=l.data.get(f.dataId).values,v=sS({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),m=l.data.get(v.dataId),x=m.complexTensorInfos.real,b=m.complexTensorInfos.imag,y=l.data.get(x.dataId).values,k=l.data.get(b.dataId).values,w=u(n(o.shape,s.shape,p,g,y,k),3),S=w[0],C=w[1],I=w[2],A=l.makeTensorInfo(I,"float32",S),T=l.makeTensorInfo(I,"float32",C),N=nS({inputs:{real:A,imag:T},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(v),l.disposeIntermediateTensorInfo(A),l.disposeIntermediateTensorInfo(T),N}var E=l.data.get(o.dataId).values,R=l.data.get(s.dataId).values,F=a||o.dtype,D=u(t(o.shape,s.shape,E,R,F),2),L=D[0],M=D[1];return l.makeTensorInfo(M,F,L)}}function uS(e){return function(t,n,a,r,i,o){var s=dl(t,n),l=ht(s),c=s.length,u=Rt(s),h=yt("float32",l),d=yt("float32",l),f=ul(t,s),p=ul(n,s),g=Od(a,r),v=Od(i,o),m=t.length,x=Rt(t),b=n.length,y=Rt(n);if(f.length+p.length===0)for(var k=0;k<h.length;k++){var w=k%g.length,S=k%v.length,C=e(g[2*w],g[2*w+1],v[2*S],v[2*S+1]);h[k]=C.real,d[k]=C.imag}else for(var I=function(t){var n=zt(t,c,u),a=n.slice(-m);f.forEach((function(e){return a[e]=0}));var r=_t(a,m,x),i=n.slice(-b);p.forEach((function(e){return i[e]=0}));var o=_t(i,b,y),s=e(g[2*r],g[2*r+1],v[2*o],v[2*o+1]);h[t]=s.real,d[t]=s.imag},A=0;A<h.length;A++)I(A);return[h,d,s]}}var hS=Uw((function(e,t){return e+t})),dS=uS((function(e,t,n,a){return{real:e+n,imag:t+a}})),fS=cS(Qt,hS,dS),pS={kernelName:Qt,backendName:"cpu",kernelFunc:fS};function gS(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.shape,o=ht(r.shape),s=mt(i,o),l=ht(s);st(o===l,(function(){return"The new shape (".concat(s,") has ").concat(l," elements and the old ")+"shape (".concat(r.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(r.dataId);var c=n.data.get(r.dataId);if(null!=c.complexTensorInfos){var u=c.complexTensorInfos.real,h=c.complexTensorInfos.imag;u.shape=s,h.shape=s}return{dataId:r.dataId,shape:s,dtype:r.dtype}}var vS={kernelName:nr,backendName:"cpu",kernelFunc:gS};function mS(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.a,i=t.b,o=a.transposeA,s=a.transposeB;Dw([r,i],"matMul");var l=r.shape.length,c=i.shape.length,h=o?r.shape[l-2]:r.shape[l-1],d=s?i.shape[c-1]:i.shape[c-2],f=o?r.shape[l-1]:r.shape[l-2],p=s?i.shape[c-2]:i.shape[c-1],g=r.shape.slice(0,-2),v=i.shape.slice(0,-2),m=ht(g),x=ht(v),b=dl(r.shape.slice(0,-2),i.shape.slice(0,-2)).concat([f,p]);st(h===d,(function(){return"Error in matMul: inner shapes (".concat(h,") and (")+"".concat(d,") of Tensors with shapes ").concat(r.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match.")}));for(var y=s?[x,p,d]:[x,d,p],k=gS({inputs:{x:r},backend:n,attrs:{shape:o?[m,h,f]:[m,f,h]}}),w=gS({inputs:{x:i},backend:n,attrs:{shape:y}}),S=o?k.shape[1]:k.shape[2],C=o?k.shape[2]:k.shape[1],I=s?w.shape[1]:w.shape[2],A=Math.max(m,x),T=n.data.get(k.dataId).values,N=n.data.get(w.dataId).values,E=Rt(k.shape),R=Rt(w.shape),F=u(o?[E[0],1,E[1]]:[E[0],E[1],1],3),D=F[0],L=F[1],M=F[2],O=u(s?[1,R[1],R[0]]:[R[1],1,R[0]],3),P=O[0],_=O[1],z=O[2],B=C*I,W=_s([A,C,I],k.dtype),H=W.values,V=n.blockSize,U=0;U<A;U++)for(var X=0;X<C;X+=V)for(var G=0;G<I;G+=V)for(var Y=0;Y<S;Y+=V)for(var j=Math.min(X+V,C),q=Math.min(G+V,I),K=Math.min(Y+V,S),Z=X;Z<j;Z++)for(var $=G;$<q;$++){for(var Q=0,J=Y;J<K;J++){var ee=Math.min(U,m-1)*D,te=Math.min(U,x-1)*z;Q+=T[ee+Z*L+J*M]*N[J*P+$*_+te]}H[U*B+(Z*I+$)]+=Q}return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(b,W.dtype,W.values)}var xS={kernelName:pn,backendName:"cpu",kernelFunc:mS};var bS={kernelName:Zr,backendName:"cpu",kernelFunc:function(e){var t,n,a,r=e.inputs,i=e.backend,o=e.attrs,s=r.a,l=r.b,c=r.bias,u=r.preluActivationWeights,h=o.transposeA,d=o.transposeB,f=o.activation,p=o.leakyreluAlpha,g=[];t=mS({inputs:{a:s,b:l},attrs:{transposeA:h,transposeB:d},backend:i}),c&&(n=fS({inputs:{a:t,b:c},backend:i}),g.push(t),t=n),f&&(a=tS(i,t,f,u,p),g.push(t),t=a);for(var v=0,m=g;v<m.length;v++){var x=m[v];i.disposeIntermediateTensorInfo(x)}return t}};function yS(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var kS={kernelName:Kt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;Dw(t,"abs");var a=new Float32Array(ht(t.shape));return a=yS(n.data.get(t.dataId).values),n.makeOutput(a,t.shape,t.dtype)}},wS=Ow(Zt,(function(e){return Math.acos(e)})),SS={kernelName:Zt,backendName:"cpu",kernelFunc:wS},CS=Ow($t,(function(e){return Math.acosh(e)})),IS={kernelName:$t,backendName:"cpu",kernelFunc:CS};var AS={kernelName:Jt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t;Dw(t,"addN");for(var r=a.map((function(e){return n.data.get(e.dataId).values})),i=_s(a[0].shape,a[0].dtype),o=i.values,s=0;s<a.length;s++)for(var l=r[s],c=0;c<o.length;c++)o[c]+=l[c];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function TS(e,t,n,a,r){for(var i=t.length,o=ht(t),s=Rt(t),l=Rt(r),c=yt(n,ht(r)),u=0;u<o;++u){for(var h=zt(u,i,s),d=new Array(h.length),f=0;f<d.length;f++)d[f]=h[a[f]];c[_t(d,i,l)]=e[u]}return c}function NS(e){var t=e.inputs,n=e.attrs,a=e.backend,r=t.x,i=n.perm;Dw(r,"transpose");for(var o=r.shape.length,s=new Array(o),l=0;l<s.length;l++)s[l]=r.shape[i[l]];var c=TS(a.data.get(r.dataId).values,r.shape,r.dtype,i,s);return{dataId:a.write(c,s,r.dtype),shape:s,dtype:r.dtype}}var ES={kernelName:Ur,backendName:"cpu",kernelFunc:NS};var RS={kernelName:en,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis,o=a.keepDims;Dw(r,"all");var s=xt(i,r.shape),l=s,c=Qc(l,r.shape.length),h=r;null!=c&&(h=NS({inputs:{x:r},backend:n,attrs:{perm:c}}),l=eu(l.length,r.shape.length)),$c("all",l,h.shape.length);for(var d=u(Kc(h.shape,l),2),f=d[0],p=ht(d[1]),g=Mt(ht(f),h.dtype),v=n.data.get(h.dataId).values,m=0;m<g.length;++m){for(var x=m*p,b=v[x],y=0;y<p;++y){var k=v[x+y];b=b&&k}g[m]=b}null!=c&&n.disposeIntermediateTensorInfo(h);var w=n.makeTensorInfo(f,h.dtype,g);if(o){var S=gS({inputs:{x:w},backend:n,attrs:{shape:Zc(f,s)}});return n.disposeIntermediateTensorInfo(w),S}return w}};var FS={kernelName:tn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis,o=a.keepDims;Dw(r,"any");var s=xt(i,r.shape),l=s,c=Qc(l,r.shape.length),h=r;null!=c&&(h=NS({inputs:{x:r},backend:n,attrs:{perm:c}}),l=eu(l.length,r.shape.length)),$c("any",l,h.shape.length);for(var d=u(Kc(h.shape,l),2),f=d[0],p=ht(d[1]),g=Mt(ht(f),h.dtype),v=n.data.get(h.dataId).values,m=0;m<g.length;++m){for(var x=m*p,b=v[x],y=0;y<p;++y){var k=v[x+y];b=b||k}g[m]=b}null!=c&&n.disposeIntermediateTensorInfo(h);var w=n.makeTensorInfo(f,h.dtype,g);if(o){var S=gS({inputs:{x:w},backend:n,attrs:{shape:Zc(f,s)}});return n.disposeIntermediateTensorInfo(w),S}return w}};var DS={kernelName:nn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis;Dw(r,"argMax");var o=xt(i,r.shape),s=Qc(o,r.shape.length),l=r,c=[];null!=s&&(l=NS({inputs:{x:r},backend:n,attrs:{perm:s}}),c.push(l),o=eu(o.length,l.shape.length)),$c("argMax",o=[o[0]],l.shape.length);for(var h=u(Kc(l.shape,o),2),d=h[0],f=h[1],p=Mt(ht(d),"int32"),g=ht(f),v=n.data.get(l.dataId).values,m=0;m<p.length;++m){for(var x=m*g,b=v[x],y=0,k=0;k<g;++k){var w=v[x+k];w>b&&(b=w,y=k)}p[m]=y}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",p)}};var LS={kernelName:an,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis;Dw(r,"argMin");var o=xt(i,r.shape),s=Qc(o,r.shape.length),l=r,c=[];null!=s&&(l=NS({inputs:{x:r},backend:n,attrs:{perm:s}}),c.push(l),o=eu(o.length,l.shape.length)),$c("argMin",o=[o[0]],l.shape.length);for(var h=u(Kc(l.shape,o),2),d=h[0],f=h[1],p=Mt(ht(d),"int32"),g=ht(f),v=n.data.get(l.dataId).values,m=0;m<p.length;++m){for(var x=m*g,b=v[x],y=0,k=0;k<g;++k){var w=v[x+k];w<b&&(b=w,y=k)}p[m]=y}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",p)}},MS=Ow(rn,(function(e){return Math.asin(e)})),OS={kernelName:rn,backendName:"cpu",kernelFunc:MS},PS=Ow(on,(function(e){return Math.asinh(e)})),_S={kernelName:on,backendName:"cpu",kernelFunc:PS},zS=Ow(sn,(function(e){return Math.atan(e)})),BS={kernelName:sn,backendName:"cpu",kernelFunc:zS},WS=Uw((function(e,t){return Math.atan2(e,t)})),HS=cS(cn,WS),VS={kernelName:cn,backendName:"cpu",kernelFunc:HS},US=Ow(ln,(function(e){return Math.atanh(e)})),XS={kernelName:ln,backendName:"cpu",kernelFunc:US};function GS(e,t,n,a,r,i){for(var o=r.strideHeight,s=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,u=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.top,f=r.padInfo.left,p="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=_s(r.outShape,n),v=g.values,m=r.outShape[1]*r.outShape[2]*r.outShape[3],x=r.outShape[2]*r.outShape[3],b=r.outShape[3],y=0;y<r.batchSize;++y)for(var k=y*m,w=y*a[0],S=0;S<r.inChannels;++S)for(var C=0;C<r.outHeight;++C)for(var I=C*o-d,A=Math.max(0,I),T=Math.min(r.inHeight,u+I),N=k+C*x,E=0;E<r.outWidth;++E){for(var R=E*s-f,F=Math.max(0,R),D=Math.min(r.inWidth,h+R),L=p,M=0,O=0,P=A;P<T;P+=l){for(var _=w+P*a[1],z=F;z<D;z+=c){var B=e[_+z*a[2]+S];"max"===i&&B>L?L=B:"avg"===i&&(M+=B,O++)}if(isNaN(L))break}v[N+E*b+S]="avg"===i?M/O:L}return g}function YS(e,t,n,a){for(var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=_s(a.outShape,"int32"),s=a.strideHeight,l=a.strideWidth,c=a.dilationHeight,u=a.dilationWidth,h=a.effectiveFilterHeight,d=a.effectiveFilterWidth,f=a.padInfo.top,p=a.padInfo.left,g=_s(t,n,e),v=0;v<a.batchSize;++v)for(var m=0;m<a.inChannels;++m)for(var x=0;x<a.outHeight;++x){for(var b=x*s-f,y=b;y<0;)y+=c;for(var k=Math.min(a.inHeight,h+b),w=0;w<a.outWidth;++w){for(var S=w*l-p,C=S;C<0;)C+=u;for(var I=Math.min(a.inWidth,d+S),A=Number.NEGATIVE_INFINITY,T=-1,N=y;N<k;N+=c)for(var E=N-b,R=C;R<I;R+=u){var F=R-S,D=g.get(v,N,R,m);D>A&&(A=D,T=r?i?((v*a.inHeight+N)*a.inWidth+R)*a.inChannels+m:(N*a.inWidth+R)*a.inChannels+m:E*d+F)}o.set(T,v,x,w,m)}}return o}function jS(e,t,n,a,r,i){for(var o=r.strideDepth,s=r.strideHeight,l=r.strideWidth,c=r.dilationDepth,u=r.dilationHeight,h=r.dilationWidth,d=r.effectiveFilterDepth,f=r.effectiveFilterHeight,p=r.effectiveFilterWidth,g=r.padInfo.front,v=r.padInfo.top,m=r.padInfo.left,x="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=_s(r.outShape,n),y=b.values,k=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],w=r.outShape[2]*r.outShape[3]*r.outShape[4],S=r.outShape[3]*r.outShape[4],C=r.outShape[4],I=0;I<r.batchSize;++I)for(var A=I*k,T=I*a[0],N=0;N<r.inChannels;++N)for(var E=0;E<r.outDepth;++E){for(var R=E*o-g,F=R;F<0;)F+=c;for(var D=Math.min(r.inDepth,d+R),L=A+E*w,M=0;M<r.outHeight;++M){for(var O=M*s-v,P=O;P<0;)P+=u;for(var _=Math.min(r.inHeight,f+O),z=L+M*S,B=0;B<r.outWidth;++B){for(var W=B*l-m,H=W;H<0;)H+=h;for(var V=Math.min(r.inWidth,p+W),U=z+B*C,X=x,G=0,Y=0,j=F;j<D;j+=c){for(var q=T+j*a[1],K=P;K<_;K+=u){for(var Z=q+K*a[2],$=H;$<V;$+=h){var Q=e[Z+$*a[3]+N];if("max"===i&&Q>X?X=Q:"avg"===i&&(G+=Q,Y++),isNaN(X))break}if(isNaN(X))break}if(isNaN(X))break}y[U+N]="avg"===i?G/Y:X}}}return b}var qS={kernelName:un,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x;Dw(r,"avgPool");var i=a.filterSize,o=a.strides,s=a.pad,l=a.dimRoundingMode;st(Zl(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,u=zl(r.shape,i,o,1,s,l);if(1===u.filterWidth&&1===u.filterHeight&&dt(u.inShape,u.outShape))c=Bw({inputs:{x:r},backend:n});else{var h=n.data.get(r.dataId).values,d=Rt(r.shape),f=GS(h,r.shape,r.dtype,d,u,"avg");c=n.makeTensorInfo(u.outShape,r.dtype,f.values)}return c}};var KS={kernelName:dn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.filterSize,o=a.strides,s=a.pad,l=a.dimRoundingMode,c=a.dataFormat;Dw(r,"avgPool3d");var u=Bl(r.shape,i,o,1,s,l,c),h=jS(n.data.get(r.dataId).values,r.shape,r.dtype,Rt(r.shape),u,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}};var ZS={kernelName:fn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.dy,i=t.input,o=a.filterSize,s=a.strides,l=a.pad,c=a.dimRoundingMode;Dw([r,i],"avgPool3DGrad");for(var u=Bl(i.shape,o,s,1,l,c),h=u.strideDepth,d=u.strideHeight,f=u.strideWidth,p=u.filterDepth,g=u.filterHeight,v=u.filterWidth,m=u.dilationDepth,x=u.dilationHeight,b=u.dilationWidth,y=u.effectiveFilterDepth,k=u.effectiveFilterHeight,w=u.effectiveFilterWidth,S=y-1-u.padInfo.front,C=w-1-u.padInfo.left,I=k-1-u.padInfo.top,A=_s(i.shape,"float32"),T=1/(p*g*v),N=n.bufferSync(r),E=0;E<u.batchSize;++E)for(var R=0;R<u.inChannels;++R)for(var F=0;F<u.inDepth;++F)for(var D=0;D<u.inHeight;++D)for(var L=0;L<u.inWidth;++L){for(var M=F-S,O=D-I,P=L-C,_=0,z=0;z<y;z+=m){var B=(M+z)/h;if(!(B<0||B>=u.outDepth||Math.floor(B)!==B))for(var W=0;W<k;W+=x){var H=(O+W)/d;if(!(H<0||H>=u.outHeight||Math.floor(H)!==H))for(var V=0;V<w;V+=b){var U=(P+V)/f;if(!(U<0||U>=u.outWidth||Math.floor(U)!==U))_+=N.get(E,B,H,U,R)}}}A.set(_*T,E,F,D,L,R)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}};var $S={kernelName:hn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.dy,i=t.input,o=i;Dw([r,i],"avgPoolGrad");for(var s=a.filterSize,l=a.strides,c=a.pad,u=zl(o.shape,s,l,1,c),h=u.strideHeight,d=u.strideWidth,f=u.filterHeight,p=u.filterWidth,g=u.dilationHeight,v=u.dilationWidth,m=u.effectiveFilterHeight,x=u.effectiveFilterWidth,b=x-1-u.padInfo.left,y=m-1-u.padInfo.top,k=_s(o.shape,"float32"),w=1/(f*p),S=n.data.get(r.dataId).values,C=_s(r.shape,"float32",S),I=0;I<u.batchSize;++I)for(var A=0;A<u.inChannels;++A)for(var T=0;T<u.inHeight;++T)for(var N=0;N<u.inWidth;++N){for(var E=T-y,R=N-b,F=0,D=0;D<m;D+=g){var L=(E+D)/h;if(!(L<0||L>=u.outHeight||Math.floor(L)!==L))for(var M=0;M<x;M+=v){var O=(R+M)/d;if(!(O<0||O>=u.outWidth||Math.floor(O)!==O))F+=C.get(I,L,O,A)}}k.set(F*w,I,T,N,A)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var QS={kernelName:ra,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.scale,o=t.offset,s=t.mean,l=t.variance;st(s.shape.length===l.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),st(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),st(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),Dw([r,s,l,i,o],"batchNorm");var c=a.varianceEpsilon;null==c&&(c=.001);for(var u=n.data.get(r.dataId).values,h=n.data.get(s.dataId).values,d=n.data.get(l.dataId).values,f=i?n.data.get(i.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),g=new Float32Array(u.length),v=p.length,m=f.length,x=d.length,b=h.length,y=0,k=0,w=0,S=0,C=0;C<u.length;++C)g[C]=p[y++]+(u[C]-h[k++])*f[w++]/Math.sqrt(d[S++]+c),y>=v&&(y=0),k>=b&&(k=0),w>=m&&(w=0),S>=x&&(S=0);return n.makeTensorInfo(r.shape,r.dtype,g)}};function JS(e,t,n,a,r){var i=gl(a,t,n),o=ht(n),s=Rt(a);if(i){var l=vl(t,s);return"string"===r?e.slice(l,l+o):e.subarray(l,l+o)}for(var c=_s(a,r,"string"===r?Qd(e):e),u=_s(n,r),h=0;h<u.size;++h){var d=u.indexToLoc(h),f=d.map((function(e,n){return e+t[n]}));u.set.apply(u,[c.get.apply(c,Ke(f))].concat(Ke(d)))}return"string"===r?u.values.map((function(e){return Ni(e)})):u.values}function eC(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.begin,o=a.size;Dw(r,"slice");var s=u(ml(r,i,o),2),l=s[0],c=s[1];fl(r,l,c);var h=JS(n.data.get(r.dataId).values,l,c,r.shape,r.dtype);return n.makeTensorInfo(c,r.dtype,h)}var tC={kernelName:gr,backendName:"cpu",kernelFunc:eC};var nC={kernelName:gn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.blockShape,o=a.crops;Dw([r],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),l=yd(r.shape,i,s),c=kd(l.length,i.length),u=wd(r.shape,i,s),h=Sd(o,i.length),d=Cd(u,o,i.length),f=gS({inputs:{x:r},backend:n,attrs:{shape:l}}),p=NS({inputs:{x:f},backend:n,attrs:{perm:c}}),g=gS({inputs:{x:p},backend:n,attrs:{shape:u}}),v=eC({inputs:{x:g},backend:n,attrs:{begin:h,size:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),v}};function aC(e,t,n,a,r){for(var i=ht(a),o=Mt(r,n),s=0;s<e.length;s++){var l=e[s];if(l<0)throw new Error("Input x must be non-negative!");l>=r||(o[l]+=i>0?t[s]:1)}return o}function rC(e,t,n){for(var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.shape[0],i=e.shape[1],o=_s([r,n],t.dtype),s=0;s<r;s++)for(var l=0;l<i;l++){var c=e.get(s,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(a?o.set(1,s,c):t.size>0?o.set(o.get(s,c)+t.get(s,l),s,c):o.set(o.get(s,c)+1,s,c))}return o}var iC={kernelName:vn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.weights,o=a.size,s=aC(n.data.get(r.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}};var oC={kernelName:mn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.s0,r=t.s1,i=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values,s=dl(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},sC=$w((function(e){return Math.ceil(e)})),lC=Pw(bn,sC),cC={kernelName:bn,backendName:"cpu",kernelFunc:lC},uC=Ow(yn,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),hC={kernelName:yn,backendName:"cpu",kernelFunc:uC},dC={kernelName:wn,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,a=new Float32Array(ht(t.shape)),r=n.data.get(t.dataId),i=r.complexTensorInfos.real,o=r.complexTensorInfos.imag,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,c=0;c<s.length;c++){var u=s[c],h=l[c];a[c]=Math.hypot(u,h)}return n.makeOutput(a,t.shape,"float32")}};function fC(e,t,n,a){var r=kt(n,ht(t));if(a&&"string"!==n){var i=0;e.forEach((function(e){var t=ht(e.shape);r.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var a="string"===n?Qd(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var l=s*t[1]+o,c=0;c<e.shape[1];++c)r[l+c]=a[i++];o+=e.shape[1]}))}return r}function pC(e){var t=e.inputs,n=e.backend,a=t.input,r=n.data.get(a.dataId).complexTensorInfos.imag,i=n.data.get(r.dataId).values;return n.makeTensorInfo(r.shape,r.dtype,i)}var gC={kernelName:ha,backendName:"cpu",kernelFunc:pC};function vC(e){var t=e.inputs,n=e.backend,a=xt(e.attrs.axis,t[0].shape)[0],r=md(t.map((function(e){return e.shape})),a);if(0===ht(r))return n.makeTensorInfo(r,t[0].dtype,[]);var i=t.filter((function(e){return ht(e.shape)>0}));if(1===i.length)return Bw({inputs:{x:i[0]},backend:n});if(vd(i.map((function(e){return e.shape})),a),"complex64"===i[0].dtype){var o=i.map((function(e){return iS({inputs:{input:e},backend:n})})),s=i.map((function(e){return pC({inputs:{input:e},backend:n})})),l=vC({inputs:o,backend:n,attrs:{axis:a}}),c=vC({inputs:s,backend:n,attrs:{axis:a}}),u=nS({inputs:{real:l,imag:c},backend:n});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),u}var h=i.map((function(e){var t=ht(e.shape.slice(a));return gS({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),d=h.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));r=md(h.map((function(e){return e.shape})),1);var f=1===h[0].shape[0],p=fC(d,r,t[0].dtype,f),g=md(i.map((function(e){return e.shape})),a),v=n.makeTensorInfo(g,t[0].dtype,p);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}var mC={kernelName:Sn,backendName:"cpu",kernelFunc:vC};function xC(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.filter,o=a.strides,s=a.pad,l=a.dataFormat,c=a.dilations,u=a.dimRoundingMode;Dw([r,i],"conv2d");for(var h=$l(l),d=Wl(r.shape,i.shape,o,c,s,u,!1,h),f=d.filterHeight,p=d.filterWidth,g=d.dilationHeight,v=d.dilationWidth,m=d.padInfo.left,x=d.padInfo.top,b="channelsLast"===d.dataFormat,y=new ji(d.outShape,r.dtype),k=Rt(r.shape),w=Rt(i.shape),S=k[0],C=b?k[1]:k[2],I=b?k[2]:1,A=b?1:k[1],T=y.strides[0],N=b?y.strides[1]:y.strides[2],E=b?y.strides[2]:1,R=b?1:y.strides[1],F=n.data.get(r.dataId).values,D=n.data.get(i.dataId).values,L=y.values,M=0;M<d.batchSize;++M)for(var O=M*S,P=M*T,_=0;_<d.outHeight;++_)for(var z=P+_*N,B=_*d.strideHeight-x,W=0;W<f;++W){var H=B+W*g;if(!(H<0||H>=d.inHeight))for(var V=W*w[0],U=O+H*C,X=0;X<d.outWidth;++X)for(var G=z+X*E,Y=X*d.strideWidth-m,j=0;j<p;++j){var q=Y+j*v;if(!(q<0||q>=d.inWidth))for(var K=U+q*I,Z=V+j*w[1],$=0;$<d.inChannels;++$){for(var Q=F[K+$*A],J=0;J<d.outChannels;++J)L[G+J*R]+=Q*D[Z+J];Z+=d.outChannels}}}return n.makeTensorInfo(y.shape,y.dtype,L)}var bC={kernelName:Cn,backendName:"cpu",kernelFunc:xC};var yC={kernelName:In,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.dy,o=a.strides,s=a.pad,l=a.dataFormat,c=a.dimRoundingMode,u=a.filterShape;Dw([r,i],"conv2dBackpropFilter");for(var h=$l(l),d=Wl(r.shape,u,o,1,s,c,!1,h),f=d.strideHeight,p=d.strideWidth,g=d.filterHeight,v=d.filterWidth,m="channelsLast"===d.dataFormat,x=new ji(d.filterShape,"float32"),b=d.padInfo.left,y=d.padInfo.top,k=n.data.get(r.dataId).values,w=n.data.get(i.dataId).values,S=new ji(r.shape,r.dtype,k),C=new ji(i.shape,i.dtype,w),I=0;I<g;++I)for(var A=Math.max(0,Math.ceil((y-I)/f)),T=Math.min(d.outHeight,(d.inHeight+y-I)/f),N=0;N<v;++N)for(var E=Math.max(0,Math.ceil((b-N)/p)),R=Math.min(d.outWidth,(d.inWidth+b-N)/p),F=0;F<d.inChannels;++F)for(var D=0;D<d.outChannels;++D){for(var L=0,M=0;M<d.batchSize;++M)for(var O=A;O<T;++O)for(var P=I+O*f-y,_=E;_<R;++_){var z=N+_*p-b;L+=m?S.get(M,P,z,F)*C.get(M,O,_,D):S.get(M,F,P,z)*C.get(M,D,O,_)}x.set(L,I,N,F,D)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var kC={kernelName:An,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.dy,i=t.filter,o=a.inputShape,s=a.strides,l=a.pad,c=a.dataFormat,h=a.dimRoundingMode;Dw([r,i],"conv2dBackpropInput");var d=Rt(i.shape),f=Rt(r.shape),p=$l(c),g=Wl(o,i.shape,s,1,l,h,!1,p),v=new ji(g.inShape,"float32"),m=v.values,x=n.data.get(r.dataId).values,b=n.data.get(i.dataId).values,y=u(d,3),k=y[0],w=y[1],S=y[2],C=g.batchSize,I=g.filterHeight,A=g.filterWidth,T=g.inChannels,N=g.inHeight,E=g.inWidth,R=g.outChannels,F=g.outHeight,D=g.outWidth,L=g.strideHeight,M=g.strideWidth;p=g.dataFormat;for(var O=I-1-g.padInfo.top,P=A-1-g.padInfo.left,_="channelsLast"===p,z=v.strides[0],B=_?v.strides[1]:v.strides[2],W=_?v.strides[2]:1,H=_?1:v.strides[1],V=f[0],U=_?f[1]:f[2],X=_?f[2]:1,G=_?1:f[1],Y=0;Y<C;++Y)for(var j=0;j<T;++j)for(var q=0;q<N;++q)for(var K=q-O,Z=Math.max(0,Math.ceil(K/L)),$=Math.min(F,(I+K)/L),Q=0;Q<E;++Q){for(var J=Q-P,ee=Math.max(0,Math.ceil(J/M)),te=Math.min(D,(A+J)/M),ne=0,ae=Z;ae<$;++ae)for(var re=ae*L-K,ie=ee;ie<te;++ie)for(var oe=V*Y+U*ae+X*ie,se=k*(I-1-re)+w*(A-1-(ie*M-J))+S*j,le=0;le<R;++le){ne+=x[oe+G*le]*b[se+le]}m[z*Y+B*q+W*Q+H*j]=ne}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var wC={kernelName:Tn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.filter,o=a.strides,s=a.pad,l=a.dilations;Dw([r,i],"conv3d");for(var c=Hl(r.shape,i.shape,o,l,s),u=c.filterDepth,h=c.filterHeight,d=c.filterWidth,f=c.dilationDepth,p=c.dilationHeight,g=c.dilationWidth,v=c.padInfo,m=v.front,x=v.left,b=v.top,y=new ji(c.outShape,r.dtype),k=n.data.get(r.dataId).values,w=n.data.get(i.dataId).values,S=y.values,C=Rt(r.shape),I=Rt(i.shape),A=0;A<c.batchSize;++A)for(var T=A*C[0],N=A*y.strides[0],E=0;E<c.outDepth;++E)for(var R=N+E*y.strides[1],F=E*c.strideDepth-m,D=0;D<u;++D){var L=F+D*f;if(!(L<0||L>=c.inDepth))for(var M=D*I[0],O=T+L*C[1],P=0;P<c.outHeight;++P)for(var _=R+P*y.strides[2],z=P*c.strideHeight-b,B=0;B<h;++B){var W=z+B*p;if(!(W<0||W>=c.inHeight))for(var H=M+B*I[1],V=O+W*C[2],U=0;U<c.outWidth;++U)for(var X=_+U*c.outChannels,G=U*c.strideWidth-x,Y=0;Y<d;++Y){var j=G+Y*g;if(!(j<0||j>=c.inWidth))for(var q=H+Y*I[2],K=V+j*c.inChannels,Z=q,$=0;$<c.inChannels;++$){for(var Q=k[K+$],J=0;J<c.outChannels;++J)S[X+J]+=Q*w[Z+J];Z+=c.outChannels}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var SC={kernelName:Nn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.dy,o=a.strides,s=a.pad,l=a.filterShape;Dw([r,i],"conv3dBackpropFilterV2");for(var c=Rt(r.shape),h=Rt(i.shape),d=Hl(r.shape,l,o,1,s),f=d.strideDepth,p=d.strideHeight,g=d.strideWidth,v=d.filterDepth,m=d.filterHeight,x=d.filterWidth,b=new ji(d.filterShape,"float32"),y=b.values,k=u(b.strides,4),w=k[0],S=k[1],C=k[2],I=k[3],A=n.data.get(i.dataId).values,T=u(h,4),N=T[0],E=T[1],R=T[2],F=T[3],D=n.data.get(r.dataId).values,L=u(c,4),M=L[0],O=L[1],P=L[2],_=L[3],z=d.padInfo.front,B=d.padInfo.left,W=d.padInfo.top,H=0;H<v;++H)for(var V=Math.max(0,Math.ceil((z-H)/f)),U=Math.min(d.outDepth,(d.inDepth+z-H)/f),X=H*w,G=0;G<m;++G)for(var Y=Math.max(0,Math.ceil((W-G)/p)),j=Math.min(d.outHeight,(d.inHeight+W-G)/p),q=G*S+X,K=0;K<x;++K)for(var Z=Math.max(0,Math.ceil((B-K)/g)),$=Math.min(d.outWidth,(d.inWidth+B-K)/g),Q=K*C+q,J=0;J<d.inChannels;++J)for(var ee=J*I+Q,te=0;te<d.outChannels;++te){for(var ne=0,ae=0;ae<d.batchSize;++ae)for(var re=ae*M,ie=ae*N,oe=V;oe<U;++oe)for(var se=(H+oe*f-z)*O+re,le=oe*E+ie,ce=Y;ce<j;++ce)for(var ue=(G+ce*p-W)*P+se,he=ce*R+le,de=Z;de<$;++de){var fe=de*F+he;ne+=D[(K+de*g-B)*_+ue+J]*A[fe+te]}y[ee+te]=ne}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var CC={kernelName:En,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.dy,i=t.filter,o=a.pad,s=a.strides,l=a.inputShape;Dw([r],"conv3dBackpropInputV2");for(var c=Rt(r.shape),h=Rt(i.shape),d=Hl(l,i.shape,s,1,o),f=new ji(d.inShape,"float32"),p=f.values,g=u(f.strides,4),v=g[0],m=g[1],x=g[2],b=g[3],y=n.data.get(r.dataId).values,k=u(c,4),w=k[0],S=k[1],C=k[2],I=k[3],A=n.data.get(i.dataId).values,T=u(h,4),N=T[0],E=T[1],R=T[2],F=T[3],D=d.batchSize,L=d.filterDepth,M=d.filterHeight,O=d.filterWidth,P=d.inChannels,_=d.inDepth,z=d.inHeight,B=d.inWidth,W=d.outChannels,H=d.outDepth,V=d.outHeight,U=d.outWidth,X=d.strideDepth,G=d.strideHeight,Y=d.strideWidth,j=L-1-d.padInfo.front,q=M-1-d.padInfo.top,K=O-1-d.padInfo.left,Z=0;Z<D;++Z)for(var $=0;$<P;++$)for(var Q=0;Q<_;++Q)for(var J=Q-j,ee=Math.max(0,Math.ceil(J/X)),te=Math.min(H,(L+J)/X),ne=0;ne<z;++ne)for(var ae=ne-q,re=Math.max(0,Math.ceil(ae/G)),ie=Math.min(V,(M+ae)/G),oe=0;oe<B;++oe){for(var se=oe-K,le=Math.max(0,Math.ceil(se/Y)),ce=Math.min(U,(O+se)/Y),ue=0,he=ee;he<te;++he)for(var de=he*X-J,fe=re;fe<ie;++fe)for(var pe=fe*G-ae,ge=le;ge<ce;++ge)for(var ve=w*Z+S*he+C*fe+I*ge,me=N*(L-1-de)+E*(M-1-pe)+R*(O-1-(ge*Y-se))+F*$,xe=0;xe<W;++xe){ue+=y[ve+xe]*A[me+xe]}p[v*Z+m*Q+x*ne+b*oe+$]=ue}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},IC=Ow(Rn,(function(e){return Math.cos(e)})),AC={kernelName:Rn,backendName:"cpu",kernelFunc:IC},TC=Ow(Fn,(function(e){return Math.cosh(e)})),NC={kernelName:Fn,backendName:"cpu",kernelFunc:TC};var EC={kernelName:Mn,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,a=e.attrs,r=t.image,i=t.boxes,o=t.boxInd,s=a.cropSize,l=a.method,c=a.extrapolationValue,h=u(r.shape,4),d=h[0],f=h[1],p=h[2],g=h[3],v=i.shape[0],m=u(s,2),x=m[0],b=m[1],y=_s([v,x,b,g],"float32"),k=n.data.get(i.dataId).values,w=n.data.get(o.dataId).values,S=n.data.get(r.dataId).values,C=Rt(r.shape),I=Rt(y.shape),A=0;A<v;A++){var T=4*A,N=k[T],E=k[T+1],R=k[T+2],F=k[T+3],D=w[A];if(!(D>=d))for(var L=x>1?(R-N)*(f-1)/(x-1):0,M=b>1?(F-E)*(p-1)/(b-1):0,O=0;O<x;O++){var P=x>1?N*(f-1)+O*L:.5*(N+R)*(f-1);if(P<0||P>f-1)for(var _=0;_<b;_++)for(var z=0;z<g;z++){var B=z+_*I[2]+O*I[1]+A*I[0];y.values[B]=c}else if("bilinear"===l)for(var W=Math.floor(P),H=Math.ceil(P),V=P-W,U=0;U<b;U++){var X=b>1?E*(p-1)+U*M:.5*(E+F)*(p-1);if(X<0||X>p-1)for(var G=0;G<g;G++){var Y=G+U*I[2]+O*I[1]+A*I[0];y.values[Y]=c}else for(var j=Math.floor(X),q=Math.ceil(X),K=X-j,Z=0;Z<g;Z++){var $=Z+j*C[2]+W*C[1]+D*C[0],Q=S[$],J=S[$=Z+q*C[2]+W*C[1]+D*C[0]],ee=S[$=Z+j*C[2]+H*C[1]+D*C[0]],te=Q+(J-Q)*K,ne=ee+(S[$=Z+q*C[2]+H*C[1]+D*C[0]]-ee)*K;$=Z+U*I[2]+O*I[1]+A*I[0],y.values[$]=te+(ne-te)*V}}else for(var ae=0;ae<b;++ae){var re=b>1?E*(p-1)+ae*M:.5*(E+F)*(p-1);if(re<0||re>p-1)for(var ie=0;ie<g;ie++){var oe=ie+ae*I[2]+O*I[1]+A*I[0];y.values[oe]=c}else for(var se=Math.round(re),le=Math.round(P),ce=0;ce<g;ce++){var ue=ce+se*C[2]+le*C[1]+D*C[0],he=ce+ae*I[2]+O*I[1]+A*I[0];y.values[he]=S[ue]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var RC={kernelName:Dn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis,o=a.exclusive,s=a.reverse;Dw(r,"cumprod");var l=Qc([i],r.shape.length),c=r;null!=l&&(c=NS({inputs:{x:r},backend:n,attrs:{perm:l}}));var u=eu(1,r.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));for(var h=io(c.dtype,"int32"),d=Lt(ht(c.shape),h),f=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],g=s?function(e,t){return e+p-t-1}:function(e,t){return e+t},v=0;v<f.length;v+=p)for(var m=0;m<p;m++){var x=g(v,m);if(0===m)d[x]=o?1:f[x];else{var b=g(v,m-1);d[x]=o?f[b]*d[b]:f[x]*d[b]}}var y=n.makeTensorInfo(c.shape,h,d);if(null!=l){var k=NS({inputs:{x:y},backend:n,attrs:{perm:Jc(l)}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),k}return y}};var FC={kernelName:Ln,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis,o=a.exclusive,s=a.reverse;Dw(r,"cumsum");var l=Qc([i],r.shape.length),c=r;null!=l&&(c=NS({inputs:{x:r},backend:n,attrs:{perm:l}}));var u=eu(1,r.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));for(var h=io(c.dtype,"int32"),d=Mt(ht(c.shape),h),f=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],g=s?function(e,t){return e+p-t-1}:function(e,t){return e+t},v=0;v<f.length;v+=p)for(var m=0;m<p;m++){var x=g(v,m);if(0===m)d[x]=o?0:f[x];else{var b=g(v,m-1);d[x]=o?f[b]+d[b]:f[x]+d[b]}}var y=n.makeTensorInfo(c.shape,h,d);if(null!=l){var k=NS({inputs:{x:y},backend:n,attrs:{perm:Jc(l)}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),k}return y}};var DC={kernelName:On,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.weights,o=a.size,s=a.binaryOutput;if(1===r.shape.length){var l=aC(n.data.get(r.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===r.shape.length){var c=rC(n.bufferSync(r),n.bufferSync(i),o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(r.shape.length,"."))}};var LC={kernelName:Pn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.blockSize,o=a.dataFormat;st("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)}));for(var s=r.shape[0],l=r.shape[1],c=r.shape[2],u=r.shape[3],h=l*i,d=c*i,f=u/(i*i),p=n.data.get(r.dataId).values,g=new Float32Array(s*h*d*f),v=0,m=0;m<s;++m)for(var x=0;x<h;++x)for(var b=Math.floor(x/i),y=x%i,k=0;k<d;++k)for(var w=Math.floor(k/i),S=(y*i+k%i)*f,C=0;C<f;++C){var I=C+S+u*(w+c*(b+l*m));g[v++]=p[I]}return n.makeTensorInfo([s,h,d,f],r.dtype,g)}};function MC(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.filter,o=a.strides,s=a.pad,l=a.dilations,c=a.dimRoundingMode;Dw([r,i],"depthwiseConv2DNative");var u=Rt(r.shape),h=Rt(i.shape),d=l;null==d&&(d=[1,1]),st(Zl(o,d),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(d,"'")}));for(var f=Wl(r.shape,i.shape,o,d,s,c,!0),p=f.filterHeight,g=f.filterWidth,v=f.dilationHeight,m=f.dilationWidth,x=f.padInfo,b=x.left,y=x.top,k=f.outChannels/f.inChannels,w=new ji(f.outShape,r.dtype),S=n.data.get(r.dataId).values,C=n.data.get(i.dataId).values,I=w.values,A=0;A<f.batchSize;++A)for(var T=A*u[0],N=A*w.strides[0],E=0;E<f.outHeight;++E)for(var R=N+E*w.strides[1],F=E*f.strideHeight-y,D=0;D<p;++D){var L=F+D*v;if(!(L<0||L>=f.inHeight))for(var M=D*h[0],O=T+L*u[1],P=0;P<f.outWidth;++P)for(var _=R+P*w.strides[2],z=P*f.strideWidth-b,B=0;B<g;++B){var W=z+B*m;if(!(W<0||W>=f.inWidth))for(var H=M+B*h[1],V=O+W*f.inChannels,U=_,X=H,G=0;G<f.inChannels;++G){for(var Y=S[V+G],j=0;j<k;++j)I[U+j]+=Y*C[X+j];U+=k,X+=k}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var OC={kernelName:_n,backendName:"cpu",kernelFunc:MC};var PC={kernelName:zn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.dy,o=a.strides,s=a.dilations,l=a.pad,c=a.dimRoundingMode,u=a.filterShape;Dw([r,i],"depthwiseConv2dNativeBackpropFilter");for(var h=Wl(r.shape,u,o,s,l,c,!0),d=h.strideHeight,f=h.strideWidth,p=h.filterHeight,g=h.filterWidth,v=new ji(h.filterShape,"float32"),m=h.padInfo.left,x=h.padInfo.top,b=h.outChannels/h.inChannels,y=n.data.get(r.dataId).values,k=new ji(r.shape,r.dtype,y),w=n.data.get(i.dataId).values,S=new ji(i.shape,i.dtype,w),C=0;C<p;++C)for(var I=Math.max(0,Math.ceil((x-C)/d)),A=Math.min(h.outHeight,(h.inHeight+x-C)/d),T=0;T<g;++T)for(var N=Math.max(0,Math.ceil((m-T)/f)),E=Math.min(h.outWidth,(h.inWidth+m-T)/f),R=0;R<h.outChannels;++R){for(var F=Math.trunc(R/b),D=R%b,L=0,M=0;M<h.batchSize;++M)for(var O=I;O<A;++O)for(var P=C+O*d-x,_=N;_<E;++_){var z=T+_*f-m;L+=k.get(M,P,z,F)*S.get(M,O,_,R)}v.set(L,C,T,F,D)}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var _C={kernelName:Bn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.dy,i=t.filter,o=a.strides,s=a.dilations,l=a.pad,c=a.dimRoundingMode,h=a.inputShape;Dw([r,i],"depthwiseConv2DNativeBackpropInput");for(var d=Rt(r.shape),f=Rt(i.shape),p=Wl(h,i.shape,o,s,l,c,!0),g=new ji(p.inShape,"float32"),v=g.values,m=u(g.strides,3),x=m[0],b=m[1],y=m[2],k=n.data.get(r.dataId).values,w=u(d,3),S=w[0],C=w[1],I=w[2],A=n.data.get(i.dataId).values,T=u(f,3),N=T[0],E=T[1],R=T[2],F=p.batchSize,D=p.filterHeight,L=p.filterWidth,M=p.inChannels,O=p.inHeight,P=p.inWidth,_=p.outChannels,z=p.outHeight,B=p.outWidth,W=p.strideHeight,H=p.strideWidth,V=D-1-p.padInfo.top,U=L-1-p.padInfo.left,X=_/M,G=0;G<F;++G)for(var Y=0;Y<M;++Y)for(var j=0;j<O;++j)for(var q=j-V,K=Math.max(0,Math.ceil(q/W)),Z=Math.min(z,(D+q)/W),$=0;$<P;++$){for(var Q=$-U,J=Math.max(0,Math.ceil(Q/H)),ee=Math.min(B,(L+Q)/H),te=0,ne=K;ne<Z;++ne)for(var ae=ne*W-q,re=J;re<ee;++re)for(var ie=S*G+C*ne+I*re,oe=N*(D-1-ae)+E*(L-1-(re*H-Q))+R*Y,se=0;se<X;++se){te+=k[ie+(Y*X+se)]*A[oe+se]}v[x*G+b*j+y*$+Y]=te}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var zC={kernelName:Wn,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,a=t.x,r=ht(a.shape),i=n.data.get(a.dataId).values,o=_s([r,r],a.dtype),s=o.values,l=0;l<i.length;l++)s[l*r+l]=i[l];var c=[].concat(Ke(a.shape),Ke(a.shape));return n.makeTensorInfo(c,o.dtype,o.values)}},BC={kernelName:Hn,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.filter,o=a.strides,s=a.pad,l=a.dilations,c=n,u=c.data.get(r.dataId).values,h=r.shape.length,d=c.data.get(i.dataId).values,f=i.shape.length,p=_l(r.shape,i.shape,o,s,"NHWC",l),g=p.batchSize,v=p.inHeight,m=p.inWidth,x=p.inChannels,b=p.outHeight,y=p.outWidth,k=p.padInfo,w=p.strideHeight,S=p.strideWidth,C=p.filterHeight,I=p.filterWidth,A=p.dilationHeight,T=p.dilationWidth,N=p.outShape,E=ht(N),R=N.length,F=kt(r.dtype,E),D=0;D<g;++D)for(var L=0;L<b;++L)for(var M=L*w-k.top,O=0;O<y;++O)for(var P=O*S-k.left,_=0;_<x;++_){for(var z=Number.MIN_SAFE_INTEGER,B=0;B<C;++B){var W=M+B*A;if(W>=0&&W<v)for(var H=0;H<I;++H){var V=P+H*T;if(V>=0&&V<m){var U=_t([D,W,V,_],h,Rt(r.shape)),X=_t([B,H,_],f,Rt(i.shape)),G=u[U]+d[X];G>z&&(z=G)}}}F[_t([D,L,O,_],R,Rt(N))]=z}return{dataId:c.write(Ai(F,r.dtype),N,r.dtype),shape:N,dtype:r.dtype}}},WC={kernelName:Un,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.filter,o=t.dy,s=a.strides,l=a.pad,c=a.dilations,u=n,h=Dt(r.shape,u.data.get(r.dataId).values),d=Dt(i.shape,u.data.get(i.dataId).values),f=_l(r.shape,i.shape,s,l,"NHWC",c),p=f.batchSize,g=f.inHeight,v=f.inWidth,m=f.inChannels,x=f.outHeight,b=f.outWidth,y=f.padInfo,k=f.strideHeight,w=f.strideWidth,S=f.filterHeight,C=f.filterWidth,I=f.dilationHeight,A=f.dilationWidth,T=f.outShape;st(o.rank===T.length,(function(){return"Error in ".concat(Un,", dy ")+"must have the same rank as output ".concat(T.length,", but got ")+"".concat(o.rank)}));for(var N=Dt(T,u.data.get(o.dataId).values),E=Ot(i.shape,i.dtype),R=0;R<p;++R)for(var F=0;F<x;++F)for(var D=F*k-y.top,L=0;L<b;++L)for(var M=L*w-y.left,O=0;O<m;++O){for(var P=Number.MIN_SAFE_INTEGER,_=0,z=0,B=0;B<S;++B){var W=D+B*I;if(W>=0&&W<g)for(var H=0;H<C;++H){var V=M+H*A;if(V>=0&&V<v){var U=h[R][W][V][O]+d[B][H][O];U>P&&(P=U,_=B,z=H)}}}E[_][z][O]+=N[R][F][L][O]}return{dataId:u.write(Ai(E,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},HC={kernelName:Vn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.filter,o=t.dy,s=a.strides,l=a.pad,c=a.dilations,u=n,h=Dt(r.shape,u.data.get(r.dataId).values),d=Dt(i.shape,u.data.get(i.dataId).values),f=_l(r.shape,i.shape,s,l,"NHWC",c),p=f.batchSize,g=f.inHeight,v=f.inWidth,m=f.inChannels,x=f.outHeight,b=f.outWidth,y=f.padInfo,k=f.strideHeight,w=f.strideWidth,S=f.filterHeight,C=f.filterWidth,I=f.dilationHeight,A=f.dilationWidth,T=f.outShape;st(o.rank===T.length,(function(){return"Error in ".concat(Vn,", dy ")+"must have the same rank as output ".concat(T.length,", but got ")+"".concat(o.rank)}));for(var N=Dt(T,u.data.get(o.dataId).values),E=Ot(r.shape,r.dtype),R=0;R<p;++R)for(var F=0;F<x;++F)for(var D=F*k-y.top,L=0;L<b;++L)for(var M=L*w-y.left,O=0;O<m;++O){for(var P=Number.MIN_SAFE_INTEGER,_=D<0?0:D,z=M<0?0:M,B=0;B<S;++B){var W=D+B*I;if(W>=0&&W<g)for(var H=0;H<C;++H){var V=M+H*A;if(V>=0&&V<v){var U=h[R][W][V][O]+d[B][H][O];U>P&&(P=U,_=W,z=V)}}}E[R][_][z][O]+=N[R][F][L][O]}return{dataId:u.write(Ai(E,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},VC=Uw((function(e,t){return e*t})),UC=uS((function(e,t,n,a){return{real:e*n-t*a,imag:e*a+t*n}})),XC=cS(Ba,VC,UC),GC={kernelName:Ba,backendName:"cpu",kernelFunc:XC};function YC(e){var t,n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.axis,s=r.keepDims;Dw(i,"sum");var l=(t="bool"===i.dtype?sS({inputs:{x:i},backend:a,attrs:{dtype:"int32"}}):Bw({inputs:{x:i},backend:a})).shape.length,c=xt(o,t.shape),h=Qc(c,l),d=c,f=t;null!=h&&(f=NS({inputs:{x:t},backend:a,attrs:{perm:h}}),d=eu(d.length,l)),$c("sum",d,f.shape.length);for(var p=u(Kc(f.shape,d),2),g=p[0],v=p[1],m=rS(a,g,io(f.dtype,"int32")),x=ht(v),b=a.data.get(m.dataId).values,y=a.data.get(f.dataId).values,k=0;k<b.length;++k){for(var w=k*x,S=0,C=0;C<x;++C)S+=y[w+C];b[k]=S}if(s){var I=m;m=gS({inputs:{x:m},backend:a,attrs:{shape:Zc(m.shape,c)}}),a.disposeIntermediateTensorInfo(I)}return a.disposeIntermediateTensorInfo(t),null!=h&&a.disposeIntermediateTensorInfo(f),m}var jC={kernelName:wr,backendName:"cpu",kernelFunc:YC};var qC={kernelName:Gn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t,r=Hd(e.attrs.equation,a.length),i=r.allDims,o=r.summedDims,s=r.idDims;Ud(i.length,s,a);for(var l=Xd(o,s),c=l.path,u=l.steps,h=u.length,d=null,f=i.length,p=[],g=0;g<h;++g){var v,m=je(u[g]);try{for(m.s();!(v=m.n()).done;){var x=v.value,b=Vd(f,s[x]),y=b.permutationIndices,k=b.expandDims,w=void 0;Gd(y)?w=a[x]:(w=NS({inputs:{x:a[x]},backend:n,attrs:{perm:y}}),p.push(w));for(var S=w.shape.slice(),C=0;C<k.length;++C)S.splice(k[C],0,1);dt(w.shape,S)||(w=gS({inputs:{x:w},backend:n,attrs:{shape:S}}),p.push(w)),null===d?d=w:(d=XC({inputs:{a:w,b:d},backend:n}),p.push(d))}}catch(jz){m.e(jz)}finally{m.f()}g<h-1&&(c[g]>=0&&(d=YC({inputs:{x:d},backend:n,attrs:{axis:c[g]-(i.length-f),keepDims:!1}}),p.push(d)),f--)}for(var I=0,A=p;I<A.length;I++){var T=A[I];T!==d&&n.disposeIntermediateTensorInfo(T)}return d}};var KC={kernelName:jn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.dy,r=t.y;Dw([a,r],"eluGrad");for(var i=new Float32Array(ht(r.shape)),o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=0;l<o.length;++l){var c=o[l];i[l]=c>=1?s[l]:s[l]*(c+1)}return n.makeTensorInfo(r.shape,"float32",i)}},ZC=Uw((function(e,t){return e===t?1:0})),$C=cS(Kn,ZC,null,"bool"),QC={kernelName:Kn,backendName:"cpu",kernelFunc:$C},JC=Ow(qn,(function(e){var t=Math.sign(e),n=Math.abs(e),a=1/(1+.3275911*n);return t*(1-((((1.061405429*a-1.453152027)*a+1.421413741)*a-.284496736)*a+.254829592)*a*Math.exp(-n*n))})),eI={kernelName:qn,backendName:"cpu",kernelFunc:JC},tI=$w((function(e){return Math.exp(e)})),nI=Pw(Zn,tI,"float32"),aI={kernelName:Zn,backendName:"cpu",kernelFunc:nI};function rI(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.input,i=a.dim,o=r.shape.length,s=r.shape.slice(),l=i;return i<0&&(st(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),l=o+i+1),s.splice(l,0,1),gS({inputs:{x:r},backend:n,attrs:{shape:s}})}var iI={kernelName:$n,backendName:"cpu",kernelFunc:rI},oI=$w((function(e){return Math.expm1(e)})),sI=Pw(Qn,oI),lI={kernelName:Qn,backendName:"cpu",kernelFunc:sI},cI=Uw((function(e,t){return e/t})),uI=cS(Xn,cI),hI={kernelName:Xn,backendName:"cpu",kernelFunc:uI},dI=Uw((function(e,t){return e-t})),fI=uS((function(e,t,n,a){return{real:e-n,imag:t-a}})),pI=cS(_r,dI,fI),gI={kernelName:_r,backendName:"cpu",kernelFunc:pI};function vI(e,t,n){for(var a=e.shape,r=a[0],i=a[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[r,i],u=ht(c),h=yt("float32",u),d=yt("float32",u),f=0;f<r;f++){for(var p=eC({inputs:{x:s},backend:n,attrs:{begin:[f,0],size:[1,i]}}),g=eC({inputs:{x:l},backend:n,attrs:{begin:[f,0],size:[1,i]}}),v=nS({inputs:{real:p,imag:g},backend:n}),m=mI(v,t,n),x=Od(m.real,m.imag),b=0;b<i;b++){var y=Pd(x,b);h[f*i+b]=y.real,d[f*i+b]=y.imag}n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v)}var k=n.makeTensorInfo(c,"float32",h),w=n.makeTensorInfo(c,"float32",d),S=nS({inputs:{real:k,imag:w},backend:n});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(w),S}function mI(e,t,n){var a=ht(e.shape),r=n.data.get(e.dataId),i=n.data.get(r.complexTensorInfos.real.dataId).values,o=n.data.get(r.complexTensorInfos.imag.dataId).values;if(0===((m=a)&m-1)){var s=xI(i,o,a,t,n),l=[e.shape[0],e.shape[1]];if(t){var c=n.makeTensorInfo(l,"float32",s.real),u=n.makeTensorInfo(l,"float32",s.imag),h=n.makeTensorInfo([],"float32",Ii(a,"float32")),d=Bw({inputs:{x:h},backend:n}),f=hI.kernelFunc({inputs:{a:c,b:h},backend:n}),p=hI.kernelFunc({inputs:{a:u,b:d},backend:n}),g=n.data.get(f.dataId).values,v=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),{real:g,imag:v}}return s}var m,x=function(e,t,n){for(var a=new Float32Array(2*t),r=0;r<t;r++){for(var i=0,o=0,s=0;s<t;s++){var l=zd(r*s,t,n),c=Pd(e,s);i+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}n&&(i/=t,o/=t),_d(a,i,o,r)}return a}(Od(i,o),a,t);return function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),a=0;a<e.length;a+=2)t[a/2]=e[a],n[a/2]=e[a+1];return{real:t,imag:n}}(x)}function xI(e,t,n,a,r){if(1===n)return{real:e,imag:t};var i=Od(e,t),o=n/2,s=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),a=new Float32Array(t),r=0;r<e.length;r+=4)n[Math.floor(r/4)]=e[r],a[Math.floor(r/4)]=e[r+1];return{real:n,imag:a}}(i),l=s.real,c=s.imag,u=[l.length],h=r.makeTensorInfo(u,"float32",l),d=r.makeTensorInfo(u,"float32",c),f=nS({inputs:{real:h,imag:d},backend:r}),p=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),a=new Float32Array(t),r=2;r<e.length;r+=4)n[Math.floor(r/4)]=e[r],a[Math.floor(r/4)]=e[r+1];return{real:n,imag:a}}(i),g=p.real,v=p.imag,m=[g.length],x=r.makeTensorInfo(m,"float32",g),b=r.makeTensorInfo(m,"float32",v),y=nS({inputs:{real:x,imag:b},backend:r}),k=xI(l,c,o,a,r),w=k.real,S=k.imag,C=[w.length],I=r.makeTensorInfo(C,"float32",w),A=r.makeTensorInfo(C,"float32",S),T=nS({inputs:{real:I,imag:A},backend:r}),N=xI(g,v,o,a,r),E=N.real,R=N.imag,F=[E.length],D=r.makeTensorInfo(F,"float32",E),L=r.makeTensorInfo(F,"float32",R),M=nS({inputs:{real:D,imag:L},backend:r}),O=function(e,t){for(var n=new Float32Array(e/2),a=new Float32Array(e/2),r=0;r<Math.ceil(e/2);r++){var i=(t?2:-2)*Math.PI*(r/e);n[r]=Math.cos(i),a[r]=Math.sin(i)}return{real:n,imag:a}}(n,a),P=[O.real.length],_=r.makeTensorInfo(P,"float32",O.real),z=r.makeTensorInfo(P,"float32",O.imag),B=nS({inputs:{real:_,imag:z},backend:r}),W=XC({inputs:{a:B,b:M},backend:r}),H=fS({inputs:{a:T,b:W},backend:r}),V=pI({inputs:{a:T,b:W},backend:r}),U=iS({inputs:{input:H},backend:r}),X=iS({inputs:{input:V},backend:r}),G=pC({inputs:{input:H},backend:r}),Y=pC({inputs:{input:V},backend:r}),j=vC({inputs:[U,X],backend:r,attrs:{axis:0}}),q=vC({inputs:[G,Y],backend:r,attrs:{axis:0}}),K=r.data.get(j.dataId).values,Z=r.data.get(q.dataId).values;return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(x),r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(I),r.disposeIntermediateTensorInfo(A),r.disposeIntermediateTensorInfo(T),r.disposeIntermediateTensorInfo(D),r.disposeIntermediateTensorInfo(L),r.disposeIntermediateTensorInfo(M),r.disposeIntermediateTensorInfo(_),r.disposeIntermediateTensorInfo(z),r.disposeIntermediateTensorInfo(B),r.disposeIntermediateTensorInfo(W),r.disposeIntermediateTensorInfo(H),r.disposeIntermediateTensorInfo(V),r.disposeIntermediateTensorInfo(U),r.disposeIntermediateTensorInfo(G),r.disposeIntermediateTensorInfo(X),r.disposeIntermediateTensorInfo(Y),r.disposeIntermediateTensorInfo(j),r.disposeIntermediateTensorInfo(q),{real:K,imag:Z}}var bI={kernelName:Jn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.input,r=ht(a.shape),i=a.shape[a.shape.length-1],o=gS({inputs:{x:a},backend:n,attrs:{shape:[r/i,i]}}),s=vI(o,!1,n),l=gS({inputs:{x:s},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}};function yI(e){var t=e.backend,n=e.attrs,a=n.shape,r=n.value,i=n.dtype||Tt(r),o=kt(i,ht(a));return function(e,t,n){e.fill(t)}(o,r),t.makeTensorInfo(a,i,o)}var kI={kernelName:ea,backendName:"cpu",kernelFunc:yI};var wI={kernelName:ta,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),a=t.image,r=n,i=yt(a.dtype,ht(a.shape)),o=u(a.shape,4),s=o[0],l=o[1],c=o[2],h=o[3],d=r.data.get(a.dataId).values,f=0;f<s;f++)for(var p=f*c*l*h,g=0;g<l;g++)for(var v=g*(c*h),m=0;m<c;m++)for(var x=m*h,b=0;b<h;b++){var y=Math.round(c-m-1),k=p+v+x+b,w=d[k];if(y>=0&&y<c)w=d[p+v+y*h+b];i[k]=w}return{dataId:r.write(i,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},SI=$w((function(e){return Math.floor(e)})),CI=Pw(na,SI),II={kernelName:na,backendName:"cpu",kernelFunc:CI},AI=Uw((function(e,t){return Math.floor(e/t)})),TI=cS(aa,AI,null,"int32"),NI={kernelName:aa,backendName:"cpu",kernelFunc:TI};var EI={kernelName:$r,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,l=a.strides,c=a.pad,u=a.dataFormat,h=a.dilations,d=a.dimRoundingMode,f=a.activation,p=a.leakyreluAlpha,g=xC({inputs:{x:r,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d}});if(o){var v=g;if("NCHW"===u&&1===o.shape.length&&1!==o.shape[0]){var m=gS({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});g=fS({inputs:{a:g,b:m},backend:n}),n.disposeIntermediateTensorInfo(m)}else g=fS({inputs:{a:g,b:o},backend:n});n.disposeIntermediateTensorInfo(v)}if(f){var x=g;if("NCHW"===u&&"prelu"===f&&1===s.shape.length&&1!==s.shape[0]){var b=gS({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});g=tS(n,g,f,b,p),n.disposeIntermediateTensorInfo(b)}else g=tS(n,g,f,s,p);n.disposeIntermediateTensorInfo(x)}return g}};var RI={kernelName:Qr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,l=a.strides,c=a.pad,u=a.dataFormat,h=a.dilations,d=a.dimRoundingMode,f=a.activation,p=a.leakyreluAlpha,g=MC({inputs:{x:r,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d}});if(o){var v=g;g=fS({inputs:{a:g,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(f){var m=g;g=tS(n,g,f,s,p),n.disposeIntermediateTensorInfo(m)}return g}};function FI(e,t,n,a,r,i,o,s,l){for(var c=_s([a,i],n),u=0;u<a;u++){for(var h=[],d=0,f=0;f<r;f++){var p=e[u*r+f];d+=p*o[f],h.push(p)}if(d<0||d>=l/i)throw new Error("Invalid indices: ".concat(h," does not index into ").concat(s));for(var g=0;g<i;g++)c.values[u*i+g]=t.get.apply(t,Ke(t.indexToLoc(d*i+g)))}return c}var DI={kernelName:oa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.params,r=t.indices,i=ht(a.shape),o=r.shape,s=o[o.length-1],l=u(Id(a,r),4),c=l[0],h=l[1],d=l[2],f=l[3];if(0===h)return n.makeTensorInfo(c,a.dtype,[]);var p=FI(n.data.get(r.dataId).values,n.bufferSync(a),a.dtype,h,s,d,f,a.shape,i);return n.makeTensorInfo(c,a.dtype,p.values)}};function LI(e,t,n){for(var a=_s(n,e.dtype),r=0;r<a.size;++r){var i=a.indexToLoc(r).slice(),o=i[0],s=i[2],l=t.locToIndex([o,s]);i[2]=t.values[l];var c=e.locToIndex(i);0<=c&&c<e.values.length&&(a.values[r]=e.values[c])}return a}var MI={kernelName:ia,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.indices,o=a.axis,s=a.batchDims;Dw([r,i],"gatherV2");for(var l=xt(o,r.shape)[0],c=n.data.get(i.dataId).values,u=r.shape[l],h=function(e){var t=c[e];st(t<=u-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(u-1,"]")}))},d=0;d<c.length;++d)h(d);var f=s;null==s&&(f=0);var p=ht(i.shape),g=$d(r,i,l,f),v=gS({inputs:{x:r},backend:n,attrs:{shape:[g.batchSize,g.outerSize,g.dimSize,g.sliceSize]}}),m=gS({inputs:{x:i},backend:n,attrs:{shape:[g.batchSize,p/g.batchSize]}}),x=[g.batchSize,g.outerSize,p/g.batchSize,g.sliceSize],b=n.bufferSync(m),y=LI(n.bufferSync(v),b,x);return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(g.outputShape,y.dtype,y.values)}},OI=Uw((function(e,t){return e>t?1:0})),PI=cS(sa,OI,null,"bool"),_I={kernelName:sa,backendName:"cpu",kernelFunc:PI},zI=Uw((function(e,t){return e>=t?1:0})),BI=cS(la,zI,null,"bool"),WI={kernelName:la,backendName:"cpu",kernelFunc:BI};var HI={kernelName:ua,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.input,r=ht(a.shape),i=a.shape[a.shape.length-1],o=gS({inputs:{x:a},backend:n,attrs:{shape:[r/i,i]}}),s=vI(o,!0,n),l=gS({inputs:{x:s},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}},VI=Ow(da,(function(e){return Number.isFinite(e)?1:0}),"bool"),UI={kernelName:da,backendName:"cpu",kernelFunc:VI},XI=Ow(fa,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),GI={kernelName:fa,backendName:"cpu",kernelFunc:XI},YI=Ow(pa,(function(e){return Number.isNaN(e)?1:0}),"bool"),jI={kernelName:pa,backendName:"cpu",kernelFunc:YI},qI=Uw((function(e,t){return e<t?1:0})),KI=cS(va,qI,null,"bool"),ZI={kernelName:va,backendName:"cpu",kernelFunc:KI},$I=Uw((function(e,t){return e<=t?1:0})),QI=cS(ma,$I,null,"bool"),JI={kernelName:ma,backendName:"cpu",kernelFunc:QI};function eA(e,t,n){var a=(t-e)/(n-1),r=Mt(n,"float32");r[0]=e;for(var i=1;i<r.length;i++)r[i]=r[i-1]+a;return r}var tA={kernelName:xa,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,a=eA(n.start,n.stop,n.num);return t.makeTensorInfo([a.length],"float32",a)}},nA=$w((function(e){return Math.log(e)})),aA=Pw(ba,nA),rA={kernelName:ba,backendName:"cpu",kernelFunc:aA},iA=Ow(ya,(function(e){return Math.log1p(e)})),oA={kernelName:ya,backendName:"cpu",kernelFunc:iA},sA=Uw((function(e,t){return e&&t})),lA=cS(ka,sA,null,"bool"),cA={kernelName:ka,backendName:"cpu",kernelFunc:lA},uA=Ow(wa,(function(e){return e?0:1}),"bool"),hA={kernelName:wa,backendName:"cpu",kernelFunc:uA},dA=Uw((function(e,t){return e||t})),fA=cS(Sa,dA,null,"bool"),pA={kernelName:Sa,backendName:"cpu",kernelFunc:fA};var gA={kernelName:Ca,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.depthRadius,o=a.bias,s=a.alpha,l=a.beta;Dw(r,"LRN");var c=r.shape[3],u=c-1,h=n.data.get(r.dataId).values,d=ht(r.shape),f=new Float32Array(d);function p(e){for(var t=e%c,n=e-t+Math.max(0,t-i),a=e-t+Math.min(t+i,u),r=0;n<=a;n++){var o=h[n];r+=o*o}return r}for(var g=0;g<d;g++){var v=p(g),m=h[g]*Math.pow(o+s*v,-l);f[g]=m}return n.makeTensorInfo(r.shape,r.dtype,f)}};var vA={kernelName:Ia,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.y,o=t.dy,s=a.depthRadius,l=a.bias,c=a.alpha,u=a.beta;Dw(o,"LRNGrad");for(var h=ht(o.shape),d=o.shape[3],f=n.data.get(o.dataId).values,p=n.data.get(r.dataId).values,g=n.data.get(i.dataId).values,v=new Float32Array(h),m=h,x=0;x<m;x++){for(var b=x%d,y=x-b+Math.max(0,b-s),k=x-b+Math.min(d,b+s+1),w=0,S=y;S<k;S++)w+=Math.pow(p[S],2);w=c*w+l;for(var C=y;C<k;C++){var I=-2*c*u*p[C]*g[x]/w;x===C&&(I+=Math.pow(w,-u)),I*=f[x],v[C]+=I}}return n.makeTensorInfo(o.shape,r.dtype,v)}};function mA(e,t,n,a){for(var r=yt(a,ht(n)),i=0;i<r.length;++i){for(var o=i*t,s=e[o],l=0;l<t;++l){var c=e[o+l];(Number.isNaN(c)||c>s)&&(s=c)}r[i]=s}return r}function xA(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.reductionIndices,o=a.keepDims,s=n,l=r.shape,c=l.length,h=xt(i,l),d=h,f=Qc(d,c),p=s.data.get(r.dataId).values;if(null!=f){for(var g=new Array(c),v=0;v<g.length;v++)g[v]=l[f[v]];p=TS(p,l,r.dtype,f,g),d=eu(d.length,c),l=g}Dw(r,"max"),$c("max",d,c);var m=u(Kc(l,d),2),x=m[0],b=mA(p,ht(m[1]),x,r.dtype),y=s.write(b,x,r.dtype),k=x;o&&(k=Zc(x,h));return{dataId:y,shape:k,dtype:r.dtype}}var bA={kernelName:Aa,backendName:"cpu",kernelFunc:xA},yA=Uw((function(e,t){return Math.max(e,t)})),kA=cS(Ta,yA),wA={kernelName:Ta,backendName:"cpu",kernelFunc:kA};var SA={kernelName:Na,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x;Dw(r,"maxPool");var i=a.filterSize,o=a.strides,s=a.pad,l=a.dimRoundingMode;st(Zl(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,u=zl(r.shape,i,o,1,s,l);if(1===u.filterWidth&&1===u.filterHeight&&dt(u.inShape,u.outShape))c=Bw({inputs:{x:r},backend:n});else{var h=n.data.get(r.dataId).values,d=Rt(r.shape),f=GS(h,r.shape,r.dtype,d,u,"max");c=n.makeTensorInfo(u.outShape,r.dtype,f.values)}return c}};var CA={kernelName:Ra,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.filterSize,o=a.strides,s=a.pad,l=a.dimRoundingMode,c=a.dataFormat;Dw(r,"maxPool3d");var u=Bl(r.shape,i,o,1,s,l,c),h=jS(n.data.get(r.dataId).values,r.shape,r.dtype,Rt(r.shape),u,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}};var IA={kernelName:Fa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.dy,i=t.input,o=a.filterSize,s=a.strides,l=a.pad,c=a.dimRoundingMode;Dw([r,i],"maxPool3DGrad");for(var u=Bl(i.shape,o,s,1,l,c),h=function(e,t){for(var n=_s(t.outShape,"int32"),a=t.strideDepth,r=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,f=t.padInfo.top,p=t.padInfo.left,g=0;g<t.batchSize;++g)for(var v=0;v<t.inChannels;++v)for(var m=0;m<t.outDepth;++m){for(var x=m*a-d,b=x;b<0;)b+=o;for(var y=Math.min(t.inDepth,c+x),k=0;k<t.outHeight;++k){for(var w=k*r-f,S=w;S<0;)S+=s;for(var C=Math.min(t.inHeight,u+w),I=0;I<t.outWidth;++I){for(var A=I*i-p,T=A;T<0;)T+=l;for(var N=Math.min(t.inWidth,h+A),E=Number.NEGATIVE_INFINITY,R=-1,F=b;F<y;F+=o)for(var D=F-x,L=S;L<C;L+=s)for(var M=L-w,O=T;O<N;O+=l){var P=O-A,_=e.get(g,F,L,O,v);_>=E&&(E=_,R=D*u*h+M*u+P)}n.set(R,g,m,k,I,v)}}}return n}(n.bufferSync(i),u),d=u.strideDepth,f=u.strideHeight,p=u.strideWidth,g=u.dilationDepth,v=u.dilationHeight,m=u.dilationWidth,x=u.effectiveFilterDepth,b=u.effectiveFilterHeight,y=u.effectiveFilterWidth,k=x-1-u.padInfo.front,w=y-1-u.padInfo.left,S=b-1-u.padInfo.top,C=_s(i.shape,"float32"),I=n.bufferSync(r),A=0;A<u.batchSize;++A)for(var T=0;T<u.inChannels;++T)for(var N=0;N<u.inDepth;++N)for(var E=0;E<u.inHeight;++E)for(var R=0;R<u.inWidth;++R){for(var F=N-k,D=E-S,L=R-w,M=0,O=0;O<x;O+=g){var P=(F+O)/d;if(!(P<0||P>=u.outDepth||Math.floor(P)!==P))for(var _=0;_<b;_+=v){var z=(D+_)/f;if(!(z<0||z>=u.outHeight||Math.floor(z)!==z))for(var B=0;B<y;B+=m){var W=(L+B)/p;if(!(W<0||W>=u.outWidth||Math.floor(W)!==W)){var H=x*b*y-1-h.get(A,P,z,W,T)===O*b*y+_*y+B?1:0;if(0!==H)M+=I.get(A,P,z,W,T)*H}}}}C.set(M,A,N,E,R,T)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};var AA={kernelName:Ea,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.dy,i=t.input,o=i;Dw([i,t.output],"maxPoolGrad");for(var s=a.filterSize,l=a.strides,c=a.pad,u=a.dimRoundingMode,h=zl(o.shape,s,l,1,c,u),d=n.data.get(o.dataId).values,f=_s(h.outShape,o.dtype,YS(d,o.shape,o.dtype,h).values),p=h.strideHeight,g=h.strideWidth,v=h.dilationHeight,m=h.dilationWidth,x=h.effectiveFilterHeight,b=h.effectiveFilterWidth,y=b-1-h.padInfo.left,k=x-1-h.padInfo.top,w=_s(o.shape,"float32"),S=n.data.get(r.dataId).values,C=_s(r.shape,"float32",S),I=0;I<h.batchSize;++I)for(var A=0;A<h.inChannels;++A)for(var T=0;T<h.inHeight;++T)for(var N=0;N<h.inWidth;++N){for(var E=T-k,R=N-y,F=0,D=0;D<x;D+=v){var L=(E+D)/p;if(!(L<0||L>=h.outHeight||Math.floor(L)!==L))for(var M=0;M<b;M+=m){var O=(R+M)/g;if(!(O<0||O>=h.outWidth||Math.floor(O)!==O)){var P=x*b-1-f.get(I,L,O,A)===D*b+M?1:0;if(0!==P)F+=C.get(I,L,O,A)*P}}}w.set(F,I,T,N,A)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var TA={kernelName:Da,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,r=t.x,i=n.filterSize,o=n.strides,s=n.pad,l=n.includeBatchInIndex,c=a;Dw(r,"MaxPoolWithArgmax");var h=c.data.get(r.dataId).values,d=zl(r.shape,i,o,[1,1],s),f=function(e,t,n,a,r){var i=GS(e,0,n,Rt(t),r,"max"),o=YS(e,t,n,r,!0,a);return[i.values,o.values]}(h,r.shape,r.dtype,l,d),p=u(f,2),g=p[0],v=p[1],m=c.write(g,d.outShape,r.dtype),x=c.write(v,d.outShape,r.dtype);return[{dataId:m,shape:d.outShape,dtype:r.dtype},{dataId:x,shape:d.outShape,dtype:"int32"}]}};var NA={kernelName:La,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis,o=a.keepDims,s=xt(i,r.shape),l=ht(Kc(r.shape,s)[1]),c=[],u=n.makeTensorInfo([],"float32",new Float32Array([l]));c.push(u);var h=sS({inputs:{x:r},backend:n,attrs:{dtype:"float32"}});c.push(h);var d=uI({inputs:{a:h,b:u},backend:n});c.push(d);var f=YC({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:o}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),f}};var EA={kernelName:Ma,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis,o=a.keepDims;Dw(r,"min");var s=xt(i,r.shape),l=s,c=Qc(l,r.shape.length),h=r;null!=c&&(h=NS({inputs:{x:r},backend:n,attrs:{perm:c}}),l=eu(l.length,r.shape.length)),$c("min",l,h.shape.length);for(var d=u(Kc(h.shape,l),2),f=d[0],p=ht(d[1]),g=Mt(ht(f),h.dtype),v=n.data.get(h.dataId).values,m=0;m<g.length;++m){for(var x=m*p,b=v[x],y=0;y<p;++y){var k=v[x+y];(Number.isNaN(k)||k<b)&&(b=k)}g[m]=b}null!=c&&n.disposeIntermediateTensorInfo(h);var w=n.makeTensorInfo(f,h.dtype,g);if(o){var S=gS({inputs:{x:w},backend:n,attrs:{shape:Zc(f,s)}});return n.disposeIntermediateTensorInfo(w),S}return w}},RA=Uw((function(e,t){return Math.min(e,t)})),FA=cS(Oa,RA),DA={kernelName:Oa,backendName:"cpu",kernelFunc:FA};var LA={kernelName:Pa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.paddings,o=a.mode;Dw(r,"mirrorPad");for(var s=i.map((function(e,t){return e[0]+r.shape[t]+e[1]})),l=i.map((function(e){return e[0]})),c=i.map((function(e,t){return e[0]+r.shape[t]})),u="reflect"===o?0:1,h=n.data.get(r.dataId).values,d=r.shape.length,f=Rt(r.shape),p=ht(s),g=s.length,v=Rt(s),m=yt(r.dtype,p),x=0;x<p;x++){for(var b=zt(x,g,v),y=0;y<g;y++)b[y]<l[y]?b[y]=2*l[y]-b[y]-u:b[y]>=c[y]&&(b[y]=2*(c[y]-1)-b[y]+u);b=b.map((function(e,t){return e-l[t]}));var k=_t(b,d,f);m[x]=h[k]}return{dataId:n.write(m,s,r.dtype),shape:s,dtype:r.dtype}}},MA=Uw((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),OA=cS(_a,MA),PA={kernelName:_a,backendName:"cpu",kernelFunc:OA},_A=n(8598);function zA(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.logits,i=a.dim,o=r.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(o," and dim was ").concat(s));var l=xt([s],r.shape),c=xA({inputs:{x:r},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=Zc(c.shape,l),h=gS({inputs:{x:c},backend:n,attrs:{shape:u}}),d=pI({inputs:{a:r,b:h},backend:n}),f=nI({inputs:{x:d},backend:n}),p=YC({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),g=gS({inputs:{x:p},backend:n,attrs:{shape:u}}),v=uI({inputs:{a:f,b:g},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),v}var BA={kernelName:Ir,backendName:"cpu",kernelFunc:zA};var WA={kernelName:za,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.logits,i=a.numSamples,o=a.seed,s=a.normalized;Dw(r,"multinomial");for(var l=s?r:zA({inputs:{logits:r},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],h=n.data.get(l.dataId).values,d=[c,i],f=Mt(ht(d),"int32"),p=0;p<c;++p){var g=p*u,v=new Float32Array(u-1);v[0]=h[g];for(var m=1;m<v.length;++m)v[m]=v[m-1]+h[g+m];for(var x=_A.alea(o.toString()),b=p*i,y=0;y<i;++y){var k=x();f[b+y]=v.length;for(var w=0;w<v.length;w++)if(k<v[w]){f[b+y]=w;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",f)}};function HA(e,t,n){var a=Ii(-1,n);return VC([],t,a,e,n)}var VA={kernelName:Wa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.x;Dw(a,"neg");var r=u(HA(n.data.get(a.dataId).values,a.shape,a.dtype),2),i=r[0],o=r[1];return n.makeTensorInfo(o,a.dtype,i)}},UA=xh;var XA={kernelName:Va,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.boxes,i=t.scores,o=a.maxOutputSize,s=a.iouThreshold,l=a.scoreThreshold;Dw(r,"NonMaxSuppression");var c=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values,h=UA(c,u,o,s,l).selectedIndices;return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},GA=bh;var YA={kernelName:Ua,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.boxes,i=t.scores,o=a.maxOutputSize,s=a.iouThreshold,l=a.scoreThreshold,c=a.padToMaxOutputSize;Dw(r,"NonMaxSuppressionPadded");var u=n.data.get(r.dataId).values,h=n.data.get(i.dataId).values,d=GA(u,h,o,s,l,c),f=d.selectedIndices,p=d.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},jA=yh;var qA={kernelName:Xa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.boxes,i=t.scores,o=a.maxOutputSize,s=a.iouThreshold,l=a.scoreThreshold,c=a.softNmsSigma;Dw(r,"NonMaxSuppressionWithScore");var u=n.data.get(r.dataId).values,h=n.data.get(i.dataId).values,d=jA(u,h,o,s,l,c),f=d.selectedIndices,p=d.selectedScores;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},KA=Uw((function(e,t){return e!==t?1:0})),ZA=cS(Ha,KA,null,"bool"),$A={kernelName:Ha,backendName:"cpu",kernelFunc:ZA};var QA={kernelName:Ya,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.indices,i=a.depth,o=a.onValue,s=a.offValue;Dw(r,"oneHot");var l=ht(r.shape),c=new Float32Array(l*i);c.fill(s);for(var u=n.data.get(r.dataId).values,h=0;h<l;++h)u[h]>=0&&u[h]<i&&(c[h*i+u[h]]=o);return n.makeTensorInfo([].concat(Ke(r.shape),[i]),"int32",c)}};function JA(e){var t=e.inputs,n=e.backend,a=t.x;if("string"===a.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===a.dtype){var r=iS({inputs:{input:a},backend:n}),i=JA({inputs:{x:r},backend:n}),o=pC({inputs:{input:a},backend:n}),s=JA({inputs:{x:o},backend:n}),l=nS({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}return yI({backend:n,attrs:{shape:a.shape,value:0,dtype:a.dtype}})}var eT={kernelName:jr,backendName:"cpu",kernelFunc:JA};var tT={kernelName:Ga,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,a=t.backend,r=n.x;if("string"===r.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===r.dtype){var i=iS({inputs:{input:r},backend:a}),o=e({inputs:{x:i},backend:a}),s=pC({inputs:{input:r},backend:a}),l=JA({inputs:{x:s},backend:a}),c=nS({inputs:{real:o,imag:l},backend:a});return a.disposeIntermediateTensorInfo(i),a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(s),a.disposeIntermediateTensorInfo(l),c}return yI({backend:a,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}};function nT(e){var t=e.inputs,n=e.backend,a=e.attrs.axis;if(1===t.length)return rI({inputs:{input:t[0]},backend:n,attrs:{dim:a}});var r=t[0].shape,i=t[0].dtype;t.forEach((function(e){lt(r,e.shape,"All tensors passed to stack must have matching shapes"),st(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=vC({inputs:t.map((function(e){var t=rI({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t})),backend:n,attrs:{axis:a}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var aT={kernelName:ja,backendName:"cpu",kernelFunc:nT};var rT={kernelName:qa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.paddings,o=a.constantValue;Dw(r,"pad");var s=i.map((function(e,t){return e[0]+r.shape[t]+e[1]})),l=i.map((function(e){return e[0]})),c=n.data.get(r.dataId).values,u=ht(r.shape),h=r.shape.length,d=Rt(r.shape),f=ht(s),p=s.length,g=Rt(s),v=yt(r.dtype,f);0!==o&&v.fill(o);for(var m=0;m<u;m++){v[_t(zt(m,h,d).map((function(e,t){return e+l[t]})),p,g)]=c[m]}return{dataId:n.write(v,s,r.dtype),shape:s,dtype:r.dtype}}},iT=Uw((function(e,t){return Math.pow(e,t)})),oT=cS(Ka,iT),sT={kernelName:Ka,backendName:"cpu",kernelFunc:oT};function lT(e,t,n,a){for(var r=u(Kc(e,a),2),i=r[0],o=r[1],s=io(t,"int32"),l=Mt(ht(i),s),c=ht(o),h=0;h<l.length;++h){for(var d=h*c,f=1,p=0;p<c;++p)f*=n[d+p];l[h]=f}return{outVals:l,outShape:i,outDtype:s}}var cT={kernelName:$a,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis,o=a.keepDims;Dw(r,"prod");var s=r.shape.length,l=xt(i,r.shape),c=Qc(l,s),u=l,h=r,d=[];null!=c&&(h=NS({inputs:{x:r},backend:n,attrs:{perm:c}}),d.push(h),u=eu(u.length,s));var f=n.data.get(h.dataId).values,p=lT(h.shape,h.dtype,f,u),g=p.outVals,v=p.outShape,m=p.outDtype,x=v;return o&&(x=Zc(v,l)),d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(x,m,g)}};function uT(e,t,n,a){if(e===t||e<t&&n<0||t<e&&n>1)return Mt(0,a);var r=Mt(Math.abs(Math.ceil((t-e)/n)),a);t<e&&1===n&&(n=-1),r[0]=e;for(var i=1;i<r.length;i++)r[i]=r[i-1]+n;return r}var hT={kernelName:Qa,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,a=n.start,r=n.stop,i=n.dtype,o=uT(a,r,n.step,i);return t.makeTensorInfo([o.length],i,o)}},dT=Ow(er,(function(e){return 1/e})),fT={kernelName:er,backendName:"cpu",kernelFunc:dT};var pT={kernelName:ir,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.images,i=a.alignCorners,o=a.halfPixelCenters,s=a.size;Dw(r,"resizeBilinear");for(var l=Rt(r.shape),c=u(s,2),h=c[0],d=c[1],f=u(r.shape,4),p=f[0],g=f[1],v=f[2],m=f[3],x=n.data.get(r.dataId).values,b=new Float32Array(ht([p,h,d,m])),y=[i&&h>1?g-1:g,i&&d>1?v-1:v],k=[i&&h>1?h-1:h,i&&d>1?d-1:d],w=0,S=y[0]/k[0],C=y[1]/k[1],I=0;I<p;I++)for(var A=0;A<h;A++){var T=void 0;T=o?S*(A+.5)-.5:S*A;for(var N=Math.max(0,Math.floor(T)),E=T-N,R=Math.min(g-1,Math.ceil(T)),F=I*l[0]+N*l[1],D=I*l[0]+R*l[1],L=0;L<d;L++){var M=void 0;M=o?C*(L+.5)-.5:C*L;for(var O=Math.max(0,Math.floor(M)),P=M-O,_=Math.min(v-1,Math.ceil(M)),z=F+O*l[2],B=D+O*l[2],W=F+_*l[2],H=D+_*l[2],V=0;V<m;V++){var U=x[z+V],X=x[B+V],G=U+(x[W+V]-U)*P,Y=G+(X+(x[H+V]-X)*P-G)*E;b[w++]=Y}}}return n.makeTensorInfo([p,h,d,m],"float32",b)}};var gT={kernelName:or,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.images,i=t.dy,o=a.alignCorners;Dw([i,r],"resizeBilinearGrad");for(var s=Rt(r.shape),l=u(r.shape,4),c=l[0],h=l[1],d=l[2],f=l[3],p=u(i.shape,3),g=p[1],v=p[2],m=new Float32Array(c*h*d*f),x=[o&&g>1?h-1:h,o&&v>1?d-1:d],b=[o&&g>1?g-1:g,o&&v>1?v-1:v],y=x[0]/b[0],k=x[1]/b[1],w=n.data.get(i.dataId).values,S=0,C=0;C<c;C++)for(var I=C*s[0],A=0;A<g;A++)for(var T=A*y,N=Math.floor(T),E=Math.min(Math.ceil(T),h-1),R=I+N*s[1],F=I+E*s[1],D=T-N,L=1-D,M=0;M<v;M++)for(var O=M*k,P=Math.floor(O),_=Math.min(Math.ceil(O),d-1),z=O-P,B=1-z,W=R+P*s[2],H=R+_*s[2],V=F+P*s[2],U=F+_*s[2],X=L*B,G=L*z,Y=D*B,j=D*z,q=0;q<f;q++){var K=w[S++];m[W+q]+=K*X,m[H+q]+=K*G,m[V+q]+=K*Y,m[U+q]+=K*j}return n.makeTensorInfo([c,d,h,f],"float32",m)}};var vT={kernelName:ar,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.images,i=a.alignCorners,o=a.halfPixelCenters,s=a.size;Dw(r,"resizeNearestNeighbor");for(var l=Rt(r.shape),c=u(s,2),h=c[0],d=c[1],f=u(r.shape,4),p=f[0],g=f[1],v=f[2],m=f[3],x=n.data.get(r.dataId).values,b=new Float32Array(p*h*d*m),y=[i&&h>1?g-1:g,i&&d>1?v-1:v],k=[i&&h>1?h-1:h,i&&d>1?d-1:d],w=y[0]/k[0],S=y[1]/k[1],C=0,I=0;I<p;I++)for(var A=I*l[0],T=0;T<h;T++){var N=o?w*(T+.5):w*T,E=Math.min(g-1,i?Math.round(N):Math.floor(N));o&&(E=Math.max(0,E));for(var R=A+E*l[1],F=0;F<d;F++){var D=o?S*(F+.5):S*F,L=Math.min(v-1,i?Math.round(D):Math.floor(D));o&&(L=Math.max(0,L));for(var M=R+L*l[2],O=0;O<m;O++){var P=x[M+O];b[C++]=P}}}return n.makeTensorInfo([p,h,d,m],r.dtype,b)}};var mT={kernelName:rr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.images,i=t.dy,o=a.alignCorners;Dw([i,r],"resizeNearestNeighborGrad");for(var s=Rt(r.shape),l=Rt(i.shape),c=u(r.shape,4),h=c[0],d=c[1],f=c[2],p=c[3],g=u(i.shape,3),v=g[1],m=g[2],x=new Float32Array(h*d*f*p),b=n.data.get(i.dataId).values,y=[o&&v>1?d-1:d,o&&m>1?f-1:f],k=[o&&v>1?v-1:v,o&&m>1?m-1:m],w=y[0]/k[0],S=y[1]/k[1],C=1/w,I=1/S,A=2*Math.ceil(C)+2,T=2*Math.ceil(I)+2,N=0;N<h;N++)for(var E=N*s[0],R=0;R<d;R++)for(var F=E+R*s[1],D=Math.floor(R*C),L=Math.floor(D-A/2),M=0;M<f;M++)for(var O=F+M*s[2],P=Math.floor(M*I),_=Math.floor(P-T/2),z=0;z<p;z++){for(var B=0,W=0;W<A;W++){var H=W+L;if(!(H<0||H>=v)){var V=E+H*l[1],U=H*w;if(R===Math.min(d-1,o?Math.round(U):Math.floor(U)))for(var X=0;X<T;X++){var G=X+_;if(!(G<0||G>=m)){var Y=V+G*l[2],j=G*S;M===Math.min(f-1,o?Math.round(j):Math.floor(j))&&(B+=b[Y+z])}}}}x[O+z]=B}return n.makeTensorInfo(r.shape,r.dtype,x)}};var xT={kernelName:lr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.dims;Dw(r,"reverse");var o=r.shape.length,s=xt(i,r.shape);if(0===o)return Bw({inputs:{x:r},backend:n});for(var l=new ji(r.shape,r.dtype),c=n.bufferSync(r),u=function(e){var t=l.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=r.shape[e]-1-n[e]})),l.set.apply(l,[c.get.apply(c,Ke(n))].concat(Ke(t)))},h=0;h<l.size;h++)u(h);return n.makeTensorInfo(l.shape,l.dtype,l.values)}},bT={kernelName:Kr,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,a=e.backend,r=t.image,i=n.radians,o=n.fillValue,s=n.center,l=a,c=yt(r.dtype,ht(r.shape)),h=u(r.shape,4),d=h[0],f=h[1],p=h[2],g=h[3],v=u(bd(s,f,p),2),m=v[0],x=v[1],b=Math.sin(i),y=Math.cos(i),k=l.data.get(r.dataId).values,w=0;w<d;w++)for(var S=w*p*f*g,C=0;C<f;C++)for(var I=C*(p*g),A=0;A<p;A++)for(var T=A*g,N=0;N<g;N++){var E=[d,C,A,N],R=E[2],F=E[1],D=(R-m)*y-(F-x)*b,L=(R-m)*b+(F-x)*y;D=Math.round(D+m),L=Math.round(L+x);var M=o;if("number"!==typeof o&&(M=3===N?255:o[N]),D>=0&&D<p&&L>=0&&L<f)M=k[S+L*(p*g)+D*g+N];c[S+I+T+N]=M}return{dataId:l.write(c,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},yT=Ow(cr,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),kT={kernelName:cr,backendName:"cpu",kernelFunc:yT},wT=$w((function(e){return 1/Math.sqrt(e)})),ST=Pw(ur,wT),CT={kernelName:ur,backendName:"cpu",kernelFunc:ST};function IT(e,t,n,a,r,i,o,s,l,c){var u=[a/r,r],h=e.values,d=t.values;if(0===a)return _s(n,t.dtype);var f=_s(u,t.dtype);"string"===typeof l||"number"===typeof l?f.values.fill(l):"boolean"===typeof l&&f.values.fill(+l);for(var p=0;p<i;p++){for(var g=[],v=0,m=0;m<o;m++){var x=h[p*o+m];g.push(x),v+=x*s[m]}if(v<0||v>=a/r)throw new Error("Invalid indices: ".concat(g," does not index into ").concat(n));for(var b=0;b<r;b++)c?f.values[v*r+b]+=d[p*r+b]:f.values[v*r+b]=0===t.rank?d[0]:d[p*r+b]}return f}var AT={kernelName:hr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.indices,i=t.updates,o=a.shape,s=Ad(0,r,o),l=s.sliceRank,c=s.numUpdates,u=s.sliceSize,h=s.strides,d=s.outputSize,f=IT(n.bufferSync(r),n.bufferSync(i),o,d,u,c,l,h,0,!0);return n.makeTensorInfo(o,f.dtype,f.values)}};function TT(e,t){for(var n=0,a=e.length,r=0;n<a;)e[r=Math.floor((n+a)/2)]<t?n=r+1:a=r;return a}function NT(e,t){for(var n=0,a=e.length,r=0;n<a;)e[r=Math.floor((n+a)/2)]<=t?n=r+1:a=r;return a}var ET={kernelName:dr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.sortedSequence,i=t.values,o=a.side,s=function(e,t,n,a,r,i){for(var o=kt("int32",n*r),s=0;s<n;++s)for(var l=e.slice(s*a,(s+1)*a),c=s*r,u=0;u<r;++u)o[c+u]="left"===i?TT(l,t[u+c]):NT(l,t[u+c]);return o}(n.data.get(r.dataId).values,n.data.get(i.dataId).values,r.shape[0],r.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",s)}};var RT={kernelName:fr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.condition,r=t.t,i=t.e;Dw([a,r,i],"select");for(var o=a.shape.length,s=n.data.get(a.dataId).values,l=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values,u=io(r.dtype,i.dtype),h=Mt(ht(r.shape),u),d=0,f=0===o||o>1||1===r.shape.length?1:ht(r.shape.slice(1)),p=0;p<s.length;p++)for(var g=0;g<f;g++)1===s[p]?h[d++]=l[p]:h[d++]=c[p];return n.makeTensorInfo(r.shape,u,h)}},FT=Ow(pr,(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)})),DT={kernelName:pr,backendName:"cpu",kernelFunc:FT},LT=Ow(xr,(function(e){return e<0?-1:e>0?1:0})),MT={kernelName:xr,backendName:"cpu",kernelFunc:LT},OT=Ow(vr,(function(e){return Math.sin(e)})),PT={kernelName:vr,backendName:"cpu",kernelFunc:OT},_T=Ow(mr,(function(e){return Math.sinh(e)})),zT={kernelName:mr,backendName:"cpu",kernelFunc:_T},BT=Math.log(1.1920928955078125e-7)+2,WT=Ow(yr,(function(e){var t=e>-BT,n=e<BT,a=Math.exp(e);return n?a:t?e:Math.log(1+a)})),HT={kernelName:yr,backendName:"cpu",kernelFunc:WT};var VT={kernelName:Sr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.blockShape,o=a.paddings;Dw([r],"spaceToBatchND");var s=ht(i),l=[[0,0]];l.push.apply(l,Ke(o));for(var c=1+i.length;c<r.shape.length;++c)l.push([0,0]);var u=rT.kernelFunc({inputs:{x:r},backend:n,attrs:{paddings:l,constantValue:0}}),h=yd(u.shape,i,s,!1),d=kd(h.length,i.length,!1),f=wd(u.shape,i,s,!1),p=gS({inputs:{x:u},backend:n,attrs:{shape:h}}),g=NS({inputs:{x:p},backend:n,attrs:{perm:d}}),v=gS({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),v}};function UT(e,t,n,a,r,i,o){var s=t[0],l=i[0],c=new Array(l),u=new Array(s),h=t[1];if(0===l){if(0!==s)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(s));return[kt(n,0),[0,h],kt(r,0),c,u]}for(var d,f=!0,p=0,g=new Array(l).fill(0),v=0;v<s;++v){var m=e[v*h];if(m<0)throw new Error((d=m,"indices(".concat(v,", 0) is invalid: ").concat(d," < 0")));if(m>=l)throw new Error(qd(v,m,l));++g[m],f=f&&m>=p,p=m}for(var x=!0,b=0;b<l;++b){var y=0===g[b];c[b]=y,x=x&&!y,g[b]=Math.max(g[b],1),b>0&&(g[b]+=g[b-1])}if(x&&f){for(var k=e,w=a,S=0;S<s;++S)u[S]=S;return[k,[s,h],w,c,u]}for(var C=g[l-1],I=kt(n,C*h),A=kt(r,C),T=new Array(l).fill(0),N=0;N<s;++N){var E=e[N*h],R=T[E],F=(0===E?0:g[E-1])+R;T[E]++;for(var D=0;D<h;++D)I[F*h+D]=e[N*h+D];A[F]=a[N],u[N]=F}for(var L=0;L<l;++L){if(0===T[L]){var M=0===L?0:g[L-1];I[M*h+0]=L;for(var O=1;O<h;++O)I[M*h+O]=0;A[M]=o}}return[I,[C,h],A,c,u]}var XT={kernelName:Ar,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.indices,r=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==a.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(a.shape));if(1!==r.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(r.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.data.get(a.dataId).values,l=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values[0],d=u(UT(s,a.shape,a.dtype,l,r.dtype,c,h),5),f=d[0],p=d[1],g=d[2],v=d[3],m=d[4];return[n.makeTensorInfo(p,a.dtype,f),n.makeTensorInfo([p[0]],r.dtype,g),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([m.length],a.dtype,new Int32Array(m))]}};function GT(e,t,n,a,r){for(var i,o,s=ht(a),l=t[0],c=r.length,u=[],h=1,d=-1,f=0;f<c;++f){var p=r[f];if(-1===p){if(-1!==d)throw new Error((o=f,"only one output dimension may be -1, not both ".concat(d," and ").concat(o)));d=f,u.push(1)}else{if(p<0)throw new Error((i=p,"size ".concat(f," must be non-negative, not ").concat(i)));h*=p,u.push(p)}}if(-1!==d){if(h<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var g=Math.trunc(s/h);if(h*g!==s)throw new Error(function(e,t){var n=ht(e),a=ht(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(a,". inputShape=").concat(e," outputShape= ").concat(t)}(a,u));u[d]=g}if(ht(u)!==s)throw new Error(function(e,t){var n=ht(e),a=ht(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(a,". inputShape=").concat(e," outputShape=").concat(t)}(a,u));var v=a.length,m=[];if(v>0){m[v-1]=1;for(var x=v-2;x>=0;--x)m[x]=m[x+1]*a[x+1]}var b=[];if(c>0){b[c-1]=1;for(var y=c-2;y>=0;--y)b[y]=b[y+1]*u[y+1]}for(var k=kt(n,l*c),w=0;w<l;++w){for(var S=0,C=0;C<v;++C)S+=e[w*v+C]*m[C];for(var I=0;I<c;++I)k[w*c+I]=Math.trunc(S/b[I]),S%=b[I]}return[k,[l,c],u]}var YT={kernelName:Tr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.inputIndices,r=t.inputShape,i=t.newShape;if(2!==a.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(a.shape));if(1!==r.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(r.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(r.dataId).values),s=n.data.get(a.dataId).values,l=Array.from(n.data.get(i.dataId).values),c=u(GT(s,a.shape,a.dtype,o,l),3),h=c[0],d=c[1],f=c[2];return[n.makeTensorInfo(d,a.dtype,h),n.makeTensorInfo([f.length],i.dtype,new Int32Array(f))]}};function jT(e,t,n,a,r){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=a.length,l=[t[0],e.length/t[0]],c=l[1],u=s>0?r[s-1]+1:0,h=u;if(h<0)throw new Error("segment ids must be >= 0");var d=t.slice();d[0]=h;var f=d.reduce((function(e,t){return e*t}),1),p=kt(n,f);if(0===s)return h>0&&p.fill(o),[p,d];if(h<=0)throw new Error("segment ids must be >= 0");for(var g=0,v=1,m=0,x=r[g];;){var b=0;if(v<s){if(x===(b=r[v])){++v;continue}if(x>=b)throw new Error("segment ids are not increasing")}if(x<0||x>=h)throw new Error(Kd(x,h));x>m&&p.fill(o,m*c,x*c);for(var y=g;y<v;++y){var k=a[y];if(k<0||k>=l[0])throw new Error(Zd(y,a[y],l[0]));for(var w=0;w<c;w++)p[x*c+w]+=e[k*c+w]}if(i)for(var S=0;S<c;S++)p[x*c+S]/=v-g;if(g=v,m=x+1,x=b,++v>s)break}return m<h&&p.fill(o,m*c,h*c),[p,d]}var qT={kernelName:Nr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.data,r=t.indices,i=t.segmentIds;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(r.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(r.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=u(jT(o,a.shape,a.dtype,s,l,!0),2),h=c[0],d=c[1];return n.makeTensorInfo(d,a.dtype,h)}};var KT={kernelName:Er,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.data,r=t.indices,i=t.segmentIds;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(r.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(r.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=u(jT(o,a.shape,a.dtype,s,l),2),h=c[0],d=c[1];return n.makeTensorInfo(d,a.dtype,h)}};var ZT={kernelName:Rr,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,a=e.backend,r=e.attrs,i=n.sparseIndices,o=n.sparseValues,s=n.defaultValue,l=r.outputShape,c=Ad(0,i,l),u=c.sliceRank,h=c.numUpdates,d=c.sliceSize,f=c.strides,p=c.outputSize,g=!1,v=a.bufferSync(i);switch(o.dtype){case"bool":t=IT(v,a.bufferSync(o),l,p,d,h,u,f,Boolean(a.data.get(s.dataId).values[0]),g);break;case"float32":t=IT(v,a.bufferSync(o),l,p,d,h,u,f,a.data.get(s.dataId).values[0],g);break;case"int32":t=IT(v,a.bufferSync(o),l,p,d,h,u,f,a.data.get(s.dataId).values[0],g);break;case"string":t=IT(v,a.bufferSync(o),l,p,d,h,u,f,Ei(a.data.get(s.dataId).values[0]),g);break;default:throw new Error("Unsupported type ".concat(o.dtype))}return a.makeTensorInfo(l,t.dtype,t.values)}};var $T={kernelName:Cr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.numOrSizeSplits,o=xt(a.axis,r.shape)[0],s=jd(r,i,o),l=new Array(r.shape.length).fill(0),c=r.shape.slice();return s.map((function(e){var t=Ke(c);t[o]=e;var a=eC({inputs:{x:r},backend:n,attrs:{begin:l,size:t}});return l[o]+=e,a}))}},QT=$w((function(e){return Math.sqrt(e)})),JT=Ow(kr,(function(e){return Math.sqrt(e)})),eN={kernelName:kr,backendName:"cpu",kernelFunc:JT},tN={kernelName:Dr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.x,r=n;Dw(a,"square");for(var i=r.data.get(a.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var l=i[s];o[s]=l*l}return{dataId:r.write(o,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},nN=Uw((function(e,t){var n=e-t;return n*n})),aN=cS(Fr,nN),rN={kernelName:Fr,backendName:"cpu",kernelFunc:aN},iN=Ow(qr,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),oN={kernelName:qr,backendName:"cpu",kernelFunc:iN};function sN(e,t,n,a){for(var r=_s(e,t.dtype),i=0;i<r.size;i++){for(var o=r.indexToLoc(i),s=new Array(o.length),l=0;l<s.length;l++)s[l]=o[l]*n[l]+a[l];r.set.apply(r,[t.get.apply(t,s)].concat(Ke(o)))}return r}var lN={kernelName:Lr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.begin,o=a.end,s=a.strides,l=a.beginMask,c=a.endMask,u=a.ellipsisMask,h=a.newAxisMask,d=a.shrinkAxisMask;Dw(r,"stridedSlice");var f,p=xl(r.shape,i,o,s,l,c,u,h,d),g=p.finalShapeSparse,v=p.finalShape,m=p.isIdentity,x=p.sliceDim0,b=p.isSimpleSlice,y=p.begin,k=p.end,w=p.strides;if(m)f=gS({inputs:{x:r},backend:n,attrs:{shape:v}});else if(x||b){st(r.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(r.shape.length)}));var S=pl(y,k,w),C=eC({inputs:{x:r},backend:n,attrs:{begin:y,size:S}});f=gS({inputs:{x:C},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(C)}else{var I=sN(g,n.bufferSync(r),w,y);f=n.makeTensorInfo(v,I.dtype,I.values)}return f}},cN=function(){function e(t,n,a,r,i,o){Ze(this,e),this.separator=Ni(t),this.nGramWidths=n,this.leftPad=Ni(a),this.rightPad=Ni(r),this.padWidth=i,this.preserveShort=o}return Qe(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,a,r,i){for(var o=this,s=function(s){var l=o.getPadWidth(i),c=Math.max(0,l-s),u=Math.max(0,l-(r-(s+1))),h=i-(c+u),d=t+(c>0?0:s-l),f=0;f+=c*o.leftPad.length;for(var p=0;p<h;++p)f+=e[d+p].length;f+=u*o.rightPad.length,f+=(c+u+h-1)*o.separator.length,n[a+s]=new Uint8Array(f);for(var g=n[a+s],v=0,m=function(e){return e.forEach((function(e){return g[v++]=e}))},x=0;x<c;++x)m(o.leftPad),m(o.separator);for(var b=0;b<h-1;++b)m(e[d+b]),m(o.separator);if(h>0){m(e[d+h-1]);for(var y=0;y<u;++y)m(o.separator),m(o.rightPad)}else{for(var k=0;k<u-1;++k)m(o.rightPad),m(o.separator);m(o.rightPad)}},l=0;l<r;++l)s(l)}},{key:"compute",value:function(e,t){var n=this,a=e.length,r=t.length;if(r>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<r;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=a))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(a,"]"));i=t[o]}if(i!==a)throw new Error("Last split value must be data size. Expected ".concat(a,", got ").concat(i))}var l=r-1,c=kt("int32",r);if(0===a||0===r){for(var u=new Array(a),h=0;h<=l;++h)c[h]=0;return[u,c]}c[0]=0;for(var d=function(e){var a=t[e]-t[e-1],r=0;n.nGramWidths.forEach((function(e){r+=n.getNumNGrams(a,e)})),n.preserveShort&&a>0&&0===r&&(r=1),c[e]=c[e-1]+r},f=1;f<=l;++f)d(f);for(var p=new Array(c[l]),g=function(a){var r=t[a],i=c[a];if(n.nGramWidths.forEach((function(o){var s=t[a+1]-t[a],l=n.getNumNGrams(s,o);n.createNGrams(e,r,p,i,l,o),i+=l})),n.preserveShort&&i===c[a]){var o=t[a+1]-t[a];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,r,p,i,1,s)}},v=0;v<l;++v)g(v);return[p,c]}}]),e}();function uN(e,t,n,a,r,i,o,s){return new cN(n,a,r,i,o,s).compute(e,t)}var hN={kernelName:Mr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=a.separator,i=a.nGramWidths,o=a.leftPad,s=a.rightPad,l=a.padWidth,c=a.preserveShortSequences,h=t.data,d=t.dataSplits,f=u(uN(n.data.get(h.dataId).values,n.data.get(d.dataId).values,r,i,o,s,l,c),2),p=f[0],g=f[1];return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",g)]}};function dN(e,t,n,a){if(e.length)if(0!==t.length)if(1!==t.length){for(var r=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(r,i);n&&0===o.length||a.push(o),r=i+1}}else{for(var s=t[0],l=e.indexOf(s);-1!==l;){var c=e.subarray(0,l);n&&0===c.length||a.push(c),l=(e=e.subarray(l+1)).indexOf(s)}n&&0===e.length||a.push(e)}else for(var u=0;u<e.length;++u)a.push(e.subarray(u,u+1))}function fN(e,t,n){for(var a=e.length,r=[],i=0,o=0,s=new Array(a),l=0;l<a;++l){var c=r.length;dN(e[l],t,n,r);var u=r.length-c;s[l]=u,i+=u,o=Math.max(o,u)}for(var h=kt("int32",2*i),d=new Array(i),f=[a,o],p=0,g=0;g<a;++g)for(var v=0;v<s[g];++v)h[2*p]=g,h[2*p+1]=v,d[p]=r[p],++p;return[h,d,f]}var pN={kernelName:Or,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs.skipEmpty,r=t.input,i=t.delimiter;if("string"!==r.dtype)throw new Error("Input must be of datatype string");if(1!==r.shape.length)throw new Error("Input must be a vector, got shape: ".concat(r.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=u(fN(n.data.get(r.dataId).values,n.data.get(i.dataId).values[0],a),3),s=o[0],l=o[1],c=o[2],h=l.length;return[n.makeTensorInfo([h,2],"int32",s),n.makeTensorInfo([h],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(c))]}};function gN(e,t){for(var n=kt("int32",e.length),a=0;a<e.length;++a)n[a]=Ci(e[a]).modulo(t).getLowBitsUnsigned();return n}var vN={kernelName:Pr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs.numBuckets,r=t.input;if("string"!==r.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");var i=gN(n.data.get(r.dataId).values,a);return n.makeTensorInfo(r.shape,"int32",i)}},mN=Ow(zr,(function(e){return Math.tan(e)})),xN={kernelName:zr,backendName:"cpu",kernelFunc:mN},bN=Ow(Br,(function(e){return Math.tanh(e)}));function yN(e,t){for(var n=new Array(e.rank),a=0;a<n.length;a++)n[a]=e.shape[a]*t[a];for(var r=_s(n,e.dtype),i=0;i<r.values.length;++i){for(var o=r.indexToLoc(i),s=new Array(e.rank),l=0;l<s.length;l++)s[l]=o[l]%e.shape[l];var c=e.locToIndex(s);r.values[i]=e.values[c]}return r}var kN={kernelName:Wr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.reps;Dw(r,"tile");var o=yN(n.bufferSync(r),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},wN=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function SN(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;a>n;){if(a-n>600){var r=a-n+1,i=t-n+1,o=Math.log(r),s=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*s*(r-s)/r)*Math.sign(i-r/2),c=Math.max(n,Math.floor(t-i*s/r+l)),u=Math.min(a,Math.floor(t+(r-i)*s/r+l));SN(e,t,c,u)}var h=e[t],d=n,f=a;for(it(e,n,t),wN(e[a],h)>0&&it(e,n,a);d<f;){for(it(e,d,f),d++,f--;wN(e[d],h)<0;)d+=1;for(;wN(e[f],h)>0;)f-=1}0===wN(e[n],h)?it(e,n,f):it(e,f+=1,a),f<=t&&(n=f+1),t<=f&&(a=f-1)}}function CN(e,t,n,a,r){for(var i=t[t.length-1],o=e.length/i,s=i,l=yt(n,o*a),c=yt("int32",o*a),u=function(t){var n=t*s,i=e.subarray(n,n+s),o=new Array(i.length);i.forEach((function(e,t){return o[t]={value:e,index:t}})),a<o.length&&(SN(o,a),o=o.slice(0,a)),r&&o.sort(wN);for(var u=t*a,h=l.subarray(u,u+a),d=c.subarray(u,u+a),f=0;f<a;f++)h[f]=o[f].value,d[f]=o[f].index},h=0;h<o;h++)u(h);var d=t.slice();return d[d.length-1]=a,[_s(d,n,l),_s(d,"int32",c)]}var IN={kernelName:Hr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.k,o=a.sorted;Dw(r,"topk");var s=u(CN(n.data.get(r.dataId).values,r.shape,r.dtype,i,o),2),l=s[0],c=s[1];return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};var AN={kernelName:Vr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,r=t.image,i=t.transforms,o=n.interpolation,s=n.fillMode,l=n.fillValue,c=n.outputShape,h=u(r.shape,4),d=h[0],f=h[1],p=h[2],g=h[3],v=u(null!=c?c:[f,p],2),m=v[0],x=v[1],b=[d,m,x,g],y=Rt(r.shape),k=y[0],w=y[1],S=y[2],C=yt(r.dtype,ht(b));C.fill(l);for(var I=a.data.get(r.dataId).values,A=a.data.get(i.dataId).values,T=0;T<d;++T){for(var N=1===i.shape[0]?A:A.subarray(8*T,8*T+8),E=0;E<m;++E)for(var R=0;R<x;++R)for(var F=0;F<g;++F){var D=void 0,L=N[6]*R+N[7]*E+1;if(0!==L){var M=(N[0]*R+N[1]*E+N[2])/L,O=(N[3]*R+N[4]*E+N[5])/L,P=TN(M,p,s),_=TN(O,f,s);switch(o){case"nearest":D=EN(I,f,p,k,w,S,T,_,P,F,l);break;case"bilinear":D=RN(I,f,p,k,w,S,T,_,P,F,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(o))}C[T*k+E*w+R*S+F]=D}}return a.makeTensorInfo(b,r.dtype,C)}return{dataId:a.write(C,b,r.dtype),shape:r.shape,dtype:r.dtype}}};function TN(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var a=2*t;n<a&&(n=a*Math.trunc(-n/a)+n),n=n<-t?n+a:-n-1}else if(n>t-1)if(t<=1)n=0;else{var r=2*t;(n-=r*Math.trunc(n/r))>=t&&(n=r-n-1)}return at(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var a=t-1;n+=t*(Math.trunc(-n/a)+1)}else if(n>t-1)if(t<=1)n=0;else{var r=t-1;n-=t*Math.trunc(n/r)}return at(0,n,t-1)}(e,t);case"nearest":return function(e,t){return at(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function NN(e,t,n,a,r,i,o,s,l,c,u){return 0<=s&&s<t&&0<=l&&l<n?e[o*a+s*r+l*i+c]:u}function EN(e,t,n,a,r,i,o,s,l,c,u){return NN(e,t,n,a,r,i,o,Math.round(s),Math.round(l),c,u)}function RN(e,t,n,a,r,i,o,s,l,c,u){var h=Math.floor(s),d=Math.floor(l),f=h+1,p=d+1;return(f-s)*((p-l)*NN(e,t,n,a,r,i,o,h,d,c,u)+(l-d)*NN(e,t,n,a,r,i,o,h,p,c,u))+(s-h)*((p-l)*NN(e,t,n,a,r,i,o,f,d,c,u)+(l-d)*NN(e,t,n,a,r,i,o,f,p,c,u))}function FN(e,t,n,a){for(var r=xt(t,n)[0],i=[1,n[0],1],o=0;o<r;o++)i[0]*=n[o];i[1]=n[r];for(var s=r+1;s<n.length;s++)i[2]*=n[s];for(var l={},c=new Int32Array(n[r]),u=new ji(i,a,e),h=[],d=1===i[0]&&1===i[2],f=0;f<n[r];f++){var p=void 0;if(d)p=e[f].toString();else{for(var g=[],v=0;v<i[0];v++)for(var m=0;m<i[2];m++)g.push(u.get(v,f,m));p=g.join(",")}if(void 0!==l[p])c[f]=l[p];else{var x=Object.keys(l).length;l[p]=x,c[f]=x,h.push(f)}}var b=i.slice();b[1]=Object.keys(l).length;var y=new ji(b,a);h.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var a=0;a<i[2];a++)y.set(u.get(n,e,a),n,t,a)}));var k=n.slice();return k[r]=b[1],{outputValues:y.values,outputShape:k,indices:c}}var DN={kernelName:Xr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,r=n.axis,i=t.x;Dw(i,"unique");var o=FN(a.data.get(i.dataId).values,r,i.shape,i.dtype),s=o.outputValues,l=o.outputShape,c=o.indices;return[a.makeTensorInfo(l,i.dtype,s),a.makeTensorInfo([c.length],"int32",c)]}};var LN={kernelName:Gr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.value,i=a.axis;i<0&&(i+=r.shape.length);for(var o=r.shape.length,s=r.shape[i],l=new Array(o-1),c=0,u=0;u<o;u++)u!==i&&(l[c++]=r.shape[u]);var h=new Array(o).fill(0),d=r.shape.slice();d[i]=1;for(var f=new Array(s),p=0;p<f.length;p++){h[i]=p;var g=eC({inputs:{x:r},backend:n,attrs:{begin:h,size:d}});f[p]=gS({inputs:{x:g},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(g)}return f}};for(var MN={kernelName:Yr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.segmentIds,o=a.numSegments;Dw(r,"unsortedSegmentSum");for(var s=[],l=[],c=r.shape.length-i.shape.length,u=i,h=0;h<c;++h){var d=rI({inputs:{input:u},backend:n,attrs:{dim:h+1}});u=d,l.push(d)}for(var f=0;f<o;++f){var p=Ii(f,"int32"),g=n.makeTensorInfo([],"int32",p),v=$C({inputs:{a:g,b:u},backend:n}),m=sS({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),x=XC({inputs:{a:m,b:r},backend:n}),b=YC({inputs:{x:x},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),l.push(g),l.push(v),l.push(m),l.push(x),l.push(b)}var y=nT({inputs:s,backend:n,attrs:{axis:0}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}},ON=0,PN=[bS,kS,SS,IS,pS,AS,RS,FS,DS,LS,OS,_S,BS,VS,XS,qS,KS,ZS,$S,xS,QS,nC,iC,oC,lS,cC,hC,aS,dC,mC,bC,yC,kC,wC,SC,CC,AC,NC,EC,RC,FC,DC,LC,OC,PC,_C,zC,BC,WC,HC,qC,zw,KC,QC,eI,aI,iI,lI,bI,kI,wI,II,NI,EI,RI,DI,MI,_I,WI,Ww,HI,gC,UI,GI,jI,Vw,ZI,JI,tA,rA,oA,cA,hA,pA,gA,vA,bA,wA,SA,CA,IA,AA,TA,NA,EA,DA,LA,PA,WA,GC,VA,XA,YA,qA,$A,QA,tT,aT,rT,sT,Yw,cT,hT,oS,hI,fT,qw,Zw,vS,pT,gT,vT,mT,xT,bT,kT,CT,AT,ET,RT,DT,eS,MT,PT,zT,tC,BA,HT,VT,XT,YT,qT,KT,ZT,$T,eN,tN,rN,oN,lN,hN,pN,vN,gI,jC,xN,{kernelName:Br,backendName:"cpu",kernelFunc:bN},kN,IN,AN,ES,DN,LN,MN,eT];ON<PN.length;ON++){ii(PN[ON])}var _N,zN,BN,WN={},HN={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function VN(e,t){if(!(e in WN)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;if(n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete WN[e]}),!1),1===e)return n.getContext("webgl",HN)||n.getContext("experimental-webgl",HN);return n.getContext("webgl2",HN)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;WN[e]=n}var a=WN[e];return null==a||a.isContextLost()?(delete WN[e],VN(e)):(a.disable(a.DEPTH_TEST),a.disable(a.STENCIL_TEST),a.disable(a.BLEND),a.disable(a.DITHER),a.disable(a.POLYGON_OFFSET_FILL),a.disable(a.SAMPLE_COVERAGE),a.enable(a.SCISSOR_TEST),a.enable(a.CULL_FACE),a.cullFace(a.BACK),WN[e])}function UN(e,t){return[t,e]}function XN(e){var t=ht(e);return pt(Math.ceil(t/4))}function GN(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function YN(e,t){var n,a,r,i,o,s,l,c,u,h,d=e;return 2===Xt().getNumber("WEBGL_VERSION")?(n=d.R32F,a=d.R16F,r=d.RGBA16F,i=d.RGBA32F,o=d.RED,l=4,c=1,u=d.HALF_FLOAT,h=d.FLOAT,s=d.RGBA8):(n=e.RGBA,a=e.RGBA,r=e.RGBA,i=d.RGBA,o=e.RGBA,l=4,c=4,u=null!=t?t.HALF_FLOAT_OES:null,h=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:r,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:u,textureTypeFloat:h}}function jN(e,t){var n=t();return Xt().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(_N||(_N={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(zN||(zN={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(BN||(BN={}));function qN(e){return!!(Xt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function KN(e,t){return lE(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}var ZN,$N,QN=/ERROR: [0-9]+:([0-9]+):/g;function JN(e,t){var n=QN.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var a=+n[1],r=e.split("\n"),i=r.length.toString().length+2,o=r.map((function(e,t){return gt((t+1).toString(),i)+e})),s=0,l=0;l<o.length;l++)s=Math.max(o[l].length,s);var c=o.slice(0,a-1),u=o.slice(a-1,a),h=o.slice(a);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(gt(u[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}function eE(e,t){if(jN(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function tE(e,t,n,a,r,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(jN(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,a)})),jN(e,(function(){return e.vertexAttribPointer(s,r,e.FLOAT,!1,i,o)})),jN(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function nE(e,t,n){return lE(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function aE(e,t,n){return e.getUniformLocation(t,n)}function rE(e,t,n,a){jN(e,(function(){return function(e,t,n){cE(e,n),jN(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),jN(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,a)})),jN(e,(function(){return e.uniform1i(n,a)}))}function iE(e,t,n){jN(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),jN(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function oE(e,t){jN(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),jN(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function sE(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function lE(e,t,n){var a=jN(e,(function(){return t()}));if(null==a)throw new Error(n);return a}function cE(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,a=t+e.TEXTURE0;if(a<e.TEXTURE0||a>n){var r="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(r,"."))}}function uE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return ht(e.slice(0,e.length-t))}function hE(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function dE(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[uE(e)].concat(Ke(hE(e)))),t}function fE(e){return e%2===0}function pE(e,t){if(dt(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],a=t.slice(-1)[0];if(n===a)return!0;if(fE(n)&&fE(a)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&fE(e[0])&&fE(t[0])}function gE(e,t){return null!=e.getExtension(t)}function vE(e){try{if(null!=VN(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function mE(e){if(0===e)return!1;var t=VN(e);if(1!==e){if(gE(t,"EXT_color_buffer_float"))return xE(t);var n="EXT_color_buffer_half_float";if(gE(t,n)){var a=t.getExtension(n);return function(e,t){var n=YN(e,t),a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a);var r=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,r,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(a),e.deleteFramebuffer(o),s}(t,a)}return!1}return!!gE(t,"OES_texture_float")&&(!!gE(t,"WEBGL_color_buffer_float")&&xE(t))}function xE(e){var t=YN(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var r=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(a),r}function bE(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&st("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var yE=Xt();function kE(){var e,t,n,a,r,i,o,s,l,c;return 2===Xt().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",a="in",r="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",a="varying",r="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:a,texture2D:r,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:c}}function wE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",a=Rt(t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(t),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(t):"index -= ".concat(e[r]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function SE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",a=Rt(t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / outShapeStrides[").concat(r,"]"),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * outShapeStrides[").concat(r,"]"):"index -= ".concat(e[r]," * outShapeStrides[").concat(r,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function CE(e,t){var n=e.length,a=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),r=new Array(n-1);r[n-2]=a[n-1];for(var i=n-3;i>=0;--i)r[i]="(".concat(r[i+1]," * ").concat(a[i+1],")");return r}function IE(e){var t=Rt(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}yE.registerFlag("HAS_WEBGL",(function(){return yE.getNumber("WEBGL_VERSION")>0})),yE.registerFlag("WEBGL_VERSION",(function(){return vE(2)?2:vE(1)?1:0})),yE.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),yE.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===yE.get("WEBGL_VERSION")})),yE.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),yE.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),yE.registerFlag("WEBGL_PACK",(function(){return yE.getBool("HAS_WEBGL")})),yE.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return yE.getBool("WEBGL_PACK")})),yE.registerFlag("WEBGL_PACK_CLIP",(function(){return yE.getBool("WEBGL_PACK")})),yE.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return yE.getBool("WEBGL_PACK")})),yE.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return yE.getBool("WEBGL_PACK")})),yE.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return yE.getBool("WEBGL_PACK")})),yE.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return yE.getBool("WEBGL_PACK")})),yE.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return yE.getBool("WEBGL_PACK")})),yE.registerFlag("WEBGL_PACK_REDUCE",(function(){return yE.getBool("WEBGL_PACK")})),yE.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return yE.getBool("WEBGL_PACK")})),yE.registerFlag("WEBGL_CONV_IM2COL",(function(){return yE.getBool("WEBGL_PACK")})),yE.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==ZN){var t=VN(e);ZN=t.getParameter(t.MAX_TEXTURE_SIZE)}return ZN}(yE.getNumber("WEBGL_VERSION"))})),yE.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==$N){var t=VN(e);$N=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,$N)}(yE.getNumber("WEBGL_VERSION"))})),yE.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=yE.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=VN(e);return gE(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:gE(t,"EXT_disjoint_timer_query")?1:0}(e)})),yE.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return yE.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!yo()})),yE.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=VN(e);if(1===e){if(!gE(t,"OES_texture_float"))return!1}else if(!gE(t,"EXT_color_buffer_float"))return!1;return xE(t)}(yE.getNumber("WEBGL_VERSION"))})),yE.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!yE.getBool("WEBGL_FORCE_F16_TEXTURES")&&yE.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),yE.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return mE(yE.getNumber("WEBGL_VERSION"))})),yE.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=yE.getNumber("WEBGL_VERSION"))&&null!=VN(e).fenceSync;var e})),yE.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return yE.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),yE.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),yE.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return yo()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),yE.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),yE.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),yE.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),yE.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var AE="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",TE=ul;function NE(e,t,n){var a=[];if(e.forEach((function(e){var t=ht(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?a.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(a.push("uniform sampler2D ".concat(e.name,";")),a.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(jE(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:a.push("uniform int ".concat(e.name,"Shape;"));break;case 2:a.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:a.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:a.push("uniform ivec4 ".concat(e.name,"Shape;"))}a.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:a.push("uniform int outShape;");break;case 2:a.push("uniform ivec2 outShape;"),a.push("uniform int outShapeStrides;");break;case 3:a.push("uniform ivec3 outShape;"),a.push("uniform ivec2 outShapeStrides;");break;case 4:a.push("uniform ivec4 outShape;"),a.push("uniform ivec3 outShapeStrides;")}a.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){a.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var r,i,o=a.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,r="";r+=n?RE(e,a):EE(e,a);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(r+=n?XE(e,t):GE(e,t));return r}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),l=t.texShape,c=kE(),u=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),h=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(FE,"\n    ").concat(DE,"\n    ").concat(LE,"\n  ")}(c);return t.isPacked?(r=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===a[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(a[1],".0);\n      }\n    ");if(1===a[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(a[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n      return 2 * (resTexRC.x * ").concat(a[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(dt(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(a[0],", ").concat(a[1],"));\n      }\n    ");var r=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),i=r*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),i=r*Math.ceil(e[e.length-2]/2),o=i,s="",l="b, r, c",c=2;c<e.length-1;c++)o*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+s,l="b".concat(c,", ")+l;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(a[0],", ").concat(a[1],"));\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec").concat(e.length,"(").concat(l,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,l,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(r=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(dt(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var a=SE(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(a,"\n    return ivec3(r, c, d);\n  }\n")}var r=wE(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var a=SE(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var r=wE(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=wE(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=wE(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,l,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(h+=ME),[h,u,i,o,r,s,n.userCode].join("\n")}function EE(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return PE(e,t);case 1:return _E(e,t);case 2:return zE(e,t);case 3:return BE(e,t);case 4:return WE(e,t);case 5:return HE(e);case 6:return VE(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function RE(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),a=kE();return"\n    vec4 ".concat(n,"() {\n      return ").concat(a.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=e.shapeInfo.texShape,i=kE();if(t)return"\n    vec4 ".concat(a,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return"\n    vec4 ".concat(a,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],l=kE();if(null!=i&&dt(n,i))return t?"\n      vec4 ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n\n        return ").concat(l.texture2D,"(").concat(a,", uv);\n      }\n    "):"\n      vec4 ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(l.texture2D,"(").concat(a,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(r,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(a,"TexShape[0]) / 2.0), ceil(float(").concat(a,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(a,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(l.texture2D,"(").concat(a,", uv);\n    }\n  ");var c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return"\n    vec4 ".concat(r,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(l.texture2D,"(").concat(a,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],l=qE(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(RE(l,t),"\n        vec4 ").concat(r,"(int b, int row, int col) {\n          return ").concat(r,"(").concat(KE(c,s),");\n        }\n      ")}var u=kE();if(t)return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(a,"TexShape[0]) / 2.0), ceil(float(").concat(a,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(a,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(a,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(u.texture2D,"(").concat(a,", uv);\n    }\n  ");var h=o[0],d=o[1],f=Math.ceil(n[2]/2),p=f*Math.ceil(n[1]/2);return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(h,", ").concat(d,", ").concat(p,", ").concat(f,", b, row, col);\n      return ").concat(u.texture2D,"(").concat(a,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=kE();if(t)return"\n    vec4 ".concat(a,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(r.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=l[0],u=l[1],h=Math.ceil(i[o-1]/2),d=h*Math.ceil(i[o-2]/2),f="int b, int row, int col",p="b * ".concat(d," + (row / 2) * ").concat(h," + (col / 2)"),g=2;g<o-1;g++)f="int b".concat(g,", ")+f,d*=i[o-g-1],p="b".concat(g," * ").concat(d," + ")+p;return"\n    vec4 ".concat(a,"(").concat(f,") {\n      int index = ").concat(p,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(c,");\n      return ").concat(r.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var FE="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",DE="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",LE="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ME="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function OE(e){return"offset".concat(e)}function PE(e,t){var n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(a,"() {return ").concat(n,";}");var r=u(e.shapeInfo.texShape,2),i=r[0],o=r[1];if(1===i&&1===o)return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=OE(n);if(t)return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var l=u(e.shapeInfo.texShape,2),c=l[0],h=l[1];return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(c,", ").concat(h,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function _E(e,t){var n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int index) {\n        ").concat(UE(e),"\n      }\n    ");var r=e.shapeInfo.texShape,i=r[0],o=r[1];if(1===o&&1===i)return"\n      float ".concat(a,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=OE(n);return 1===o?t?"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(a,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(a,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function zE(e,t){var n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),i=e.shapeInfo.texShape;if(null!=i&&dt(n,i)){if(t)return"\n      float ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(r,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}var l=bt(n),c=l.newShape,u=l.keptDims,h=c;if(h.length<n.length){var d=qE(e,h);return"\n      ".concat(EE(d,t),"\n      float ").concat(r,"(int row, int col) {\n        return ").concat(r,"(").concat(KE(["row","col"],u),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(UE(e),"\n      }\n    ");var f=i[0],p=i[1],g=OE(a);return 1===p?t?"\n      float ".concat(r,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(g,"), vec3(").concat(a,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(a,"TexShape[0]));\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(g,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(f,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  "):1===f?t?"\n      float ".concat(r,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(g,"), vec3(").concat(a,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(a,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(g,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(p,".0, 0.5);\n      return sampleTexture(").concat(a,", uv);\n    }\n  "):t?"\n      float ".concat(r,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(a,"Shape[1] + col + ").concat(g,";\n        vec2 uv = uvFromFlat(").concat(a,"TexShape[0], ").concat(a,"TexShape[1], index);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n  float ".concat(r,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(g,";\n    vec2 uv = uvFromFlat(").concat(f,", ").concat(p,", index);\n    return sampleTexture(").concat(a,", uv);\n  }\n")}function BE(e,t){var n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),i=n[1]*n[2],o=n[2],s=bt(n),l=s.newShape,c=s.keptDims,u=l;if(u.length<n.length){var h=qE(e,u);return"\n        ".concat(EE(h,t),"\n        float ").concat(r,"(int row, int col, int depth) {\n          return ").concat(r,"(").concat(KE(["row","col","depth"],c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(UE(e),"\n      }\n    ");var d=e.shapeInfo.texShape,f=d[0],p=d[1],g=e.shapeInfo.flatOffset;if(p===i&&null==g)return t?"\n      float ".concat(r,"(int row, int col, int depth) {\n        int stride1 = ").concat(a,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n        float ".concat(r,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(p,".0, ").concat(f,".0);\n          return sampleTexture(").concat(a,", uv);\n        }\n      ");if(p===o&&null==g)return t?"\n      float ".concat(r,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(a,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(r,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,".0, ").concat(f,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");var v=OE(a);return t?"\n    float ".concat(r,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(a,"Shape[1] * ").concat(a,"Shape[2];\n      int stride1 = ").concat(a,"Shape[2];\n      int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(v,";\n      vec2 uv = uvFromFlat(").concat(a,"TexShape[0], ").concat(a,"TexShape[1], index);\n      return sampleTexture(").concat(a,", uv);\n    }\n    "):"\n      float ".concat(r,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(f,", ").concat(p,", index);\n        return sampleTexture(").concat(a,", uv);\n      }\n  ")}function WE(e,t){var n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,l=bt(n),c=l.newShape,u=l.keptDims;if(c.length<n.length){var h=qE(e,c);return"\n      ".concat(EE(h,t),"\n      float ").concat(r,"(int row, int col, int depth, int depth2) {\n        return ").concat(r,"(").concat(KE(["row","col","depth","depth2"],u),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(UE(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,p=f[0],g=f[1],v="int stride2 = ".concat(a,"Shape[3];"),m="int stride1 = ".concat(a,"Shape[2] * stride2;"),x="int stride0 = ".concat(a,"Shape[1] * stride1;");if(g===s&&null==d)return t?"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        ").concat(v,"\n        ").concat(m,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(p,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");if(g===i&&null==d)return t?"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(a,"Shape[1] * ").concat(a,"Shape[2], ").concat(a,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(p,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");var b=OE(a);return t?"\n    float ".concat(r,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(v,"\n      ").concat(m,"\n      ").concat(x,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(a,"TexShape[0], ").concat(a,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(a,", uv);\n    }\n  "):"\n    float ".concat(r,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(g,", index + ").concat(b,");\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}function HE(e){var t=e.shapeInfo.logicalShape,n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=t[4],i=t[3]*r,o=t[2]*i,s=t[1]*o,l=bt(t),c=l.newShape,u=l.keptDims;if(c.length<t.length){var h=qE(e,c);return"\n      ".concat(EE(h),"\n      float ").concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(a,"(").concat(KE(["row","col","depth","depth2","depth3"],u),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(r,")) +\n          depth3;\n        ").concat(UE(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,p=f[0],g=f[1];if(g===s&&null==d)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(r,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(g===r&&null==d)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var v=OE(n);return"\n    float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(r," + depth3 + ").concat(v,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(g,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function VE(e){var t=e.shapeInfo.logicalShape,n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=bt(t),i=r.newShape,o=r.keptDims;if(i.length<t.length){var s=qE(e,i);return"\n      ".concat(EE(s),"\n      float ").concat(a,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(a,"(").concat(KE(["row","col","depth","depth2","depth3","depth4"],o),");\n      }\n    ")}var l=t[5],c=t[4]*l,u=t[3]*c,h=t[2]*u,d=t[1]*h;if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(d,", ").concat(h,", ").concat(u,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(l,", 1)));\n        ").concat(UE(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,g=p[0],v=p[1];if(v===d&&null==f)return"\n      float ".concat(a,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(h,", ").concat(u,", ").concat(c,", ").concat(l,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(g,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===l&&null==f)return"\n      float ".concat(a,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(g,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var m=OE(n);return"\n    float ".concat(a,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(d," + col * ").concat(h," + depth * ").concat(u," +\n          depth2 * ").concat(c," + depth3 * ").concat(l," + depth4 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(g,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function UE(e){var t=e.name,n=ht(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function XE(e,t){var n,a=e.name,r=a.charAt(0).toUpperCase()+a.slice(1),i="get"+r+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,l=TE(e.shapeInfo.logicalShape,t.logicalShape),c=YE(s),u=s-o,h=["x","y","z","w","u","v"];n=0===o?"":s<2&&l.length>=1?"coords = 0;":l.map((function(e){return"coords.".concat(h[e+u]," = 0;")})).join("\n");var d="";d=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(h[t+u])})).join(", ");var f="return outputValue;",p=1===ht(e.shapeInfo.logicalShape),g=1===ht(t.logicalShape);if(1!==o||p||g){if(p&&!g)f=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){var v=o-2,m=o-1;l.indexOf(v)>-1&&l.indexOf(m)>-1?f="return vec4(outputValue.x);":l.indexOf(v)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(m)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(r,"(").concat(d,");\n      ").concat(f,"\n    }\n  ")}function GE(e,t){var n=e.name,a=n.charAt(0).toUpperCase()+n.slice(1),r="get"+a+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===l&&null==e.shapeInfo.flatOffset&&dt(o,i))return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,u=YE(l),h=TE(e.shapeInfo.logicalShape,t.logicalShape),d=l-s,f=["x","y","z","w","u","v"];c=0===s?"":l<2&&h.length>=1?"coords = 0;":h.map((function(e){return"coords.".concat(f[e+d]," = 0;")})).join("\n");var p="";return p=l<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+d])})).join(", "),"\n    float ".concat(r,"() {\n      ").concat(u," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(a,"(").concat(p,");\n    }\n  ")}function YE(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function jE(e,t,n){var a=bt(t),r=a.newShape,i=a.keptDims,o=t.length,s=e&&3===o&&1===t[0],l=s?t.slice(1):r,c=!e&&o>1&&!dt(t,n)&&r.length<o||s;return{useSqueezeShape:c,uniformShape:c?l:t,keptDims:i}}function qE(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function KE(e,t){return t.map((function(t){return e[t]})).join(", ")}function ZE(e,t,n,a){var r=n.map((function(e,n){var a={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(a.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:a}})),i=r.map((function(e){return e.shapeInfo})),o={logicalShape:a.shape,texShape:a.texData.texShape,isUniform:!1,isPacked:a.texData.isPacked,flatOffset:null},s=NE(r,o,t),l=function(e,t){var n=lE(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(jN(e,(function(){return e.shaderSource(n,t)})),jN(e,(function(){return e.compileShader(n)})),Xt().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw JN(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),c=e.createProgram(l);return Xt().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:l,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},$E(e,t,c))}function $E(e,t,n){var a,r,i,o,s={},l={},c={},u=[],h=null;o=e.getUniformLocation(n,"NAN",!1),1===Xt().getNumber("WEBGL_VERSION")&&(h=e.getUniformLocation(n,"INFINITY",!1));for(var d=!1,f=0;f<t.variableNames.length;f++){var p=t.variableNames[f];s[p]=e.getUniformLocation(n,p,d),s["offset".concat(p)]=e.getUniformLocation(n,"offset".concat(p),d),t.enableShapeUniforms&&(l["".concat(p,"Shape")]=e.getUniformLocation(n,"".concat(p,"Shape"),d),c["".concat(p,"TexShape")]=e.getUniformLocation(n,"".concat(p,"TexShape"),d))}return t.enableShapeUniforms&&(a=e.getUniformLocation(n,"outShape",d),i=e.getUniformLocation(n,"outShapeStrides",d),r=e.getUniformLocation(n,"outTexShape",d)),t.customUniforms&&t.customUniforms.forEach((function(t,a){u[a]=e.getUniformLocation(n,t.name,d)})),{uniformLocations:s,customUniformLocations:u,infLoc:h,nanLoc:o,inShapesLocations:l,inTexShapesLocations:c,outShapeLocation:a,outShapeStridesLocation:i,outTexShapeLocation:r}}function QE(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var a=e.logicalShape,r=t[n],i=r.shape;if(!dt(a,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(a," and ").concat(i," must match"));if(!e.isUniform||!r.isUniform){var o=e.texShape,s=r.isUniform?null:r.texData.texShape;if(!dt(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function JE(e,t,n,a,r){t.program.enableShapeUniforms||(QE(t.inShapeInfos,n),QE([t.outShapeInfo],[a]));var i=a.texData.texture,o=a.texData.texShape;a.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===Xt().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,a){var r=t.program.variableNames[a],i=t.uniformLocations[r],o=t.uniformLocations["offset".concat(r)],s=t.inShapesLocations["".concat(r,"Shape")],l=t.inTexShapesLocations["".concat(r,"TexShape")];if(s){var c=jE(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(c.length){case 1:e.gl.uniform1iv(s,new Int32Array(c));break;case 2:e.gl.uniform2iv(s,new Int32Array(c));break;case 3:e.gl.uniform3iv(s,new Int32Array(c));break;case 4:e.gl.uniform4iv(s,new Int32Array(c))}}if(l&&e.gl.uniform2i(l,n.texData.texShape[0],n.texData.texShape[1]),null!=i)if(n.isUniform)if(ht(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var u=n.uniformValues;u instanceof Float32Array||(u=new Float32Array(u)),e.gl.uniform1fv(i,u)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,a)}));var s=t.outShapeLocation;if(s)switch(a.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(a.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(a.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(a.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(a.shape))}if(t.outShapeStridesLocation){var l=Rt(a.shape);switch(a.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(l));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(l));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(l))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,a.texData.texShape[0],a.texData.texShape[1]),t.program.customUniforms&&r&&t.program.customUniforms.forEach((function(n,a){var i=t.customUniformLocations[a],o=r[a];if("float"===n.type)e.gl.uniform1fv(i,o);else if("vec2"===n.type)e.gl.uniform2fv(i,o);else if("vec3"===n.type)e.gl.uniform3fv(i,o);else if("vec4"===n.type)e.gl.uniform4fv(i,o);else if("int"===n.type)e.gl.uniform1iv(i,o);else if("ivec2"===n.type)e.gl.uniform2iv(i,o);else if("ivec3"===n.type)e.gl.uniform3iv(i,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(i,o)}})),e.executeProgram()}function eR(e,t,n){var a="";t.concat(n).forEach((function(t){var r=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=jE(e.packedInputs,t.shape,i),s=o.useSqueezeShape,l=o.uniformShape,c=o.keptDims,u="",h="",d="";if(1===l.length&&e.packedInputs){var f=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];u="".concat(f[0]>1,"_").concat(f[1]>1)}else if(2!==l.length||e.packedInputs){if(l.length>2&&!e.packedInputs){var p=Rt(l);d="".concat(p[0]===i[1],"_").concat(p[p.length-1]===i[1])}}else h="".concat(l[0]>1,"_").concat(l[1]>1);var g=t.shape.length,v=2===l.length&&dt(t.shape,i),m=1===ht(t.shape),x=ul(t.shape,n.shape),b=!e.packedInputs&&g===n.shape.length&&dt(i,n.texData.texShape),y=e.packedInputs||l.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);a+="".concat(g,"_").concat(b,"_").concat(s?c:"","_").concat(l.length,"_").concat(m,"_").concat(x,"_").concat(v,"_").concat(u,"_").concat(h,"_").concat(d,"_").concat(y,"_").concat(r)}else{var k=t.isUniform?"uniform":t.texData.texShape;a+="".concat(t.shape,"_").concat(k,"_").concat(r)}}));var r=e.userCode,i=e.constructor.name;return i+="_"+a+"_"+r+"".concat(Xt().getNumber("WEBGL_VERSION"))}function tR(e){return Xt().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var nR=Qe((function e(t){Ze(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=_N.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=kE();this.outputShape=t,this.enableShapeUniforms=tR(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?SE(["r","c","d"],t):wE(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),aR=Qe((function e(t){Ze(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=_N.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=kE();this.outputShape=t,this.enableShapeUniforms=tR(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?SE(["r","c","d"],t):wE(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),rR=Qe((function e(t){Ze(this,e),this.variableNames=["A"],this.outTexUsage=zN.DOWNLOAD;var n=kE();this.outputShape=t,this.userCode="\n      ".concat(AE,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),iR=Qe((function e(t){Ze(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=zN.DOWNLOAD;var n=kE();this.outputShape=t,this.userCode="\n      ".concat(AE,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),oR=Qe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ze(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var a=kE();this.outputShape=t,this.enableShapeUniforms=tR(this.outputShape.length);var r="result";n&&(r="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":IE(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(a.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(a.output," = vec4(").concat(r,", 0., 0., 0.);\n      }\n    ")})),sR=Qe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ze(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var a=kE();this.outputShape=t,this.enableShapeUniforms=tR(this.outputShape.length);var r="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var l=2*o+s;r+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(a.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(l,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(l,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(l,"] = values[2];\n            } else {\n              result[").concat(l,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":IE(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(r,"\n\n          ").concat(a.output," = ").concat(i,";\n        }\n    ")}));function lR(e){var t=kE();return function(e,t){var n=lE(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(jN(e,(function(){return e.shaderSource(n,t)})),jN(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function cR(e){return function(e,t){var n=lE(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return jN(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),jN(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function uR(e){return function(e,t){var n=lE(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return jN(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),jN(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function hR(e,t,n,a,r,i){!function(e,t){var n=Xt().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var a="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+a+" is invalid.")}if(e>n||t>n){var r="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}(t,n);var o=function(e){return lE(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return jN(e,(function(){return e.bindTexture(s,o)})),jN(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),jN(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),jN(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),jN(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===Xt().getNumber("WEBGL_VERSION")?jN(e,(function(){return e.texImage2D(s,0,a,t,n,0,r,i,null)})):jN(e,(function(){return e.texStorage2D(s,1,a,t,n)})),jN(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function dR(e){return e.internalFormatFloat}function fR(e){return e.internalFormatHalfFloat}function pR(e){return e.downloadTextureFormat}function gR(e){return e.internalFormatPackedFloat}function vR(e){return e.internalFormatPackedHalfFloat}function mR(e,t,n,a,r,i,o,s){var l=e,c=new Float32Array(function(e,t){var n=u(GN(e,t),2);return n[0]*n[1]*4}(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}var xR=function(){function e(t){Ze(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Xt().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){WN[e]=t}(n,t)):this.gl=VN(n);var a="WEBGL_color_buffer_float",r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===Xt().getNumber("WEBGL_VERSION")){var i="OES_texture_half_float";if(this.textureFloatExtension=KN(this.gl,"OES_texture_float"),gE(this.gl,i))this.textureHalfFloatExtension=KN(this.gl,i);else if(Xt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(a),gE(this.gl,r))this.colorBufferHalfFloatExtension=KN(this.gl,r);else if(Xt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(a="EXT_color_buffer_float",gE(this.gl,a))this.colorBufferFloatExtension=this.gl.getExtension(a);else{if(!gE(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=cR(this.gl),this.indexBuffer=uR(this.gl),this.framebuffer=function(e){return lE(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=YN(this.gl,this.textureHalfFloatExtension)}return Qe(e,[{key:"debug",get:function(){return Xt().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;jN(t,(function(){return t.finish()})),jN(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),jN(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),jN(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),jN(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),jN(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,a){var r=u(UN(t,n),2);return hR(e,r[0],r[1],dR(a),a.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,a){var r=u(UN(t,n),2);return hR(e,r[0],r[1],fR(a),a.textureFormatFloat,a.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,a){var r=u(UN(t,n),2);return hR(e,r[0],r[1],pR(a),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){jN(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===Xt().getNumber("WEBGL_VERSION")?jN(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):jN(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===Xt().getNumber("WEBGL_VERSION")?jN(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):jN(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),jN(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,a){this.throwIfDisposed(),function(e,t,n,a,r,i){var o,s,l;jN(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),r instanceof Uint8Array?(o=new Uint8Array(n*a*4),s=e.UNSIGNED_BYTE,l=e.RGBA):(o=new Float32Array(n*a*4),s=e.FLOAT,l=i.internalFormatPackedFloat),o.set(r),2===Xt().getNumber("WEBGL_VERSION")?jN(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,a,e.RGBA,s,o)})):jN(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,l,n,a,0,e.RGBA,s,o)})),jN(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,a,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,a){var r=u(GN(t,n),2);return hR(e,r[0],r[1],vR(a),e.RGBA,a.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,a){var r=u(GN(t,n),2);return hR(e,r[0],r[1],gR(a),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(oE(this.gl,this.framebuffer),this.outputTexture=null),jN(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var a=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,a){var r=u(UN(t,n),2),i=r[0],o=r[1],s=new Uint8Array(t*n*4);return jN(e,(function(){return e.readPixels(0,0,i,o,a.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}(a.gl,t,n,a.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,a,r,i){return mR(this.gl,e,0,0,0,r,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var a=e,r=new Float32Array(n);return a.bindBuffer(a.PIXEL_PACK_BUFFER,t),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,r),a.bindBuffer(a.PIXEL_PACK_BUFFER,null),r}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var a=function(e,t,n,a){var r=e.createBuffer();jN(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,r)}));var i=16*t*n;return jN(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),jN(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),jN(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),r}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,a=this;if(Xt().getBool("WEBGL_FENCE_API_ENABLED")){var r=e,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=r.clientWaitSync(i,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=i}else Xt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return a.isQueryAvailable(t,Xt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var a=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var a=new Float32Array(t*n*4);return jN(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,a)})),a}(a.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=lR(n));var a=function(e){return lE(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return jN(n,(function(){return n.attachShader(a,t.vertexShader)})),jN(n,(function(){return n.attachShader(a,e)})),function(e,t){if(jN(e,(function(){return e.linkProgram(t)})),!Xt().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,a),this.debug&&eE(n,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=function(e,t,n){return jN(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),tE(e,t,"clipSpacePos",n,3,20,0)&&tE(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),a}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&jN(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&eE(this.gl,this.program),jN(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?nE(this.gl,e,t):aE(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),jN(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),rE(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var a=u(GN(t,n),2),r=a[0],i=a[1];this.setOutputMatrixTextureDriver(e,r,i)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,a){this.setOutputMatrixWriteRegionDriver(n,e,a,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&eE(this.gl,this.program),sE(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),jN(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),jN(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=KN(this.gl,2===Xt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===Xt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var a=this.getQueryTimerExtensionWebGL1(),r=a.createQueryEXT();return a.beginQueryEXT(a.TIME_ELAPSED_EXT,r),r}},{key:"endQuery",value:function(){if(2!==Xt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=i(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt((function(){return n.disposed||n.isQueryAvailable(t,Xt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,Xt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var a=this.getQueryTimerExtensionWebGL1();return a.getQueryObjectEXT(e,a.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,a=this.getQueryTimerExtensionWebGL2(),r=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),r&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||vt((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),iE(this.gl,e,this.framebuffer),this.debug&&sE(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(iE(this.gl,this.outputTexture,this.framebuffer),this.debug&&sE(this.gl)):oE(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var a=this.gl;iE(a,e,this.framebuffer),this.debug&&sE(a),this.outputTexture=e,jN(a,(function(){return a.viewport(0,0,t,n)})),jN(a,(function(){return a.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,a){var r=this;this.throwIfDisposed(),jN(this.gl,(function(){return r.gl.scissor(e,t,n,a)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var bR=hS,yR=aC,kR=rC,wR=sC,SR=fC,CR=ZC,IR=tI,AR=oI,TR=SI,NR=FI,ER=LI,RR=OI,FR=zI,DR=qI,LR=$I,MR=eA,OR=nA,PR=mA,_R=yA,zR=RA,BR=VC,WR=HA,HR=KA,VR=lT,UR=uT,XR=wT,GR=IT,YR=Qw,jR=yS,qR=JS,KR=UT,ZR=GT,$R=jT,QR=QT,JR=sN,eF=uN,tF=fN,nF=gN,aF=dI,rF=yN,iF=CN,oF=TS,sF=FN;function lF(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function cF(e,t){return 1===t?[e]:lF(e,t)}var uF=function(){function e(t){if(Ze(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=tR(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=cF("rc",this.rank),a=YE(this.rank),r=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(a," rc = getOutputCoords();\n\n          if(").concat(r,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return Qe(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var a=0;a<=1;a++){for(var r="".concat(0===n?"r":"rp1",", ").concat(0===a?"c":"cp1"),i=2;i<this.rank;i++)r="".concat(e[e.length-1-i],",")+r;t.push(r)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],a=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(a,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),hF=Qe((function e(t,n){Ze(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=tR(this.outputShape.length);for(var a="",r=0;r<4;r++){var i="thisRC = rc;";r%2===1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),a+="\n        ".concat(i,"\n        ").concat(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(r,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(r>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",a=e.map((function(e,t){return t})),r=CE(a,t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(r[a]),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(r[a]):"index -= ".concat(e[a]," * ").concat(r[a]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):wE(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":IE(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(a,"\n\n        setOutput(result);\n      }\n    ")}));var dF=function(){function e(t){Ze(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return Qe(e,[{key:"acquireTexture",value:function(e,t,n){var a=pF(t,n),r=gF(e,a,n);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);var i,o=fF(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[r].shift();return this.usedTextures[r].push(s),s}return a===BN.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===BN.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===BN.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===BN.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===BN.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[r].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,a){if(null!=this.freeTextures){var r=pF(n,a),i=gF(t,r,a);i in this.freeTextures||(this.freeTextures[i]=[]);var o=fF(t,r,this.gpgpu.gl,this.gpgpu.textureConfig,a),s=Xt().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var l=this.usedTextures[i],c=l.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function fF(e,t,n,a,r){var i,o=function(e,t){switch(e){case BN.PACKED_2X2_FLOAT32:return gR(t);case BN.PACKED_2X2_FLOAT16:return vR(t);case BN.UNPACKED_FLOAT32:return dR(t);case BN.UNPACKED_FLOAT16:return fR(t);case BN.PACKED_4X1_UNSIGNED_BYTE:return pR(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,a);if(r){var s=u(GN(e[0],e[1]),2);i=s[0]*s[1]}else{var l=u(UN(e[0],e[1]),2);i=l[0]*l[1]}var c=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*c}function pF(e,t){if(e===zN.UPLOAD)return BN.PACKED_2X2_FLOAT32;if(e===zN.RENDER||null==e)return function(e){return Xt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?BN.PACKED_2X2_FLOAT32:BN.UNPACKED_FLOAT32:e?BN.PACKED_2X2_FLOAT16:BN.UNPACKED_FLOAT16}(t);if(e===zN.DOWNLOAD||e===zN.PIXELS)return BN.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function gF(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var vF=Qe((function e(t,n){Ze(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=tR(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),mF="if (isnan(x)) return x;",xF="return x;",bF="return abs(x);";var yF="return (x >= 0.0) ? x : (exp(x) - 1.0);",kF=mF+"\n  return (x < 0.0) ? 0.0 : x;\n",wF=mF+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",SF="return x;",CF="return 1.0 / (1.0 + exp(-1.0 * x));",IF="return x;",AF="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",TF="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",NF="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",EF="return 1.0 / (1.0 + exp(-1.0 * x));",RF=Qe((function e(t,n){Ze(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=tR(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),FF=Qe((function e(t){Ze(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=tR(this.outputShape.length);var n=t.length,a=cF("rc",n),r=YE(n),i=function(e,t){if(1===e)return"rc";for(var n="",a=0;a<e;a++)n+=t[a],a<e-1&&(n+=",");return n}(n,a),o=a.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(r," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),DF=Jd,LF={};var MF=Xt().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var OF=function(e){Oi(n,e);var t=Hi(n);function n(e){var a,r,i;if(Ze(this,n),(a=t.call(this)).pendingRead=new WeakMap,a.pendingDisposal=new WeakSet,a.dataRefCount=new WeakMap,a.numBytesInGPU=0,a.uploadWaitMs=0,a.downloadWaitMs=0,a.lastGlFlushTime=0,a.warnedAboutMemory=!1,a.pendingDeletes=0,a.disposed=!1,!Xt().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof xR)r=e;else{var o=VN(Xt().getNumber("WEBGL_VERSION"),e);r=new xR(o)}a.binaryCache={},a.gpgpuCreatedLocally=!1}else{var s=VN(Xt().getNumber("WEBGL_VERSION"));r=new xR(s),a.binaryCache=((i=Xt().getNumber("WEBGL_VERSION"))in LF||(LF[i]={}),LF[i]),a.gpgpuCreatedLocally=!0}return a.gpgpu=r,a.canvas=a.gpgpu.gl.canvas,a.textureManager=new dF(a.gpgpu),a.numMBBeforeWarning=null==Xt().global.screen?1024:Xt().global.screen.height*Xt().global.screen.width*window.devicePixelRatio*600/1024/1024,a.texData=new Je(Bi(a),Sl()),a}return Qe(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((Xt().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Xt().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var a={id:this.nextDataId()};return this.texData.set(a,{shape:t,dtype:n,values:e,usage:zN.UPLOAD,refCount:1}),a}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,a,r){if(Xt().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===a)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:a,values:t,usage:zN.UPLOAD,refCount:r})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,a=t.dtype,r=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var l;l=s?new RF(o,SF):new vF(o,SF);var c=this.runWebGLProgram(l,[{dataId:e,shape:o,dtype:a}],a),u=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),u}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===a)return n;var h,d,f=null!=this.activeTimers;(f&&(h=Ti()),"complex64"===a)?d=Od(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):d=this.getValuesFromTexture(e);return f&&(this.downloadWaitMs+=Ti()-h),this.convertAndCacheOnCPU(e,d)}},{key:"read",value:function(){var e=i(f().mark((function e(t){var n,a,r,i,o,s,l,c,u,h,d,p,g,v,m,x,b,y,k,w,S,C,I;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(a=this.texData.get(t),r=a.values,i=a.shape,o=a.slice,s=a.dtype,l=a.complexTensorInfos,c=a.isPacked,null==o){e.next=11;break}return u=c?new RF(i,SF):new vF(i,SF),h=this.runWebGLProgram(u,[{dataId:t,shape:i,dtype:s}],s),d=this.read(h.dataId),this.disposeIntermediateTensorInfo(h),e.abrupt("return",d);case 11:if(null==r){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!Xt().getBool("DEBUG")){e.next=16;break}if(Xt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==Xt().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(p=null,"complex64"!==s&&Xt().get("WEBGL_BUFFER_SUPPORTED")&&(g=this.decode(t),m=this.texData.get(g.dataId),p=(v=this.gpgpu).createBufferFromTexture.apply(v,[m.texture.texture].concat(Ke(XN(i))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(l.real.dataId),this.read(l.imag.dataId)]);case 25:b=e.sent,y=b[0],k=b[1],x=Od(y,k),e.next=32;break;case 31:null==p?x=this.getValuesFromTexture(t):(w=ht(i),x=this.gpgpu.downloadFloat32MatrixFromBuffer(p,w));case 32:return null!=g&&this.disposeIntermediateTensorInfo(g),null!=p&&jN(S=this.gpgpu.gl,(function(){return S.deleteBuffer(p)})),C=this.convertAndCacheOnCPU(t,x),I=this.pendingRead.get(t),this.pendingRead.delete(t),I.forEach((function(e){return e(C)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Sl().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",C);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),a=n.values,r=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,l=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var c;c=s?new RF(r,SF):new vF(r,SF);var u=this.runWebGLProgram(c,[{dataId:e,shape:r,dtype:o}],o),h=this.readToGPU(u,t);return this.disposeIntermediateTensorInfo(u),h}if(null==l)throw null!=a?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var d=this.decode(e,t.customTexShape),f=Sl().makeTensorFromTensorInfo(d),p=this.texData.get(d.dataId);return Object.assign({tensorRef:f},p.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return Ei(e)}));return _s(e.shape,e.dtype,n)}catch(a){throw new Error("Failed to decode encoded string bytes into utf-8")}return _s(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!qN(n)){if(Xt().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,a=t.dtype,r=t.isPacked,i=ht(n);if(Xt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),l=this.texData.get(s.dataId),c=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[l.texture.texture].concat(Ke(XN(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),c}var u=Xt().getBool("WEBGL_PACK")&&!0===r,h=u?dE(n):n,d=u?new iR(h):new rR(h),f=this.runWebGLProgram(d,[{shape:h,dtype:a,dataId:e}],"float32"),p=this.texData.get(f.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture.texture,p.texShape[0],p.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(f),g}},{key:"timerAvailable",value:function(){return Xt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,a=[],r=!1;null==this.programTimersStack?(this.programTimersStack=a,r=!0):this.activeTimers.push(a),this.activeTimers=a,e();var o=ut(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),s=ut(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,r&&(this.programTimersStack=null);var l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return i(f().mark((function e(){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Xt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(o);case 3:n=e.sent,l.kernelMs=ot(n),l.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:s[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:l.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return Xt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ti(),endMs:null}}},{key:"endTimer",value:function(e){return Xt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ti(),e)}},{key:"getQueryTime",value:function(){var e=i(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Xt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),a=n.complexTensorInfos;return null!=a&&(this.disposeData(a.real.dataId,t),this.disposeData(a.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,a=t.dtype,r=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,l=s&&s.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),null!=n&&(this.numBytesInGPU-=this.computeBytes(r,a),this.textureManager.releaseTexture(n,r,i,o)));var u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:MF;return Xt().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&ht(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){Jr("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return DF(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var a=new RF(e.shape,t),r=this.compileAndRun(a,[e],n);return Sl().makeTensorFromTensorInfo(r)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=jR(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Xt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,bF,e.dtype);var n=new vF(e.shape,bF),a=this.compileAndRun(n,[e]);return Sl().makeTensorFromTensorInfo(a)}},{key:"makeTensorInfo",value:function(e,t,n){var a;if("string"===t&&null!=n&&n.length>0&&It(n[0])){var r=n.map((function(e){return Ni(e)}));a=this.write(r,e,t)}else a=this.write(n,e,t);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return Sl().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new FF(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new uF(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[uE(e.shape)].concat(Ke(hE(e.shape))),a={dtype:e.dtype,shape:n,dataId:e.dataId},r=[uE(t)].concat(Ke(hE(t))),i=new hF(r,n),o=[n],s=this.runWebGLProgram(i,[a],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),a=n.isPacked,r=n.shape,i=n.dtype;null!=t&&st(ht(r)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var o,s=dE(r);o=a?new aR(s):new nR(s);var l=[null!=t?t:XN(s)];return{dtype:i,shape:r,dataId:this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,l,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,a){var r=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),l=this.texData.get(s.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===_N.DENSE){var c=null!=o?o:XN(e.outputShape);l.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(l.usage=e.outTexUsage),0===ht(s.shape))return l.values=yt(s.dtype,0),s;var u=[],h=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=r.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&ht(t.shape)<=Xt().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(r.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?r.unpackTensor(t):r.packTensor(t),u.push(t),n=r.texData.get(t.dataId);else if(n.isPacked&&!pE(n.shape,t.shape)){var a=t,i=t.shape;t.shape=n.shape,t=r.packedReshape(t,i),u.push(t),n=r.texData.get(t.dataId),a.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var d,f={shape:s.shape,texData:l,isUniform:!1},p=eR(e,h,f),g=this.getAndSaveBinary(p,(function(){return ZE(r.gpgpu,e,h,f)})),v=null!=this.activeTimers;v&&(d=this.startTimer()),Xt().get("ENGINE_COMPILE_ONLY")||JE(this.gpgpu,g,h,f,a),u.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),v&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)}));var m=Xt().get("WEBGL_FLUSH_THRESHOLD");if(m>0){var x=Ti();x-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=x)}if(!Xt().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,a,r);return i}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!Xt().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Il((function(){if(!Xt().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Xt().getBool("DEBUG");Xt().set("DEBUG",!1);var n=e.abs(Rl(1e-8)).dataSync()[0];if(Xt().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,a=t.dtype,r=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var l,c=null!=this.activeTimers;c&&(l=Ti());var h=t.texShape;if(null==h&&(h=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Xt().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?rt(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=bt(e);e=a.newShape}var r=ht(e);if(e.length<=1&&r<=n)return[1,r];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var i=uE(e),o=2,s=2;if(e.length){var l=u(hE(e),2);o=l[0],s=l[1]}return pt(r=i*(o/2)*(s/2)).map((function(e){return 2*e}))}return pt(r)}(n,s),t.texShape=h),null!=r){var d,f=dE(n),p=h[1],g=h[0],v=r instanceof Uint8Array||r instanceof Uint8ClampedArray;if(s||!v){var m=u(GN(h[0],h[1]),2);p=m[0],g=m[1]}d=s?new sR(f,v):new oR(f,v);var x=v?[g,p]:h,b=this.makeTensorInfo(x,a),y=this.texData.get(b.dataId);y.usage=v?zN.PIXELS:zN.UPLOAD,y.texShape=x,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,g,r);var k=[[g,p]],w=this.runWebGLProgram(d,[b],a,k,!0),S=this.texData.get(w.dataId);t.texShape=S.texShape,t.isPacked=S.isPacked,t.usage=S.usage,Xt().get("ENGINE_COMPILE_ONLY")?this.disposeData(w.dataId):(t.texture=S.texture,t.values=null,this.texData.delete(w.dataId)),this.disposeIntermediateTensorInfo(b),c&&(this.uploadWaitMs+=Ti()-l)}else{var C=this.acquireTexture(h,o,a,s);t.texture=C}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),a=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),a=0;a<n.length;++a)n[a]=Math.round(e[a]);return n}throw new Error("Unknown dtype ".concat(t))}(t,a)),n.values}},{key:"acquireTexture",value:function(e,t,n,a){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var r=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(r," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,a)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*Ct(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=u(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=i(f().mark((function e(){var t,n,a,r,i,o,s,l,c=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,a=Object.entries(this.binaryCache);n<a.length;n++)r=u(a[n],2),i=r[1],t.push(this.checkCompletionAsync_(i));return e.abrupt("return",Promise.all(t));case 6:for(o=function(){var e=u(l[s],2)[1],n=new Promise((function(t){try{c.checkCompletion_(e),t(!0)}catch(n){throw n}}));t.push(n)},s=0,l=Object.entries(this.binaryCache);s<l.length;s++)o();return e.abrupt("return",Promise.all(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=i(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,gd();case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw JN(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=u(t[e],2)[1],a=$E(this.gpgpu,n.program,n.webGLProgram),r=a.uniformLocations,i=a.customUniformLocations,o=a.infLoc,s=a.nanLoc,l=a.inShapesLocations,c=a.inTexShapesLocations,h=a.outShapeLocation,d=a.outShapeStridesLocation,f=a.outTexShapeLocation;n.uniformLocations=r,n.customUniformLocations=i,n.infLoc=o,n.nanLoc=s,n.inShapesLocations=l,n.inTexShapesLocations=c,n.outShapeLocation=h,n.outShapeStridesLocation=d,n.outTexShapeLocation=f}}}]),n}(et);OF.nextDataId=0;ko()&&Nl("webgl",(function(){return new OF}),2);var PF=Qe((function e(t,n,a){Ze(this,e),this.variableNames=["A","B"],this.outputShape=dl(n,a),this.enableShapeUniforms=tR(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),_F=Qe((function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Ze(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=dl(n,a);var i=this.outputShape.length;this.enableShapeUniforms=tR(i);var o="";if(r)if(0===i||1===ht(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=YE(i);if(o="\n          ".concat(s," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var l=cF("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(l[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(l[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(l[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(l[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function zF(e){var t=e.inputs,n=e.backend,a=t.x;return n.incRef(a.dataId),{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}var BF={kernelName:ca,backendName:"webgl",kernelFunc:zF};function WF(e){var t=e.inputs,n=e.backend,a=t.real,r=t.imag,i=n.makeTensorInfo(a.shape,"complex64"),o=n.texData.get(i.dataId),s=zF({inputs:{x:a},backend:n}),l=zF({inputs:{x:r},backend:n});return o.complexTensorInfos={real:s,imag:l},i}var HF={kernelName:kn,backendName:"webgl",kernelFunc:WF},VF="return (a < 0.) ? b * a : a;",UF="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var XF={kernelName:ga,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.alpha,o=n.makeTensorInfo([],"float32",Ii(i,"float32")),s=Xt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _F(UF,r.shape,o.shape):new PF(VF,r.shape,o.shape),l=n.runWebGLProgram(s,[r,o],"float32");return n.disposeIntermediateTensorInfo(o),l}},GF="return (a < 0.) ? b * a : a;",YF="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var jF={kernelName:Za,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.x,r=t.alpha,i=Xt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _F(YF,a.shape,r.shape):new PF(GF,a.shape,r.shape);return n.runWebGLProgram(i,[a,r],"float32")}};function qF(e){var t=e.opSnippet,n=e.packedOpSnippet,a=e.cpuKernelImpl,r=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,l=o.x,c=s,u=r||l.dtype;if(c.shouldExecuteOnCPU([l])&&null!=a){var h=c.texData.get(l.dataId),d=a(h.values,u);return c.makeTensorInfo(l.shape,u,d)}return i=Xt().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new RF(l.shape,n):new vF(l.shape,t),c.runWebGLProgram(i,[l],u)}}function KF(e){var t=e.opSnippet,n=e.packedOpSnippet,a=e.checkOutOfBounds,r=void 0!==a&&a,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,l=e.dtype;return function(e){var a=e.inputs,i=e.backend,c=a.a,h=a.b,d=i;if(o&&"complex64"===c.dtype){var f=d.texData.get(c.dataId),p=d.texData.get(h.dataId),g=[[f.complexTensorInfos.real,p.complexTensorInfos.real],[f.complexTensorInfos.imag,p.complexTensorInfos.imag]].map((function(e){var n=u(e,2),a=n[0],r=n[1],i={dataId:a.dataId,dtype:a.dtype,shape:c.shape},o={dataId:r.dataId,dtype:r.dtype,shape:h.shape},s=new PF(t,c.shape,h.shape);return d.runWebGLProgram(s,[i,o],io(a.dtype,r.dtype))})),v=u(g,2),m=v[0],x=v[1],b=WF({inputs:{real:m,imag:x},backend:d});return d.disposeIntermediateTensorInfo(m),d.disposeIntermediateTensorInfo(x),b}var y,k=l||io(c.dtype,h.dtype);if(("string"===c.dtype||"string"===h.dtype||d.shouldExecuteOnCPU([c,h]))&&null!=s){var w=d.texData.get(c.dataId).values,S=d.texData.get(h.dataId).values,C="string"===c.dtype?Qd(w):w,I="string"===c.dtype?Qd(S):S,A=u(s(c.shape,h.shape,C,I,k),2),T=A[0],N=A[1],E=d.makeTensorInfo(N,k);return d.texData.get(E.dataId).values=T,E}return y=Xt().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new _F(n,c.shape,h.shape,r):new PF(t,c.shape,h.shape),d.runWebGLProgram(y,[c,h],k)}}function ZF(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?IF:xF;if("relu"===e)return t?TF:kF;if("elu"===e)return t?AF:yF;if("relu6"===e)return t?NF:wF;if("prelu"===e)return t?YF:GF;if("leakyrelu"===e)return t?UF:VF;if("sigmoid"===e)return t?EF:CF;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var $F=Qe((function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Ze(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a,this.enableShapeUniforms=tR(this.outputShape.length);var u=r?t[1]:t[2],h=Math.ceil(u/2),d=r?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],v="",m="";s&&(v=l?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),m="result = activation(result);");var x=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",y="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(y="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(v,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(h,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(h,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(y,";\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(f,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(g[0],");\n          result += (").concat(p[1]," * ").concat(g[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(x,"\n\n        ").concat(m,"\n\n        setOutput(result);\n      }\n    ")})),QF="return areal * breal - aimag * bimag;",JF="return areal * bimag + aimag * breal;",eD=Qe((function e(t,n,a){Ze(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=dl(n,a),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),tD="return a * b;";function nD(e){var t,n=e.inputs,a=e.backend,r=n.a,i=n.b,o=io(r.dtype,i.dtype);if("complex64"===r.dtype){var s=a.texData.get(r.dataId),l=a.texData.get(i.dataId),c=new eD(QF,r.shape,i.shape),h=new eD(JF,r.shape,i.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:r.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],f=a.runWebGLProgram(c,d,"float32"),p=a.runWebGLProgram(h,d,"float32"),g=WF({inputs:{real:f,imag:p},backend:a});return a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(p),g}if(a.shouldExecuteOnCPU([r,i])){var v=a.texData.get(r.dataId),m=a.texData.get(i.dataId),x=u(BR(r.shape,i.shape,v.values,m.values,o),2),b=x[0],y=x[1],k=a.makeTensorInfo(y,o);return a.texData.get(k.dataId).values=b,k}return t=Xt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _F(tD,r.shape,i.shape):new PF(tD,r.shape,i.shape),a.runWebGLProgram(t,[r,i],o)}var aD={kernelName:Ba,backendName:"webgl",kernelFunc:nD};function rD(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.shape,o=n,s=ht(r.shape),l=mt(i,s),c=ht(l);st(s===c,(function(){return"The new shape (".concat(l,") has ").concat(c," elements and the old ")+"shape (".concat(r.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var u=o.texData.get(r.dataId);return!u.isPacked||pE(r.shape,l)||null!==u.texture&&pE(u.shape,l)?(o.incRef(r.dataId),{dataId:r.dataId,shape:l,dtype:r.dtype}):function(e,t,n){var a=[uE(e.shape)].concat(Ke(hE(e.shape))),r={dtype:e.dtype,shape:a,dataId:e.dataId},i=[uE(t)].concat(Ke(hE(t))),o=new hF(i,a),s=[a],l=n.runWebGLProgram(o,[r],e.dtype,s,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(r,l,o)}var iD={kernelName:nr,backendName:"webgl",kernelFunc:rD},oD=Qe((function e(t,n){Ze(this,e),this.variableNames=["x"];var a=t.windowSize,r=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[r,o];var s=4*Math.floor(a/4),l=a%4,c="sumValue += dot(values, ones);";if(null!=n){var u=1/n;c="sumValue += dot(values * ".concat(ft(u)?u.toPrecision(2):u,", ones);")}var h="";i%a>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(a,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),sD=Qe((function e(t,n){Ze(this,e),this.variableNames=["x"];var a=t.windowSize,r=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[r,o];var s="0.0",l="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",l="min"):"max"===n&&(s="-1.0 / 1e-20",l="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var u=4*Math.floor(a/4),h=a%4,d="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(l,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(l,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),f="vec4";"all"===n?(s="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===n&&(s="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");var p="";i%a>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(a,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===h,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===h,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===h,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function lD(e,t,n,a){for(var r=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],a=xd(n);t.push({inSize:n,windowSize:a,outSize:Math.ceil(n/a)})}return t}(e.shape),i=e,o=0;o<r.length;o++){var s,l=r[o],c=l.inSize,u=l.windowSize,h=l.outSize,d=void 0;d="mean"===n?0===o?new oD({windowSize:u,inSize:c,batchSize:e.shape[0],outSize:h},c):new oD({windowSize:u,inSize:c,batchSize:e.shape[0],outSize:h}):new sD({windowSize:u,inSize:c,batchSize:e.shape[0],outSize:h},n),s=i,i=a.runWebGLProgram(d,[i],t),s.dataId!==e.dataId&&a.disposeIntermediateTensorInfo(s)}return i}var cD=Qe((function e(t,n){Ze(this,e),this.variableNames=["A"];for(var a=new Array(t.length),r=0;r<a.length;r++)a[r]=t[n[r]];this.outputShape=a,this.rank=a.length;var i=YE(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],a=new Array(t),r=0;r<e.length;r++)a[e[r]]=n[r];return a.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var uD=Qe((function e(t,n){Ze(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var a=new Array(t.length),r=0;r<a.length;r++)a[r]=t[n[r]];if(this.outputShape=a,this.rank=a.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=YE(this.rank),o=lF("rc",this.rank),s=new Array(this.rank),l=0;l<n.length;l++)s[n[l]]=o[l];var c="vec2(".concat(s.slice(-2).join(),")"),u="++".concat(o[this.rank-1]," < ").concat(a[this.rank-1]),h="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(h,";\n      if(").concat(u,") {\n        result[1] = ").concat(h,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(a[this.rank-2],") {\n        result[2] = ").concat(h,";\n        if(").concat(u,") {\n          result[3] = ").concat(h,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function hD(e,t,n){var a=Xt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new uD(e.shape,t):new cD(e.shape,t);return n.runWebGLProgram(a,[e],e.dtype)}function dD(e){var t=e.inputs,n=e.backend,a=e.attrs;return function(e,t,n,a){var r=t,i=e.shape.length,o=xt(r,e.shape),s=o,l=Qc(s,i),c=null!=l,h=e;c&&(h=hD(e,l,a),s=eu(s.length,i)),$c("sum",s,i);var d=u(Kc(h.shape,s),2),f=d[0],p=d[1],g=f;n&&(g=Zc(f,o));var v=ht(p),m=rD({inputs:{x:h},attrs:{shape:[ht(e.shape)/v,v]},backend:a}),x=lD(m,oo(e.dtype),"sum",a),b=rD({inputs:{x:x},attrs:{shape:g},backend:a});return a.disposeIntermediateTensorInfo(m),a.disposeIntermediateTensorInfo(x),c&&a.disposeIntermediateTensorInfo(h),b}(t.x,a.axis,a.keepDims,n)}var fD={kernelName:wr,backendName:"webgl",kernelFunc:dD};function pD(e){for(var t,n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.perm,s=a,l=i.shape.length,c=new Array(l),u=0;u<c.length;u++)c[u]=i.shape[o[u]];if(s.shouldExecuteOnCPU([i])){var h=s.texData.get(i.dataId).values,d=oF(h,i.shape,i.dtype,o,c);t=s.makeTensorInfo(c,i.dtype),s.texData.get(t.dataId).values=d}else t=hD(i,o,s);return t}var gD={kernelName:Ur,backendName:"webgl",kernelFunc:pD};function vD(e){var t=e.a,n=e.b,a=e.transposeA,r=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,l=e.preluActivationWeights,c=void 0===l?null:l,u=e.leakyreluAlpha,h=void 0===u?0:u,d=e.activation,f=void 0===d?null:d,p=t.shape.length,g=n.shape.length,v=a?t.shape[p-2]:t.shape[p-1],m=r?n.shape[g-1]:n.shape[g-2],x=a?t.shape[p-1]:t.shape[p-2],b=r?n.shape[g-2]:n.shape[g-1],y=t.shape.slice(0,-2),k=n.shape.slice(0,-2),w=ht(y),S=ht(k),C=dl(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([x,b]);st(v===m,(function(){return"Error in matMul: inner shapes (".concat(v,") and (")+"".concat(m,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(a)+" and transposeB=".concat(r," must match.")}));var I,A=a?[w,v,x]:[w,x,v],T=r?[S,b,m]:[S,m,b],N=rD({inputs:{x:t},backend:i,attrs:{shape:A}}),E=rD({inputs:{x:n},backend:i,attrs:{shape:T}}),R=[N,E],F=Math.max(w,S),D=a?N.shape[1]:N.shape[2],L=null!=s,M=null!=c,O="leakyrelu"===f,P=null!=f?ZF(f,!0):null;if((1===x||1===b)&&D>1e3&&!1===(L||M||O||null!=P)){var _=N,z=E;a&&(_=pD({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),R.push(_)),r&&(z=pD({inputs:{x:E},backend:i,attrs:{perm:[0,2,1]}}),R.push(z));var B=1===b,W=_;1!==b&&(W=rD({inputs:{x:_},backend:i,attrs:{shape:[F,D,1]}}),R.push(W));var H=1===b?2:1,V=z;B&&(V=rD({inputs:{x:z},backend:i,attrs:{shape:[F,1,D]}}),R.push(V));var U=nD({inputs:{a:W,b:V},backend:i});I=dD({inputs:{x:U},backend:i,attrs:{axis:H,keepDims:!0}}),R.push(U)}else{var X=io(t.dtype,n.dtype),G=new $F(A,T,[F,x,b],a,r,L,P,M,O),Y=[N,E];if(null!=s&&Y.push(s),M&&Y.push(c),O){var j=i.makeTensorInfo([],"float32",Ii(h,"float32"));Y.push(j),R.push(j)}I=i.runWebGLProgram(G,Y,X)}var q=rD({inputs:{x:I},backend:i,attrs:{shape:C}});R.push(I);for(var K=0,Z=R;K<Z.length;K++){var $=Z[K];i.disposeIntermediateTensorInfo($)}return q}var mD={kernelName:Zr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,l=a.transposeA,c=a.transposeB,u=a.activation;return vD({a:r,b:i,transposeA:l,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:a.leakyreluAlpha,activation:u})}},xD="return abs(x);";var bD={kernelName:Kt,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,a=e.backend,r=n.x;if(a.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){var i=a.texData.get(r.dataId),o=jR(i.values);return a.makeTensorInfo(r.shape,r.dtype,o)}return t=Xt().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new RF(r.shape,xD):new vF(r.shape,xD),a.runWebGLProgram(t,[r],r.dtype)}},yD=qF({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),kD={kernelName:Zt,backendName:"webgl",kernelFunc:yD},wD=qF({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),SD={kernelName:$t,backendName:"webgl",kernelFunc:wD},CD="return a + b;",ID=KF({opSnippet:CD,packedOpSnippet:CD,supportsComplex:!0,cpuKernelImpl:bR}),AD={kernelName:Qt,backendName:"webgl",kernelFunc:ID},TD=Qe((function e(t,n){Ze(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var a=[];this.variableNames.forEach((function(e){a.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var r=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(a.join("\n        "),"\n\n        float result = ").concat(r,";\n        setOutput(result);\n      }\n    ")})),ND=Qe((function e(t,n){Ze(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var a=[];this.variableNames.forEach((function(e){a.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var r=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(a.join("\n        "),"\n\n        vec4 result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}));var ED={kernelName:Jt,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,a=t.backend,r=n;if(1===r.length)return zF({inputs:{x:r[0]},backend:a});if(r.length>Xt().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(r.length/2),o=e({inputs:r.slice(0,i),backend:a}),s=e({inputs:r.slice(i),backend:a});return e({inputs:[o,s],backend:a})}var l=r.map((function(e){return e.dtype})).reduce((function(e,t){return io(e,t)})),c=r.map((function(e){return e.shape})),u=Xt().getBool("WEBGL_PACK")?new ND(r[0].shape,c):new TD(r[0].shape,c);return a.runWebGLProgram(u,r,l)}};var RD={kernelName:en,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis,o=a.keepDims,s=r.shape.length,l=xt(i,r.shape),c=l,h=Qc(c,s),d=r;null!=h&&(d=pD({inputs:{x:r},backend:n,attrs:{perm:h}}),c=eu(c.length,s)),$c("all",c,s);var f,p=u(Kc(d.shape,c),2),g=p[0],v=rD({inputs:{x:d},backend:n,attrs:{shape:[-1,ht(p[1])]}}),m=lD(v,v.dtype,"all",n);return f=rD(o?{inputs:{x:m},backend:n,attrs:{shape:Zc(g,l)}}:{inputs:{x:m},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),null!=h&&n.disposeIntermediateTensorInfo(d),f}};var FD={kernelName:tn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis,o=a.keepDims,s=r.shape.length,l=xt(i,r.shape),c=l,h=Qc(c,s),d=r;null!=h&&(d=pD({inputs:{x:r},backend:n,attrs:{perm:h}}),c=eu(c.length,s)),$c("any",c,s);var f,p=u(Kc(d.shape,c),2),g=p[0],v=rD({inputs:{x:d},backend:n,attrs:{shape:[-1,ht(p[1])]}}),m=lD(v,v.dtype,"any",n);return f=rD(o?{inputs:{x:m},backend:n,attrs:{shape:Zc(g,l)}}:{inputs:{x:m},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),null!=h&&n.disposeIntermediateTensorInfo(d),f}},DD=Qe((function e(t,n,a){Ze(this,e),this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,o=t.outSize;a||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",l=a?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(r,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          int inIdx = ").concat(l,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),LD=Qe((function e(t,n,a,r){Ze(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,st(t.length>2,(function(){return"Packed arg".concat(a.charAt(0).toUpperCase()+a.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var s,l,c=this.outputShape,u=c.length,h=YE(u),d=cF("coords",u);if(1===o){var f=YE(l=u+1);s="\n        ".concat(f," sourceLocR = ").concat(f,"(").concat(d.join(),", 0);\n        ++").concat(d[u-1],";\n        ").concat(f," sourceLocG = ").concat(f,"(").concat(d.join(),", 0);\n        ++").concat(d[u-2],";\n        ").concat(f," sourceLocA = ").concat(f,"(").concat(d.join(),", 0);\n        --").concat(d[u-1],";\n        ").concat(f," sourceLocB = ").concat(f,"(").concat(d.join(),", 0);\n        --").concat(d[u-2],";")}else l=u,s="\n        ".concat(h," sourceLocR = coords;\n        ++").concat(d[u-1],";\n        ").concat(h," sourceLocG = coords;\n        ++").concat(d[u-2],";\n        ").concat(h," sourceLocA = coords;\n        --").concat(d[u-1],";\n        ").concat(h," sourceLocB = coords;\n        --").concat(d[u-2],";");var p=["x","y","z","w","u","v"].slice(0,l),g="."+p[l-1],v=p.map((function(e){return"int "+e})),m=cF("sourceLocR",l-1).concat("inIdx.r"),x=cF("sourceLocG",l-1).concat("inIdx.g"),b=cF("sourceLocB",l-1).concat("inIdx.b"),y=cF("sourceLocA",l-1).concat("inIdx.a"),k="max"===a?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),")));"),S="vec4(\n            getAChannel(".concat(m.join(),"),\n            hasNextCol ? getAChannel(").concat(x.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(y.join(),") : 0.)"),C=r?"":"\n      float getBestIndicesAChannel(".concat(v.join(),") {\n        return getChannel(getBestIndicesA(").concat(p.join(),"),\n                                          vec2(").concat(p.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(v.join(),") {\n        return getChannel(getA(").concat(p.join(),"),\n                               vec2(").concat(p.slice(-2).join(),"));\n      }\n      ").concat(C,"\n      void main() {\n        ").concat(h," coords = getOutputCoords();\n        bool hasNextCol = ").concat(d[u-1]," < ").concat(c[u-1]-1,";\n        bool hasNextRow = ").concat(d[u-2]," < ").concat(c[u-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(g,", sourceLocG").concat(g,",\n          sourceLocB").concat(g,", sourceLocA").concat(g,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(S,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(S,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(k,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function MD(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t.shape[0],i=t.shape[1];null!=a&&(r=a.shape[0],i=a.shape[1]);var o=xd(i),s={windowSize:o,inSize:i,batchSize:r,outSize:Math.ceil(i/o)},l=new DD(s,n,null==a),c=[t];null!=a&&c.push(a);var u=e.runWebGLProgram(l,c,"int32");if(1===u.shape[1])return u;var h=MD(e,t,n,u);return e.disposeIntermediateTensorInfo(u),h}function OD(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=null!=a?a.shape:t.shape,i=r[r.length-1],o=xd(i),s=new LD(r,o,n,null==a),l=null==a?[t]:[t,a],c=e.runWebGLProgram(s,l,"int32");if(c.shape.length===t.shape.length){var u=OD(e,t,n,c);return e.disposeIntermediateTensorInfo(c),u}return c}function PD(e,t,n,a){var r=[n];if($c("arg"+a.charAt(0).toUpperCase()+a.slice(1),r,t.shape.length),!Xt().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var l=u(Kc(s.shape,r),2),c=l[0],h=ht(l[1]),d=rD({inputs:{x:s},backend:e,attrs:{shape:[-1,h]}});i.push(d);var f=MD(e,d,a);i.push(f);var p=rD({inputs:{x:f},backend:e,attrs:{shape:c}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),p}return OD(e,t,a)}var _D={kernelName:nn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=xt(a.axis,r.shape),o=Qc(i,r.shape.length),s=r,l=[];null!=o&&(s=pD({inputs:{x:r},backend:n,attrs:{perm:o}}),l.push(s),i=eu(i.length,s.shape.length)),$c("argMax",[i[0]],s.shape.length);var c=PD(n,s,i[0],"max");return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}};var zD={kernelName:an,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=xt(a.axis,r.shape),o=Qc(i,r.shape.length),s=r,l=[];null!=o&&(s=pD({inputs:{x:r},backend:n,attrs:{perm:o}}),l.push(s),i=eu(i.length,s.shape.length)),$c("argMin",[i[0]],s.shape.length);var c=PD(n,s,i[0],"min");return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},BD=qF({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),WD={kernelName:rn,backendName:"webgl",kernelFunc:BD},HD=qF({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),VD={kernelName:on,backendName:"webgl",kernelFunc:HD},UD=qF({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),XD={kernelName:sn,backendName:"webgl",kernelFunc:UD},GD=KF({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),YD={kernelName:cn,backendName:"webgl",kernelFunc:GD},jD=qF({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),qD={kernelName:ln,backendName:"webgl",kernelFunc:jD},KD=Qe((function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Ze(this,e),this.variableNames=["x"],"avg"===n&&a)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,u=t.dilationWidth,h=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var g="avg"===n,v="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),m="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),x="0.0";if(g||(x="-1.0 / 1e-20"),a){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(l,");\n        const ivec2 pads = ivec2(").concat(f,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(u,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(r?i?v:m:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var y="max",k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / count");var w=4*Math.floor(o/4),S=o%4,C="\n      if (".concat(g,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(y,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(p,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(u,", d),\n              getValue(batch, xR, xC + 2 * ").concat(u,", d),\n              getValue(batch, xR, xC + 3 * ").concat(u,", d)\n            );\n\n            ").concat(C,"\n          }\n\n          int xC = xCCorner + ").concat(w,";\n          if (").concat(1===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(C,"\n          } else if (").concat(2===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(u,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(C,"\n          } else if (").concat(3===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(u,", d),\n              getValue(batch, xR, xC + 2 * ").concat(u,", d),\n              initializationValue\n            );\n\n            ").concat(C,"\n          }\n        }\n        setOutput(").concat(k,");\n      }\n    ")}})),ZD=Qe((function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Ze(this,e),this.variableNames=["x"],"avg"===n&&a)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,l=t.strideHeight,c=t.strideWidth,u=t.dilationDepth,h=t.dilationHeight,d=t.dilationWidth,f=t.effectiveFilterDepth,p=t.effectiveFilterHeight,g=t.effectiveFilterWidth,v=t.padInfo.front,m=t.padInfo.top,x=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,y="0.0";if(b||(y="-1.0 / 1e-20"),a){var k=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(l,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(v,", ").concat(m,", ").concat(x,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(f,";\n              wD += ").concat(u,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(h,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(g,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(k," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(r?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(p," * ").concat(g," +\n                      wR * ").concat(g," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="max",S="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(S="avgValue / count");var C=4*Math.floor(o/4),I=o%4,A="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(w,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(l,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(v,", ").concat(m,", ").concat(x,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(u,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(h,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(C,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(A,"\n            }\n\n            int xC = xCCorner + ").concat(C,";\n            if (").concat(1===I,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(A,"\n            } else if (").concat(2===I,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(A,"\n            } else if (").concat(3===I,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(A,"\n            }\n          }\n          setOutput(").concat(S,");\n        }\n      }\n    ")}}));var $D={kernelName:un,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x;bE(r,"avgPool");var i=a.filterSize,o=a.strides,s=a.pad,l=a.dimRoundingMode;st(Zl(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=zl(r.shape,i,o,1,s,l);if(1===c.filterWidth&&1===c.filterHeight&&dt(c.inShape,c.outShape))return zF({inputs:{x:r},backend:n});var u=new KD(c,"avg",!1);return n.runWebGLProgram(u,[r],"float32")}};var QD={kernelName:dn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.filterSize,o=a.strides,s=a.pad,l=a.dimRoundingMode,c=a.dataFormat,u=Bl(r.shape,i,o,[1,1,1],s,l,c),h=new ZD(u,"avg",!1);return n.runWebGLProgram(h,[r],"float32")}},JD=Qe((function e(t){Ze(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,a=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,l=t.effectiveFilterHeight,c=t.effectiveFilterWidth,u=l-1-t.padInfo.top,h=c-1-t.padInfo.left,d=1/(n*a);this.userCode="\n      const ivec2 pads = ivec2(".concat(u,", ").concat(h,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(l,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),eL=Qe((function e(t){Ze(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,a=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,u=t.dilationWidth,h=t.effectiveFilterDepth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=h-1-t.padInfo.front,g=d-1-t.padInfo.top,v=f-1-t.padInfo.left,m=1/(n*a*r);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(g,", ").concat(v,");\n      const float avgMultiplier = float(").concat(m,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(l,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(u,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var tL={kernelName:fn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.dy,i=t.input,o=a.filterSize,s=a.strides,l=a.pad,c=a.dimRoundingMode,u=Bl(i.shape,o,s,[1,1,1],l,c),h=new eL(u);return n.runWebGLProgram(h,[r],i.dtype)}};var nL={kernelName:hn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.dy,i=t.input,o=i;bE([r,i],"avgPoolGrad");var s=a.filterSize,l=a.strides,c=a.pad,u=zl(o.shape,s,l,1,c),h=new JD(u);return n.runWebGLProgram(h,[r],o.dtype)}};var aL={kernelName:pn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs;return vD({a:t.a,b:t.b,transposeA:a.transposeA,transposeB:a.transposeB,backend:n})}},rL=Qe((function e(t,n,a,r,i,o){Ze(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],dl(t,n),dl(t,a);var s="0.0";null!=r&&(dl(t,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var l="1.0";null!=i&&(dl(t,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(l,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),iL=Qe((function e(t,n,a,r,i,o){Ze(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],dl(t,n),dl(t,a);var s="vec4(0.0)";null!=r&&(dl(t,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var l="vec4(1.0)";null!=i&&(dl(t,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(l,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),oL={kernelName:ra,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.mean,o=t.variance,s=t.offset,l=t.scale;st(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),st(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),st(null==l||i.shape.length===l.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=a.varianceEpsilon;null==c&&(c=.001);var u=[r,i,o],h=null;null!=s&&(h=s.shape,u.push(s));var d=null;null!=l&&(d=l.shape,u.push(l));var f=Xt().getBool("WEBGL_PACK_NORMALIZATION")?new iL(r.shape,i.shape,o.shape,h,d,c):new rL(r.shape,i.shape,o.shape,h,d,c);return n.runWebGLProgram(f,u,u[0].dtype)}},sL=Qe((function e(t){Ze(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=YE(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var a,r=function(e){if(1===e)return"sourceLoc";if(e<=6)return lL.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(lL[t]," = start[").concat(t,"] + coords.").concat(lL[t],";")}));a="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(a,"\n        setOutput(getSource(").concat(r,"));\n      }\n    ")})),lL=["x","y","z","w","u","v"];var cL=Qe((function e(t){Ze(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=YE(this.rank),a=cF("coords",this.rank),r=cF("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(r.slice(-2).join(),")"),o="getChannel(getSource(".concat(r.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(a[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(r[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(r[this.rank-1],";\n      }\n    "),l=1===this.rank?"":"\n      --".concat(a[this.rank-1],";\n      if (++").concat(a[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(r[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(a[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(r[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(r[t]," = ").concat(a[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")}));function uL(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=u(ml(r,a.begin,a.size),2),o=i[0],s=i[1];if(fl(r,o,s),0===ht(s))return n.makeTensorInfo(s,r.dtype,[]);if(n.shouldExecuteOnCPU([r])||"string"===r.dtype){var l=n.texData.get(r.dataId),c=qR(l.values,o,s,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,c)}var h=n.texData.get(r.dataId).isPacked,d=gl(r.shape,o,s);if(h||!d){var f=Xt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new cL(s):new sL(s),p=[o];return n.runWebGLProgram(f,[r],r.dtype,p)}return n.uploadToGPU(r.dataId),function(e,t,n,a){var r=a.texData.get(e.dataId),i=a.makeTensorInfo(n,e.dtype),o=a.texData.get(i.dataId);Object.assign(o,r),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=vl(t,Rt(e.shape));r.slice&&(s+=r.slice.flatOffset),o.slice={flatOffset:s,origDataId:r.slice&&r.slice.origDataId||e.dataId};var l=a.dataRefCount.get(o.slice.origDataId)||1;return a.dataRefCount.set(o.slice.origDataId,l+1),i}(r,o,s,n)}var hL={kernelName:gr,backendName:"webgl",kernelFunc:uL},dL={kernelName:gn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.blockShape,o=a.crops;st(r.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),l=yd(r.shape,i,s),c=kd(l.length,i.length),u=wd(r.shape,i,s),h=Sd(o,i.length),d=Cd(u,o,i.length),f=[],p=rD({inputs:{x:r},backend:n,attrs:{shape:l}}),g=pD({inputs:{x:p},backend:n,attrs:{perm:c}}),v=rD({inputs:{x:g},backend:n,attrs:{shape:u}}),m=uL({inputs:{x:v},backend:n,attrs:{begin:h,size:d}});return f.push(p),f.push(g),f.push(v),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}};var fL={kernelName:vn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.weights,o=a.size,s=n.readSync(r.dataId),l=n.readSync(i.dataId),c=yR(s,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}};var pL={kernelName:mn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.s0,r=t.s1,i=n.readSync(a.dataId),o=n.readSync(r.dataId),s=dl(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},gL=KF({opSnippet:"return float(a != b);",cpuKernelImpl:HR,dtype:"bool"}),vL={kernelName:Ha,backendName:"webgl",kernelFunc:gL};function mL(e){var t=e.inputs,n=e.backend,a=t.input;return zF({inputs:{x:n.texData.get(a.dataId).complexTensorInfos.real},backend:n})}var xL={kernelName:Ja,backendName:"webgl",kernelFunc:mL};var bL={kernelName:xn,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,a=t.backend,r=t.attrs,i=n.x,o=r.dtype;if("complex64"===o){if("complex64"===i.dtype)return zF({inputs:{x:i},backend:a});var s=ou(i.shape),l=e({inputs:{x:i},backend:a,attrs:{dtype:"float32"}}),c=WF({inputs:{real:l,imag:s},backend:a});return s.dispose(),a.disposeIntermediateTensorInfo(l),c}if("complex64"===i.dtype){var u=mL({inputs:{input:i},backend:a}),h=e({inputs:{x:u},backend:a,attrs:{dtype:o}});return a.disposeIntermediateTensorInfo(u),h}if(!wt(i.dtype,o)){var d=zF({inputs:{x:i},backend:a});return{dataId:d.dataId,shape:d.shape,dtype:o}}if("int32"===o)return function(e,t){var n=new vF(e.shape,"return float(int(x));"),a=t.runWebGLProgram(n,[e],"int32");return{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}(i,a);if("bool"===o){var f=a.makeTensorInfo([],"bool",yt("bool",1)),p=gL({inputs:{a:i,b:f},backend:a});return a.disposeIntermediateTensorInfo(f),p}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},yL="return ceil(x);",kL=qF({opSnippet:yL,packedOpSnippet:yL,cpuKernelImpl:wR}),wL={kernelName:bn,backendName:"webgl",kernelFunc:kL},SL=Qe((function e(t){Ze(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),CL=Qe((function e(t){Ze(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var IL={kernelName:yn,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.clipValueMin,s=r.clipValueMax;t=Xt().getBool("WEBGL_PACK_CLIP")?new CL(i.shape):new SL(i.shape);var l=[[o],[s]];return a.runWebGLProgram(t,[i],i.dtype,l)}},AL=Qe((function e(t){Ze(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function TL(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var NL={kernelName:wn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.x,r=n.texData.get(a.dataId),i=new AL(a.shape),o=[TL(a,r.complexTensorInfos.real),TL(a,r.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},EL=Qe((function e(t){Ze(this,e),this.outputShape=[],this.outputShape=md(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var a=1;a<n.length;a++)n[a]=n[a-1]+t[a][1];for(var r=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];r.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,l=n[n.length-1];r.push("else setOutput(getT".concat(s,"(yR, yC-").concat(l,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(r.join("\n        "),"\n      }\n    ")})),RL=Qe((function e(t,n){Ze(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=md(t,n);var a=this.outputShape,r=a.length,i=YE(r),o=cF("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var l=new Array(t.length-1);l[0]=t[0][n];for(var c=1;c<l.length;c++)l[c]=l[c-1]+t[c][n];for(var u=s[n],h=s.slice(-2),d=s.join(),f="if (".concat(u," < ").concat(l[0],") {\n        return getChannel(\n            getT0(").concat(d,"), vec2(").concat(h.join(),"));\n        }"),p=1;p<l.length;p++){var g=l[p-1];f+="\n        if (".concat(u," < ").concat(l[p],"  && ").concat(u," >= ").concat(l[p-1],") {\n          return getChannel(\n            getT").concat(p,"(").concat(FL(s,u,g),"),\n            vec2(").concat(FL(h,u,g),"));\n        }")}var v=l.length,m=l[l.length-1];f+="\n        return getChannel(\n          getT".concat(v,"(").concat(FL(s,u,m),"),\n          vec2(").concat(FL(h,u,m),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(f,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[r-1]," = ").concat(o[r-1]," + 1;\n        if (").concat(o[r-1]," < ").concat(a[r-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[r-2]," = ").concat(o[r-2]," + 1;\n        if (").concat(o[r-2]," < ").concat(a[r-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[r-1]," = ").concat(o[r-1]," - 1;\n        if (").concat(o[r-2]," < ").concat(a[r-2]," &&\n            ").concat(o[r-1]," < ").concat(a[r-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function FL(e,t,n){var a=e.indexOf(t);return e.map((function(e,t){return t===a?"".concat(e," - ").concat(n):e})).join()}function DL(e){var t=e.inputs,n=e.backend,a=t.input;return zF({inputs:{x:n.texData.get(a.dataId).complexTensorInfos.imag},backend:n})}var LL={kernelName:ha,backendName:"webgl",kernelFunc:DL};function ML(e,t,n){var a=e[0].dtype;if("complex64"===a){var r=e.map((function(e){return mL({inputs:{input:e},backend:n})})),i=e.map((function(e){return DL({inputs:{input:e},backend:n})})),o=ML(r,t,n),s=ML(i,t,n),l=WF({inputs:{real:o,imag:s},backend:n});return r.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}var c=n.shouldExecuteOnCPU(e);if("string"===a&&(c=!0),c){var u=e.map((function(e){var a=ht(e.shape.slice(t));return rD({inputs:{x:e},backend:n,attrs:{shape:[-1,a]}})})),h=u.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),d=md(u.map((function(e){return e.shape})),1),f=1===u[0].shape[0],p=SR(h,d,a,f),g=md(e.map((function(e){return e.shape})),t),v=n.makeTensorInfo(g,a,p);return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}if(e.length>Xt().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var m=Math.floor(e.length/2),x=ML(e.slice(0,m),t,n),b=ML(e.slice(m),t,n),y=ML([x,b],t,n);return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),y}if(Xt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var k=new RL(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(k,e,a)}var w=function(e,t,n){var a=md(e.map((function(e){return e.shape})),t),r=e.map((function(e){return rD({inputs:{x:e},attrs:{shape:[-1,ht(e.shape.slice(t))]},backend:n})}));return{tensors2D:r,outShape:a}}(e,t,n),S=w.tensors2D,C=w.outShape,I=new EL(S.map((function(e){return e.shape}))),A=n.runWebGLProgram(I,S,a);S.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var T=rD({inputs:{x:A},attrs:{shape:C},backend:n});return n.disposeIntermediateTensorInfo(A),T}function OL(e){var t=e.inputs,n=e.backend,a=xt(e.attrs.axis,t[0].shape)[0],r=md(t.map((function(e){return e.shape})),a);if(0===ht(r))return n.makeTensorInfo(r,t[0].dtype,[]);var i=t.filter((function(e){return ht(e.shape)>0}));return 1===i.length?zF({inputs:{x:i[0]},backend:n}):(vd(i.map((function(e){return e.shape})),a),ML(i,a,n))}var PL={kernelName:Sn,backendName:"webgl",kernelFunc:OL},_L=Qe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Ze(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,l=t.strideHeight,c=t.strideWidth,u=t.dilationHeight,h=t.dilationWidth,d=t.filterHeight,f=t.filterWidth,p=4*Math.floor(t.inChannels/4),g=t.inChannels%4,v="channelsLast"===t.dataFormat,m=v?1:2,x=v?2:3,b=v?3:1,y="",k="";a&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(a,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(a,"\n        }"):"\n          float activation(float x) {\n            ".concat(a,"\n          }\n        "),k="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(y,"\n\n      const ivec2 strides = ivec2(").concat(l,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(m,"], coords[").concat(x,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(u,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(f,"; wC++) {\n            int xC = xCCorner + wC * ").concat(h,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(v,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===g,") {\n\n              if (").concat(v,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===g,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===g,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")})),zL=Qe((function e(t){Ze(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,a=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,u=t.dilationWidth,h=t.filterDepth,d=t.filterHeight,f=t.filterWidth,p=4*Math.floor(t.inChannels/4),g=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(a,", ").concat(r,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(h,"; wF++) {\n          int xF = xFCorner + wF * ").concat(l,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,"; wC++) {\n              int xC = xCCorner + wC * ").concat(u,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===g,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),BL=Qe((function e(t,n){Ze(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=tR(this.outputShape.length);for(var a=n.dataFormat,r=kE(),i="channelsLast"===a,o=i?0:1,s=i?1:2,l=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":"if(blockIndex < ".concat(t[1]," && pos < ").concat(t[0],") {"),c="",u=0;u<=1;u++)for(var h=0;h<=1;h++)c+="\n          blockIndex = rc.y + ".concat(h,";\n          pos = rc.x + ").concat(u,";\n\n          ").concat(l,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*u+h,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*u+h,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(r.output," = result;\n      }\n    ")}));function WL(e){var t,n=e.x,a=e.filter,r=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,l=e.preluActivationWeights,c=void 0===l?null:l,u=e.leakyreluAlpha,h=void 0===u?0:u,d=e.activation,f=void 0===d?null:d,p=n.shape,g=i.texData.get(n.dataId),v=r.inChannels,m=p[0]*p[1]*p[2],x=r.outChannels,b="channelsLast"===r.dataFormat,y=[];if(null!=c&&!b&&3===c.shape.length){var k=pD({inputs:{x:c},backend:i,attrs:{perm:[1,2,0]}});y.push(k),c=k}if(!((1===m||1===x)&&v>1e3)&&g.isPacked&&b&&null!=g.texture&&p[2]%2!==0&&dt(g.shape.slice(-3),p.slice(-3))){var w=p[0]*p[1]*(p[2]+1),S={dataId:n.dataId,shape:[1,w,r.inChannels],dtype:n.dtype},C=g.shape;g.shape=g.shape.slice(),g.shape[g.shape.length-2]++,st(pE(g.shape,S.shape),(function(){return"packed reshape ".concat(g.shape," to ").concat(S.shape," isn't free")}));var I=rD({inputs:{x:a},backend:i,attrs:{shape:[1,r.inChannels,r.outChannels]}});y.push(I);var A=vD({a:S,b:I,backend:i,transposeA:false,transposeB:false,bias:s,activation:f,preluActivationWeights:c,leakyreluAlpha:h}),T=i.texData.get(A.dataId);st(T.isPacked,(function(){return"batchMatMul result is expected to be packed"})),g.shape=C,T.shape=r.outShape,(t=zF({inputs:{x:A},backend:i})).shape=r.outShape,y.push(A)}else{var N=b?n:pD({inputs:{x:n},backend:i,attrs:{perm:[0,2,3,1]}}),E=N.shape,R=rD({inputs:{x:N},backend:i,attrs:{shape:[1,E[0]*E[1]*E[2],r.inChannels]}}),F=rD({inputs:{x:a},backend:i,attrs:{shape:[1,r.inChannels,r.outChannels]}}),D=vD({a:R,b:F,transposeA:false,transposeB:false,backend:i,bias:s,activation:f,preluActivationWeights:c,leakyreluAlpha:h}),L=rD({inputs:{x:D},backend:i,attrs:{shape:[r.batchSize,r.outHeight,r.outWidth,r.outChannels]}});t=b?L:pD({inputs:{x:L},backend:i,attrs:{perm:[0,3,1,2]}}),b||(y.push(N),y.push(L)),y.push(R),y.push(F),y.push(D)}for(var M=0,O=y;M<O.length;M++){var P=O[M];i.disposeIntermediateTensorInfo(P)}return t}function HL(e){var t=e.x,n=e.filter,a=e.convInfo,r=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,l=void 0===s?null:s,c=e.leakyreluAlpha,u=void 0===c?0:c,h=e.activation,d=void 0===h?null:h,f=a.filterWidth,p=a.filterHeight,g=a.inChannels,v=a.outWidth,m=a.outHeight,x="channelsLast"===a.dataFormat,b=f*p*g,y=m*v,k=[b,y],w=[];if(null!=l&&!x&&3===l.shape.length){var S=pD({inputs:{x:l},backend:r,attrs:{perm:[1,2,0]}});w.push(S),l=S}var C=rD({inputs:{x:t},backend:r,attrs:{shape:t.shape.slice(1)}}),I=rD({inputs:{x:n},backend:r,attrs:{shape:[1,b,ht(n.shape)/b]}});w.push(C),w.push(I);var A=new BL(k,a),T=[C.shape,[a.padInfo.top,a.padInfo.left],[a.strideHeight,a.strideWidth],[a.dilationHeight,a.dilationWidth],[a.inChannels],[a.filterWidth*a.inChannels],[a.outWidth]],N=r.runWebGLProgram(A,[C],"float32",T),E=rD({inputs:{x:N},backend:r,attrs:{shape:[1,k[0],k[1]]}});w.push(N),w.push(E);var R=null!=o,F=null!=l,D="leakyrelu"===d,L=d?ZF(d,!0):null,M=new $F(E.shape,I.shape,[1,y,a.outChannels],!0,!1,R,L,F,D),O=[E,I];if(o&&O.push(o),F&&O.push(l),D){var P=r.makeTensorInfo([],"float32",Ii(u,"float32"));O.push(P),w.push(P)}var _=r.runWebGLProgram(M,O,"float32"),z=rD({inputs:{x:_},backend:r,attrs:{shape:[1,m,v,a.outChannels]}}),B=x?z:pD({inputs:{x:z},backend:r,attrs:{perm:[0,3,1,2]}});x||w.push(z),w.push(_);for(var W=0,H=w;W<H.length;W++){var V=H[W];r.disposeIntermediateTensorInfo(V)}return B}var VL={kernelName:Cn,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.filter,s=r.strides,l=r.pad,c=r.dataFormat,u=r.dilations,h=r.dimRoundingMode,d=$l(c),f=Wl(i.shape,o.shape,s,u,l,h,!1,d);if(1!==f.filterHeight||1!==f.filterWidth||1!==f.dilationHeight||1!==f.dilationWidth||1!==f.strideHeight||1!==f.strideWidth||"SAME"!==f.padInfo.type&&"VALID"!==f.padInfo.type)if(Xt().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=HL({x:i,filter:o,convInfo:f,backend:a});else{var p=new _L(f);t=a.runWebGLProgram(p,[i,o],"float32")}else t=WL({x:i,filter:o,convInfo:f,backend:a});var g=rD({inputs:{x:t},backend:a,attrs:{shape:f.outShape}});return a.disposeIntermediateTensorInfo(t),g}},UL=Qe((function e(t){Ze(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,a=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(a," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),XL=Qe((function e(t){Ze(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,a=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,l=a-1-t.padInfo.left,c=o?1:2,u=o?2:3,h=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(l,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(h,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(u,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(a,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(a," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),GL=Qe((function e(t){Ze(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,a=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(a," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(r," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),YL=Qe((function e(t){Ze(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,a=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,l=n-1-t.padInfo.front,c=a-1-t.padInfo.top,u=r-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(l,", ").concat(c,", ").concat(u,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(a,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(a," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(r,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(r," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var jL={kernelName:In,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.dy,o=a.strides,s=a.pad,l=a.dataFormat,c=a.dimRoundingMode,u=a.filterShape,h=$l(l),d=Wl(r.shape,u,o,1,s,c,!1,h),f=new UL(d);return n.runWebGLProgram(f,[r,i],"float32")}};var qL={kernelName:An,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.dy,i=t.filter,o=a.inputShape,s=a.strides,l=a.pad,c=a.dataFormat,u=a.dimRoundingMode,h=$l(c),d=Wl(o,i.shape,s,1,l,u,!1,h),f=new XL(d);return n.runWebGLProgram(f,[r,i],"float32")}};var KL={kernelName:Tn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.filter,o=a.strides,s=a.pad,l=a.dilations,c=Hl(r.shape,i.shape,o,l,s),u=new zL(c);return n.runWebGLProgram(u,[r,i],"float32")}};var ZL={kernelName:Nn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.dy,o=a.strides,s=a.pad,l=a.filterShape,c=Hl(r.shape,l,o,1,s),u=new GL(c);return n.runWebGLProgram(u,[r,i],"float32")}};var $L,QL={kernelName:En,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.dy,i=t.filter,o=a.pad,s=a.strides,l=Hl(a.inputShape,i.shape,s,1,o),c=new YL(l);return n.runWebGLProgram(c,[r,i],"float32")}},JL=qF({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),eM={kernelName:Rn,backendName:"webgl",kernelFunc:JL},tM=qF({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),nM={kernelName:Fn,backendName:"webgl",kernelFunc:tM},aM=Qe((function e(t,n,a,r,i){Ze(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=u(t,4),s=o[0],l=o[1],c=o[2],h=o[3],d=u(n,1)[0],f=u(a,2),p=f[0],g=f[1];this.outputShape=[d,p,g,h];var v="bilinear"===r?1:0,m="".concat(l-1,".0"),x="".concat(c-1,".0"),b=u(p>1?["".concat((l-1)/(p-1)),"(y2-y1) * height_ratio","y1*".concat(m," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(m)],3),y=b[0],k=b[1],w=b[2],S=u(g>1?["".concat((c-1)/(g-1)),"(x2-x1) * width_ratio","x1*".concat(x," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(x)],3),C=S[0],I=S[1],A=S[2];this.userCode="\n      const float height_ratio = float(".concat(y,");\n      const float width_ratio = float(").concat(C,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(k,";\n        float width_scale = ").concat(I,";\n\n        float in_y = ").concat(w,";\n        if( in_y < 0.0 || in_y > ").concat(m," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(A,";\n        if( in_x < 0.0 || in_x > ").concat(x," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(v," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),rM={kernelName:Mn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.image,i=t.boxes,o=t.boxInd,s=a.cropSize,l=a.method,c=a.extrapolationValue,u=new aM(r.shape,i.shape,s,l,c);return n.runWebGLProgram(u,[r,i,o],"float32")}};!function(e){e.Prod="*",e.Sum="+"}($L||($L={}));var iM=Qe((function e(t,n,a,r){Ze(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var i=this.outputShape.length,o=this.op===$L.Prod?"1.0":"0.0",s=a?o:"getX(".concat(oM(i,"coords",this.op),")"),l=this.outputShape[this.outputShape.length-1],c="",u="";a?(c=r?"end != ".concat(l-1):"end != 0",u=r?"end + 1":"end - 1"):(c=r?"end + pow2 < ".concat(l):"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(YE(i)," coords = getOutputCoords();\n        int end = ").concat(sM(i,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(u,";\n          ").concat(sM(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(oM(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function oM(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function sM(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function lM(e,t,n,a,r,i){var o=t.shape.length,s=Qc([a],o),l=t;null!=s&&(l=pD({inputs:{x:t},backend:n,attrs:{perm:s}}));var c=eu(1,o)[0];if(c!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(a));for(var u=l.shape[c],h=zF({inputs:{x:l},backend:n}),d=0;d<=Math.ceil(Math.log2(u))-1;d++){var f=new iM(e,l.shape,!1,i),p=[[d]],g=h;h=n.runWebGLProgram(f,[h],h.dtype,p),n.disposeIntermediateTensorInfo(g)}if(r){var v=new iM(e,l.shape,r,i),m=h;h=n.runWebGLProgram(v,[h],h.dtype),n.disposeIntermediateTensorInfo(m)}if(null!=s){var x=pD({inputs:{x:h},backend:n,attrs:{perm:Jc(s)}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),x}return h}var cM={kernelName:Dn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis,o=a.exclusive,s=a.reverse;return lM($L.Prod,r,n,i,o,s)}};var uM={kernelName:Ln,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis,o=a.exclusive,s=a.reverse;return lM($L.Sum,r,n,i,o,s)}};var hM={kernelName:On,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.weights,o=a.size,s=a.binaryOutput;if(1===r.shape.length){var l=n.readSync(r.dataId),c=n.readSync(i.dataId),u=yR(l,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}if(2===r.shape.length){var h=n.bufferSync(r),d=n.bufferSync(i),f=kR(h,d,o,s);return n.makeTensorInfo(f.shape,i.dtype,f.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(r.shape.length,"."))}},dM=function(){function e(t,n,a){Ze(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=a,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return Qe(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var fM={kernelName:Pn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.blockSize,o=a.dataFormat,s=r.shape[0],l=("NHWC"===o?r.shape[1]:r.shape[2])*i,c=("NHWC"===o?r.shape[2]:r.shape[3])*i,u=("NHWC"===o?r.shape[3]:r.shape[1])/(i*i),h=new dM("NHWC"===o?[s,l,c,u]:[s,u,l,c],i,o);return n.runWebGLProgram(h,[r],r.dtype)}},pM=Qe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Ze(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=tR(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,l=t.outChannels/t.inChannels,c="",u="";a&&(c=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(a,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(a,"\n        }"):"\n          float activation(float x) {\n            ".concat(a,"\n          }\n        "),u="result = activation(result);");var h=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(l,";\n        int q = d2 - d1 * ").concat(l,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(h,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")})),gM=Qe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Ze(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=tR(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,l=t.strideWidth,c=t.dilationWidth,u=t.filterHeight,h=t.filterWidth,d=h,f="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",p=0;p<h;p++)f+="\n          vec4 xTexelC".concat(2*p,";\n          int xTexelC").concat(2*p,"Ready;\n          vec4 xTexelC").concat(2*p+1,";\n          int xTexelC").concat(2*p+1,"Ready;\n          vec4 xC").concat(p,";");f+="\n    for (int r = 0; r < ".concat(u,"; r++) {\n      ");for(var g=0;g<h;g++)f+="\n          xTexelC".concat(2*g," = vec4(0.0);\n          xTexelC").concat(2*g,"Ready = 0;\n          xTexelC").concat(2*g+1," = vec4(0.0);\n          xTexelC").concat(2*g+1,"Ready = 0;\n          xC").concat(g," = vec4(0.0);");f+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var v=0;v<(d+1)/2;v++){var m=2*v;if(f+="\n          xC = xCCorner + ".concat(m*c,";\n          "),1===l){if(m<h&&(s%2===1?(f+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n              "),f+=1===c&&m>0?"\n                xC".concat(m," = vec4(xTexelC").concat(m-2,".zw, xTexelC").concat(m,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(m," = vec4(previous.zw, xTexelC").concat(m,".xy);\n                  } else {\n                    xC").concat(m," = vec4(0.0, 0.0, xTexelC").concat(m,".xy);\n                  }\n                  ")):f+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n\n                xC").concat(m," = xTexelC").concat(m,";\n                "),m+1<h)){var x=s%2===0?rt(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(f+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(x,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                    xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(m+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(m+1,"Ready = 1;\n                  }\n                  "),c>1&&(f+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                      xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(m,"Ready = 1;\n                    }\n                    ")),f+="\n                  xC".concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".xy);\n                  ")):f+=1===x?"\n                    xC".concat(m+1," = xTexelC").concat(m,";\n                    "):"\n                    xCOffset = xC + ".concat(x,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                      xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(m+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(m+1,"Ready = 1;\n                    }\n\n                    xC").concat(m+1," = xTexelC").concat(m+1,";\n                    ")}}else m<h&&(s%2===1?(f+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                  xTexelC").concat(m+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(m+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m+1,"Ready = 1;\n                }\n\n                xC").concat(m," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".zw);\n              "),m+1<h&&(f+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(m+1," = vec4(xTexelC").concat(m+1,".xy, final.xy);\n                "))):(f+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                  xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(m+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(m+1,"Ready = 1;\n                }\n\n                xC").concat(m," = vec4(\n                  xTexelC").concat(m,".xy, xTexelC").concat(m+1,".xy);\n              "),m+1<h&&(f+="\n                  xC".concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".zw);\n                "))));m<h&&(f+="\n            wTexel = getW(r, ".concat(m,", d1, q);\n            dotProd += xC").concat(m," * vec4(wTexel.xz, wTexel.xz);\n          "),m+1<h&&(f+="\n              wTexel = getW(r, ".concat(m+1,", d1, q);\n              dotProd += xC").concat(m+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}f+="\n    }\n  ",f+="\n      }\n    ";var b="",y="";a&&(b=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(a,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(a,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(a,"\n        }"),y="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(f,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(k,"\n        ").concat(y,"\n        setOutput(result);\n      }\n    ")}));var vM={kernelName:_n,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.filter,o=a.strides,s=a.pad,l=a.dilations,c=a.dimRoundingMode,u=l;null==u&&(u=[1,1]),st(Zl(o,u),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(u,"'")}));var h,d=Wl(r.shape,i.shape,o,u,s,c,!0);h=Xt().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new gM(d):new pM(d);var f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[r,i],"float32",f)}},mM=Qe((function e(t){Ze(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,a=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(a," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),xM=Qe((function e(t){Ze(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,a=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=a-1-t.padInfo.left,l=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(a,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(a," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(l,"; dm++) {\n              int d2 = d1 * ").concat(l," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var bM={kernelName:zn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.dy,o=a.strides,s=a.dilations,l=a.pad,c=a.dimRoundingMode,u=a.filterShape,h=Wl(r.shape,u,o,s,l,c,!0),d=new mM(h);return n.runWebGLProgram(d,[r,i],"float32")}};var yM={kernelName:Bn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.dy,i=t.filter,o=a.strides,s=a.dilations,l=a.pad,c=a.dimRoundingMode,u=Wl(a.inputShape,i.shape,o,s,l,c,!0),h=new xM(u);return n.runWebGLProgram(h,[r,i],"float32")}},kM=Qe((function e(t){Ze(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var wM={kernelName:Wn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.x,r=[].concat(Ke(a.shape),Ke(a.shape)),i=ht(a.shape),o=rD({inputs:{x:a},backend:n,attrs:{shape:[i]}}),s=new kM(i),l=n.runWebGLProgram(s,[o],o.dtype),c=rD({inputs:{x:l},backend:n,attrs:{shape:r}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}},SM=Qe((function e(t){Ze(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,a=t.inWidth,r=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,l=t.filterWidth,c=t.dilationHeight,u=t.dilationWidth,h=r.top,d=r.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(l,"; w++) {\n              int wIn = wBeg + w * ").concat(u,";\n\n              if (wIn >= 0 && wIn < ").concat(a,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var CM={kernelName:Hn,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.filter,s=r.strides,l=r.pad,c=r.dilations,u=_l(i.shape,o.shape,s,l,"NHWC",c),h=new SM(u),d=rD({inputs:{x:t=a.runWebGLProgram(h,[i,o],"float32")},backend:a,attrs:{shape:u.outShape}});return a.disposeIntermediateTensorInfo(t),d}};var IM={kernelName:Gn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t,r=Hd(e.attrs.equation,a.length),i=r.allDims,o=r.summedDims,s=r.idDims;Ud(i.length,s,a);for(var l=Xd(o,s),c=l.path,u=l.steps,h=u.length,d=null,f=i.length,p=[],g=0;g<h;++g){var v,m=je(u[g]);try{for(m.s();!(v=m.n()).done;){var x=v.value,b=Vd(f,s[x]),y=b.permutationIndices,k=b.expandDims,w=void 0;Gd(y)?w=a[x]:(w=pD({inputs:{x:a[x]},backend:n,attrs:{perm:y}}),p.push(w));for(var S=w.shape.slice(),C=0;C<k.length;++C)S.splice(k[C],0,1);dt(w.shape,S)||(w=rD({inputs:{x:w},backend:n,attrs:{shape:S}}),p.push(w)),null===d?d=w:(d=nD({inputs:{a:w,b:d},backend:n}),p.push(d))}}catch(jz){m.e(jz)}finally{m.f()}g<h-1&&(c[g]>=0&&(d=dD({inputs:{x:d},backend:n,attrs:{axis:c[g]-(i.length-f),keepDims:!1}}),p.push(d)),f--)}for(var I=0,A=p;I<A.length;I++){var T=A[I];T!==d&&n.disposeIntermediateTensorInfo(T)}return d}},AM=qF({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),TM={kernelName:Yn,backendName:"webgl",kernelFunc:AM},NM={kernelName:jn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.dy,r=t.y,i=Xt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _F("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",a.shape,r.shape):new PF("return (b >= 1.0) ? a : a * (b + 1.0);",a.shape,r.shape);return n.runWebGLProgram(i,[a,r],a.dtype)}},EM=KF({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:CR}),RM={kernelName:Kn,backendName:"webgl",kernelFunc:EM},FM=qF({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(Ed,";\n  float a1 = ").concat(Rd,";\n  float a2 = ").concat(Fd,";\n  float a3 = ").concat(Dd,";\n  float a4 = ").concat(Ld,";\n  float a5 = ").concat(Md,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),DM={kernelName:qn,backendName:"webgl",kernelFunc:FM},LM=qF({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:IR,dtype:"float32"}),MM={kernelName:Zn,backendName:"webgl",kernelFunc:LM};function OM(e){var t=e.inputs,n=e.attrs,a=e.backend,r=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),l=r;return r<0&&(st(-(o+1)<=r,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),l=o+r+1),s.splice(l,0,1),rD({inputs:{x:i},backend:a,attrs:{shape:s}})}var PM={kernelName:$n,backendName:"webgl",kernelFunc:OM},_M="return exp(x) - 1.0;",zM=qF({opSnippet:_M,packedOpSnippet:_M,cpuKernelImpl:AR}),BM={kernelName:Qn,backendName:"webgl",kernelFunc:zM},WM=Qe((function e(t,n,a){Ze(this,e),this.variableNames=["real","imag"];var r=n[1];this.outputShape=n;var i,o=a?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=a?"".concat(r,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(r,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function HM(e,t,n){var a=n.texData.get(e.dataId),r=ht(e.shape),i=e.shape[e.shape.length-1],o=rD({inputs:{x:e},backend:n,attrs:{shape:[r/i,i]}}),s=o.shape,l=new WM("real",s,t),c=new WM("imag",s,t),u=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:s},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:s}],h=n.runWebGLProgram(l,u,"float32"),d=n.runWebGLProgram(c,u,"float32"),f=WF({inputs:{real:h,imag:d},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d);var p=rD({inputs:{x:f},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(f),p}var VM={kernelName:Jn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return HM(t.input,!1,n)}},UM=Qe((function e(t,n){Ze(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function XM(e){var t=e.backend,n=e.attrs,a=n.shape,r=n.value,i=n.dtype;if("string"===(i=i||Tt(r))){var o=kt(i,ht(a));return o.fill(r),t.makeTensorInfo(a,i,o)}var s=new UM(a,r),l=[[r]];return t.runWebGLProgram(s,[],i,l)}var GM,YM={kernelName:ea,backendName:"webgl",kernelFunc:XM},jM=Qe((function e(t){Ze(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),qM={kernelName:ta,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.image,r=n,i=new jM(a.shape);return r.runWebGLProgram(i,[a],a.dtype)}},KM="return floor(x);",ZM=qF({opSnippet:KM,packedOpSnippet:KM,cpuKernelImpl:TR}),$M={kernelName:na,backendName:"webgl",kernelFunc:ZM},QM=KF({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),JM={kernelName:aa,backendName:"webgl",kernelFunc:QM},eO=Qe((function e(t){Ze(this,e),this.variableNames=["A"];var n=kE(),a=u(t,2),r=a[0],i=a[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(r,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),tO=Qe((function e(t){Ze(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=kE(),a=u(t,2),r=a[0],i=a[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(r,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),nO={kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.pixels,i=a.numChannels,o="undefined"!==typeof HTMLVideoElement&&r instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&r instanceof HTMLImageElement,l=u(o?[r.videoWidth,r.videoHeight]:[r.width,r.height],2),c=l[0],h=l[1],d=[h,c],f=[h,c,i];(s||o)&&(null==GM&&(GM=document.createElement("canvas").getContext("2d")),GM.canvas.width=c,GM.canvas.height=h,GM.drawImage(r,0,0,c,h),r=GM.canvas);var p=n.makeTensorInfo(d,"int32");n.texData.get(p.dataId).usage=zN.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),r);var g=Xt().getBool("WEBGL_PACK")?new tO(f):new eO(f),v=n.runWebGLProgram(g,[p],"int32");return n.disposeData(p.dataId),v}};var aO={kernelName:$r,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.filter,s=n.bias,l=n.preluActivationWeights,c=r.strides,u=r.pad,h=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,p=r.activation,g=r.leakyreluAlpha,v=$l(h),m=Wl(i.shape,o.shape,c,d,u,f,!1,v),x=[];if(1!==m.filterHeight||1!==m.filterWidth||1!==m.dilationHeight||1!==m.dilationWidth||1!==m.strideHeight||1!==m.strideWidth||"SAME"!==m.padInfo.type&&"VALID"!==m.padInfo.type)if(Xt().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=HL({x:i,filter:o,convInfo:m,backend:a,bias:s,activation:p,preluActivationWeights:l,leakyreluAlpha:g});else{var b=null!=s,y=null!=l,k="leakyrelu"===p,w=p?ZF(p,!1):null,S=new _L(m,b,w,y,k),C=[i,o],I=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=rD({inputs:{x:e},backend:a,attrs:{shape:[e.shape[0],1,1]}});return x.push(n),n}return e};if(b&&C.push(I(s,h)),y&&C.push(I(l,h)),k){var A=a.makeTensorInfo([],"float32",Ii(g,"float32"));C.push(A),x.push(A)}t=a.runWebGLProgram(S,C,"float32")}else t=WL({x:i,filter:o,convInfo:m,backend:a,bias:s,activation:p,preluActivationWeights:l,leakyreluAlpha:g});var T=rD({inputs:{x:t},backend:a,attrs:{shape:m.outShape}});return x.push(t),x.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),T}};var rO={kernelName:Qr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,l=a.strides,c=a.pad,u=a.dilations,h=a.dimRoundingMode,d=a.activation,f=a.leakyreluAlpha,p=[],g=u;null==g&&(g=[1,1]),st(Zl(l,g),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(l," and dilations '").concat(g,"'")}));var v,m=Wl(r.shape,i.shape,l,g,c,h,!0),x=Xt().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,b=d?ZF(d,x):null,y=[r,i],k=null!=o,w=null!=s,S="leakyrelu"===d;if(k&&y.push(o),w&&y.push(s),S){var C=n.makeTensorInfo([],"float32",Ii(f,"float32"));y.push(C),p.push(C)}v=x?new gM(m,k,b,w,S):new pM(m,k,b,w,S);var I=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],A=n.runWebGLProgram(v,y,"float32",I);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),A}},iO=Qe((function e(t,n,a){Ze(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=a;var r=YE(n.length),i=YE(a.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(r," strides = ").concat(r,"(").concat(this.strides,");\n         void main() {\n          ").concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(o,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")}));var oO={kernelName:oa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.params,r=t.indices,i=r.shape,o=i[i.length-1],s=ht(a.shape),l=u(Id(a,r),4),c=l[0],h=l[1],d=l[2],f=l[3],p=rD({inputs:{x:r},backend:n,attrs:{shape:[h,o]}}),g=rD({inputs:{x:a},backend:n,attrs:{shape:[ht(a.shape)/d,d]}});if(n.shouldExecuteOnCPU([a,r])||"string"===a.dtype){var v=n.readSync(r.dataId),m=n.bufferSync(a),x=NR(v,m,a.dtype,h,o,d,f,a.shape,s);return n.makeTensorInfo(c,a.dtype,x.values)}var b=new iO(o,f,[h,d]),y=n.runWebGLProgram(b,[g,p],g.dtype),k=rD({inputs:{x:y},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),k}},sO=Qe((function e(t,n){Ze(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var a=YE(this.rank),r=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],r=0;r<e.length;r++)2===r?a.push("index"):a.push("".concat(n[r]));return a.join()}(t);this.userCode="\n      void main() {\n        ".concat(a," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(r,"));\n      }\n    ")}));function lO(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.indices,o=a.axis,s=a.batchDims,l=xt(o,r.shape)[0];Xt().get("DEBUG")&&function(){for(var e=n.readSync(i.dataId),t=r.shape[l],a=function(n){var a=e[n];st(a<=t-1&&a>=0,(function(){return"GatherV2: the index value ".concat(a," is not in [0, ").concat(t-1,"]")}))},o=0;o<e.length;++o)a(o)}();var c=$d(r,i,l,s),u=ht(i.shape),h=[],d=rD({inputs:{x:r},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),f=rD({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});h.push(d),h.push(f);var p=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([r,i])||"string"===r.dtype){var g=n.bufferSync(f),v=n.bufferSync(d),m=ER(v,g,p);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(c.outputShape,m.dtype,m.values)}var x=new sO(d.shape,p),b=n.runWebGLProgram(x,[d,f],d.dtype);h.push(b);var y=rD({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}var cO={kernelName:ia,backendName:"webgl",kernelFunc:lO},uO=KF({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:RR,dtype:"bool"}),hO={kernelName:sa,backendName:"webgl",kernelFunc:uO},dO=KF({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:FR}),fO={kernelName:la,backendName:"webgl",kernelFunc:dO};var pO={kernelName:ua,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return HM(t.input,!0,n)}},gO=qF({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),vO={kernelName:da,backendName:"webgl",kernelFunc:gO},mO=qF({opSnippet:"return float(isinf(x));",dtype:"bool"}),xO={kernelName:fa,backendName:"webgl",kernelFunc:mO},bO=qF({opSnippet:"return float(isnan(x));",dtype:"bool"}),yO={kernelName:pa,backendName:"webgl",kernelFunc:bO},kO=KF({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:DR,dtype:"bool"}),wO={kernelName:va,backendName:"webgl",kernelFunc:kO},SO=KF({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:LR,dtype:"bool"}),CO={kernelName:ma,backendName:"webgl",kernelFunc:SO};var IO={kernelName:xa,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,a=n.start,r=n.stop,i=n.num,o=MR(a,r,i);return t.makeTensorInfo([o.length],"float32",o)}},AO=qF({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:OR}),TO={kernelName:ba,backendName:"webgl",kernelFunc:AO},NO=qF({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),EO={kernelName:ya,backendName:"webgl",kernelFunc:NO},RO=KF({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),FO={kernelName:ka,backendName:"webgl",kernelFunc:RO},DO=qF({opSnippet:"return float(!(x >= 1.0));"}),LO={kernelName:wa,backendName:"webgl",kernelFunc:DO},MO=KF({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),OO={kernelName:Sa,backendName:"webgl",kernelFunc:MO},PO=Qe((function e(t,n,a,r,i){Ze(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,l=t[3]-1;this.outputShape=t;var c="float(".concat(a,") + float(").concat(r,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(l,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),_O=Qe((function e(t,n,a,r,i){Ze(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,l=t[3]-1;this.outputShape=t;var c="float(".concat(a,") + float(").concat(r,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(l,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),zO={kernelName:Ca,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.depthRadius,o=a.bias,s=a.alpha,l=a.beta,c=Xt().getBool("WEBGL_PACK_NORMALIZATION")?new _O(r.shape,i,o,s,l):new PO(r.shape,i,o,s,l);return n.runWebGLProgram(c,[r],r.dtype)}},BO=Qe((function e(t,n,a,r,i){Ze(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=a,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(r,") * norm + float(").concat(a,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(r,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),WO={kernelName:Ia,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.y,o=t.dy,s=a.depthRadius,l=a.bias,c=a.alpha,u=a.beta,h=new BO(r.shape,s,l,c,u);return n.runWebGLProgram(h,[r,i,o],r.dtype)}};function HO(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.reductionIndices,o=a.keepDims,s=r.shape.length,l=xt(i,r.shape),c=l,h=Qc(c,s),d=null!=h,f=n.shouldExecuteOnCPU([r]),p=r;if(d){if(f){for(var g=n.texData.get(p.dataId).values,v=new Array(s),m=0;m<v.length;m++)v[m]=r.shape[h[m]];var x=oF(g,r.shape,r.dtype,h,v);p=n.makeTensorInfo(v,r.dtype),n.texData.get(p.dataId).values=x}else p=hD(r,h,n);c=eu(c.length,s)}$c("max",c,s);var b,y=u(Kc(p.shape,c),2),k=y[0],w=y[1],S=k;if(o&&(S=Zc(k,l)),f){var C=n.texData.get(p.dataId).values,I=PR(C,ht(w),S,r.dtype);b=n.makeTensorInfo(S,r.dtype),n.texData.get(b.dataId).values=I}else b=function(e,t,n,a){var r=ht(t),i=rD({inputs:{x:e},attrs:{shape:[ht(e.shape)/r,r]},backend:a}),o=lD(i,e.dtype,"max",a),s=rD({inputs:{x:o},attrs:{shape:n},backend:a});return a.disposeIntermediateTensorInfo(i),a.disposeIntermediateTensorInfo(o),s}(p,w,S,n);return d&&n.disposeIntermediateTensorInfo(p),b}var VO={kernelName:Aa,backendName:"webgl",kernelFunc:HO},UO=KF({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:_R}),XO={kernelName:Ta,backendName:"webgl",kernelFunc:UO};var GO={kernelName:Na,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x;bE(r,"maxPool");var i=a.filterSize,o=a.strides,s=a.pad,l=a.dimRoundingMode;st(Zl(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=zl(r.shape,i,o,1,s,l);if(1===c.filterWidth&&1===c.filterHeight&&dt(c.inShape,c.outShape))return zF({inputs:{x:r},backend:n});var u=new KD(c,"max",!1);return n.runWebGLProgram(u,[r],r.dtype)}};var YO={kernelName:Ra,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.filterSize,o=a.strides,s=a.pad,l=a.dataFormat,c=a.dimRoundingMode,u=Bl(r.shape,i,o,[1,1,1],s,c,l),h=new ZD(u,"max",!1);return n.runWebGLProgram(h,[r],r.dtype)}},jO=Qe((function e(t){Ze(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,a=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,l=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(l,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(r,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),qO=Qe((function e(t){Ze(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,a=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,u=t.effectiveFilterWidth,h=l-1-t.padInfo.front,d=c-1-t.padInfo.top,f=u-1-t.padInfo.left,p=l*c*u-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(d,", ").concat(f,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(l,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(u,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(u," +\n                  wR * ").concat(u," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var KO={kernelName:Fa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.dy,i=t.input,o=a.filterSize,s=a.strides,l=a.pad,c=a.dimRoundingMode,u=Bl(i.shape,o,s,[1,1,1],l,c),h=new ZD(u,"max",!0),d=n.runWebGLProgram(h,[i],i.dtype),f=new qO(u),p=n.runWebGLProgram(f,[r,d],i.dtype);return n.disposeIntermediateTensorInfo(d),p}};var ZO={kernelName:Ea,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.dy,i=t.input,o=i;bE([i,t.output],"maxPoolGrad");var s=a.filterSize,l=a.strides,c=a.pad,u=a.dimRoundingMode,h=zl(o.shape,s,l,1,c,u),d=new KD(h,"max",!0),f=n.runWebGLProgram(d,[o],o.dtype),p=new jO(h),g=n.runWebGLProgram(p,[r,f],o.dtype);return n.disposeIntermediateTensorInfo(f),g}};var $O={kernelName:Da,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,r=t.x,i=n.filterSize,o=n.strides,s=n.pad,l=n.includeBatchInIndex,c=a;st(4===r.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(r.shape.length,".")}));var h=[1,1];st(Zl(o,h),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(h,"'")}));var d=zl(r.shape,i,o,h,s),f=function(e,t,n,a){var r=new KD(n,"max",!1),i=a.runWebGLProgram(r,[e],"float32");return r=new KD(n,"max",!0,!0,t),[i,a.runWebGLProgram(r,[e],"float32")]}(r,l,d,c),p=u(f,2);return[p[0],p[1]]}};var QO={kernelName:La,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,r=t.x,i=n.keepDims,o=n.axis,s=a,l=r.shape.length,c=xt(o,r.shape),h=c,d=Qc(h,l),f=null!=d,p=s.shouldExecuteOnCPU([r]),g=[],v=r;if(f){if(p){for(var m=s.texData.get(v.dataId).values,x=new Array(l),b=0;b<x.length;b++)x[b]=r.shape[d[b]];var y=oF(m,r.shape,r.dtype,d,x);v=s.makeTensorInfo(x,r.dtype),s.texData.get(v.dataId).values=y}else v=hD(r,d,s);g.push(v),h=eu(h.length,l)}$c("sum",h,l);var k=u(Kc(v.shape,h),2),w=k[0],S=k[1],C=w;i&&(C=Zc(w,c));for(var I=function(e,t,n,a){var r=ht(t),i=rD({inputs:{x:e},attrs:{shape:[ht(e.shape)/r,r]},backend:a}),o=lD(i,"float32","mean",a),s=rD({inputs:{x:o},attrs:{shape:n},backend:a});return a.disposeIntermediateTensorInfo(i),a.disposeIntermediateTensorInfo(o),s}(v,S,C,s),A=0,T=g;A<T.length;A++){var N=T[A];s.disposeIntermediateTensorInfo(N)}return I}};var JO={kernelName:Ma,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis,o=a.keepDims,s=r.shape.length,l=xt(i,r.shape),c=l,h=Qc(c,s),d=r;null!=h&&(d=pD({inputs:{x:r},backend:n,attrs:{perm:h}}),c=eu(c.length,r.shape.length)),$c("min",c,s);var f,p=u(Kc(d.shape,c),2),g=p[0],v=rD({inputs:{x:d},backend:n,attrs:{shape:[-1,ht(p[1])]}}),m=lD(v,v.dtype,"min",n);return f=rD(o?{inputs:{x:m},backend:n,attrs:{shape:Zc(g,l)}}:{inputs:{x:m},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),null!=h&&n.disposeIntermediateTensorInfo(d),f}},eP=KF({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:zR}),tP={kernelName:Oa,backendName:"webgl",kernelFunc:eP},nP=Qe((function e(t,n,a){Ze(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var r=t.length,i=YE(r),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),c="reflect"===a?0:1;this.userCode=1!==r?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(r,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(l,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),aP=Qe((function e(t,n,a){Ze(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var r=t.length,i=YE(r),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),l=cF("rc",r),c=cF("source",r),u="".concat(l[r-1]," < ").concat(this.outputShape[r-1]),h=1===r?"source":"vec2(".concat(c.slice(-2).join(),")"),d="reflect"===a?0:1,f="";if(1===r){var p="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");f="\n        ".concat(i," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        ").concat(l[r-1]," += 1;\n        if(").concat(u,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        }\n      ")}else{var g="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      ");f="\n        ".concat(i," rc = outputLoc;\n        ").concat(g,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        ").concat(l[r-1]," += 1;\n        if(").concat(u,") {\n          ").concat(g,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        }\n        rc = outputLoc;\n        ").concat(l[r-2]," += 1;\n        if(").concat(l[r-2]," < ").concat(this.outputShape[r-2],") {\n          ").concat(g,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n          ").concat(l[r-1]," += 1;\n          if(").concat(u,") {\n            ").concat(g,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")})),rP={kernelName:Pa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.paddings,o=a.mode,s=Xt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new aP(r.shape,i,o):new nP(r.shape,i,o);return n.runWebGLProgram(s,[r],r.dtype)}},iP=KF({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),oP={kernelName:_a,backendName:"webgl",kernelFunc:iP},sP=Qe((function e(t,n,a){Ze(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,a],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),lP=KF({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),cP={kernelName:Xn,backendName:"webgl",kernelFunc:lP},uP="return a - b;",hP=KF({opSnippet:uP,packedOpSnippet:uP,supportsComplex:!0,cpuKernelImpl:aF}),dP={kernelName:_r,backendName:"webgl",kernelFunc:hP};function fP(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.logits,i=xt([a.dim],r.shape),o=HO({inputs:{x:r},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),s=Zc(o.shape,i),l=rD({inputs:{x:o},backend:n,attrs:{shape:s}}),c=hP({inputs:{a:r,b:l},backend:n}),u=LM({inputs:{x:c},backend:n}),h=dD({inputs:{x:u},backend:n,attrs:{axis:i,keepDims:!1}}),d=rD({inputs:{x:h},backend:n,attrs:{shape:s}}),f=lP({inputs:{a:u,b:d},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),f}var pP={kernelName:Ir,backendName:"webgl",kernelFunc:fP};var gP={kernelName:za,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.logits,i=a.numSamples,o=a.seed,s=a.normalized,l=s?r:fP({inputs:{logits:r},backend:n,attrs:{dim:r.shape.length-1}}),c=l.shape[0],u=l.shape[1],h=new sP(c,u,i),d=[[o]],f=n.runWebGLProgram(h,[l],"int32",d);return s||n.disposeIntermediateTensorInfo(l),f}};var vP={kernelName:Wa,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,a=e.backend,r=n.x;if(a.shouldExecuteOnCPU([r])){var i=a.texData.get(r.dataId),o=u(WR(i.values,r.shape,r.dtype),2),s=o[0],l=o[1];return a.makeTensorInfo(l,r.dtype,s)}return t=Xt().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new RF(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new vF(r.shape,"if (isnan(x)) return x;\n  return -x;\n"),a.runWebGLProgram(t,[r],r.dtype)}},mP=xh;var xP={kernelName:Va,backendName:"webgl",kernelFunc:function(e){Jr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,a=e.attrs,r=t.boxes,i=t.scores,o=a.maxOutputSize,s=a.iouThreshold,l=a.scoreThreshold,c=n.readSync(r.dataId),u=n.readSync(i.dataId),h=mP(c,u,o,s,l).selectedIndices;return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},bP=bh;var yP={kernelName:Ua,backendName:"webgl",kernelFunc:function(e){Jr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,a=e.attrs,r=t.boxes,i=t.scores,o=a.maxOutputSize,s=a.iouThreshold,l=a.scoreThreshold,c=a.padToMaxOutputSize,u=n.readSync(r.dataId),h=n.readSync(i.dataId),d=bP(u,h,o,s,l,c),f=d.selectedIndices,p=d.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},kP=yh;var wP={kernelName:Xa,backendName:"webgl",kernelFunc:function(e){Jr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,a=e.attrs,r=t.boxes,i=t.scores,o=a.maxOutputSize,s=a.iouThreshold,l=a.scoreThreshold,c=a.softNmsSigma,u=n.readSync(r.dataId),h=n.readSync(i.dataId),d=kP(u,h,o,s,l,c),f=d.selectedIndices,p=d.selectedScores;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},SP=Qe((function e(t,n,a,r){Ze(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(r,"), float(").concat(a,"),\n                      float(index == coords.y)));\n      }\n    ")})),CP={kernelName:Ya,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.indices,i=a.depth,o=a.onValue,s=a.offValue,l=ht(r.shape),c=new SP(l,i,o,s),u=rD({inputs:{x:r},backend:n,attrs:{shape:[l]}}),h=n.runWebGLProgram(c,[u],r.dtype);n.disposeIntermediateTensorInfo(u);var d=rD({inputs:{x:h},backend:n,attrs:{shape:[].concat(Ke(r.shape),[i])}});return n.disposeIntermediateTensorInfo(h),d}};function IP(e){var t=e.inputs,n=e.backend,a=t.x;if("complex64"===a.dtype){var r=mL({inputs:{input:a},backend:n}),i=IP({inputs:{x:r},backend:n}),o=DL({inputs:{input:a},backend:n}),s=IP({inputs:{x:o},backend:n}),l=WF({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}return XM({attrs:{shape:a.shape,dtype:a.dtype,value:"string"===a.dtype?"":0},backend:n})}var AP={kernelName:jr,backendName:"webgl",kernelFunc:IP};var TP={kernelName:Ga,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,a=t.backend,r=n.x;if("string"===r.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===r.dtype){var i=mL({inputs:{input:r},backend:a}),o=e({inputs:{x:i},backend:a}),s=DL({inputs:{input:r},backend:a}),l=IP({inputs:{x:s},backend:a}),c=WF({inputs:{real:o,imag:l},backend:a});return a.disposeIntermediateTensorInfo(i),a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(s),a.disposeIntermediateTensorInfo(l),c}return XM({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:a})}};var NP={kernelName:ja,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs.axis;if(1===t.length)return OM({inputs:{input:t[0]},backend:n,attrs:{dim:a}});var r=t[0].shape,i=t[0].dtype;t.forEach((function(e){lt(r,e.shape,"All tensors passed to stack must have matching shapes"),st(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=OL({inputs:t.map((function(e){var t=OM({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t})),backend:n,attrs:{axis:a}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},EP=Qe((function e(t,n,a){Ze(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var r=t.length,i=YE(r),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(l,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),RP=Qe((function e(t,n,a){Ze(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var r=t.length,i=YE(r),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),l=cF("rc",r),c=cF("source",r),u="".concat(l[r-1]," < ").concat(this.outputShape[r-1]),h=1===r?"source":"vec2(".concat(c.slice(-2).join(),")"),d=["".concat(i," rc = outputLoc;"),"".concat(l[r-1]," += 1;\n       if(").concat(u,") {\n      "),1===r?"":"}\n       rc = outputLoc;\n       ".concat(l[r-2]," += 1;\n       if(").concat(l[r-2]," < ").concat(this.outputShape[r-2],") {"),1===r?"":"  ".concat(l[r-1]," += 1;\n         if(").concat(u,") {")],f=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",g=0,v=1===r?2:4;g<v;g++)p+="\n        ".concat(d[g],"\n        if (").concat(f,") {\n          result[").concat(g,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(g,"] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        }\n      ");p+=1===r?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),FP=function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.paddings,o=a.constantValue;if(0===ht(r.shape)){var s=i.map((function(e,t){return e[0]+r.shape[t]+e[1]}));return XM({backend:n,attrs:{shape:s,value:o,dtype:r.dtype}})}var l=Xt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new RP(r.shape,i,o):new EP(r.shape,i,o),c=[[o]];return n.runWebGLProgram(l,[r],r.dtype,c)},DP={kernelName:qa,backendName:"webgl",kernelFunc:FP},LP=KF({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),MP={kernelName:Ka,backendName:"webgl",kernelFunc:LP};var OP={kernelName:$a,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.axis,s=r.keepDims,l=i.shape.length,c=[],h=xt(o,i.shape),d=h,f=Qc(d,l),p=i;if(null!=f&&(p=pD({inputs:{x:i},backend:a,attrs:{perm:f}}),d=eu(d.length,l),c.push(p)),$c("prod",d,l),a.shouldExecuteOnCPU([p])){var g=a.texData.get(p.dataId).values,v=VR(p.shape,p.dtype,g,d),m=v.outVals,x=v.outShape,b=v.outDtype;t=a.makeTensorInfo(x,b,m)}else{var y=u(Kc(p.shape,d),2),k=y[0],w=ht(y[1]),S=rD({inputs:{x:p},backend:a,attrs:{shape:[-1,w]}}),C=lD(S,oo(i.dtype),"prod",a);t=rD({inputs:{x:C},backend:a,attrs:{shape:k}}),c.push(S),c.push(C)}if(s){c.push(t);var I=Zc(t.shape,h);t=rD({inputs:{x:t},backend:a,attrs:{shape:I}})}return c.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),t}},PP=function(e){var t=e.backend,n=e.attrs,a=n.start,r=n.stop,i=n.step,o=n.dtype,s=UR(a,r,i,o);return t.makeTensorInfo([s.length],o,s)},_P={kernelName:Qa,backendName:"webgl",kernelFunc:PP},zP=qF({opSnippet:"return 1.0 / x;"}),BP={kernelName:er,backendName:"webgl",kernelFunc:zP},WP=qF({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),HP={kernelName:tr,backendName:"webgl",kernelFunc:WP},VP=qF({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),UP={kernelName:sr,backendName:"webgl",kernelFunc:VP},XP=Qe((function e(t,n,a,r,i){Ze(this,e),this.variableNames=["A"],this.outputShape=[];var o=u(t,4),s=o[0],l=o[1],c=o[2],h=o[3];this.outputShape=[s,n,a,h];var d,f=[r&&n>1?l-1:l,r&&a>1?c-1:c],p=[r&&n>1?n-1:n,r&&a>1?a-1:a];d=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(l,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),GP=Qe((function e(t,n,a,r,i){Ze(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=u(t,4),s=o[0],l=o[1],c=o[2],h=o[3];this.outputShape=[s,n,a,h];var d,f=[r&&n>1?l-1:l,r&&a>1?c-1:c],p=[r&&n>1?n-1:n,r&&a>1?a-1:a];d=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],",\n          ").concat(f[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(l,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(h-1,";\n        bool hasNextRow = coords.z < ").concat(a-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var YP={kernelName:ir,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.images,i=a.alignCorners,o=a.halfPixelCenters,s=u(a.size,2),l=s[0],c=s[1],h=Xt().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new GP(r.shape,l,c,i,o):new XP(r.shape,l,c,i,o);return n.runWebGLProgram(h,[r],"float32")}},jP=Qe((function e(t,n,a){Ze(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var r=u(n,3),i=r[1],o=r[2],s=u(t,3),l=s[1],c=s[2],h=[a&&l>1?i-1:i,a&&c>1?o-1:o],d=[a&&l>1?l-1:l,a&&c>1?c-1:c],f=h[0]/d[0],p=h[1]/d[1],g=1/f,v=1/p,m=2*Math.ceil(g)+2,x=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(g,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(x,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(l,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var qP={kernelName:or,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.images,i=t.dy,o=a.alignCorners,s=new jP(i.shape,r.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},KP=Qe((function e(t,n,a,r,i){Ze(this,e),this.variableNames=["A"],this.outputShape=[];var o=u(t,4),s=o[0],l=o[1],c=o[2],h=o[3];this.outputShape=[s,n,a,h];var d,f=[r&&n>1?l-1:l,r&&a>1?c-1:c],p=[r&&n>1?n-1:n,r&&a>1?a-1:a],g=r?"0.5":"0.0";d=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(l,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(g,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),ZP=Qe((function e(t,n,a,r,i){Ze(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=u(t,4),s=o[0],l=o[1],c=o[2],h=o[3];this.outputShape=[s,n,a,h];var d,f=[r&&n>1?l-1:l,r&&a>1?c-1:c],p=[r&&n>1?n-1:n,r&&a>1?a-1:a],g=r?"0.5":"0.0";d=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],",\n          ").concat(f[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(l,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(g,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(h-1,";\n        bool hasNextRow = coords.z < ").concat(a-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var $P={kernelName:ar,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.images,i=a.alignCorners,o=a.halfPixelCenters,s=u(a.size,2),l=s[0],c=s[1],h=Xt().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ZP(r.shape,l,c,i,o):new KP(r.shape,l,c,i,o);return n.runWebGLProgram(h,[r],r.dtype)}},QP=Qe((function e(t,n,a){Ze(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var r=u(n,3),i=r[1],o=r[2],s=u(t,3),l=s[1],c=s[2],h=[a&&l>1?i-1:i,a&&c>1?o-1:o],d=[a&&l>1?l-1:l,a&&c>1?c-1:c],f=h[0]/d[0],p=h[1]/d[1],g=1/f,v=1/p,m=2*Math.ceil(g)+2,x=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(g,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(x,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(l,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(h[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(h[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(a," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(a," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var JP={kernelName:rr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.images,i=t.dy,o=a.alignCorners,s=new QP(i.shape,r.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},e_=Qe((function e(t,n){Ze(this,e),this.variableNames=["x"];var a=t.length;if(a>4)throw new Error("WebGL backend: Reverse of rank-".concat(a," tensor is not yet supported"));if(this.outputShape=t,1!==a){var r=t.map((function(e,a){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(a)})).join(","),i=YE(a);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(r,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),t_=Qe((function e(t,n){Ze(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var a=t.length;if(a>4)throw new Error("WebGL backend: Reverse of rank-".concat(a," tensor is not yet supported"));this.outputShape=t;var r=cF("rc",a),i="".concat(r[a-1]," + 1 < ").concat(this.outputShape[a-1]),o="".concat(r[a-2]," + 1 < ").concat(this.outputShape[a-2]),s=YE(a);function l(e){var a=t.map((function(a,r){return function(e,a){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(a[e]," - 1"):"".concat(a[e])}(r,e)})),r=a.join(","),i=a.slice(-2).join(",");return"getChannel(getX(".concat(r,"), vec2(").concat(i,"))")}this.userCode=1===a?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return l(e)}(r.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[a-1]="("+e[a-1]+" + 1)",l(e)}(r.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[a-2]="("+e[a-2]+" + 1)",l(e)}(r.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[a-1]="("+e[a-1]+" + 1)",e[a-2]="("+e[a-2]+" + 1)",l(e)}(r.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var n_={kernelName:lr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.dims,o=r.shape.length,s=xt(i,r.shape);if(0===o)return zF({inputs:{x:r},backend:n});var l=Xt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new t_(r.shape,s):new e_(r.shape,s);return n.runWebGLProgram(l,[r],r.dtype)}},a_=Qe((function e(t,n){Ze(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var a=t[1],r=t[2];this.outputShape=t;var i="";i="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(r," && coordY >= 0 && coordY < ").concat(a,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),r_={kernelName:Kr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,r=t.image,i=n.radians,o=n.fillValue,s=n.center,l=a,c=new a_(r.shape,o),h=u(bd(s,r.shape[1],r.shape[2]),2),d=[[h[0],h[1],Math.sin(i),Math.cos(i)]];return l.runWebGLProgram(c,[r],r.dtype,d)}},i_=qF({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),o_={kernelName:cr,backendName:"webgl",kernelFunc:i_},s_=qF({opSnippet:"return inversesqrt(x);",cpuKernelImpl:XR}),l_={kernelName:ur,backendName:"webgl",kernelFunc:s_},c_=Qe((function e(t,n,a,r,i,o){Ze(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=YE(i.length),l=YE(o.length),c="";1===a?c="i":2===a&&(c="i, j");var u="getIndices(".concat(c,")"),h="";1===r?h="i":2===r&&(h="i, coords[1]");var d="getUpdates(".concat(h,")"),f=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(u,");\n              flattenedIndex += index * ").concat(f,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(d,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var u_={kernelName:hr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.indices,i=t.updates,o=a.shape,s=Ad(0,r,o),l=s.sliceRank,c=s.numUpdates,u=s.sliceSize,h=s.strides,d=s.outputSize,f=[d/u,u];if(0===d)return n.makeTensorInfo(o,r.dtype);var p=rD({inputs:{x:r},backend:n,attrs:{shape:[c,l]}}),g=rD({inputs:{x:i},backend:n,attrs:{shape:[c,u]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0])),m=new c_(c,l,p.shape.length,g.shape.length,h,f),x=n.runWebGLProgram(m,[g,p,v],g.dtype),b=rD({inputs:{x:x},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v),b}},h_=Qe((function e(t,n,a,r){Ze(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,a];var i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),o=2===Xt().getNumber("WEBGL_VERSION")?"while (left < right) {":i,s="left"===r?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var d_={kernelName:dr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.sortedSequence,i=t.values,o=a.side,s=new h_(r.shape[0],r.shape[1],i.shape[1],o),l=[[r.shape[1]]];return n.runWebGLProgram(s,[r,i],"int32",l)}},f_=Qe((function e(t,n,a){var r,i;if(Ze(this,e),this.variableNames=["c","a","b"],this.outputShape=n,a>4)throw Error("Where for rank ".concat(a," is not yet supported"));if(1===a)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],l=[],c=0;c<n.length;c++)l.push("".concat(o[c])),c<t&&s.push("".concat(o[c]));r=s.join(),i=l.join()}var u=YE(a);this.userCode="\n      void main() {\n        ".concat(u," resRC = getOutputCoords();\n        float cVal = getC(").concat(r,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var p_={kernelName:fr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.condition,r=t.t,i=t.e,o=new f_(a.shape.length,r.shape,r.shape.length);return n.runWebGLProgram(o,[a,r,i],io(r.dtype,i.dtype))}},g_=qF({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(Td,";\n  float scale = ").concat(Nd,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),v_={kernelName:pr,backendName:"webgl",kernelFunc:g_},m_=qF({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:YR}),x_={kernelName:br,backendName:"webgl",kernelFunc:m_},b_=qF({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),y_={kernelName:xr,backendName:"webgl",kernelFunc:b_},k_=qF({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),w_={kernelName:vr,backendName:"webgl",kernelFunc:k_},S_=qF({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),C_={kernelName:mr,backendName:"webgl",kernelFunc:S_},I_=qF({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),A_={kernelName:yr,backendName:"webgl",kernelFunc:I_},T_={kernelName:Sr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.blockShape,o=a.paddings;st(r.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),l=[[0,0]];l.push.apply(l,Ke(o));for(var c=1+i.length;c<r.shape.length;++c)l.push([0,0]);var u=[],h=FP({inputs:{x:r},backend:n,attrs:{paddings:l,constantValue:0}}),d=yd(h.shape,i,s,!1),f=kd(d.length,i.length,!1),p=wd(h.shape,i,s,!1),g=rD({inputs:{x:h},backend:n,attrs:{shape:d}}),v=pD({inputs:{x:g},backend:n,attrs:{perm:f}}),m=rD({inputs:{x:v},backend:n,attrs:{shape:p}});return u.push(h),u.push(g),u.push(v),u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}};var N_={kernelName:Ar,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.indices,r=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==a.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(a.shape));if(1!==r.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(r.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(a.dataId),l=n.readSync(r.dataId),c=n.readSync(i.dataId),h=n.readSync(o.dataId)[0],d=u(KR(s,a.shape,a.dtype,l,r.dtype,c,h),5),f=d[0],p=d[1],g=d[2],v=d[3],m=d[4];return[n.makeTensorInfo(p,a.dtype,f),n.makeTensorInfo([p[0]],r.dtype,g),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([m.length],a.dtype,new Int32Array(m))]}};var E_={kernelName:Tr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.inputIndices,r=t.inputShape,i=t.newShape;if(2!==a.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(a.shape));if(1!==r.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(r.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(r.dataId)),s=n.readSync(a.dataId),l=Array.from(n.readSync(i.dataId)),c=u(ZR(s,a.shape,a.dtype,o,l),3),h=c[0],d=c[1],f=c[2];return[n.makeTensorInfo(d,a.dtype,h),n.makeTensorInfo([f.length],i.dtype,new Int32Array(f))]}};var R_={kernelName:Nr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.data,r=t.indices,i=t.segmentIds;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(r.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(r.dataId),l=n.readSync(i.dataId),c=u($R(o,a.shape,a.dtype,s,l,!0),2),h=c[0],d=c[1];return n.makeTensorInfo(d,a.dtype,h)}};var F_={kernelName:Er,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.data,r=t.indices,i=t.segmentIds;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(r.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(r.dataId),l=n.readSync(i.dataId),c=u($R(o,a.shape,a.dtype,s,l),2),h=c[0],d=c[1];return n.makeTensorInfo(d,a.dtype,h)}};var D_={kernelName:Rr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=a.outputShape,l=Ad(0,r,s),c=l.sliceRank,u=l.numUpdates,h=l.sliceSize,d=l.strides,f=l.outputSize;if("string"===i.dtype){var p=n.bufferSync(r),g=n.bufferSync(i),v=Ei(n.readSync(o.dataId)[0]),m=GR(p,g,s,f,h,u,c,d,v,false);return n.makeTensorInfo(s,m.dtype,m.values)}var x=new c_(u,c,r.shape.length,i.shape.length,d,[f,1],false),b=n.runWebGLProgram(x,[i,r,o],i.dtype),y=rD({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),y}};var L_={kernelName:Cr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.numOrSizeSplits,o=xt(a.axis,r.shape)[0],s=jd(r,i,o),l=r.shape.length,c=new Array(l).fill(0),u=r.shape.slice();return s.map((function(e){var t=Ke(u);t[o]=e;var a=uL({inputs:{x:r},backend:n,attrs:{begin:c,size:t}});return c[o]+=e,a}))}},M_="return sqrt(x);",O_=qF({opSnippet:M_,packedOpSnippet:M_,cpuKernelImpl:QR}),P_={kernelName:kr,backendName:"webgl",kernelFunc:O_},__={kernelName:Dr,backendName:"webgl",kernelFunc:qF({opSnippet:"return x * x;"})},z_="return (a - b) * (a - b);",B_=KF({opSnippet:z_,packedOpSnippet:z_}),W_={kernelName:Fr,backendName:"webgl",kernelFunc:B_};var H_={kernelName:qr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,r=t.x,i=mF+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new vF(r.shape,i);return a.runWebGLProgram(o,[r],r.dtype)}},V_=Qe((function e(t,n,a){Ze(this,e),this.variableNames=["x"],this.outputShape=a;var r=a.length,i=YE(a.length),o=YE(a.length),s="";if(1===r)s="coords * strides + begin";else{var l=0;s=a.map((function(e,t){return l++,1===a.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(l-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var U_={kernelName:Lr,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.begin,s=r.end,l=r.strides,c=r.beginMask,u=r.endMask,h=r.ellipsisMask,d=r.newAxisMask,f=r.shrinkAxisMask,p=xl(i.shape,o,s,l,c,u,h,d,f),g=p.finalShapeSparse,v=p.finalShape,m=p.isIdentity,x=p.sliceDim0,b=p.isSimpleSlice,y=p.begin,k=p.end,w=p.strides;if(m)t=rD({inputs:{x:i},backend:a,attrs:{shape:v}});else if(x||b){st(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var S=pl(y,k,w),C=uL({inputs:{x:i},backend:a,attrs:{begin:y,size:S}});t=rD({inputs:{x:C},backend:a,attrs:{shape:v}}),a.disposeIntermediateTensorInfo(C)}else{if(a.shouldExecuteOnCPU([i])){var I=a.readSync(i.dataId),A=_s(i.shape,i.dtype,I),T=JR(g,A,w,y);t=a.makeTensorInfo(v,i.dtype,T.values)}else{var N=new V_(y,w,g);t=a.runWebGLProgram(N,[i],i.dtype)}}var E=rD({inputs:{x:t},backend:a,attrs:{shape:v}});return a.disposeIntermediateTensorInfo(t),E}};var X_={kernelName:Mr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=a.separator,i=a.nGramWidths,o=a.leftPad,s=a.rightPad,l=a.padWidth,c=a.preserveShortSequences,h=t.data,d=t.dataSplits,f=n.readSync(h.dataId),p=n.readSync(d.dataId),g=u(eF(f,p,r,i,o,s,l,c),2),v=g[0],m=g[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(d.shape,"int32",m)]}};var G_={kernelName:Or,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs.skipEmpty,r=t.input,i=t.delimiter;if("string"!==r.dtype)throw new Error("Input must be of datatype string");if(1!==r.shape.length)throw new Error("Input must be a vector, got shape: ".concat(r.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(i.dataId)[0],l=u(tF(o,s,a),3),c=l[0],h=l[1],d=l[2],f=h.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",h),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};var Y_={kernelName:Pr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs.numBuckets,r=t.input;if("string"!==r.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(r.dataId),o=nF(i,a);return n.makeTensorInfo(r.shape,"int32",o)}},j_=qF({opSnippet:"return tan(x);"}),q_={kernelName:zr,backendName:"webgl",kernelFunc:j_},K_=qF({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),Z_={kernelName:Br,backendName:"webgl",kernelFunc:K_},$_=Qe((function e(t,n){Ze(this,e),this.variableNames=["A"];for(var a=new Array(t.length),r=0;r<a.length;r++)a[r]=t[r]*n[r];this.outputShape=a,this.rank=a.length;var i=YE(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],a=[],r=0;r<e.length;r++)a.push("imod(".concat(n[r],", ").concat(e[r],")"));return a.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function Q_(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.reps;if("string"===r.dtype||r.shape.length>5){var o=n.readSync(r.dataId),s="string"===r.dtype?o.map((function(e){return Ei(e)})):o,l=_s(r.shape,r.dtype,s),c=rF(l,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var u=new $_(r.shape,i);return n.runWebGLProgram(u,[r],r.dtype)}var J_={kernelName:Wr,backendName:"webgl",kernelFunc:Q_},ez=Qe((function e(t){Ze(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),tz=Qe((function e(t){Ze(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function nz(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function az(e){for(var t=1;t<e;)t*=2;return t}var rz={kernelName:Hr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.k,o=a.sorted,s=Xt().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Xt().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=r.shape,h=c[c.length-1];if(n.shouldExecuteOnCPU([r])||h<s||i>l){var d=n.readSync(r.dataId),f=u(iF(d,c,r.dtype,i,o),2),p=f[0],g=f[1];return[n.makeTensorInfo(p.shape,p.dtype,p.values),n.makeTensorInfo(g.shape,g.dtype,g.values)]}if(0===i)return c[c.length-1]=0,[n.makeTensorInfo(c,r.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===h)return[r,XM({attrs:{shape:c,dtype:"int32",value:0},backend:n})];var v=n.texData.get(r.dataId),m=null!==v&&v.isPacked,x=m?n.unpackTensor(r):r,b=ht(c)/h,y=rD({inputs:{x:x},attrs:{shape:[b,h]},backend:n});m&&nz(n,x);for(var k=az(i),w=az(h),S=null,C=function(){return null===S?[y,y]:[y,S]},I=function(e,t,a){var r=C(),i=new ez(a),o=[[h],[null===S?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=S;S=n.runWebGLProgram(i,r,"int32",o),nz(n,s)},A=1;A<k;A*=2)for(var T=2*A,N=A;N>=1;N/=2)I(T,N,[b,w]);for(var E=w;E>k;E/=2){var R=C(),F=new tz([b,E/2]),D=[[h],[null===S?1:0],[k]],L=S;S=n.runWebGLProgram(F,R,"int32",D),nz(n,L);for(var M=k/2,O=2*M,P=M;P>=1;P/=2)I(O,P,S.shape)}var _=S;S=uL({inputs:{x:S},backend:n,attrs:{begin:0,size:[b,i]}}),nz(n,_);var z=lO({inputs:{x:y,indices:S},backend:n,attrs:{axis:1,batchDims:1}});nz(n,y);var B=c.slice(0,-1);B.push(i),_=S,S=rD({inputs:{x:S},attrs:{shape:B},backend:n}),nz(n,_);var W=z;return z=rD({inputs:{x:z},attrs:{shape:B},backend:n}),nz(n,W),[z,S]}},iz=Qe((function e(t,n,a,r,i,o){Ze(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,l="nearest"===a?1:2;switch(r){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(l," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var oz={kernelName:Vr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.image,i=t.transforms,o=a.interpolation,s=a.fillMode,l=a.fillValue,c=a.outputShape,h=u(r.shape,4),d=h[0],f=h[1],p=h[2],g=h[3],v=u(null!=c?c:[f,p],2),m=v[0],x=v[1],b=new iz(f,p,o,s,l,[d,m,x,g]);return n.runWebGLProgram(b,[r,i],"float32")}};var sz={kernelName:Xr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,r=n.axis,i=t.x;bE(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=a.readSync(i.dataId),s=sF(o,r,i.shape,i.dtype),l=s.outputValues,c=s.outputShape,u=s.indices;return[a.makeTensorInfo(c,i.dtype,l),a.makeTensorInfo([u.length],"int32",u)]}};var lz={kernelName:Gr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.value,i=a.axis;i<0&&(i+=r.shape.length);for(var o=r,s=o.shape.length,l=r.shape[i],c=new Array(s-1),u=0,h=0;h<s;h++)h!==i&&(c[u++]=o.shape[h]);var d=[],f=new Array(s).fill(0),p=o.shape.slice();p[i]=1;for(var g=new Array(l),v=0;v<g.length;v++){f[i]=v;var m=uL({inputs:{x:o},backend:n,attrs:{begin:f,size:p}}),x=rD({inputs:{x:m},backend:n,attrs:{shape:c}});g[v]=x,d.push(m)}return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},cz=Qe((function e(t,n){Ze(this,e),this.variableNames=["x","segmentIds"];var a=t.windowSize,r=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/a);this.outputShape=[r,s];var l=4*Math.floor(a/4),c=a%4,u="\n        sumValue += dot(values, segFilter);\n    ",h="";i%a>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var d="";i%a>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(a,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(u,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(u,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(u,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(u,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var uz={kernelName:Yr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.segmentIds,o=a.numSegments,s=r.shape.length,l=[],c=0,u=Qc([c],s),h=r;null!=u&&(h=pD({inputs:{x:r},backend:n,attrs:{perm:u}}),l.push(h),c=eu(1,s)[0]);var d=function(e,t,n){for(var a=[],r=e.length,i=0;i<r;i++)i!==t?a.push(e[i]):a.push(n);return a}(h.shape,c,o),f=ht([h.shape[c]]),p=rD({inputs:{x:h},backend:n,attrs:{shape:[-1,f]}});l.push(p);var g=function e(t,a,r,i,o){var s=t.shape[0],c=t.shape[1],u=function(e,t){var n,a=!1;for(e<=30?(n=e,a=!0):n=Et(e,Math.floor(Math.sqrt(e)));!a;)n>t||n===e?a=!0:n=Et(e,n+1);return n}(c,o),h=new cz({windowSize:u,inSize:c,batchSize:s,numSegments:o},a),d=n.compileAndRun(h,[t,r],i);if(l.push(d),d.shape[1]===o)return d;var f=PP({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=Q_({inputs:{x:f},backend:n,attrs:{reps:[c/u]}});return l.push(f),l.push(p),e(d,a,p,i,o)}(p,"unsortedSegmentSum",i,oo(r.dtype),o),v=rD({inputs:{x:g},backend:n,attrs:{shape:d}}),m=v;if(null!=u){l.push(v);var x=Jc(u);m=pD({inputs:{x:m},backend:n,attrs:{perm:x}})}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},hz=0,dz=[mD,bD,kD,SD,AD,ED,RD,FD,_D,zD,WD,VD,XD,YD,qD,$D,QD,tL,nL,aL,oL,dL,fL,pL,bL,wL,IL,HF,NL,PL,VL,jL,qL,KL,ZL,QL,eM,nM,rM,cM,uM,hM,fM,vM,bM,yM,wM,CM,IM,TM,NM,RM,DM,MM,PM,BM,VM,YM,qM,$M,JM,nO,aO,rO,oO,cO,hO,fO,BF,pO,LL,vO,xO,yO,XF,wO,CO,IO,TO,EO,FO,LO,OO,zO,WO,VO,XO,GO,YO,KO,ZO,$O,QO,JO,tP,rP,oP,gP,aD,vP,xP,yP,wP,vL,CP,TP,NP,DP,MP,jF,OP,_P,xL,cP,BP,HP,UP,iD,YP,qP,$P,JP,n_,r_,o_,l_,u_,d_,p_,v_,x_,y_,w_,C_,hL,pP,A_,T_,N_,E_,R_,F_,D_,L_,P_,__,W_,H_,U_,X_,G_,Y_,dP,fD,q_,Z_,J_,rz,oz,gD,sz,lz,uz,AP];hz<dz.length;hz++){ii(dz[hz])}var fz,pz,gz,vz,mz,xz,bz,yz,kz,wz,Sz,Cz=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pre",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pre",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return e.map((function(e){if(e.length>t&&("pre"===a?e.splice(0,e.length-t):e.splice(t,e.length-t)),e.length<t){for(var i=[],o=0;o<t-e.length;++o)i.push(r);e="pre"===n?i.concat(e):e.concat(i)}return e}))},Iz=Ue.div(fz||(fz=h(["\n  padding: 20px;\n  margin: 10px;\n  background-color:#f0f0f0;\n"]))),Az=function(e){var n=e.data,a={model:"https://storage.googleapis.com/tfjs-models/tfjs/sentiment_cnn_v1/model.json",metadata:"https://storage.googleapis.com/tfjs-models/tfjs/sentiment_cnn_v1/metadata.json"},r=u((0,t.useState)(),2),o=r[0],s=r[1],l=u((0,t.useState)(),2),c=l[0],h=l[1],d=u((0,t.useState)(""),2),p=(d[0],d[1],u((0,t.useState)(""),2)),g=(p[0],p[1]),v=u((0,t.useState)(""),2),m=(v[0],v[1]),x=u((0,t.useState)(""),2),b=(x[0],x[1]),y=u((0,t.useState)(""),2),k=(y[0],y[1]),w=u((0,t.useState)(""),2),S=(w[0],w[1]),C=u((0,t.useState)([""]),2),I=C[0],A=C[1];function T(){return T=i(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ub(t.model);case 3:n=e.sent,h(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),T.apply(this,arguments)}function N(){return N=i(f().mark((function e(t){var n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t.metadata);case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,s(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),N.apply(this,arguments)}var E=function(e){var t=e.trim().toLowerCase().replace(/(\.|\,|\!)/g,"").split(" ");m(t);var n=t.map((function(e){var t=o.word_index[e]+o.index_from;return t>o.vocabulary_size&&(t=2),t}));b(n);var a=Cz([n],o.max_len);k(a);var r=Mu(a,[1,o.max_len]);S(r);var i=c.predict(r),s=i.dataSync()[0];return i.dispose(),g(s),s},R=function(e){var t=e.replace(/\./g," .").split("."),n=0,a=0;for(var r in t){var i=t[r].trim().toLowerCase().replace(/(\.|\,|\!)/g,"").split(" ");m(i);var s=i.map((function(e){var t=o.word_index[e]+o.index_from;return t>o.vocabulary_size&&(t=2),t}));b(s);var l=Cz([s],o.max_len);k(l);var u=Mu(l,[1,o.max_len]);S(u);var h=c.predict(u),d=h.dataSync()[0];h.dispose(),g(d),n+=d,a++}return n/a};(0,t.useEffect)((function(){xo.ready().then((function(){!function(e){T.apply(this,arguments)}(a),function(e){N.apply(this,arguments)}(a)}))}),[]);var F=function(){var e=i(f().mark((function e(){var t,a,r,i,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t=[],n)i=n[r],o=i.split(" ").length,a=o<11?E(i):R(i),s={text:i,set:a},t.push(s);A(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Ge.jsxs)("div",{className:"container",children:[(0,Ge.jsx)("div",{className:"row",children:(0,Ge.jsx)("h1",{className:"text-center",children:"All Comments(experimental)"})}),(0,Ge.jsxs)("div",{className:"row",children:[(0,Ge.jsx)("button",{className:"btn",onClick:F,children:"Press Me"}),I.map((function(e){return(0,Ge.jsxs)(Iz,{className:"row",children:[(0,Ge.jsx)(Iz,{className:"col-lg-12",children:e.text}),(0,Ge.jsx)(Iz,{className:"col-lg-12",children:e.set})]})}))]})]})},Tz=Ue.div(pz||(pz=h(["\n\n\n"]))),Nz=[],Ez=Ue.div(gz||(gz=h(["\ntext-align: center;\nborder-radius: 10px;\nfont-size: 1.2rem;\nbackground-color:#f0f0f0;\n\n"]))),Rz=Ue.button(vz||(vz=h(["\nwidth: 100%;\nmargin:auto;\ncolor:white;\nborder:none;\nfont-size: 2rem;\n\n\n"]))),Fz=Ue.div(mz||(mz=h(["\ntext-align: justify;\njustify-content: space-between;\nbackground-color: white;\nmargin-bottom: 10px;\nborder-radius: 5px;\n\n"]))),Dz=Ue.div(xz||(xz=h(["\njustify-content: space-between;\nmargin-bottom: 10px;\nborder-radius: 5px;\nbackground-color: rgba(171, 184, 195, .3);\n"]))),Lz=Ue.div(bz||(bz=h(["\ntext-align: justify;\njustify-content: space-between;\nmargin-bottom: 10px;\nborder-radius: 5px;\n"]))),Mz={entries:[]},Oz={entries:[]},Pz={entries:[]},_z=function(e){var t=e.entry,n=(e.key,!1),a="col-lg-6";""!==t.Yorn1&&(Mz.entries.push(t.Yorn1),n=!0,a="col-lg-12"),""!==t.Yorn2&&(Oz.entries.push(t.Yorn2),n=!0,a="col-lg-12"),""!==t.Yorn3&&(Pz.entries.push(t.Yorn3),n=!0,a="col-lg-12"),console.log(Mz),console.log(Oz),console.log(Pz);var r=[];""!==t.question1&&(r.push(t.question1),Nz.push(t.question1)),""!==t.question2&&(r.push(t.question2),Nz.push(t.question2));var i,o=[],s=0,l=0;Object.keys(t).map((function(e){var n=t[e];return"number"==typeof n&&(s+=n,l++,o.push(e)),n}));var c=(s/l).toFixed(1);return i=c>=8?"rgba(67, 150, 57, .8)":"rgba(145, 47, 64, .8)",(0,Ge.jsx)("div",{className:"col-lg-4 my-5 col-md-6",children:(0,Ge.jsxs)(Ez,{className:"container",children:[(0,Ge.jsxs)("div",{className:"row",children:[(0,Ge.jsxs)("h2",{children:[t.Title," - ",t.id]}),(0,Ge.jsxs)("h3",{style:{backgroundColor:i,color:"white",borderRadius:"5px"},children:["Customer Experience Score - ",c]})]}),(0,Ge.jsxs)("div",{className:"row",children:[(0,Ge.jsxs)(Fz,{className:"col-lg-6 ",children:[(0,Ge.jsx)("h3",{style:{textDecoration:"underline 2px"},children:"Score Breakdown"}),o.map((function(e){return(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("span",{style:{fontWeight:"bold"},children:e}),": ",(0,Ge.jsx)("span",{style:{float:"right"},children:t[e]})]})}))]}),n&&(0,Ge.jsxs)(Dz,{className:"col-lg-6",children:[(0,Ge.jsx)("h3",{style:{textDecoration:"underline 2px"},children:"Text Questions"}),""!==t.Yorn1&&(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("span",{style:{fontWeight:"bold",textDecoration:"underline 1px"},children:"Is Solar Innovations\xae a brand that you trust?"})," - ",t.Yorn1]}),""!==t.Yorn2&&(0,Ge.jsxs)("p",{children:[(0,Ge.jsx)("span",{style:{fontWeight:"bold",textDecoration:"underline 1px"},children:"Would you buy a Solar Innovations\xae product again?"})," - ",t.Yorn2]}),""!==t.Yorn3&&(0,Ge.jsxs)("p",{children:[" ",(0,Ge.jsx)("span",{style:{fontWeight:"bold",textDecoration:"underline 1px"},children:"Would you recommend Solar Innovations\xae to others?"})," - ",t.Yorn3]})]})]}),r.length>0&&(0,Ge.jsxs)(Lz,{className:a,children:[(0,Ge.jsx)("h3",{style:{textDecoration:"underline 2px",textAlign:"center"},children:"Comments"}),r.map((function(e){return(0,Ge.jsx)("span",{children:e})}))]})]})})},zz=function(e){var n=e.weeks,a=e.entries,r=u((0,t.useState)(!1),2),i=r[0],o=r[1],s=u((0,t.useState)(["#439639","#abb8c3"]),2),l=s[0],c=s[1],h=n.week4.entries.length,d=n.week4.entries.length+n.week3.entries.length+n.week2.entries.length+n.week1.entries.length,f=function(){c([l[1],l[0]])};return(0,Ge.jsxs)(Tz,{className:"container-fluid",children:[(0,Ge.jsx)("h1",{className:"text-center",children:"Warranty Form Submissions"}),(0,Ge.jsxs)("div",{className:"row my-3",children:[(0,Ge.jsx)("div",{className:"col-lg-6 p-0",children:(0,Ge.jsxs)(Rz,{style:{backgroundColor:"".concat(l[0])},onClick:function(){o(!1),f()},children:["Submissions This Week - ",h]})}),(0,Ge.jsx)("div",{className:"col-lg-6 p-0",children:(0,Ge.jsxs)(Rz,{style:{backgroundColor:"".concat(l[1])},onClick:function(){o(!0),f()},children:["Submissions This Month - ",d]})})]}),(0,Ge.jsx)("div",{className:"row",children:i?(0,Ge.jsx)(Ge.Fragment,{children:a.map((function(e,t){return(0,Ge.jsx)(_z,{entry:e,id:t})}))}):(0,Ge.jsxs)(Ge.Fragment,{children:[" ",n.week4.entries.map((function(e,t){return(0,Ge.jsx)(_z,{entry:e,id:t})}))]})}),(0,Ge.jsx)("div",{className:"row",children:(0,Ge.jsx)(Az,{data:Nz})})]})},Bz=n.p+"static/media/chartLogo.af6559c17760f8585448.png",Wz=n.p+"static/media/Voting.9546d84b1284cbef8cbb.png",Hz=n.p+"static/media/comments.e61135bb4ceb91e6e88c.png",Vz=function(e){var n=e.chartData,a=e.entries,r=e.weeks,i=u((0,t.useState)(!0),2),o=i[0],s=i[1],l=u((0,t.useState)(!0),2),c=l[0],d=l[1],f=u((0,t.useState)(!1),2),p=f[0],g=f[1],v=Ue.div(yz||(yz=h(["\nposition: fixed;\nz-index: 3;\nheight: 30%;\nwidth: 4vw;\nborder-radius: 0 20px  20px 0;\ncolor:white;\ntext-align: center;\npadding: 10px;\nbackground-color: rgba(171, 184, 195);\npointer-events:none;\nmargin-top: 19vh;\n"]))),m=Ue.div(kz||(kz=h(["\nposition: fixed;\nz-index: 2;\nheight: 75%;\nwidth: 5vw;\ncolor:white;\ntext-align: center;\npadding: 10px 10px 10px 0 px;\nmargin-top: 12.5vh;\nleft:0;\n\n\n"]))),x=Ue.img(wz||(wz=h(["\nmax-width:100%;\nbackground: transparent;\nwidth: 100%;\nmargin: 15px 0; \n"])));(0,t.useEffect)((function(){document.getElementById("fixed").addEventListener("mouseover",(function(e){e.preventDefault(),s(!0)})),document.getElementById("fixed").addEventListener("mouseleave",(function(e){e.preventDefault(),s(!1)}))}));return(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(m,{id:"fixed",children:o&&(0,Ge.jsxs)(v,{children:[(0,Ge.jsx)(x,{className:"navLogo",src:Bz,style:{pointerEvents:"auto"},onClick:function(e){e.stopPropagation(),d(!c)}}),(0,Ge.jsx)(x,{className:"navLogo",src:Wz,style:{pointerEvents:"auto"},onClick:function(e){e.stopPropagation(),g(!p)}}),(0,Ge.jsx)(x,{className:"navLogo",src:Hz,style:{pointerEvents:"auto"},onClick:function(e){e.stopPropagation(),console.log("test")}})]})}),(0,Ge.jsxs)("div",{className:"container-fluid",children:[c&&(0,Ge.jsx)("div",{className:"row",children:(0,Ge.jsx)(Ye,{data:n})}),p&&(0,Ge.jsx)("div",{className:"row",children:(0,Ge.jsx)(zz,{weeks:r,entries:a})})]})]})},Uz=n(9174),Xz=(Ue.div(Sz||(Sz=h(["\n      padding: 10px;\n      height: auto;\n      background-color: gray;\n      color: white;\n      border-radius: 10px;\n      margin: 25px;\n\n"]))),{convert:function(e){return e},compare:function(e,t){return isFinite(e=this.convert(e).valueOf())&&isFinite(t=this.convert(t).valueOf())?(e>t)-(e<t):NaN},inRange:function(e,t,n){return isFinite(e=this.convert(e).valueOf())&&isFinite(t=this.convert(t).valueOf())&&isFinite(n=this.convert(n).valueOf())?t<=e&&e<=n:NaN}});var Gz=function(){var e=u((0,t.useState)({}),2),n=e[0],a=e[1],r=u((0,t.useState)(!0),2),o=r[0],s=r[1],l=u((0,t.useState)([]),2),c=l[0],h=l[1],d=u((0,t.useState)(),2),p=d[0],g=d[1];return(0,t.useEffect)((function(){var e={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Basic ".concat(Uz.encode("".concat("ck_e86cfb8fed55e87904e573fb3eb77cf1f6aa0a76",":").concat("cs_573c74a16e5e00390d669f3f4e7973ad67a41583")))}},t=function(){var t=i(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://reporterjsexpress.herokuapp.com/",t.next=3,fetch("https://reporterjsexpress.herokuapp.com/",e).then((function(e){return e.json()})).then((function(e){h(e);var t=new Date,n=new Date,r=new Date,i=new Date,o=new Date,l=new Date(n.setDate(n.getDate()-29)),c=new Date(r.setDate(r.getDate()-22)),u=new Date(i.setDate(i.getDate()-15)),d=new Date(o.setDate(o.getDate()-8)),f={week1:{startDate:l,endDate:c,entries:[]},week2:{startDate:c,endDate:u,entries:[]},week3:{startDate:u,endDate:d,entries:[]},week4:{startDate:d,endDate:t,entries:[]}};Object.values(e).forEach((function(e){var n=new Date(e.date);Xz.inRange(n,f.week1.startDate,f.week2.startDate)?f.week1.entries.push(e):Xz.inRange(n,f.week2.startDate,f.week3.startDate)?f.week2.entries.push(e):Xz.inRange(n,f.week3.startDate,f.week4.startDate)?f.week3.entries.push(e):Xz.inRange(n,f.week4.startDate,t)&&f.week4.entries.push(e)})),g(f);try{var p=0,v=0,m=0,x=0,b=0,y=0,k=0,w=0,S=0,C=0;Object.keys(f).forEach((function(e){var t=f[e].entries,n=0,a=0,r=0,i=0,o=0,s=0,l=0,c=0,u=0,h=0,d=0,g=0,I=0,A=0,T=0,N=0,E=0,R=0;for(var F in t){var D=t[F];p++,"number"==typeof D.projectCost&&(n+=D.projectCost,v+=D.projectCost,h++),"number"==typeof D.conditionOfProduct&&(a+=D.conditionOfProduct,m+=D.conditionOfProduct,d++),"number"==typeof D.performance&&(r+=D.performance,x+=D.performance,g++),"number"==typeof D.leadTimes&&(i+=D.leadTimes,b+=D.leadTimes,I++),"number"==typeof D.response&&(o+=D.response,y+=D.response,A++),"number"==typeof D.completionDate&&(s+=D.completionDate,k+=D.completionDate,T++),"number"==typeof D.delivery&&(l+=D.delivery,w+=D.delivery,N++),"number"==typeof D.install&&(c+=D.install,S+=D.install,E++),"number"==typeof D.accountant&&(u+=D.accountant,C+=D.accountant,R++)}f[e].projectCost=Math.round(n/h*10)/10,f[e].conditionOfProduct=Math.round(a/d*10)/10,f[e].performance=Math.round(r/g*10)/10,f[e].leadTimes=Math.round(i/I*10)/10,f[e].response=Math.round(o/A*10)/10,f[e].completionDate=Math.round(s/T*10)/10,f[e].delivery=Math.round(l/N*10)/10,f[e].install=Math.round(c/E*10)/10,f[e].accountant=Math.round(u/R*10)/10}));var I={startDate:f.week1.startDate,endDate:f.week4.endDate,projectCost:Math.round(v/p*10)/10,conditionOfProduct:Math.round(m/p*10)/10,performance:Math.round(x/p*10)/10,leadTimes:Math.round(b/p*10)/10,response:Math.round(y/p*10)/10,completionDate:Math.round(k/p*10)/10,delivery:Math.round(w/p*10)/10,install:Math.round(S/p*10)/10,accountant:Math.round(C/p*10)/10};f.month=I,a(f),s(!1)}catch(A){}}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),o?(0,Ge.jsx)("div",{children:(0,Ge.jsx)("h1",{children:"Loading"})}):(p.week4.entries.length,p.week4.entries.length,p.week3.entries.length,p.week2.entries.length,p.week1.entries.length,p.week4.entries,(0,Ge.jsx)(Vz,{chartData:n,entries:c,weeks:p}))},Yz=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),i(e),o(e)}))};a.createRoot(document.getElementById("root")).render((0,Ge.jsx)(Gz,{})),Yz()}()}();
//# sourceMappingURL=main.492bd850.js.map